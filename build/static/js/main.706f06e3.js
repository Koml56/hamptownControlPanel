/*! For license information please see main.706f06e3.js.LICENSE.txt */
(()=>{var e={22:(e,t,n)=>{var s=n(635),r=n(581),i=n(336),a=s?s.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?r(e):i(e)}},49:(e,t)=>{"use strict";var n=Symbol.for("react.element"),s=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function x(){}function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=y.prototype;var b=v.prototype=new x;b.constructor=v,f(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,j=Object.prototype.hasOwnProperty,k={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,s){var r,i={},a=null,o=null;if(null!=t)for(r in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)j.call(t,r)&&!N.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(1===l)i.children=s;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===i[r]&&(i[r]=l[r]);return{$$typeof:n,type:e,key:a,ref:o,props:i,_owner:k.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var S=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function E(e,t,r,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case s:l=!0}}if(l)return a=a(l=e),e=""===i?"."+I(l,0):i,w(a)?(r="",null!=e&&(r=e.replace(S,"$&/")+"/"),E(a,t,r,"",(function(e){return e}))):null!=a&&(C(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,r+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(S,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",w(e))for(var c=0;c<e.length;c++){var d=i+I(o=e[c],c);l+=E(o,t,r,d,a)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=m&&e[m]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)l+=E(o=o.value,t,r,d=i+I(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function T(e,t,n){if(null==e)return e;var s=[],r=0;return E(e,s,"","",(function(e){return t.call(n,e,r++)})),s}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},P={transition:null},R={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:P,ReactCurrentOwner:k};function M(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:T,forEach:function(e,t,n){T(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return T(e,(function(){t++})),t},toArray:function(e){return T(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=r,t.Profiler=a,t.PureComponent=v,t.StrictMode=i,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=M,t.cloneElement=function(e,t,s){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=f({},e.props),i=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=k.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)j.call(t,c)&&!N.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=s;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:n,type:e.type,key:i,ref:a,props:r,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=M,t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,n){return A.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,n){return A.current.useReducer(e,t,n)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return A.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return A.current.useTransition()},t.version="18.3.1"},51:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var s=n(526);function r(e,t,n){return(t=(0,s.A)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},119:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(345)},170:(e,t,n)=>{"use strict";n.d(t,{cY:()=>x,FA:()=>A,g:()=>D,gz:()=>Q,vA:()=>r,Hk:()=>i,K3:()=>o,u:()=>u,KA:()=>c,Uj:()=>d,gR:()=>U,Fy:()=>w,A4:()=>h,bD:()=>B,dI:()=>K,T9:()=>y,yU:()=>g,Ku:()=>G,qc:()=>F,zJ:()=>v,Im:()=>q,zW:()=>E,jZ:()=>C,$g:()=>I,lV:()=>S,Cv:()=>O,$L:()=>R,kH:()=>W,gE:()=>b,Am:()=>V,yw:()=>z,OE:()=>$,kj:()=>Y,As:()=>M,P1:()=>N,eX:()=>T});const s={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},r=function(e,t){if(!e)throw i(t)},i=function(e){return new Error("Firebase Database ("+s.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},a=function(e){const t=[];let n=0;for(let s=0;s<e.length;s++){let r=e.charCodeAt(s);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296===(64512&r)&&s+1<e.length&&56320===(64512&e.charCodeAt(s+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++s)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<e.length;r+=3){const t=e[r],i=r+1<e.length,a=i?e[r+1]:0,o=r+2<e.length,l=o?e[r+2]:0,c=t>>2,d=(3&t)<<4|a>>4;let u=(15&a)<<2|l>>6,h=63&l;o||(h=64,i||(u=64)),s.push(n[c],n[d],n[u],n[h])}return s.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(a(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,s=0;for(;n<e.length;){const r=e[n++];if(r<128)t[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=e[n++];t[s++]=String.fromCharCode((31&r)<<6|63&i)}else if(r>239&&r<365){const i=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[s++]=String.fromCharCode(55296+(i>>10)),t[s++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[s++]=String.fromCharCode((15&r)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<e.length;){const t=n[e.charAt(r++)],i=r<e.length?n[e.charAt(r)]:0;++r;const a=r<e.length?n[e.charAt(r)]:64;++r;const o=r<e.length?n[e.charAt(r)]:64;if(++r,null==t||null==i||null==a||null==o)throw new l;const c=t<<2|i>>4;if(s.push(c),64!==a){const e=i<<4&240|a>>2;if(s.push(e),64!==o){const e=a<<6&192|o;s.push(e)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class l extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const c=function(e){const t=a(e);return o.encodeByteArray(t,!0)},d=function(e){return c(e).replace(/\./g,"")},u=function(e){try{return o.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function h(e){return m(void 0,e)}function m(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=m(e[n],t[n]));return e}const p=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,f=()=>{try{return p()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/hamptownControlPanel",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&u(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},g=e=>{const t=(e=>{var t,n;return null===(n=null===(t=f())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const s=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),s]:[t.substring(0,n),s]},y=()=>{var e;return null===(e=f())||void 0===e?void 0:e.config};class x{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function v(e){return e.endsWith(".cloudworkstations.dev")}async function b(e){return(await fetch(e,{credentials:"include"})).ok}function w(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",s=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[d(JSON.stringify({alg:"none",type:"JWT"})),d(JSON.stringify(i)),""].join(".")}const j={};let k=!1;function N(e,t){if("undefined"===typeof window||"undefined"===typeof document||!v(window.location.host)||j[e]===t||j[e]||k)return;function n(e){return"__firebase__banner__".concat(e)}j[e]=t;const s="__firebase__banner",r=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(j))j[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function i(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{k=!0,function(){const e=document.getElementById(s);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(s),t=n("text"),a=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),d=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=i();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(d,c),t.append(d,a,l,n),document.body.appendChild(t)}r?(a.innerText="Preview backend disconnected.",d.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(d.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function _(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function C(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_())}function S(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function I(){return!0===s.NODE_CLIENT||!0===s.NODE_ADMIN}function E(){try{return"object"===typeof indexedDB}catch(e){return!1}}function T(){return new Promise(((e,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}))}class D extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,D.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,A.prototype.create)}}class A{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),s=this.errors[e],r=s?function(e,t){return e.replace(P,((e,n)=>{const s=t[n];return null!=s?String(s):"<".concat(n,"?>")}))}(s,t):"Error",i="".concat(this.serviceName,": ").concat(r," (").concat(n,").");return new D(n,i,t)}}const P=/\{\$([^}]+)}/g;function R(e){return JSON.parse(e)}function M(e){return JSON.stringify(e)}const L=function(e){let t={},n={},s={},r="";try{const i=e.split(".");t=R(u(i[0])||""),n=R(u(i[1])||""),r=i[2],s=n.d||{},delete n.d}catch(i){}return{header:t,claims:n,data:s,signature:r}},O=function(e){const t=L(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")},F=function(e){const t=L(e).claims;return"object"===typeof t&&!0===t.admin};function U(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function z(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function q(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function W(e,t,n){const s={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=t.call(n,e[r],r,e));return s}function B(e,t){if(e===t)return!0;const n=Object.keys(e),s=Object.keys(t);for(const r of n){if(!s.includes(r))return!1;const n=e[r],i=t[r];if(H(n)&&H(i)){if(!B(n,i))return!1}else if(n!==i)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function H(e){return null!==e&&"object"===typeof e}function V(e){const t=[];for(const[n,s]of Object.entries(e))Array.isArray(s)?s.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}class Q{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let d=0;d<16;d++)n[d]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let d=0;d<16;d++)n[d]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let d=16;d<80;d++){const e=n[d-3]^n[d-8]^n[d-14]^n[d-16];n[d]=4294967295&(e<<1|e>>>31)}let s,r,i=this.chain_[0],a=this.chain_[1],o=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let d=0;d<80;d++){d<40?d<20?(s=l^a&(o^l),r=1518500249):(s=a^o^l,r=1859775393):d<60?(s=a&o|l&(a|o),r=2400959708):(s=a^o^l,r=3395469782);const e=(i<<5|i>>>27)+s+c+r+n[d]&4294967295;c=l,l=o,o=4294967295&(a<<30|a>>>2),a=i,i=e}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let s=0;const r=this.buf_;let i=this.inbuf_;for(;s<t;){if(0===i)for(;s<=n;)this.compress_(e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i]=e.charCodeAt(s),++i,++s,i===this.blockSize){this.compress_(r),i=0;break}}else for(;s<t;)if(r[i]=e[s],++i,++s,i===this.blockSize){this.compress_(r),i=0;break}}this.inbuf_=i,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let s=0;s<5;s++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[s]>>t&255,++n;return e}}function K(e,t){return"".concat(e," failed: ").concat(t," argument ")}const Y=function(e){const t=[];let n=0;for(let s=0;s<e.length;s++){let i=e.charCodeAt(s);if(i>=55296&&i<=56319){const t=i-55296;s++,r(s<e.length,"Surrogate pair missing trail surrogate.");i=65536+(t<<10)+(e.charCodeAt(s)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},$=function(e){let t=0;for(let n=0;n<e.length;n++){const s=e.charCodeAt(n);s<128?t++:s<2048?t+=2:s>=55296&&s<=56319?(t+=4,n++):t+=3}return t};function G(e){return e&&e._delegate?e._delegate:e}},184:(e,t,n)=>{var s=n(22),r=n(248);e.exports=function(e){return"symbol"==typeof e||r(e)&&"[object Symbol]"==s(e)}},248:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},253:(e,t,n)=>{"use strict";n.d(t,{h1:()=>o,uA:()=>r});var s=n(170);class r{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const i="[DEFAULT]";class a{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new s.cY;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),s=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(s)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:i})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:s});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const s=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[r,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(r)&&i.resolve(s)}return s}onInit(e,t){var n;const s=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(s))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(s){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:(r=t,r===i?void 0:r),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch(a){}var r;return s||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.component?this.component.multipleInstances?e:i:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class o{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new a(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},277:(e,t,n)=>{"use strict";n.d(t,{f:()=>l});var s=n(51),r=n(607),i=n(291),a=n(815),o=n(578);class l{constructor(){this.baseUrl=r.Nd.databaseURL,this.saveQueue=new Set,this.isCurrentlySaving=!1,this.app=(0,a.Wp)(r.Nd),this.db=(0,o.C3)(this.app)}async getLastTaskResetDate(){try{const e=await fetch("".concat(this.baseUrl,"/meta/lastTaskResetDate.json"));if(!e.ok)throw new Error("Failed to fetch lastTaskResetDate");const t=await e.json();return"string"===typeof t?t:null}catch(e){return console.error("\u274c Error fetching lastTaskResetDate:",e),null}}async setLastTaskResetDate(e){try{if(!(await fetch("".concat(this.baseUrl,"/meta/lastTaskResetDate.json"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw new Error("Failed to set lastTaskResetDate");return!0}catch(t){return console.error("\u274c Error setting lastTaskResetDate:",t),!1}}async acquireResetLock(e,t,n){try{const s=await fetch("".concat(this.baseUrl,"/locks/").concat(e,".json"));if(s.ok){const e=await s.json();if(e&&e.expiry>Date.now())return e.deviceId===t}const r={deviceId:t,expiry:n,timestamp:Date.now()};if(!(await fetch("".concat(this.baseUrl,"/locks/").concat(e,".json"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok)throw new Error("Failed to acquire lock");const i=await fetch("".concat(this.baseUrl,"/locks/").concat(e,".json"));if(!i.ok)return!1;const a=await i.json();return a&&a.deviceId===t&&a.expiry===n}catch(s){return console.error("\u274c Error acquiring reset lock:",s),!1}}async releaseResetLock(e,t){try{const n=await fetch("".concat(this.baseUrl,"/locks/").concat(e,".json"));if(n.ok){const e=await n.json();if(e&&e.deviceId!==t)return console.warn("\u26a0\ufe0f Attempted to release lock owned by another device"),!1}return(await fetch("".concat(this.baseUrl,"/locks/").concat(e,".json"),{method:"DELETE"})).ok}catch(n){return console.error("\u274c Error releasing reset lock:",n),!1}}async quickSave(e,t){console.log("\ud83d\udd25 QuickSave: ".concat(e)),console.log("\ud83d\udd0d Saving ".concat(e," to Firebase:"),this.getDataSummary(e,t));try{const n=await fetch("".concat(this.baseUrl,"/").concat(e,".json"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error("Firebase save failed: ".concat(n.status," ").concat(n.statusText));console.log("\ud83d\udd12 Critical save - waiting for confirmation: ".concat(e));const s=await fetch("".concat(this.baseUrl,"/").concat(e,".json")),r=await s.json();return console.log("\ud83d\udd0d Verified data in Firebase after save:",this.getDataSummary(e,r)),console.log("\u2705 Critical QuickSave completed: ".concat(e)),!0}catch(n){return console.error("\u274c QuickSave failed for ".concat(e,":"),n),!1}}async batchSave(e,t){if(this.isCurrentlySaving)return console.log("\u23f3 Save already in progress, queueing fields:",e),e.forEach((e=>this.saveQueue.add(e))),!0;this.isCurrentlySaving=!0,console.log("\ud83d\udd04 Batch syncing fields:",e);try{const n=e.map((async e=>{const n=this.getFieldData(e,t);return this.quickSave(e,n)})),s=(await Promise.all(n)).every((e=>!0===e));if(s){if(console.log("\u2705 Batch sync completed"),this.saveQueue.size>0){const e=Array.from(this.saveQueue);this.saveQueue.clear(),console.log("\ud83d\udce4 Processing sync queue:",e),setTimeout((()=>{this.batchSave(e,t)}),100)}}else console.error("\u274c Some batch saves failed");return s}catch(n){return console.error("\u274c Batch save failed:",n),!1}finally{this.isCurrentlySaving=!1}}getFieldData(e,t){switch(e){case"employees":return t.employees;case"tasks":return t.tasks;case"dailyData":return t.dailyData;case"completedTasks":return Array.from(t.completedTasks);case"taskAssignments":return t.taskAssignments;case"customRoles":return t.customRoles;case"prepItems":return t.prepItems;case"scheduledPreps":return t.scheduledPreps;case"prepSelections":return t.prepSelections;case"storeItems":return t.storeItems;case"inventoryDailyItems":return t.inventoryDailyItems;case"inventoryWeeklyItems":return t.inventoryWeeklyItems;case"inventoryMonthlyItems":return t.inventoryMonthlyItems;case"inventoryDatabaseItems":return t.inventoryDatabaseItems;case"inventoryActivityLog":return t.inventoryActivityLog;default:return console.warn("Unknown field: ".concat(e)),null}}getDataSummary(e,t){var n,s,r,i;switch(e){case"employees":return{totalCount:(null===t||void 0===t?void 0:t.length)||0,sampleEmployee:(null===t||void 0===t||null===(n=t[0])||void 0===n?void 0:n.name)||"none"};case"tasks":return{totalCount:(null===t||void 0===t?void 0:t.length)||0,sampleTask:(null===t||void 0===t||null===(s=t[0])||void 0===s?void 0:s.task)||"none"};case"dailyData":return{totalDates:Object.keys(t||{}).length,latestDate:Object.keys(t||{}).sort().pop()||"none"};case"completedTasks":return{completedCount:Array.isArray(t)?t.length:(null===t||void 0===t?void 0:t.size)||0};case"taskAssignments":return{totalAssignments:Object.keys(t||{}).length};case"customRoles":return{rolesCount:(null===t||void 0===t?void 0:t.length)||0,roles:t||[]};case"prepItems":return{totalCount:(null===t||void 0===t?void 0:t.length)||0,samplePrep:(null===t||void 0===t||null===(r=t[0])||void 0===r?void 0:r.name)||"none"};case"scheduledPreps":const e=(new Date).toISOString().split("T")[0],a=(t||[]).filter((t=>t.scheduledDate===e));return{totalCount:(t||[]).length,todayCount:a.length,todayCompletedCount:a.filter((e=>e.completed)).length,sampleTodayPreps:a.slice(0,3).map((e=>({id:e.id,name:e.name,completed:e.completed,scheduledDate:e.scheduledDate})))};case"prepSelections":return{totalSelections:Object.keys(t||{}).length,sampleKeys:Object.keys(t||{}).slice(0,3)};case"storeItems":return{totalCount:(null===t||void 0===t?void 0:t.length)||0,availableCount:(t||[]).filter((e=>e.available)).length};case"inventoryDailyItems":case"inventoryWeeklyItems":case"inventoryMonthlyItems":return{totalCount:(null===t||void 0===t?void 0:t.length)||0,criticalCount:(t||[]).filter((e=>e.currentStock<=.5*e.minLevel)).length};case"inventoryDatabaseItems":return{totalCount:(null===t||void 0===t?void 0:t.length)||0,assignedCount:(t||[]).filter((e=>e.isAssigned)).length};case"inventoryActivityLog":return{totalEntries:(null===t||void 0===t?void 0:t.length)||0,latestEntry:(null===t||void 0===t||null===(i=t[0])||void 0===i?void 0:i.timestamp)||"none"};default:return t}}async loadData(){console.log("\ud83d\udd25 Loading data from Firebase...");try{const[e,t,n,r,a,o,l,c,d,u,h,m,p,f,g]=await Promise.all([fetch("".concat(this.baseUrl,"/employees.json")),fetch("".concat(this.baseUrl,"/tasks.json")),fetch("".concat(this.baseUrl,"/dailyData.json")),fetch("".concat(this.baseUrl,"/completedTasks.json")),fetch("".concat(this.baseUrl,"/taskAssignments.json")),fetch("".concat(this.baseUrl,"/customRoles.json")),fetch("".concat(this.baseUrl,"/prepItems.json")),fetch("".concat(this.baseUrl,"/scheduledPreps.json")),fetch("".concat(this.baseUrl,"/prepSelections.json")),fetch("".concat(this.baseUrl,"/storeItems.json")),fetch("".concat(this.baseUrl,"/inventoryDailyItems.json")),fetch("".concat(this.baseUrl,"/inventoryWeeklyItems.json")),fetch("".concat(this.baseUrl,"/inventoryMonthlyItems.json")),fetch("".concat(this.baseUrl,"/inventoryDatabaseItems.json")),fetch("".concat(this.baseUrl,"/inventoryActivityLog.json"))]),y=await e.json(),x=await t.json(),v=await n.json(),b=await r.json(),w=await a.json(),j=await o.json(),k=await l.json(),N=await c.json(),_=await d.json(),C=await u.json(),S=await h.json(),I=await m.json(),E=await p.json(),T=await f.json(),D=await g.json(),A=y?y.map((e=>(0,s.A)((0,s.A)({},e),{},{points:void 0!==e.points?e.points:0}))):(0,i.PR)(),P=x?x.map((e=>(0,s.A)((0,s.A)({},e),{},{points:void 0!==e.points?e.points:this.getDefaultTaskPoints(e.priority)}))):(0,i.w4)(),R=v?this.migrateDailyData(v):(0,i.tU)();return console.log("\u2705 Firebase: Data loaded and migrated successfully"),console.log("\ud83d\udc65 Employees with points:",A),N&&console.log("\ud83d\udccb Loaded scheduledPreps:",this.getDataSummary("scheduledPreps",N)),{employees:A,tasks:P,dailyData:R,completedTasks:new Set(b||[]),taskAssignments:w||{},customRoles:j||["Cleaner","Manager","Supervisor"],prepItems:k||[],scheduledPreps:N||[],prepSelections:_||{},storeItems:C||[],inventoryDailyItems:S||[],inventoryWeeklyItems:I||[],inventoryMonthlyItems:E||[],inventoryDatabaseItems:T||[],inventoryActivityLog:D||[]}}catch(e){throw console.error("\u274c Firebase connection failed:",e),e}}getDefaultTaskPoints(e){switch(e){case"high":return 10;case"medium":default:return 5;case"low":return 3}}migrateDailyData(e){const t={};return Object.keys(e).forEach((n=>{const s=e[n];t[n]={completedTasks:s.completedTasks||[],employeeMoods:s.employeeMoods||[],purchases:s.purchases||[],totalTasks:s.totalTasks||22,completionRate:s.completionRate||0,totalPointsEarned:s.totalPointsEarned||0,totalPointsSpent:s.totalPointsSpent||0}})),t}async saveData(e){console.log("\ud83d\udd25 Saving all data to Firebase...");if(!await this.batchSave(["employees","tasks","dailyData","completedTasks","taskAssignments","customRoles","prepItems","scheduledPreps","prepSelections","storeItems","inventoryDailyItems","inventoryWeeklyItems","inventoryMonthlyItems","inventoryDatabaseItems","inventoryActivityLog"],e))throw console.error("\u274c Firebase: Some data failed to save"),new Error("Firebase save failed");console.log("\u2705 Firebase: All data saved successfully")}async saveImmediate(e,t,n){console.log("\ud83d\udd25 Immediate save triggered by ".concat(e," change"));const s=await this.quickSave(e,t);return s&&n&&"scheduledPreps"!==e&&setTimeout((()=>{console.log("\ud83d\udd04 Background sync of related fields");const t=this.getRelatedFields(e);t.length>0&&this.batchSave(t,n)}),1e3),s}getRelatedFields(e){switch(e){case"completedTasks":return["employees","dailyData","taskAssignments"];case"employees":return["dailyData"];case"taskAssignments":return["completedTasks"];case"scheduledPreps":return["prepSelections"];case"inventoryDailyItems":case"inventoryWeeklyItems":case"inventoryMonthlyItems":return["inventoryActivityLog"];case"inventoryDatabaseItems":return["inventoryDailyItems","inventoryWeeklyItems","inventoryMonthlyItems"];default:return[]}}onCompletedTasksChange(e){const t=(0,o.KR)(this.db,"completedTasks"),n=(0,o.Zy)(t,(t=>{const n=t.val()||[];e(n)}));return()=>(0,o.AU)(t,"value",n)}onTaskAssignmentsChange(e){const t=(0,o.KR)(this.db,"taskAssignments"),n=(0,o.Zy)(t,(t=>{const n=t.val()||{};e(n)}));return()=>(0,o.AU)(t,"value",n)}}},291:(e,t,n)=>{"use strict";n.d(t,{PR:()=>r,h3:()=>a,tU:()=>o,w4:()=>i});var s=n(867);const r=()=>[{id:1,name:"Luka",mood:3,lastUpdated:"Not updated",role:"Cleaner",lastMoodDate:null,points:0},{id:2,name:"Safi",mood:3,lastUpdated:"Not updated",role:"Cleaner",lastMoodDate:null,points:0},{id:3,name:"Ehsan",mood:3,lastUpdated:"Not updated",role:"Cleaner",lastMoodDate:null,points:0},{id:4,name:"Oleksii",mood:3,lastUpdated:"Not updated",role:"Manager",lastMoodDate:null,points:0}],i=()=>[{id:1,task:"Water all plants",location:"Dining Area",priority:"medium",estimatedTime:"10 min",points:5},{id:2,task:"Refill toilet paper",location:"Restroom",priority:"high",estimatedTime:"5 min",points:8},{id:3,task:"Sweep the floor",location:"Kitchen",priority:"high",estimatedTime:"15 min",points:10},{id:4,task:"Wipe refrigerator surfaces",location:"Kitchen",priority:"medium",estimatedTime:"10 min",points:7},{id:5,task:"Light glass wipe",location:"Kitchen (kylm\xe4vitrini)",priority:"low",estimatedTime:"5 min",points:3},{id:6,task:"Refill takeaway & snack boxes",location:"Kitchen",priority:"medium",estimatedTime:"10 min",points:6},{id:7,task:"Stock napkins",location:"Kitchen",priority:"medium",estimatedTime:"5 min",points:4},{id:8,task:"Wipe and disinfect tables",location:"Dining Area",priority:"high",estimatedTime:"20 min",points:12},{id:9,task:"Clean table legs",location:"Dining Area",priority:"low",estimatedTime:"15 min",points:8},{id:10,task:"Vacuum the floor",location:"Dining Area",priority:"high",estimatedTime:"20 min",points:15},{id:11,task:"Clean sink and mirror",location:"Restroom",priority:"high",estimatedTime:"10 min",points:9},{id:12,task:"Clean inside the toilet",location:"Restroom",priority:"high",estimatedTime:"15 min",points:12},{id:13,task:"Replace towel roll",location:"Restroom",priority:"medium",estimatedTime:"5 min",points:4},{id:14,task:"Final disinfection (POS, Foodora, Wolt)",location:"POS / Front",priority:"high",estimatedTime:"10 min",points:10},{id:15,task:"Sweep the floor",location:"Kitchen (Floor)",priority:"high",estimatedTime:"15 min",points:10},{id:16,task:"Mop the floor (every 2 days)",location:"Kitchen (Floor)",priority:"high",estimatedTime:"20 min",points:15},{id:17,task:"Full grill cleaning",location:"Kitchen",priority:"high",estimatedTime:"45 min",points:25},{id:18,task:"Sanitize all surfaces",location:"Kitchen",priority:"high",estimatedTime:"25 min",points:18},{id:19,task:"Wipe dishwasher surface",location:"Apu-Kitchen",priority:"medium",estimatedTime:"10 min",points:6},{id:20,task:"Replace hood filter (every 3 days)",location:"Kitchen",priority:"medium",estimatedTime:"15 min",points:8},{id:21,task:"Cover all food containers",location:"Storage",priority:"high",estimatedTime:"10 min",points:7},{id:22,task:"Organize containers",location:"Apu-Kitchen",priority:"low",estimatedTime:"15 min",points:5}],a=()=>[{id:1,name:"Free Coffee",description:"Get a free coffee from the kitchen",cost:10,category:"food",icon:"\u2615",available:!0},{id:2,name:"Free Lunch",description:"Get a free meal from the restaurant",cost:50,category:"food",icon:"\ud83c\udf7d\ufe0f",available:!0},{id:3,name:"Free Meal for Friend",description:"Bring a friend for a free meal",cost:80,category:"social",icon:"\ud83d\udc65",available:!0},{id:4,name:"30min Break Extension",description:"Extend your break by 30 minutes",cost:25,category:"break",icon:"\u23f0",available:!0},{id:5,name:"Early Leave (1 hour)",description:"Leave work 1 hour early",cost:60,category:"break",icon:"\ud83d\udeaa",available:!0},{id:6,name:"Free Snack",description:"Get any snack from the kitchen",cost:15,category:"food",icon:"\ud83c\udf7f",available:!0},{id:7,name:"Choose Next Week Schedule",description:"Pick your preferred shifts next week",cost:100,category:"reward",icon:"\ud83d\udcc5",available:!0},{id:8,name:"Team Building Activity",description:"Organize a fun team activity",cost:150,category:"social",icon:"\ud83c\udf89",available:!0},{id:9,name:"Free Dessert",description:"Get any dessert from the menu",cost:20,category:"food",icon:"\ud83c\udf70",available:!0},{id:10,name:"Reserved Parking Spot",description:"Get the best parking spot for a week",cost:40,category:"reward",icon:"\ud83d\ude97",available:!0}],o=()=>{const e=Array.from({length:30},((e,t)=>{const n=new Date;return n.setDate(n.getDate()-t),(0,s.po)(n)})),t={};return e.forEach((e=>{t[e]={completedTasks:[],employeeMoods:[],purchases:[],totalTasks:22,completionRate:0,totalPointsEarned:0,totalPointsSpent:0}})),t}},336:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},340:(e,t,n)=>{"use strict";e.exports=n(761)},345:(e,t,n)=>{"use strict";var s=n(950),r=n(340);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},p={};function f(e,t,n,s,r,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new f(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new f(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new f(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new f(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new f(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new f(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function x(e){return e[1].toUpperCase()}function v(e,t,n,s){var r=g.hasOwnProperty(t)?g[t]:null;(null!==r?0!==r.type:s||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,s){if(null===t||"undefined"===typeof t||function(e,t,n,s){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!s&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,s))return!0;if(s)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,s)&&(n=null),s||null===r?function(e){return!!u.call(p,e)||!u.call(m,e)&&(h.test(e)?p[e]=!0:(m[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,s=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,x);g[t]=new f(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,x);g[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,x);g[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),j=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),S=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var L,O=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function z(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var s=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){s=c}e.call(t.prototype)}else{try{throw Error()}catch(c){s=c}e()}}catch(c){if(c&&s&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),i=s.stack.split("\n"),a=r.length-1,o=i.length-1;1<=a&&0<=o&&r[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==i[o]){if(1!==a||1!==o)do{if(a--,0>--o||r[a]!==i[o]){var l="\n"+r[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function q(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case j:return"Portal";case _:return"Profiler";case N:return"StrictMode";case E:return"Suspense";case T:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case S:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:W(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return W(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(t);case 8:return t===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Q(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){s=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(e){s=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=V(e)?e.checked?"true":"false":e.value),(e=s)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return O({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function G(e,t){var n=null==t.defaultValue?"":t.defaultValue,s=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function X(e,t){J(e,t);var n=H(t.value),s=t.type;if(null!=n)"number"===s?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===s||"reset"===s)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!("submit"!==s&&"reset"!==s||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,s){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&s&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(s&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return O({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ie(e,t){var n=H(t.value),s=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=s&&(e.defaultValue=""+s)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,s){MSApp.execUnsafeLocalFunction((function(){return de(e,t)}))}:de);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var me={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function fe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||me.hasOwnProperty(e)&&me[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var s=0===n.indexOf("--"),r=fe(n,t[n],s);"float"===n&&(n="cssFloat"),s?e.setProperty(n,r):e[n]=r}}Object.keys(me).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),me[t]=me[e]}))}));var ye=O({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xe(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var je=null,ke=null,Ne=null;function _e(e){if(e=vr(e)){if("function"!==typeof je)throw Error(i(280));var t=e.stateNode;t&&(t=wr(t),je(e.stateNode,e.type,t))}}function Ce(e){ke?Ne?Ne.push(e):Ne=[e]:ke=e}function Se(){if(ke){var e=ke,t=Ne;if(Ne=ke=null,_e(e),t)for(e=0;e<t.length;e++)_e(t[e])}}function Ie(e,t){return e(t)}function Ee(){}var Te=!1;function De(e,t,n){if(Te)return e(t,n);Te=!0;try{return Ie(e,t,n)}finally{Te=!1,(null!==ke||null!==Ne)&&(Ee(),Se())}}function Ae(e,t){var n=e.stateNode;if(null===n)return null;var s=wr(n);if(null===s)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(s=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!s;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Pe=!1;if(d)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(de){Pe=!1}function Me(e,t,n,s,r,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var Le=!1,Oe=null,Fe=!1,Ue=null,ze={onError:function(e){Le=!0,Oe=e}};function qe(e,t,n,s,r,i,a,o,l){Le=!1,Oe=null,Me.apply(ze,arguments)}function We(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(We(e)!==e)throw Error(i(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=We(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,s=t;;){var r=n.return;if(null===r)break;var a=r.alternate;if(null===a){if(null!==(s=r.return)){n=s;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return He(r),e;if(a===s)return He(r),t;a=a.sibling}throw Error(i(188))}if(n.return!==s.return)n=r,s=a;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,s=a;break}if(l===s){o=!0,s=r,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,s=r;break}if(l===s){o=!0,s=a,n=r;break}l=l.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==s)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?Qe(e):null}function Qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Qe(e);if(null!==t)return t;e=e.sibling}return null}var Ke=r.unstable_scheduleCallback,Ye=r.unstable_cancelCallback,$e=r.unstable_shouldYield,Ge=r.unstable_requestPaint,Je=r.unstable_now,Xe=r.unstable_getCurrentPriorityLevel,Ze=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,st=r.unstable_IdlePriority,rt=null,it=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var s=0,r=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~r;0!==o?s=ut(o):0!==(i&=a)&&(s=ut(i))}else 0!==(a=n&~r)?s=ut(a):0!==i&&(s=ut(i));if(0===s)return 0;if(0!==t&&t!==s&&0===(t&r)&&((r=s&-s)>=(i=t&-t)||16===r&&0!==(4194240&i)))return t;if(0!==(4&s)&&(s|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=s;0<t;)r=1<<(n=31-at(t)),s|=e[n],t&=~r;return s}function mt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function xt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-at(n),r=1<<s;r&t|e[s]&t&&(e[s]|=t),n&=~r}}var vt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,jt,kt,Nt,_t,Ct=!1,St=[],It=null,Et=null,Tt=null,Dt=new Map,At=new Map,Pt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Et=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function Lt(e,t,n,s,r,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},null!==t&&(null!==(t=vr(t))&&jt(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Ot(e){var t=xr(e.target);if(null!==t){var n=We(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void _t(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=vr(n))&&jt(t),e.blockedOn=n,!1;var s=new(n=e.nativeEvent).constructor(n.type,n);be=s,n.target.dispatchEvent(s),be=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function zt(){Ct=!1,null!==It&&Ft(It)&&(It=null),null!==Et&&Ft(Et)&&(Et=null),null!==Tt&&Ft(Tt)&&(Tt=null),Dt.forEach(Ut),At.forEach(Ut)}function qt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,zt)))}function Wt(e){function t(t){return qt(t,e)}if(0<St.length){qt(St[0],e);for(var n=1;n<St.length;n++){var s=St[n];s.blockedOn===e&&(s.blockedOn=null)}}for(null!==It&&qt(It,e),null!==Et&&qt(Et,e),null!==Tt&&qt(Tt,e),Dt.forEach(t),At.forEach(t),n=0;n<Pt.length;n++)(s=Pt[n]).blockedOn===e&&(s.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ot(n),null===n.blockedOn&&Pt.shift()}var Bt=b.ReactCurrentBatchConfig,Ht=!0;function Vt(e,t,n,s){var r=vt,i=Bt.transition;Bt.transition=null;try{vt=1,Kt(e,t,n,s)}finally{vt=r,Bt.transition=i}}function Qt(e,t,n,s){var r=vt,i=Bt.transition;Bt.transition=null;try{vt=4,Kt(e,t,n,s)}finally{vt=r,Bt.transition=i}}function Kt(e,t,n,s){if(Ht){var r=$t(e,t,n,s);if(null===r)Hs(e,t,s,Yt,n),Mt(e,s);else if(function(e,t,n,s,r){switch(t){case"focusin":return It=Lt(It,e,t,n,s,r),!0;case"dragenter":return Et=Lt(Et,e,t,n,s,r),!0;case"mouseover":return Tt=Lt(Tt,e,t,n,s,r),!0;case"pointerover":var i=r.pointerId;return Dt.set(i,Lt(Dt.get(i)||null,e,t,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,At.set(i,Lt(At.get(i)||null,e,t,n,s,r)),!0}return!1}(r,e,t,n,s))s.stopPropagation();else if(Mt(e,s),4&t&&-1<Rt.indexOf(e)){for(;null!==r;){var i=vr(r);if(null!==i&&wt(i),null===(i=$t(e,t,n,s))&&Hs(e,t,s,Yt,n),i===r)break;r=i}null!==r&&s.stopPropagation()}else Hs(e,t,s,null,n)}}var Yt=null;function $t(e,t,n,s){if(Yt=null,null!==(e=xr(e=we(s))))if(null===(t=We(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Gt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case st:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,s=n.length,r="value"in Jt?Jt.value:Jt.textContent,i=r.length;for(e=0;e<s&&n[e]===r[e];e++);var a=s-e;for(t=1;t<=a&&n[s-t]===r[i-t];t++);return Zt=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function sn(){return!1}function rn(e){function t(t,n,s,r,i){for(var a in this._reactName=t,this._targetInst=s,this.type=n,this.nativeEvent=r,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:sn,this.isPropagationStopped=sn,this}return O(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=rn(cn),un=O({},cn,{view:0,detail:0}),hn=rn(un),mn=O({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_n,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=rn(mn),fn=rn(O({},mn,{dataTransfer:0})),gn=rn(O({},un,{relatedTarget:0})),yn=rn(O({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),xn=O({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vn=rn(xn),bn=rn(O({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function _n(){return Nn}var Cn=O({},un,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?jn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_n,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sn=rn(Cn),In=rn(O({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),En=rn(O({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_n})),Tn=rn(O({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=O({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=rn(Dn),Pn=[9,13,27,32],Rn=d&&"CompositionEvent"in window,Mn=null;d&&"documentMode"in document&&(Mn=document.documentMode);var Ln=d&&"TextEvent"in window&&!Mn,On=d&&(!Rn||Mn&&8<Mn&&11>=Mn),Fn=String.fromCharCode(32),Un=!1;function zn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function Vn(e,t,n,s){Ce(s),0<(t=Qs(t,"onChange")).length&&(n=new dn("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Qn=null,Kn=null;function Yn(e){Fs(e,0)}function $n(e){if(K(br(e)))return e}function Gn(e,t){if("change"===e)return t}var Jn=!1;if(d){var Xn;if(d){var Zn="oninput"in document;if(!Zn){var es=document.createElement("div");es.setAttribute("oninput","return;"),Zn="function"===typeof es.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function ts(){Qn&&(Qn.detachEvent("onpropertychange",ns),Kn=Qn=null)}function ns(e){if("value"===e.propertyName&&$n(Kn)){var t=[];Vn(t,Kn,e,we(e)),De(Yn,t)}}function ss(e,t,n){"focusin"===e?(ts(),Kn=n,(Qn=t).attachEvent("onpropertychange",ns)):"focusout"===e&&ts()}function rs(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Kn)}function is(e,t){if("click"===e)return $n(t)}function as(e,t){if("input"===e||"change"===e)return $n(t)}var os="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ls(e,t){if(os(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!u.call(t,r)||!os(e[r],t[r]))return!1}return!0}function cs(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ds(e,t){var n,s=cs(e);for(e=0;s;){if(3===s.nodeType){if(n=e+s.textContent.length,e<=t&&n>=t)return{node:s,offset:t-e};e=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=cs(s)}}function us(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?us(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hs(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(s){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function ms(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function ps(e){var t=hs(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&us(n.ownerDocument.documentElement,n)){if(null!==s&&ms(n))if(t=s.start,void 0===(e=s.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,i=Math.min(s.start,r);s=void 0===s.end?i:Math.min(s.end,r),!e.extend&&i>s&&(r=s,s=i,i=r),r=ds(n,i);var a=ds(n,s);r&&a&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),i>s?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fs=d&&"documentMode"in document&&11>=document.documentMode,gs=null,ys=null,xs=null,vs=!1;function bs(e,t,n){var s=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vs||null==gs||gs!==Y(s)||("selectionStart"in(s=gs)&&ms(s)?s={start:s.selectionStart,end:s.selectionEnd}:s={anchorNode:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset},xs&&ls(xs,s)||(xs=s,0<(s=Qs(ys,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=gs)))}function ws(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var js={animationend:ws("Animation","AnimationEnd"),animationiteration:ws("Animation","AnimationIteration"),animationstart:ws("Animation","AnimationStart"),transitionend:ws("Transition","TransitionEnd")},ks={},Ns={};function _s(e){if(ks[e])return ks[e];if(!js[e])return e;var t,n=js[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ns)return ks[e]=n[t];return e}d&&(Ns=document.createElement("div").style,"AnimationEvent"in window||(delete js.animationend.animation,delete js.animationiteration.animation,delete js.animationstart.animation),"TransitionEvent"in window||delete js.transitionend.transition);var Cs=_s("animationend"),Ss=_s("animationiteration"),Is=_s("animationstart"),Es=_s("transitionend"),Ts=new Map,Ds="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function As(e,t){Ts.set(e,t),l(t,[e])}for(var Ps=0;Ps<Ds.length;Ps++){var Rs=Ds[Ps];As(Rs.toLowerCase(),"on"+(Rs[0].toUpperCase()+Rs.slice(1)))}As(Cs,"onAnimationEnd"),As(Ss,"onAnimationIteration"),As(Is,"onAnimationStart"),As("dblclick","onDoubleClick"),As("focusin","onFocus"),As("focusout","onBlur"),As(Es,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ms="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ls=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ms));function Os(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,s,r,a,o,l,c){if(qe.apply(this,arguments),Le){if(!Le)throw Error(i(198));var d=Oe;Le=!1,Oe=null,Fe||(Fe=!0,Ue=d)}}(s,t,void 0,e),e.currentTarget=null}function Fs(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var s=e[n],r=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var a=s.length-1;0<=a;a--){var o=s[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&r.isPropagationStopped())break e;Os(r,o,c),i=l}else for(a=0;a<s.length;a++){if(l=(o=s[a]).instance,c=o.currentTarget,o=o.listener,l!==i&&r.isPropagationStopped())break e;Os(r,o,c),i=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Us(e,t){var n=t[fr];void 0===n&&(n=t[fr]=new Set);var s=e+"__bubble";n.has(s)||(Bs(t,e,2,!1),n.add(s))}function zs(e,t,n){var s=0;t&&(s|=4),Bs(n,e,s,t)}var qs="_reactListening"+Math.random().toString(36).slice(2);function Ws(e){if(!e[qs]){e[qs]=!0,a.forEach((function(t){"selectionchange"!==t&&(Ls.has(t)||zs(t,!1,e),zs(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[qs]||(t[qs]=!0,zs("selectionchange",!1,t))}}function Bs(e,t,n,s){switch(Gt(t)){case 1:var r=Vt;break;case 4:r=Qt;break;default:r=Kt}n=r.bind(null,t,n,e),r=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),s?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Hs(e,t,n,s,r){var i=s;if(0===(1&t)&&0===(2&t)&&null!==s)e:for(;;){if(null===s)return;var a=s.tag;if(3===a||4===a){var o=s.stateNode.containerInfo;if(o===r||8===o.nodeType&&o.parentNode===r)break;if(4===a)for(a=s.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;a=a.return}for(;null!==o;){if(null===(a=xr(o)))return;if(5===(l=a.tag)||6===l){s=i=a;continue e}o=o.parentNode}}s=s.return}De((function(){var s=i,r=we(n),a=[];e:{var o=Ts.get(e);if(void 0!==o){var l=dn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Sn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=En;break;case Cs:case Ss:case Is:l=yn;break;case Es:l=Tn;break;case"scroll":l=hn;break;case"wheel":l=An;break;case"copy":case"cut":case"paste":l=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=In}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==o?o+"Capture":null:o;d=[];for(var m,p=s;null!==p;){var f=(m=p).stateNode;if(5===m.tag&&null!==f&&(m=f,null!==h&&(null!=(f=Ae(p,h))&&d.push(Vs(p,f,m)))),u)break;p=p.return}0<d.length&&(o=new l(o,c,null,n,r),a.push({event:o,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!xr(c)&&!c[pr])&&(l||o)&&(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=s,null!==(c=(c=n.relatedTarget||n.toElement)?xr(c):null)&&(c!==(u=We(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=s),l!==c)){if(d=pn,f="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=In,f="onPointerLeave",h="onPointerEnter",p="pointer"),u=null==l?o:br(l),m=null==c?o:br(c),(o=new d(f,p+"leave",l,n,r)).target=u,o.relatedTarget=m,f=null,xr(r)===s&&((d=new d(h,p+"enter",c,n,r)).target=m,d.relatedTarget=u,f=d),u=f,l&&c)e:{for(h=c,p=0,m=d=l;m;m=Ks(m))p++;for(m=0,f=h;f;f=Ks(f))m++;for(;0<p-m;)d=Ks(d),p--;for(;0<m-p;)h=Ks(h),m--;for(;p--;){if(d===h||null!==h&&d===h.alternate)break e;d=Ks(d),h=Ks(h)}d=null}else d=null;null!==l&&Ys(a,o,l,d,!1),null!==c&&null!==u&&Ys(a,u,c,d,!0)}if("select"===(l=(o=s?br(s):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Gn;else if(Hn(o))if(Jn)g=as;else{g=rs;var y=ss}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=is);switch(g&&(g=g(e,s))?Vn(a,g,n,r):(y&&y(e,o,s),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=s?br(s):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(gs=y,ys=s,xs=null);break;case"focusout":xs=ys=gs=null;break;case"mousedown":vs=!0;break;case"contextmenu":case"mouseup":case"dragend":vs=!1,bs(a,n,r);break;case"selectionchange":if(fs)break;case"keydown":case"keyup":bs(a,n,r)}var x;if(Rn)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Wn?zn(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(On&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==v?"onCompositionEnd"===v&&Wn&&(x=en()):(Xt="value"in(Jt=r)?Jt.value:Jt.textContent,Wn=!0)),0<(y=Qs(s,v)).length&&(v=new bn(v,e,null,n,r),a.push({event:v,listeners:y}),x?v.data=x:null!==(x=qn(n))&&(v.data=x))),(x=Ln?function(e,t){switch(e){case"compositionend":return qn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Rn&&zn(e,t)?(e=en(),Zt=Xt=Jt=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return On&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(s=Qs(s,"onBeforeInput")).length&&(r=new bn("onBeforeInput","beforeinput",null,n,r),a.push({event:r,listeners:s}),r.data=x))}Fs(a,t)}))}function Vs(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Qs(e,t){for(var n=t+"Capture",s=[];null!==e;){var r=e,i=r.stateNode;5===r.tag&&null!==i&&(r=i,null!=(i=Ae(e,n))&&s.unshift(Vs(e,i,r)),null!=(i=Ae(e,t))&&s.push(Vs(e,i,r))),e=e.return}return s}function Ks(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ys(e,t,n,s,r){for(var i=t._reactName,a=[];null!==n&&n!==s;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===s)break;5===o.tag&&null!==c&&(o=c,r?null!=(l=Ae(n,i))&&a.unshift(Vs(n,l,o)):r||null!=(l=Ae(n,i))&&a.push(Vs(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var $s=/\r\n?/g,Gs=/\u0000|\uFFFD/g;function Js(e){return("string"===typeof e?e:""+e).replace($s,"\n").replace(Gs,"")}function Xs(e,t,n){if(t=Js(t),Js(e)!==t&&n)throw Error(i(425))}function Zs(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var sr="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,ir="function"===typeof Promise?Promise:void 0,ar="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ir?function(e){return ir.resolve(null).then(e).catch(or)}:sr;function or(e){setTimeout((function(){throw e}))}function lr(e,t){var n=t,s=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===s)return e.removeChild(r),void Wt(t);s--}else"$"!==n&&"$?"!==n&&"$!"!==n||s++;n=r}while(n);Wt(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function dr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ur=Math.random().toString(36).slice(2),hr="__reactFiber$"+ur,mr="__reactProps$"+ur,pr="__reactContainer$"+ur,fr="__reactEvents$"+ur,gr="__reactListeners$"+ur,yr="__reactHandles$"+ur;function xr(e){var t=e[hr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pr]||n[hr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=dr(e);null!==e;){if(n=e[hr])return n;e=dr(e)}return t}n=(e=n).parentNode}return null}function vr(e){return!(e=e[hr]||e[pr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function br(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function wr(e){return e[mr]||null}var jr=[],kr=-1;function Nr(e){return{current:e}}function _r(e){0>kr||(e.current=jr[kr],jr[kr]=null,kr--)}function Cr(e,t){kr++,jr[kr]=e.current,e.current=t}var Sr={},Ir=Nr(Sr),Er=Nr(!1),Tr=Sr;function Dr(e,t){var n=e.type.contextTypes;if(!n)return Sr;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var r,i={};for(r in n)i[r]=t[r];return s&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ar(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pr(){_r(Er),_r(Ir)}function Rr(e,t,n){if(Ir.current!==Sr)throw Error(i(168));Cr(Ir,t),Cr(Er,n)}function Mr(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,"function"!==typeof s.getChildContext)return n;for(var r in s=s.getChildContext())if(!(r in t))throw Error(i(108,B(e)||"Unknown",r));return O({},n,s)}function Lr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Sr,Tr=Ir.current,Cr(Ir,e),Cr(Er,Er.current),!0}function Or(e,t,n){var s=e.stateNode;if(!s)throw Error(i(169));n?(e=Mr(e,t,Tr),s.__reactInternalMemoizedMergedChildContext=e,_r(Er),_r(Ir),Cr(Ir,e)):_r(Er),Cr(Er,n)}var Fr=null,Ur=!1,zr=!1;function qr(e){null===Fr?Fr=[e]:Fr.push(e)}function Wr(){if(!zr&&null!==Fr){zr=!0;var e=0,t=vt;try{var n=Fr;for(vt=1;e<n.length;e++){var s=n[e];do{s=s(!0)}while(null!==s)}Fr=null,Ur=!1}catch(r){throw null!==Fr&&(Fr=Fr.slice(e+1)),Ke(Ze,Wr),r}finally{vt=t,zr=!1}}return null}var Br=[],Hr=0,Vr=null,Qr=0,Kr=[],Yr=0,$r=null,Gr=1,Jr="";function Xr(e,t){Br[Hr++]=Qr,Br[Hr++]=Vr,Vr=e,Qr=t}function Zr(e,t,n){Kr[Yr++]=Gr,Kr[Yr++]=Jr,Kr[Yr++]=$r,$r=e;var s=Gr;e=Jr;var r=32-at(s)-1;s&=~(1<<r),n+=1;var i=32-at(t)+r;if(30<i){var a=r-r%5;i=(s&(1<<a)-1).toString(32),s>>=a,r-=a,Gr=1<<32-at(t)+r|n<<r|s,Jr=i+e}else Gr=1<<i|n<<r|s,Jr=e}function ei(e){null!==e.return&&(Xr(e,1),Zr(e,1,0))}function ti(e){for(;e===Vr;)Vr=Br[--Hr],Br[Hr]=null,Qr=Br[--Hr],Br[Hr]=null;for(;e===$r;)$r=Kr[--Yr],Kr[Yr]=null,Jr=Kr[--Yr],Kr[Yr]=null,Gr=Kr[--Yr],Kr[Yr]=null}var ni=null,si=null,ri=!1,ii=null;function ai(e,t){var n=Dc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,si=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,si=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$r?{id:Gr,overflow:Jr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Dc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ni=e,si=null,!0);default:return!1}}function li(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ci(e){if(ri){var t=si;if(t){var n=t;if(!oi(e,t)){if(li(e))throw Error(i(418));t=cr(n.nextSibling);var s=ni;t&&oi(e,t)?ai(s,n):(e.flags=-4097&e.flags|2,ri=!1,ni=e)}}else{if(li(e))throw Error(i(418));e.flags=-4097&e.flags|2,ri=!1,ni=e}}}function di(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function ui(e){if(e!==ni)return!1;if(!ri)return di(e),ri=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=si)){if(li(e))throw hi(),Error(i(418));for(;t;)ai(e,t),t=cr(t.nextSibling)}if(di(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){si=cr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}si=null}}else si=ni?cr(e.stateNode.nextSibling):null;return!0}function hi(){for(var e=si;e;)e=cr(e.nextSibling)}function mi(){si=ni=null,ri=!1}function pi(e){null===ii?ii=[e]:ii.push(e)}var fi=b.ReactCurrentBatchConfig;function gi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var s=n.stateNode}if(!s)throw Error(i(147,e));var r=s,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=r.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function yi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xi(e){return(0,e._init)(e._payload)}function vi(e){function t(t,n){if(e){var s=t.deletions;null===s?(t.deletions=[n],t.flags|=16):s.push(n)}}function n(n,s){if(!e)return null;for(;null!==s;)t(n,s),s=s.sibling;return null}function s(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function a(t,n,s){return t.index=s,e?null!==(s=t.alternate)?(s=s.index)<n?(t.flags|=2,n):s:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,s){return null===t||6!==t.tag?((t=Oc(n,e.mode,s)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,s){var i=n.type;return i===k?u(e,t,n.props.children,s,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===A&&xi(i)===t.type)?((s=r(t,n.props)).ref=gi(e,t,n),s.return=e,s):((s=Rc(n.type,n.key,n.props,null,e.mode,s)).ref=gi(e,t,n),s.return=e,s)}function d(e,t,n,s){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,s)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function u(e,t,n,s,i){return null===t||7!==t.tag?((t=Mc(n,e.mode,s,i)).return=e,t):((t=r(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Oc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=gi(e,null,t),n.return=e,n;case j:return(t=Fc(t,e.mode,n)).return=e,t;case A:return h(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Mc(t,e.mode,n,null)).return=e,t;yi(e,t)}return null}function m(e,t,n,s){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,s);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===r?c(e,t,n,s):null;case j:return n.key===r?d(e,t,n,s):null;case A:return m(e,t,(r=n._init)(n._payload),s)}if(te(n)||M(n))return null!==r?null:u(e,t,n,s,null);yi(e,n)}return null}function p(e,t,n,s,r){if("string"===typeof s&&""!==s||"number"===typeof s)return l(t,e=e.get(n)||null,""+s,r);if("object"===typeof s&&null!==s){switch(s.$$typeof){case w:return c(t,e=e.get(null===s.key?n:s.key)||null,s,r);case j:return d(t,e=e.get(null===s.key?n:s.key)||null,s,r);case A:return p(e,t,n,(0,s._init)(s._payload),r)}if(te(s)||M(s))return u(t,e=e.get(n)||null,s,r,null);yi(t,s)}return null}function f(r,i,o,l){for(var c=null,d=null,u=i,f=i=0,g=null;null!==u&&f<o.length;f++){u.index>f?(g=u,u=null):g=u.sibling;var y=m(r,u,o[f],l);if(null===y){null===u&&(u=g);break}e&&u&&null===y.alternate&&t(r,u),i=a(y,i,f),null===d?c=y:d.sibling=y,d=y,u=g}if(f===o.length)return n(r,u),ri&&Xr(r,f),c;if(null===u){for(;f<o.length;f++)null!==(u=h(r,o[f],l))&&(i=a(u,i,f),null===d?c=u:d.sibling=u,d=u);return ri&&Xr(r,f),c}for(u=s(r,u);f<o.length;f++)null!==(g=p(u,r,f,o[f],l))&&(e&&null!==g.alternate&&u.delete(null===g.key?f:g.key),i=a(g,i,f),null===d?c=g:d.sibling=g,d=g);return e&&u.forEach((function(e){return t(r,e)})),ri&&Xr(r,f),c}function g(r,o,l,c){var d=M(l);if("function"!==typeof d)throw Error(i(150));if(null==(l=d.call(l)))throw Error(i(151));for(var u=d=null,f=o,g=o=0,y=null,x=l.next();null!==f&&!x.done;g++,x=l.next()){f.index>g?(y=f,f=null):y=f.sibling;var v=m(r,f,x.value,c);if(null===v){null===f&&(f=y);break}e&&f&&null===v.alternate&&t(r,f),o=a(v,o,g),null===u?d=v:u.sibling=v,u=v,f=y}if(x.done)return n(r,f),ri&&Xr(r,g),d;if(null===f){for(;!x.done;g++,x=l.next())null!==(x=h(r,x.value,c))&&(o=a(x,o,g),null===u?d=x:u.sibling=x,u=x);return ri&&Xr(r,g),d}for(f=s(r,f);!x.done;g++,x=l.next())null!==(x=p(f,r,g,x.value,c))&&(e&&null!==x.alternate&&f.delete(null===x.key?g:x.key),o=a(x,o,g),null===u?d=x:u.sibling=x,u=x);return e&&f.forEach((function(e){return t(r,e)})),ri&&Xr(r,g),d}return function e(s,i,a,l){if("object"===typeof a&&null!==a&&a.type===k&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,d=i;null!==d;){if(d.key===c){if((c=a.type)===k){if(7===d.tag){n(s,d.sibling),(i=r(d,a.props.children)).return=s,s=i;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===A&&xi(c)===d.type){n(s,d.sibling),(i=r(d,a.props)).ref=gi(s,d,a),i.return=s,s=i;break e}n(s,d);break}t(s,d),d=d.sibling}a.type===k?((i=Mc(a.props.children,s.mode,l,a.key)).return=s,s=i):((l=Rc(a.type,a.key,a.props,null,s.mode,l)).ref=gi(s,i,a),l.return=s,s=l)}return o(s);case j:e:{for(d=a.key;null!==i;){if(i.key===d){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(s,i.sibling),(i=r(i,a.children||[])).return=s,s=i;break e}n(s,i);break}t(s,i),i=i.sibling}(i=Fc(a,s.mode,l)).return=s,s=i}return o(s);case A:return e(s,i,(d=a._init)(a._payload),l)}if(te(a))return f(s,i,a,l);if(M(a))return g(s,i,a,l);yi(s,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(s,i.sibling),(i=r(i,a)).return=s,s=i):(n(s,i),(i=Oc(a,s.mode,l)).return=s,s=i),o(s)):n(s,i)}}var bi=vi(!0),wi=vi(!1),ji=Nr(null),ki=null,Ni=null,_i=null;function Ci(){_i=Ni=ki=null}function Si(e){var t=ji.current;_r(ji),e._currentValue=t}function Ii(e,t,n){for(;null!==e;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==s&&(s.childLanes|=t)):null!==s&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function Ei(e,t){ki=e,_i=Ni=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(vo=!0),e.firstContext=null)}function Ti(e){var t=e._currentValue;if(_i!==e)if(e={context:e,memoizedValue:t,next:null},null===Ni){if(null===ki)throw Error(i(308));Ni=e,ki.dependencies={lanes:0,firstContext:e}}else Ni=Ni.next=e;return t}var Di=null;function Ai(e){null===Di?Di=[e]:Di.push(e)}function Pi(e,t,n,s){var r=t.interleaved;return null===r?(n.next=n,Ai(t)):(n.next=r.next,r.next=n),t.interleaved=n,Ri(e,s)}function Ri(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Mi=!1;function Li(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ui(e,t,n){var s=e.updateQueue;if(null===s)return null;if(s=s.shared,0!==(2&Il)){var r=s.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),s.pending=t,Ri(e,n)}return null===(r=s.interleaved)?(t.next=t,Ai(s)):(t.next=r.next,r.next=t),s.interleaved=t,Ri(e,n)}function zi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var s=t.lanes;n|=s&=e.pendingLanes,t.lanes=n,xt(e,n)}}function qi(e,t){var n=e.updateQueue,s=e.alternate;if(null!==s&&n===(s=s.updateQueue)){var r=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?r=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?r=i=t:i=i.next=t}else r=i=t;return n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Wi(e,t,n,s){var r=e.updateQueue;Mi=!1;var i=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(null!==o){r.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==a&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==i){var u=r.baseState;for(a=0,d=c=l=null,o=i;;){var h=o.lane,m=o.eventTime;if((s&h)===h){null!==d&&(d=d.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,f=o;switch(h=t,m=n,f.tag){case 1:if("function"===typeof(p=f.payload)){u=p.call(m,u,h);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=f.payload)?p.call(m,u,h):p)||void 0===h)break e;u=O({},u,h);break e;case 2:Mi=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=r.effects)?r.effects=[o]:h.push(o))}else m={eventTime:m,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=m,l=u):d=d.next=m,a|=h;if(null===(o=o.next)){if(null===(o=r.shared.pending))break;o=(h=o).next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}if(null===d&&(l=u),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=d,null!==(t=r.shared.interleaved)){r=t;do{a|=r.lane,r=r.next}while(r!==t)}else null===i&&(r.shared.lanes=0);Ll|=a,e.lanes=a,e.memoizedState=u}}function Bi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var s=e[t],r=s.callback;if(null!==r){if(s.callback=null,s=n,"function"!==typeof r)throw Error(i(191,r));r.call(s)}}}var Hi={},Vi=Nr(Hi),Qi=Nr(Hi),Ki=Nr(Hi);function Yi(e){if(e===Hi)throw Error(i(174));return e}function $i(e,t){switch(Cr(Ki,t),Cr(Qi,e),Cr(Vi,Hi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}_r(Vi),Cr(Vi,t)}function Gi(){_r(Vi),_r(Qi),_r(Ki)}function Ji(e){Yi(Ki.current);var t=Yi(Vi.current),n=le(t,e.type);t!==n&&(Cr(Qi,e),Cr(Vi,n))}function Xi(e){Qi.current===e&&(_r(Vi),_r(Qi))}var Zi=Nr(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var sa=b.ReactCurrentDispatcher,ra=b.ReactCurrentBatchConfig,ia=0,aa=null,oa=null,la=null,ca=!1,da=!1,ua=0,ha=0;function ma(){throw Error(i(321))}function pa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!os(e[n],t[n]))return!1;return!0}function fa(e,t,n,s,r,a){if(ia=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,sa.current=null===e||null===e.memoizedState?Xa:Za,e=n(s,r),da){a=0;do{if(da=!1,ua=0,25<=a)throw Error(i(301));a+=1,la=oa=null,t.updateQueue=null,sa.current=eo,e=n(s,r)}while(da)}if(sa.current=Ja,t=null!==oa&&null!==oa.next,ia=0,la=oa=aa=null,ca=!1,t)throw Error(i(300));return e}function ga(){var e=0!==ua;return ua=0,e}function ya(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function xa(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(i(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function va(e,t){return"function"===typeof t?t(e):t}function ba(e){var t=xa(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var s=oa,r=s.baseQueue,a=n.pending;if(null!==a){if(null!==r){var o=r.next;r.next=a.next,a.next=o}s.baseQueue=r=a,n.pending=null}if(null!==r){a=r.next,s=s.baseState;var l=o=null,c=null,d=a;do{var u=d.lane;if((ia&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,o=s):c=c.next=h,aa.lanes|=u,Ll|=u}d=d.next}while(null!==d&&d!==a);null===c?o=s:c.next=l,os(s,t.memoizedState)||(vo=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=c,n.lastRenderedState=s}if(null!==(e=n.interleaved)){r=e;do{a=r.lane,aa.lanes|=a,Ll|=a,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wa(e){var t=xa(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var s=n.dispatch,r=n.pending,a=t.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{a=e(a,o.action),o=o.next}while(o!==r);os(a,t.memoizedState)||(vo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,s]}function ja(){}function ka(e,t){var n=aa,s=xa(),r=t(),a=!os(s.memoizedState,r);if(a&&(s.memoizedState=r,vo=!0),s=s.queue,Ma(Ca.bind(null,n,s,e),[e]),s.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Ta(9,_a.bind(null,n,s,r,t),void 0,null),null===El)throw Error(i(349));0!==(30&ia)||Na(n,t,r)}return r}function Na(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function _a(e,t,n,s){t.value=n,t.getSnapshot=s,Sa(t)&&Ia(e)}function Ca(e,t,n){return n((function(){Sa(t)&&Ia(e)}))}function Sa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!os(e,n)}catch(s){return!0}}function Ia(e){var t=Ri(e,1);null!==t&&nc(t,e,1,-1)}function Ea(e){var t=ya();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:e},t.queue=e,e=e.dispatch=Ka.bind(null,aa,e),[t.memoizedState,e]}function Ta(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e),e}function Da(){return xa().memoizedState}function Aa(e,t,n,s){var r=ya();aa.flags|=e,r.memoizedState=Ta(1|t,n,void 0,void 0===s?null:s)}function Pa(e,t,n,s){var r=xa();s=void 0===s?null:s;var i=void 0;if(null!==oa){var a=oa.memoizedState;if(i=a.destroy,null!==s&&pa(s,a.deps))return void(r.memoizedState=Ta(t,n,i,s))}aa.flags|=e,r.memoizedState=Ta(1|t,n,i,s)}function Ra(e,t){return Aa(8390656,8,e,t)}function Ma(e,t){return Pa(2048,8,e,t)}function La(e,t){return Pa(4,2,e,t)}function Oa(e,t){return Pa(4,4,e,t)}function Fa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ua(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Pa(4,4,Fa.bind(null,t,e),n)}function za(){}function qa(e,t){var n=xa();t=void 0===t?null:t;var s=n.memoizedState;return null!==s&&null!==t&&pa(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function Wa(e,t){var n=xa();t=void 0===t?null:t;var s=n.memoizedState;return null!==s&&null!==t&&pa(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function Ba(e,t,n){return 0===(21&ia)?(e.baseState&&(e.baseState=!1,vo=!0),e.memoizedState=n):(os(n,t)||(n=ft(),aa.lanes|=n,Ll|=n,e.baseState=!0),t)}function Ha(e,t){var n=vt;vt=0!==n&&4>n?n:4,e(!0);var s=ra.transition;ra.transition={};try{e(!1),t()}finally{vt=n,ra.transition=s}}function Va(){return xa().memoizedState}function Qa(e,t,n){var s=tc(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},Ya(e))$a(t,n);else if(null!==(n=Pi(e,t,n,s))){nc(n,e,s,ec()),Ga(n,t,s)}}function Ka(e,t,n){var s=tc(e),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ya(e))$a(t,r);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(r.hasEagerState=!0,r.eagerState=o,os(o,a)){var l=t.interleaved;return null===l?(r.next=r,Ai(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(c){}null!==(n=Pi(e,t,r,s))&&(nc(n,e,s,r=ec()),Ga(n,t,s))}}function Ya(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function $a(e,t){da=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ga(e,t,n){if(0!==(4194240&n)){var s=t.lanes;n|=s&=e.pendingLanes,t.lanes=n,xt(e,n)}}var Ja={readContext:Ti,useCallback:ma,useContext:ma,useEffect:ma,useImperativeHandle:ma,useInsertionEffect:ma,useLayoutEffect:ma,useMemo:ma,useReducer:ma,useRef:ma,useState:ma,useDebugValue:ma,useDeferredValue:ma,useTransition:ma,useMutableSource:ma,useSyncExternalStore:ma,useId:ma,unstable_isNewReconciler:!1},Xa={readContext:Ti,useCallback:function(e,t){return ya().memoizedState=[e,void 0===t?null:t],e},useContext:Ti,useEffect:Ra,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Aa(4194308,4,Fa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Aa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Aa(4,2,e,t)},useMemo:function(e,t){var n=ya();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=ya();return t=void 0!==n?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Qa.bind(null,aa,e),[s.memoizedState,e]},useRef:function(e){return e={current:e},ya().memoizedState=e},useState:Ea,useDebugValue:za,useDeferredValue:function(e){return ya().memoizedState=e},useTransition:function(){var e=Ea(!1),t=e[0];return e=Ha.bind(null,e[1]),ya().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=aa,r=ya();if(ri){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===El)throw Error(i(349));0!==(30&ia)||Na(s,t,n)}r.memoizedState=n;var a={value:n,getSnapshot:t};return r.queue=a,Ra(Ca.bind(null,s,a,e),[e]),s.flags|=2048,Ta(9,_a.bind(null,s,a,n,t),void 0,null),n},useId:function(){var e=ya(),t=El.identifierPrefix;if(ri){var n=Jr;t=":"+t+"R"+(n=(Gr&~(1<<32-at(Gr)-1)).toString(32)+n),0<(n=ua++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ha++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Za={readContext:Ti,useCallback:qa,useContext:Ti,useEffect:Ma,useImperativeHandle:Ua,useInsertionEffect:La,useLayoutEffect:Oa,useMemo:Wa,useReducer:ba,useRef:Da,useState:function(){return ba(va)},useDebugValue:za,useDeferredValue:function(e){return Ba(xa(),oa.memoizedState,e)},useTransition:function(){return[ba(va)[0],xa().memoizedState]},useMutableSource:ja,useSyncExternalStore:ka,useId:Va,unstable_isNewReconciler:!1},eo={readContext:Ti,useCallback:qa,useContext:Ti,useEffect:Ma,useImperativeHandle:Ua,useInsertionEffect:La,useLayoutEffect:Oa,useMemo:Wa,useReducer:wa,useRef:Da,useState:function(){return wa(va)},useDebugValue:za,useDeferredValue:function(e){var t=xa();return null===oa?t.memoizedState=e:Ba(t,oa.memoizedState,e)},useTransition:function(){return[wa(va)[0],xa().memoizedState]},useMutableSource:ja,useSyncExternalStore:ka,useId:Va,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=O({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,s){n=null===(n=n(s,t=e.memoizedState))||void 0===n?t:O({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var so={isMounted:function(e){return!!(e=e._reactInternals)&&We(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=ec(),r=tc(e),i=Fi(s,r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Ui(e,i,r))&&(nc(t,e,r,s),zi(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=ec(),r=tc(e),i=Fi(s,r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Ui(e,i,r))&&(nc(t,e,r,s),zi(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),s=tc(e),r=Fi(n,s);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Ui(e,r,s))&&(nc(t,e,s,n),zi(t,e,s))}};function ro(e,t,n,s,r,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(s,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!ls(n,s)||!ls(r,i))}function io(e,t,n){var s=!1,r=Sr,i=t.contextType;return"object"===typeof i&&null!==i?i=Ti(i):(r=Ar(t)?Tr:Ir.current,i=(s=null!==(s=t.contextTypes)&&void 0!==s)?Dr(e,r):Sr),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=so,e.stateNode=t,t._reactInternals=e,s&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=i),t}function ao(e,t,n,s){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,s),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&so.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,s){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},Li(e);var i=t.contextType;"object"===typeof i&&null!==i?r.context=Ti(i):(i=Ar(t)?Tr:Ir.current,r.context=Dr(e,i)),r.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(no(e,t,i,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&so.enqueueReplaceState(r,r.state,null),Wi(e,n,r,s),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",s=t;do{n+=q(s),s=s.return}while(s);var r=n}catch(i){r="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:r,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ho="function"===typeof WeakMap?WeakMap:Map;function mo(e,t,n){(n=Fi(-1,n)).tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){Hl||(Hl=!0,Vl=s),uo(0,t)},n}function po(e,t,n){(n=Fi(-1,n)).tag=3;var s=e.type.getDerivedStateFromError;if("function"===typeof s){var r=t.value;n.payload=function(){return s(r)},n.callback=function(){uo(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof s&&(null===Ql?Ql=new Set([this]):Ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function fo(e,t,n){var s=e.pingCache;if(null===s){s=e.pingCache=new ho;var r=new Set;s.set(t,r)}else void 0===(r=s.get(t))&&(r=new Set,s.set(t,r));r.has(n)||(r.add(n),e=_c.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yo(e,t,n,s,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fi(-1,1)).tag=2,Ui(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var xo=b.ReactCurrentOwner,vo=!1;function bo(e,t,n,s){t.child=null===e?wi(t,null,n,s):bi(t,e.child,n,s)}function wo(e,t,n,s,r){n=n.render;var i=t.ref;return Ei(t,r),s=fa(e,t,n,s,i,r),n=ga(),null===e||vo?(ri&&n&&ei(t),t.flags|=1,bo(e,t,s,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ho(e,t,r))}function jo(e,t,n,s,r){if(null===e){var i=n.type;return"function"!==typeof i||Ac(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,s,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,ko(e,t,i,s,r))}if(i=e.child,0===(e.lanes&r)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:ls)(a,s)&&e.ref===t.ref)return Ho(e,t,r)}return t.flags|=1,(e=Pc(i,s)).ref=t.ref,e.return=t,t.child=e}function ko(e,t,n,s,r){if(null!==e){var i=e.memoizedProps;if(ls(i,s)&&e.ref===t.ref){if(vo=!1,t.pendingProps=s=i,0===(e.lanes&r))return t.lanes=e.lanes,Ho(e,t,r);0!==(131072&e.flags)&&(vo=!0)}}return Co(e,t,n,s,r)}function No(e,t,n){var s=t.pendingProps,r=s.children,i=null!==e?e.memoizedState:null;if("hidden"===s.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cr(Pl,Al),Al|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Cr(Pl,Al),Al|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=null!==i?i.baseLanes:n,Cr(Pl,Al),Al|=s}else null!==i?(s=i.baseLanes|n,t.memoizedState=null):s=n,Cr(Pl,Al),Al|=s;return bo(e,t,r,n),t.child}function _o(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Co(e,t,n,s,r){var i=Ar(n)?Tr:Ir.current;return i=Dr(t,i),Ei(t,r),n=fa(e,t,n,s,i,r),s=ga(),null===e||vo?(ri&&s&&ei(t),t.flags|=1,bo(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ho(e,t,r))}function So(e,t,n,s,r){if(Ar(n)){var i=!0;Lr(t)}else i=!1;if(Ei(t,r),null===t.stateNode)Bo(e,t),io(t,n,s),oo(t,n,s,r),s=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ti(c):c=Dr(t,c=Ar(n)?Tr:Ir.current);var d=n.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof a.getSnapshotBeforeUpdate;u||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==s||l!==c)&&ao(t,a,s,c),Mi=!1;var h=t.memoizedState;a.state=h,Wi(t,s,a,r),l=t.memoizedState,o!==s||h!==l||Er.current||Mi?("function"===typeof d&&(no(t,n,d,s),l=t.memoizedState),(o=Mi||ro(t,n,o,s,h,l,c))?(u||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=l),a.props=s,a.state=l,a.context=c,s=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),s=!1)}else{a=t.stateNode,Oi(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),a.props=c,u=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ti(l):l=Dr(t,l=Ar(n)?Tr:Ir.current);var m=n.getDerivedStateFromProps;(d="function"===typeof m||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==u||h!==l)&&ao(t,a,s,l),Mi=!1,h=t.memoizedState,a.state=h,Wi(t,s,a,r);var p=t.memoizedState;o!==u||h!==p||Er.current||Mi?("function"===typeof m&&(no(t,n,m,s),p=t.memoizedState),(c=Mi||ro(t,n,c,s,h,p,l)||!1)?(d||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(s,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(s,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=p),a.props=s,a.state=p,a.context=l,s=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),s=!1)}return Io(e,t,n,s,i,r)}function Io(e,t,n,s,r,i){_o(e,t);var a=0!==(128&t.flags);if(!s&&!a)return r&&Or(t,n,!1),Ho(e,t,i);s=t.stateNode,xo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:s.render();return t.flags|=1,null!==e&&a?(t.child=bi(t,e.child,null,i),t.child=bi(t,null,o,i)):bo(e,t,o,i),t.memoizedState=s.state,r&&Or(t,n,!0),t.child}function Eo(e){var t=e.stateNode;t.pendingContext?Rr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Rr(0,t.context,!1),$i(e,t.containerInfo)}function To(e,t,n,s,r){return mi(),pi(r),t.flags|=256,bo(e,t,n,s),t.child}var Do,Ao,Po,Ro,Mo={dehydrated:null,treeContext:null,retryLane:0};function Lo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Oo(e,t,n){var s,r=t.pendingProps,a=Zi.current,o=!1,l=0!==(128&t.flags);if((s=l)||(s=(null===e||null!==e.memoizedState)&&0!==(2&a)),s?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Cr(Zi,1&a),null===e)return ci(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,o?(r=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Lc(l,r,0,null),e=Mc(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Lo(n),t.memoizedState=Mo,e):Fo(t,l));if(null!==(a=e.memoizedState)&&null!==(s=a.dehydrated))return function(e,t,n,s,r,a,o){if(n)return 256&t.flags?(t.flags&=-257,Uo(e,t,o,s=co(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=s.fallback,r=t.mode,s=Lc({mode:"visible",children:s.children},r,0,null),(a=Mc(a,r,o,null)).flags|=2,s.return=t,a.return=t,s.sibling=a,t.child=s,0!==(1&t.mode)&&bi(t,e.child,null,o),t.child.memoizedState=Lo(o),t.memoizedState=Mo,a);if(0===(1&t.mode))return Uo(e,t,o,null);if("$!"===r.data){if(s=r.nextSibling&&r.nextSibling.dataset)var l=s.dgst;return s=l,Uo(e,t,o,s=co(a=Error(i(419)),s,void 0))}if(l=0!==(o&e.childLanes),vo||l){if(null!==(s=El)){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(s.suspendedLanes|o))?0:r)&&r!==a.retryLane&&(a.retryLane=r,Ri(e,r),nc(s,e,r,-1))}return fc(),Uo(e,t,o,s=co(Error(i(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Sc.bind(null,e),r._reactRetry=t,null):(e=a.treeContext,si=cr(r.nextSibling),ni=t,ri=!0,ii=null,null!==e&&(Kr[Yr++]=Gr,Kr[Yr++]=Jr,Kr[Yr++]=$r,Gr=e.id,Jr=e.overflow,$r=t),t=Fo(t,s.children),t.flags|=4096,t)}(e,t,l,r,s,a,n);if(o){o=r.fallback,l=t.mode,s=(a=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==a?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=Pc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==s?o=Pc(s,o):(o=Mc(o,l,n,null)).flags|=2,o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,l=null===(l=e.child.memoizedState)?Lo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Mo,r}return e=(o=e.child).sibling,r=Pc(o,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Fo(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Uo(e,t,n,s){return null!==s&&pi(s),bi(t,e.child,null,n),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zo(e,t,n){e.lanes|=t;var s=e.alternate;null!==s&&(s.lanes|=t),Ii(e.return,t,n)}function qo(e,t,n,s,r){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function Wo(e,t,n){var s=t.pendingProps,r=s.revealOrder,i=s.tail;if(bo(e,t,s.children,n),0!==(2&(s=Zi.current)))s=1&s|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zo(e,n,t);else if(19===e.tag)zo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Cr(Zi,s),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),qo(t,!1,r,n,i);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ea(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}qo(t,!0,n,null,i);break;case"together":qo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Vo(e,t){if(!ri)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;null!==n;)null!==n.alternate&&(s=n),n=n.sibling;null===s?t||null===e.tail?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Qo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,s=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,s|=14680064&r.subtreeFlags,s|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function Ko(e,t,n){var s=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qo(t),null;case 1:case 17:return Ar(t.type)&&Pr(),Qo(t),null;case 3:return s=t.stateNode,Gi(),_r(Er),_r(Ir),na(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),null!==e&&null!==e.child||(ui(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(ac(ii),ii=null))),Ao(e,t),Qo(t),null;case 5:Xi(t);var r=Yi(Ki.current);if(n=t.type,null!==e&&null!=t.stateNode)Po(e,t,n,s,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(null===t.stateNode)throw Error(i(166));return Qo(t),null}if(e=Yi(Vi.current),ui(t)){s=t.stateNode,n=t.type;var a=t.memoizedProps;switch(s[hr]=t,s[mr]=a,e=0!==(1&t.mode),n){case"dialog":Us("cancel",s),Us("close",s);break;case"iframe":case"object":case"embed":Us("load",s);break;case"video":case"audio":for(r=0;r<Ms.length;r++)Us(Ms[r],s);break;case"source":Us("error",s);break;case"img":case"image":case"link":Us("error",s),Us("load",s);break;case"details":Us("toggle",s);break;case"input":G(s,a),Us("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},Us("invalid",s);break;case"textarea":re(s,a),Us("invalid",s)}for(var l in xe(n,a),r=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?s.textContent!==c&&(!0!==a.suppressHydrationWarning&&Xs(s.textContent,c,e),r=["children",c]):"number"===typeof c&&s.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Xs(s.textContent,c,e),r=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Us("scroll",s)}switch(n){case"input":Q(s),Z(s,a,!0);break;case"textarea":Q(s),ae(s);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(s.onclick=Zs)}s=r,t.updateQueue=s,null!==s&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof s.is?e=l.createElement(n,{is:s.is}):(e=l.createElement(n),"select"===n&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,n),e[hr]=t,e[mr]=s,Do(e,t,!1,!1),t.stateNode=e;e:{switch(l=ve(n,s),n){case"dialog":Us("cancel",e),Us("close",e),r=s;break;case"iframe":case"object":case"embed":Us("load",e),r=s;break;case"video":case"audio":for(r=0;r<Ms.length;r++)Us(Ms[r],e);r=s;break;case"source":Us("error",e),r=s;break;case"img":case"image":case"link":Us("error",e),Us("load",e),r=s;break;case"details":Us("toggle",e),r=s;break;case"input":G(e,s),r=$(e,s),Us("invalid",e);break;case"option":default:r=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},r=O({},s,{value:void 0}),Us("invalid",e);break;case"textarea":re(e,s),r=se(e,s),Us("invalid",e)}for(a in xe(n,r),c=r)if(c.hasOwnProperty(a)){var d=c[a];"style"===a?ge(e,d):"dangerouslySetInnerHTML"===a?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===a?"string"===typeof d?("textarea"!==n||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=d&&"onScroll"===a&&Us("scroll",e):null!=d&&v(e,a,d,l))}switch(n){case"input":Q(e),Z(e,s,!1);break;case"textarea":Q(e),ae(e);break;case"option":null!=s.value&&e.setAttribute("value",""+H(s.value));break;case"select":e.multiple=!!s.multiple,null!=(a=s.value)?ne(e,!!s.multiple,a,!1):null!=s.defaultValue&&ne(e,!!s.multiple,s.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Zs)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Qo(t),null;case 6:if(e&&null!=t.stateNode)Ro(e,t,e.memoizedProps,s);else{if("string"!==typeof s&&null===t.stateNode)throw Error(i(166));if(n=Yi(Ki.current),Yi(Vi.current),ui(t)){if(s=t.stateNode,n=t.memoizedProps,s[hr]=t,(a=s.nodeValue!==n)&&null!==(e=ni))switch(e.tag){case 3:Xs(s.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xs(s.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(s=(9===n.nodeType?n:n.ownerDocument).createTextNode(s))[hr]=t,t.stateNode=s}return Qo(t),null;case 13:if(_r(Zi),s=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ri&&null!==si&&0!==(1&t.mode)&&0===(128&t.flags))hi(),mi(),t.flags|=98560,a=!1;else if(a=ui(t),null!==s&&null!==s.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[hr]=t}else mi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Qo(t),a=!1}else null!==ii&&(ac(ii),ii=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((s=null!==s)!==(null!==e&&null!==e.memoizedState)&&s&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zi.current)?0===Rl&&(Rl=3):fc())),null!==t.updateQueue&&(t.flags|=4),Qo(t),null);case 4:return Gi(),Ao(e,t),null===e&&Ws(t.stateNode.containerInfo),Qo(t),null;case 10:return Si(t.type._context),Qo(t),null;case 19:if(_r(Zi),null===(a=t.memoizedState))return Qo(t),null;if(s=0!==(128&t.flags),null===(l=a.rendering))if(s)Vo(a,!1);else{if(0!==Rl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,Vo(a,!1),null!==(s=l.updateQueue)&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;null!==n;)e=s,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Cr(Zi,1&Zi.current|2),t.child}e=e.sibling}null!==a.tail&&Je()>Wl&&(t.flags|=128,s=!0,Vo(a,!1),t.lanes=4194304)}else{if(!s)if(null!==(e=ea(l))){if(t.flags|=128,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Vo(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!ri)return Qo(t),null}else 2*Je()-a.renderingStartTime>Wl&&1073741824!==n&&(t.flags|=128,s=!0,Vo(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Je(),t.sibling=null,n=Zi.current,Cr(Zi,s?1&n|2:1&n),t):(Qo(t),null);case 22:case 23:return uc(),s=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==s&&(t.flags|=8192),s&&0!==(1&t.mode)?0!==(1073741824&Al)&&(Qo(t),6&t.subtreeFlags&&(t.flags|=8192)):Qo(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Yo(e,t){switch(ti(t),t.tag){case 1:return Ar(t.type)&&Pr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Gi(),_r(Er),_r(Ir),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xi(t),null;case 13:if(_r(Zi),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));mi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return _r(Zi),null;case 4:return Gi(),null;case 10:return Si(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Do=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ao=function(){},Po=function(e,t,n,s){var r=e.memoizedProps;if(r!==s){e=t.stateNode,Yi(Vi.current);var i,a=null;switch(n){case"input":r=$(e,r),s=$(e,s),a=[];break;case"select":r=O({},r,{value:void 0}),s=O({},s,{value:void 0}),a=[];break;case"textarea":r=se(e,r),s=se(e,s),a=[];break;default:"function"!==typeof r.onClick&&"function"===typeof s.onClick&&(e.onclick=Zs)}for(d in xe(n,s),n=null,r)if(!s.hasOwnProperty(d)&&r.hasOwnProperty(d)&&null!=r[d])if("style"===d){var l=r[d];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in s){var c=s[d];if(l=null!=r?r[d]:void 0,s.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Us("scroll",e),a||l===c||(a=[])):(a=a||[]).push(d,c))}n&&(a=a||[]).push("style",n);var d=a;(t.updateQueue=d)&&(t.flags|=4)}},Ro=function(e,t,n,s){n!==s&&(t.flags|=4)};var $o=!1,Go=!1,Jo="function"===typeof WeakSet?WeakSet:Set,Xo=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(s){Nc(e,t,s)}else n.current=null}function el(e,t,n){try{n()}catch(s){Nc(e,t,s)}}var tl=!1;function nl(e,t,n){var s=t.updateQueue;if(null!==(s=null!==s?s.lastEffect:null)){var r=s=s.next;do{if((r.tag&e)===e){var i=r.destroy;r.destroy=void 0,void 0!==i&&el(t,n,i)}r=r.next}while(r!==s)}}function sl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function rl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hr],delete t[mr],delete t[fr],delete t[gr],delete t[yr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zs));else if(4!==s&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==s&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var dl=null,ul=!1;function hl(e,t,n){for(n=n.child;null!==n;)ml(e,t,n),n=n.sibling}function ml(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(rt,n)}catch(o){}switch(n.tag){case 5:Go||Zo(n,t);case 6:var s=dl,r=ul;dl=null,hl(e,t,n),ul=r,null!==(dl=s)&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),Wt(e)):lr(dl,n.stateNode));break;case 4:s=dl,r=ul,dl=n.stateNode.containerInfo,ul=!0,hl(e,t,n),dl=s,ul=r;break;case 0:case 11:case 14:case 15:if(!Go&&(null!==(s=n.updateQueue)&&null!==(s=s.lastEffect))){r=s=s.next;do{var i=r,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&el(n,t,a),r=r.next}while(r!==s)}hl(e,t,n);break;case 1:if(!Go&&(Zo(n,t),"function"===typeof(s=n.stateNode).componentWillUnmount))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(o){Nc(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Go=(s=Go)||null!==n.memoizedState,hl(e,t,n),Go=s):hl(e,t,n);break;default:hl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Jo),t.forEach((function(t){var s=Ic.bind(null,e,t);n.has(t)||(n.add(t),t.then(s,s))}))}}function fl(e,t){var n=t.deletions;if(null!==n)for(var s=0;s<n.length;s++){var r=n[s];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(i(160));ml(a,o,r),dl=null,ul=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(d){Nc(r,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),yl(e),4&s){try{nl(3,e,e.return),sl(3,e)}catch(g){Nc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Nc(e,e.return,g)}}break;case 1:fl(t,e),yl(e),512&s&&null!==n&&Zo(n,n.return);break;case 5:if(fl(t,e),yl(e),512&s&&null!==n&&Zo(n,n.return),32&e.flags){var r=e.stateNode;try{he(r,"")}catch(g){Nc(e,e.return,g)}}if(4&s&&null!=(r=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&J(r,a),ve(l,o);var d=ve(l,a);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];"style"===u?ge(r,h):"dangerouslySetInnerHTML"===u?ue(r,h):"children"===u?he(r,h):v(r,u,h,d)}switch(l){case"input":X(r,a);break;case"textarea":ie(r,a);break;case"select":var m=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(r,!!a.multiple,p,!1):m!==!!a.multiple&&(null!=a.defaultValue?ne(r,!!a.multiple,a.defaultValue,!0):ne(r,!!a.multiple,a.multiple?[]:"",!1))}r[mr]=a}catch(g){Nc(e,e.return,g)}}break;case 6:if(fl(t,e),yl(e),4&s){if(null===e.stateNode)throw Error(i(162));r=e.stateNode,a=e.memoizedProps;try{r.nodeValue=a}catch(g){Nc(e,e.return,g)}}break;case 3:if(fl(t,e),yl(e),4&s&&null!==n&&n.memoizedState.isDehydrated)try{Wt(t.containerInfo)}catch(g){Nc(e,e.return,g)}break;case 4:default:fl(t,e),yl(e);break;case 13:fl(t,e),yl(e),8192&(r=e.child).flags&&(a=null!==r.memoizedState,r.stateNode.isHidden=a,!a||null!==r.alternate&&null!==r.alternate.memoizedState||(ql=Je())),4&s&&pl(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Go=(d=Go)||u,fl(t,e),Go=d):fl(t,e),yl(e),8192&s){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Xo=e,u=e.child;null!==u;){for(h=Xo=u;null!==Xo;){switch(p=(m=Xo).child,m.tag){case 0:case 11:case 14:case 15:nl(4,m,m.return);break;case 1:Zo(m,m.return);var f=m.stateNode;if("function"===typeof f.componentWillUnmount){s=m,n=m.return;try{t=s,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(g){Nc(s,n,g)}}break;case 5:Zo(m,m.return);break;case 22:if(null!==m.memoizedState){wl(h);continue}}null!==p?(p.return=m,Xo=p):wl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{r=h.stateNode,d?"function"===typeof(a=r.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",o))}catch(g){Nc(e,e.return,g)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){Nc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fl(t,e),yl(e),4&s&&pl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var s=n;break e}n=n.return}throw Error(i(160))}switch(s.tag){case 5:var r=s.stateNode;32&s.flags&&(he(r,""),s.flags&=-33),cl(e,ol(e),r);break;case 3:case 4:var a=s.stateNode.containerInfo;ll(e,ol(e),a);break;default:throw Error(i(161))}}catch(o){Nc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function xl(e,t,n){Xo=e,vl(e,t,n)}function vl(e,t,n){for(var s=0!==(1&e.mode);null!==Xo;){var r=Xo,i=r.child;if(22===r.tag&&s){var a=null!==r.memoizedState||$o;if(!a){var o=r.alternate,l=null!==o&&null!==o.memoizedState||Go;o=$o;var c=Go;if($o=a,(Go=l)&&!c)for(Xo=r;null!==Xo;)l=(a=Xo).child,22===a.tag&&null!==a.memoizedState?jl(r):null!==l?(l.return=a,Xo=l):jl(r);for(;null!==i;)Xo=i,vl(i,t,n),i=i.sibling;Xo=r,$o=o,Go=c}bl(e)}else 0!==(8772&r.subtreeFlags)&&null!==i?(i.return=r,Xo=i):bl(e)}}function bl(e){for(;null!==Xo;){var t=Xo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Go||sl(5,t);break;case 1:var s=t.stateNode;if(4&t.flags&&!Go)if(null===n)s.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Bi(t,a,s);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Bi(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Wt(h)}}}break;default:throw Error(i(163))}Go||512&t.flags&&rl(t)}catch(m){Nc(t,t.return,m)}}if(t===e){Xo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xo=n;break}Xo=t.return}}function wl(e){for(;null!==Xo;){var t=Xo;if(t===e){Xo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xo=n;break}Xo=t.return}}function jl(e){for(;null!==Xo;){var t=Xo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{sl(4,t)}catch(l){Nc(t,n,l)}break;case 1:var s=t.stateNode;if("function"===typeof s.componentDidMount){var r=t.return;try{s.componentDidMount()}catch(l){Nc(t,r,l)}}var i=t.return;try{rl(t)}catch(l){Nc(t,i,l)}break;case 5:var a=t.return;try{rl(t)}catch(l){Nc(t,a,l)}}}catch(l){Nc(t,t.return,l)}if(t===e){Xo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Xo=o;break}Xo=t.return}}var kl,Nl=Math.ceil,_l=b.ReactCurrentDispatcher,Cl=b.ReactCurrentOwner,Sl=b.ReactCurrentBatchConfig,Il=0,El=null,Tl=null,Dl=0,Al=0,Pl=Nr(0),Rl=0,Ml=null,Ll=0,Ol=0,Fl=0,Ul=null,zl=null,ql=0,Wl=1/0,Bl=null,Hl=!1,Vl=null,Ql=null,Kl=!1,Yl=null,$l=0,Gl=0,Jl=null,Xl=-1,Zl=0;function ec(){return 0!==(6&Il)?Je():-1!==Xl?Xl:Xl=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Il)&&0!==Dl?Dl&-Dl:null!==fi.transition?(0===Zl&&(Zl=ft()),Zl):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Gt(e.type)}function nc(e,t,n,s){if(50<Gl)throw Gl=0,Jl=null,Error(i(185));yt(e,n,s),0!==(2&Il)&&e===El||(e===El&&(0===(2&Il)&&(Ol|=n),4===Rl&&oc(e,Dl)),sc(e,s),1===n&&0===Il&&0===(1&t.mode)&&(Wl=Je()+500,Ur&&Wr()))}function sc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,r=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-at(i),o=1<<a,l=r[a];-1===l?0!==(o&n)&&0===(o&s)||(r[a]=mt(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}(e,t);var s=ht(e,e===El?Dl:0);if(0===s)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Ur=!0,qr(e)}(lc.bind(null,e)):qr(lc.bind(null,e)),ar((function(){0===(6&Il)&&Wr()})),n=null;else{switch(bt(s)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=st}n=Ec(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Xl=-1,Zl=0,0!==(6&Il))throw Error(i(327));var n=e.callbackNode;if(jc()&&e.callbackNode!==n)return null;var s=ht(e,e===El?Dl:0);if(0===s)return null;if(0!==(30&s)||0!==(s&e.expiredLanes)||t)t=gc(e,s);else{t=s;var r=Il;Il|=2;var a=pc();for(El===e&&Dl===t||(Bl=null,Wl=Je()+500,hc(e,t));;)try{xc();break}catch(l){mc(e,l)}Ci(),_l.current=a,Il=r,null!==Tl?t=0:(El=null,Dl=0,t=Rl)}if(0!==t){if(2===t&&(0!==(r=pt(e))&&(s=r,t=ic(e,r))),1===t)throw n=Ml,hc(e,0),oc(e,s),sc(e,Je()),n;if(6===t)oc(e,s);else{if(r=e.current.alternate,0===(30&s)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!os(i(),r))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=gc(e,s))&&(0!==(a=pt(e))&&(s=a,t=ic(e,a))),1===t))throw n=Ml,hc(e,0),oc(e,s),sc(e,Je()),n;switch(e.finishedWork=r,e.finishedLanes=s,t){case 0:case 1:throw Error(i(345));case 2:case 5:wc(e,zl,Bl);break;case 3:if(oc(e,s),(130023424&s)===s&&10<(t=ql+500-Je())){if(0!==ht(e,0))break;if(((r=e.suspendedLanes)&s)!==s){ec(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=sr(wc.bind(null,e,zl,Bl),t);break}wc(e,zl,Bl);break;case 4:if(oc(e,s),(4194240&s)===s)break;for(t=e.eventTimes,r=-1;0<s;){var o=31-at(s);a=1<<o,(o=t[o])>r&&(r=o),s&=~a}if(s=r,10<(s=(120>(s=Je()-s)?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Nl(s/1960))-s)){e.timeoutHandle=sr(wc.bind(null,e,zl,Bl),s);break}wc(e,zl,Bl);break;default:throw Error(i(329))}}}return sc(e,Je()),e.callbackNode===n?rc.bind(null,e):null}function ic(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=zl,zl=n,null!==t&&ac(t)),e}function ac(e){null===zl?zl=e:zl.push.apply(zl,e)}function oc(e,t){for(t&=~Fl,t&=~Ol,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),s=1<<n;e[n]=-1,t&=~s}}function lc(e){if(0!==(6&Il))throw Error(i(327));jc();var t=ht(e,0);if(0===(1&t))return sc(e,Je()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var s=pt(e);0!==s&&(t=s,n=ic(e,s))}if(1===n)throw n=Ml,hc(e,0),oc(e,t),sc(e,Je()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,zl,Bl),sc(e,Je()),null}function cc(e,t){var n=Il;Il|=1;try{return e(t)}finally{0===(Il=n)&&(Wl=Je()+500,Ur&&Wr())}}function dc(e){null!==Yl&&0===Yl.tag&&0===(6&Il)&&jc();var t=Il;Il|=1;var n=Sl.transition,s=vt;try{if(Sl.transition=null,vt=1,e)return e()}finally{vt=s,Sl.transition=n,0===(6&(Il=t))&&Wr()}}function uc(){Al=Pl.current,_r(Pl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Tl)for(n=Tl.return;null!==n;){var s=n;switch(ti(s),s.tag){case 1:null!==(s=s.type.childContextTypes)&&void 0!==s&&Pr();break;case 3:Gi(),_r(Er),_r(Ir),na();break;case 5:Xi(s);break;case 4:Gi();break;case 13:case 19:_r(Zi);break;case 10:Si(s.type._context);break;case 22:case 23:uc()}n=n.return}if(El=e,Tl=e=Pc(e.current,null),Dl=Al=t,Rl=0,Ml=null,Fl=Ol=Ll=0,zl=Ul=null,null!==Di){for(t=0;t<Di.length;t++)if(null!==(s=(n=Di[t]).interleaved)){n.interleaved=null;var r=s.next,i=n.pending;if(null!==i){var a=i.next;i.next=r,s.next=a}n.pending=s}Di=null}return e}function mc(e,t){for(;;){var n=Tl;try{if(Ci(),sa.current=Ja,ca){for(var s=aa.memoizedState;null!==s;){var r=s.queue;null!==r&&(r.pending=null),s=s.next}ca=!1}if(ia=0,la=oa=aa=null,da=!1,ua=0,Cl.current=null,null===n||null===n.return){Rl=1,Ml=t,Tl=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Dl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=go(o);if(null!==p){p.flags&=-257,yo(p,o,l,0,t),1&p.mode&&fo(a,d,t),c=d;var f=(t=p).updateQueue;if(null===f){var g=new Set;g.add(c),t.updateQueue=g}else f.add(c);break e}if(0===(1&t)){fo(a,d,t),fc();break e}c=Error(i(426))}else if(ri&&1&l.mode){var y=go(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),yo(y,o,l,0,t),pi(lo(c,l));break e}}a=c=lo(c,l),4!==Rl&&(Rl=2),null===Ul?Ul=[a]:Ul.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,qi(a,mo(0,c,t));break e;case 1:l=c;var x=a.type,v=a.stateNode;if(0===(128&a.flags)&&("function"===typeof x.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===Ql||!Ql.has(v)))){a.flags|=65536,t&=-t,a.lanes|=t,qi(a,po(a,l,t));break e}}a=a.return}while(null!==a)}bc(n)}catch(b){t=b,Tl===n&&null!==n&&(Tl=n=n.return);continue}break}}function pc(){var e=_l.current;return _l.current=Ja,null===e?Ja:e}function fc(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===El||0===(268435455&Ll)&&0===(268435455&Ol)||oc(El,Dl)}function gc(e,t){var n=Il;Il|=2;var s=pc();for(El===e&&Dl===t||(Bl=null,hc(e,t));;)try{yc();break}catch(r){mc(e,r)}if(Ci(),Il=n,_l.current=s,null!==Tl)throw Error(i(261));return El=null,Dl=0,Rl}function yc(){for(;null!==Tl;)vc(Tl)}function xc(){for(;null!==Tl&&!$e();)vc(Tl)}function vc(e){var t=kl(e.alternate,e,Al);e.memoizedProps=e.pendingProps,null===t?bc(e):Tl=t,Cl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ko(n,t,Al)))return void(Tl=n)}else{if(null!==(n=Yo(n,t)))return n.flags&=32767,void(Tl=n);if(null===e)return Rl=6,void(Tl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Tl=t);Tl=t=e}while(null!==t);0===Rl&&(Rl=5)}function wc(e,t,n){var s=vt,r=Sl.transition;try{Sl.transition=null,vt=1,function(e,t,n,s){do{jc()}while(null!==Yl);if(0!==(6&Il))throw Error(i(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-at(n),i=1<<r;t[r]=0,s[r]=-1,e[r]=-1,n&=~i}}(e,a),e===El&&(Tl=El=null,Dl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Ec(tt,(function(){return jc(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Sl.transition,Sl.transition=null;var o=vt;vt=1;var l=Il;Il|=4,Cl.current=null,function(e,t){if(er=Ht,ms(e=hs())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var s=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(s&&0!==s.rangeCount){n=s.anchorNode;var r=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var p;h!==n||0!==r&&3!==h.nodeType||(l=o+r),h!==a||0!==s&&3!==h.nodeType||(c=o+s),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)m=h,h=p;for(;;){if(h===e)break t;if(m===n&&++d===r&&(l=o),m===a&&++u===s&&(c=o),null!==(p=h.nextSibling))break;m=(h=m).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Ht=!1,Xo=t;null!==Xo;)if(e=(t=Xo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xo=e;else for(;null!==Xo;){t=Xo;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var g=f.memoizedProps,y=f.memoizedState,x=t.stateNode,v=x.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),y);x.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(i(163))}}catch(w){Nc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Xo=e;break}Xo=t.return}f=tl,tl=!1}(e,n),gl(n,e),ps(tr),Ht=!!er,tr=er=null,e.current=n,xl(n,e,r),Ge(),Il=l,vt=o,Sl.transition=a}else e.current=n;if(Kl&&(Kl=!1,Yl=e,$l=r),a=e.pendingLanes,0===a&&(Ql=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),sc(e,Je()),null!==t)for(s=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(Hl)throw Hl=!1,e=Vl,Vl=null,e;0!==(1&$l)&&0!==e.tag&&jc(),a=e.pendingLanes,0!==(1&a)?e===Jl?Gl++:(Gl=0,Jl=e):Gl=0,Wr()}(e,t,n,s)}finally{Sl.transition=r,vt=s}return null}function jc(){if(null!==Yl){var e=bt($l),t=Sl.transition,n=vt;try{if(Sl.transition=null,vt=16>e?16:e,null===Yl)var s=!1;else{if(e=Yl,Yl=null,$l=0,0!==(6&Il))throw Error(i(331));var r=Il;for(Il|=4,Xo=e.current;null!==Xo;){var a=Xo,o=a.child;if(0!==(16&Xo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Xo=d;null!==Xo;){var u=Xo;switch(u.tag){case 0:case 11:case 15:nl(8,u,a)}var h=u.child;if(null!==h)h.return=u,Xo=h;else for(;null!==Xo;){var m=(u=Xo).sibling,p=u.return;if(il(u),u===d){Xo=null;break}if(null!==m){m.return=p,Xo=m;break}Xo=p}}}var f=a.alternate;if(null!==f){var g=f.child;if(null!==g){f.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Xo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Xo=o;else e:for(;null!==Xo;){if(0!==(2048&(a=Xo).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var x=a.sibling;if(null!==x){x.return=a.return,Xo=x;break e}Xo=a.return}}var v=e.current;for(Xo=v;null!==Xo;){var b=(o=Xo).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,Xo=b;else e:for(o=v;null!==Xo;){if(0!==(2048&(l=Xo).flags))try{switch(l.tag){case 0:case 11:case 15:sl(9,l)}}catch(j){Nc(l,l.return,j)}if(l===o){Xo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Xo=w;break e}Xo=l.return}}if(Il=r,Wr(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(rt,e)}catch(j){}s=!0}return s}finally{vt=n,Sl.transition=t}}return!1}function kc(e,t,n){e=Ui(e,t=mo(0,t=lo(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),sc(e,t))}function Nc(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var s=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof s.componentDidCatch&&(null===Ql||!Ql.has(s))){t=Ui(t,e=po(t,e=lo(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),sc(t,e));break}}t=t.return}}function _c(e,t,n){var s=e.pingCache;null!==s&&s.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,El===e&&(Dl&n)===n&&(4===Rl||3===Rl&&(130023424&Dl)===Dl&&500>Je()-ql?hc(e,0):Fl|=n),sc(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=ec();null!==(e=Ri(e,t))&&(yt(e,t,n),sc(e,n))}function Sc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Ic(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(i(314))}null!==s&&s.delete(t),Cc(e,n)}function Ec(e,t){return Ke(e,t)}function Tc(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dc(e,t,n,s){return new Tc(e,t,n,s)}function Ac(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Dc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,s,r,a){var o=2;if(s=e,"function"===typeof e)Ac(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case k:return Mc(n.children,r,a,t);case N:o=8,r|=8;break;case _:return(e=Dc(12,n,t,2|r)).elementType=_,e.lanes=a,e;case E:return(e=Dc(13,n,t,r)).elementType=E,e.lanes=a,e;case T:return(e=Dc(19,n,t,r)).elementType=T,e.lanes=a,e;case P:return Lc(n,r,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:o=10;break e;case S:o=9;break e;case I:o=11;break e;case D:o=14;break e;case A:o=16,s=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Dc(o,n,t,r)).elementType=e,t.type=s,t.lanes=a,t}function Mc(e,t,n,s){return(e=Dc(7,e,s,t)).lanes=n,e}function Lc(e,t,n,s){return(e=Dc(22,e,s,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Oc(e,t,n){return(e=Dc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Dc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,s,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,s,r,i,a,o,l){return e=new Uc(e,t,n,o,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Dc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Li(i),e}function qc(e){if(!e)return Sr;e:{if(We(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ar(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Ar(n))return Mr(e,n,t)}return t}function Wc(e,t,n,s,r,i,a,o,l){return(e=zc(n,s,!0,e,0,i,0,o,l)).context=qc(null),n=e.current,(i=Fi(s=ec(),r=tc(n))).callback=void 0!==t&&null!==t?t:null,Ui(n,i,r),e.current.lanes=r,yt(e,r,s),sc(e,s),e}function Bc(e,t,n,s){var r=t.current,i=ec(),a=tc(r);return n=qc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fi(i,a)).payload={element:e},null!==(s=void 0===s?null:s)&&(t.callback=s),null!==(e=Ui(r,t,a))&&(nc(e,r,a,i),zi(e,r,a)),a}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Qc(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Er.current)vo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return vo=!1,function(e,t,n){switch(t.tag){case 3:Eo(t),mi();break;case 5:Ji(t);break;case 1:Ar(t.type)&&Lr(t);break;case 4:$i(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,r=t.memoizedProps.value;Cr(ji,s._currentValue),s._currentValue=r;break;case 13:if(null!==(s=t.memoizedState))return null!==s.dehydrated?(Cr(Zi,1&Zi.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Oo(e,t,n):(Cr(Zi,1&Zi.current),null!==(e=Ho(e,t,n))?e.sibling:null);Cr(Zi,1&Zi.current);break;case 19:if(s=0!==(n&t.childLanes),0!==(128&e.flags)){if(s)return Wo(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Cr(Zi,Zi.current),s)break;return null;case 22:case 23:return t.lanes=0,No(e,t,n)}return Ho(e,t,n)}(e,t,n);vo=0!==(131072&e.flags)}else vo=!1,ri&&0!==(1048576&t.flags)&&Zr(t,Qr,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Bo(e,t),e=t.pendingProps;var r=Dr(t,Ir.current);Ei(t,n),r=fa(null,t,s,e,r,n);var a=ga();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ar(s)?(a=!0,Lr(t)):a=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Li(t),r.updater=so,t.stateNode=r,r._reactInternals=t,oo(t,s,e,n),t=Io(null,t,s,!0,a,n)):(t.tag=0,ri&&a&&ei(t),bo(null,t,r,n),t=t.child),t;case 16:s=t.elementType;e:{switch(Bo(e,t),e=t.pendingProps,s=(r=s._init)(s._payload),t.type=s,r=t.tag=function(e){if("function"===typeof e)return Ac(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===D)return 14}return 2}(s),e=to(s,e),r){case 0:t=Co(null,t,s,e,n);break e;case 1:t=So(null,t,s,e,n);break e;case 11:t=wo(null,t,s,e,n);break e;case 14:t=jo(null,t,s,to(s.type,e),n);break e}throw Error(i(306,s,""))}return t;case 0:return s=t.type,r=t.pendingProps,Co(e,t,s,r=t.elementType===s?r:to(s,r),n);case 1:return s=t.type,r=t.pendingProps,So(e,t,s,r=t.elementType===s?r:to(s,r),n);case 3:e:{if(Eo(t),null===e)throw Error(i(387));s=t.pendingProps,r=(a=t.memoizedState).element,Oi(e,t),Wi(t,s,null,n);var o=t.memoizedState;if(s=o.element,a.isDehydrated){if(a={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=To(e,t,s,n,r=lo(Error(i(423)),t));break e}if(s!==r){t=To(e,t,s,n,r=lo(Error(i(424)),t));break e}for(si=cr(t.stateNode.containerInfo.firstChild),ni=t,ri=!0,ii=null,n=wi(t,null,s,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(mi(),s===r){t=Ho(e,t,n);break e}bo(e,t,s,n)}t=t.child}return t;case 5:return Ji(t),null===e&&ci(t),s=t.type,r=t.pendingProps,a=null!==e?e.memoizedProps:null,o=r.children,nr(s,r)?o=null:null!==a&&nr(s,a)&&(t.flags|=32),_o(e,t),bo(e,t,o,n),t.child;case 6:return null===e&&ci(t),null;case 13:return Oo(e,t,n);case 4:return $i(t,t.stateNode.containerInfo),s=t.pendingProps,null===e?t.child=bi(t,null,s,n):bo(e,t,s,n),t.child;case 11:return s=t.type,r=t.pendingProps,wo(e,t,s,r=t.elementType===s?r:to(s,r),n);case 7:return bo(e,t,t.pendingProps,n),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,r=t.pendingProps,a=t.memoizedProps,o=r.value,Cr(ji,s._currentValue),s._currentValue=o,null!==a)if(os(a.value,o)){if(a.children===r.children&&!Er.current){t=Ho(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===s){if(1===a.tag){(c=Fi(-1,n&-n)).tag=2;var d=a.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ii(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(i(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ii(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}bo(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,s=t.pendingProps.children,Ei(t,n),s=s(r=Ti(r)),t.flags|=1,bo(e,t,s,n),t.child;case 14:return r=to(s=t.type,t.pendingProps),jo(e,t,s,r=to(s.type,r),n);case 15:return ko(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:to(s,r),Bo(e,t),t.tag=1,Ar(s)?(e=!0,Lr(t)):e=!1,Ei(t,n),io(t,s,r),oo(t,s,r,n),Io(null,t,s,!0,e,n);case 19:return Wo(e,t,n);case 22:return No(e,t,n)}throw Error(i(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Gc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,n,s,r){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof r){var o=r;r=function(){var e=Hc(a);o.call(e)}}Bc(t,a,e,r)}else a=function(e,t,n,s,r){if(r){if("function"===typeof s){var i=s;s=function(){var e=Hc(a);i.call(e)}}var a=Wc(t,s,e,0,null,!1,0,"",Xc);return e._reactRootContainer=a,e[pr]=a.current,Ws(8===e.nodeType?e.parentNode:e),dc(),a}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof s){var o=s;s=function(){var e=Hc(l);o.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[pr]=l.current,Ws(8===e.nodeType?e.parentNode:e),dc((function(){Bc(t,l,n,s)})),l}(n,t,e,r,s);return Hc(a)}$c.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Bc(e,t,null,null)},$c.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){Bc(null,e,null,null)})),t[pr]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ot(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(xt(t,1|n),sc(t,Je()),0===(6&Il)&&(Wl=Je()+500,Wr()))}break;case 13:dc((function(){var t=Ri(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Qc(e,1)}},jt=function(e){if(13===e.tag){var t=Ri(e,134217728);if(null!==t)nc(t,e,134217728,ec());Qc(e,134217728)}},kt=function(e){if(13===e.tag){var t=tc(e),n=Ri(e,t);if(null!==n)nc(n,e,t,ec());Qc(e,t)}},Nt=function(){return vt},_t=function(e,t){var n=vt;try{return vt=e,t()}finally{vt=n}},je=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var r=wr(s);if(!r)throw Error(i(90));K(s),X(s,r)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=cc,Ee=dc;var ed={usingClientEntryPoint:!1,Events:[vr,br,wr,Ce,Se,cc]},td={findFiberByHostInstance:xr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var sd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sd.isDisabled&&sd.supportsFiber)try{rt=sd.inject(nd),it=sd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Gc(t))throw Error(i(200));return function(e,t,n){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:j,key:null==s?null:""+s,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Gc(e))throw Error(i(299));var n=!1,s="",r=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(s=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,s,r),e[pr]=t.current,Ws(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(i(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Gc(e))throw Error(i(405));var s=null!=n&&n.hydratedSources||null,r=!1,a="",o=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Wc(t,null,e,1,null!=n?n:null,r,0,a,o),e[pr]=t.current,Ws(e),s)for(e=0;e<s.length;e++)r=(r=(n=s[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new $c(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(i(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(i(40));return!!e._reactRootContainer&&(dc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pr]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!Jc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Zc(e,t,n,!1,s)},t.version="18.3.1-next-f1338f8080-20240426"},352:(e,t,n)=>{"use strict";var s=n(119);t.createRoot=s.createRoot,t.hydrateRoot=s.hydrateRoot},378:(e,t,n)=>{var s=n(759);e.exports=function(){return s.Date.now()}},414:(e,t,n)=>{"use strict";e.exports=n(654)},491:(e,t,n)=>{var s=n(567),r=n(378),i=n(588),a=Math.max,o=Math.min;e.exports=function(e,t,n){var l,c,d,u,h,m,p=0,f=!1,g=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function x(t){var n=l,s=c;return l=c=void 0,p=t,u=e.apply(s,n)}function v(e){var n=e-m;return void 0===m||n>=t||n<0||g&&e-p>=d}function b(){var e=r();if(v(e))return w(e);h=setTimeout(b,function(e){var n=t-(e-m);return g?o(n,d-(e-p)):n}(e))}function w(e){return h=void 0,y&&l?x(e):(l=c=void 0,u)}function j(){var e=r(),n=v(e);if(l=arguments,c=this,m=e,n){if(void 0===h)return function(e){return p=e,h=setTimeout(b,t),f?x(e):u}(m);if(g)return clearTimeout(h),h=setTimeout(b,t),x(m)}return void 0===h&&(h=setTimeout(b,t)),u}return t=i(t)||0,s(n)&&(f=!!n.leading,d=(g="maxWait"in n)?a(i(n.maxWait)||0,t):d,y="trailing"in n?!!n.trailing:y),j.cancel=function(){void 0!==h&&clearTimeout(h),p=0,l=m=c=h=void 0},j.flush=function(){return void 0===h?u:w(r())},j}},526:(e,t,n)=>{"use strict";function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function r(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}n.d(t,{A:()=>r})},567:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},578:(e,t,n)=>{"use strict";n.d(t,{C3:()=>Cr,AU:()=>wr,Zy:()=>br,KR:()=>fr});var s=n(913),r=n(253),i=n(170),a=n(624);const o="@firebase/database",l="1.0.19";let c="";function d(e){c=e}class u{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,i.As)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,i.$L)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class h{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,i.gR)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const m=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new u(t)}}catch(t){}return new h},p=m("localStorage"),f=m("sessionStorage"),g=new a.Vy("@firebase/database"),y=function(){let e=1;return function(){return e++}}(),x=function(e){const t=(0,i.kj)(e),n=new i.gz;n.update(t);const s=n.digest();return i.K3.encodeByteArray(s)},v=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=v.apply(null,n):e+="object"===typeof n?(0,i.As)(n):n,e+=" "}return e};let b=null,w=!0;const j=function(e,t){(0,i.vA)(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(g.logLevel=a.$b.VERBOSE,b=g.log.bind(g),t&&f.set("logging_enabled",!0)):"function"===typeof e?b=e:(b=null,f.remove("logging_enabled"))},k=function(){if(!0===w&&(w=!1,null===b&&!0===f.get("logging_enabled")&&j(!0)),b){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const s=v.apply(null,t);b(s)}},N=function(e){return function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];k(e,...n)}},_=function(){const e="FIREBASE INTERNAL ERROR: "+v(...arguments);g.error(e)},C=function(){const e="FIREBASE FATAL ERROR: ".concat(v(...arguments));throw g.error(e),new Error(e)},S=function(){const e="FIREBASE WARNING: "+v(...arguments);g.warn(e)},I=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},E="[MIN_NAME]",T="[MAX_NAME]",D=function(e,t){if(e===t)return 0;if(e===E||t===T)return-1;if(t===E||e===T)return 1;{const n=U(e),s=U(t);return null!==n?null!==s?n-s===0?e.length-t.length:n-s:-1:null!==s?1:e<t?-1:1}},A=function(e,t){return e===t?0:e<t?-1:1},P=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+(0,i.As)(t))},R=function(e){if("object"!==typeof e||null===e)return(0,i.As)(e);const t=[];for(const s in e)t.push(s);t.sort();let n="{";for(let s=0;s<t.length;s++)0!==s&&(n+=","),n+=(0,i.As)(t[s]),n+=":",n+=R(e[t[s]]);return n+="}",n},M=function(e,t){const n=e.length;if(n<=t)return[e];const s=[];for(let r=0;r<n;r+=t)r+t>n?s.push(e.substring(r,n)):s.push(e.substring(r,r+t));return s};function L(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const O=function(e){(0,i.vA)(!I(e),"Invalid JSON number");const t=1023;let n,s,r,a,o;0===e?(s=0,r=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(a=Math.min(Math.floor(Math.log(e)/Math.LN2),t),s=a+t,r=Math.round(e*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,r=Math.round(e/Math.pow(2,-1074))));const l=[];for(o=52;o;o-=1)l.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(n?1:0),l.reverse();const c=l.join("");let d="";for(o=0;o<64;o+=8){let e=parseInt(c.substr(o,8),2).toString(16);1===e.length&&(e="0"+e),d+=e}return d.toLowerCase()};const F=new RegExp("^-?(0*)\\d{1,10}$"),U=function(e){if(F.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},z=function(e){try{e()}catch(t){setTimeout((()=>{const e=t.stack||"";throw S("Exception was thrown by user callback.",e),t}),Math.floor(0))}},q=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class W{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,(0,s.xZ)(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){S('Provided AppCheck credentials for the app named "'.concat(this.appName,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}class B{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(k("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',S(e)}}class H{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}H.OWNER="owner";const V="5",Q=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,K="ac",Y="websocket",$="long_polling";class G{constructor(e,t,n,s){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;this.secure=t,this.namespace=n,this.webSocketOnly=s,this.nodeAdmin=r,this.persistenceKey=i,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=o,this.emulatorOptions=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=p.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&p.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}function J(e,t,n){let s;if((0,i.vA)("string"===typeof t,"typeof type must == string"),(0,i.vA)("object"===typeof n,"typeof params must == object"),t===Y)s=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==$)throw new Error("Unknown connection type: "+t);s=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const r=[];return L(n,((e,t)=>{r.push(e+"="+t)})),s+r.join("&")}class X{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;(0,i.gR)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,i.A4)(this.counters_)}}const Z={},ee={};function te(e){const t=e.toString();return Z[t]||(Z[t]=new X),Z[t]}class ne{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&z((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const se="start";class re{constructor(e,t,n,s,r,i,a){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=s,this.authToken=r,this.transportSessionId=i,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=N(e),this.stats_=te(t),this.urlFn=e=>(this.appCheckToken&&(e[K]=this.appCheckToken),J(t,$,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new ne(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if((0,i.$g)()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new ie((function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];const[r,i,a,o,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,r===se)n.id=i,n.password=a;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);i?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(i,(()=>{n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];const[r,i]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(r,i)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[se]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=V,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[K]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&Q.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){re.forceAllow_=!0}static forceDisallow(){re.forceDisallow_=!0}static isAvailable(){return!(0,i.$g)()&&(!!re.forceAllow_||!re.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,i.As)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=(0,i.KA)(t),s=M(n,1840);for(let r=0;r<s.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[r]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,i.$g)())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,i.As)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class ie{constructor(e,t,n,s){if(this.onDisconnect=n,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,i.$g)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=y(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=ie.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const s="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(r){k("frame writing exception"),r.stack&&k(r.stack),k(r)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||k("No IE domain setting required")}catch(t){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",s=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+s+"="+e.seg+"&ts"+s+"="+e.ts+"&d"+s+"="+e.d,s++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},s=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(s),n()}))}addTag(e,t){(0,i.$g)()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{k("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(n){}}),Math.floor(1))}}let ae=null;"undefined"!==typeof MozWebSocket?ae=MozWebSocket:"undefined"!==typeof WebSocket&&(ae=WebSocket);class oe{constructor(e,t,n,s,r,i,a){this.connId=e,this.applicationId=n,this.appCheckToken=s,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=N(this.connId),this.stats_=te(t),this.connURL=oe.connectionURL_(t,i,a,s,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,s,r){const a={};return a.v=V,!(0,i.$g)()&&"undefined"!==typeof location&&location.hostname&&Q.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),s&&(a[K]=s),r&&(a.p=r),J(e,Y,a)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,p.set("previous_websocket_failure",!0);try{let e;if((0,i.$g)()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":"Firebase/".concat(V,"/").concat(c,"/").concat(process.platform,"/").concat(t),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"/hamptownControlPanel",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},s=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;s&&(e.proxy={origin:s})}this.mySock=new ae(this.connURL,[],e)}catch(n){this.log_("Error instantiating WebSocket.");const e=n.message||n.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){oe.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==ae&&!oe.forceDisallow_}static previouslyFailed(){return p.isInMemoryStorage||!0===p.get("previous_websocket_failure")}markConnectionHealthy(){p.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=(0,i.$L)(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,i.vA)(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=(0,i.As)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=M(t,16384);n.length>1&&this.sendString_(String(n.length));for(let s=0;s<n.length;s++)this.sendString_(n[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}oe.responsesRequiredToBeHealthy=2,oe.healthyTimeout=3e4;class le{static get ALL_TRANSPORTS(){return[re,oe]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=oe&&oe.isAvailable();let n=t&&!oe.previouslyFailed();if(e.webSocketOnly&&(t||S("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[oe];else{const e=this.transports_=[];for(const t of le.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);le.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}le.globalTransportInitialized_=!1;class ce{constructor(e,t,n,s,r,i,a,o,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=s,this.authToken_=r,this.onMessage_=i,this.onReady_=a,this.onDisconnect_=o,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=N("c:"+this.id+":"),this.transportManager_=new le(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=q((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=P("t",e),n=P("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=P("t",e),n=P("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=P("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?_("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):_("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),V!==n&&S("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),q((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):q((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(p.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class de{put(e,t,n,s){}merge(e,t,n,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class ue{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,i.vA)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];for(let e=0;e<r.length;e++)r[e].callback.apply(r[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const s=this.getInitialEvent(e);s&&t.apply(n,s)}off(e,t,n){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let r=0;r<s.length;r++)if(s[r].callback===t&&(!n||n===s[r].context))return void s.splice(r,1)}validateEventType_(e){(0,i.vA)(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class he extends ue{static getInstance(){return new he}constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||(0,i.jZ)()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}getInitialEvent(e){return(0,i.vA)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class me{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function pe(){return new me("")}function fe(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function ge(e){return e.pieces_.length-e.pieceNum_}function ye(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new me(e.pieces_,t)}function xe(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function ve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function be(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new me(t,0)}function we(e,t){const n=[];for(let s=e.pieceNum_;s<e.pieces_.length;s++)n.push(e.pieces_[s]);if(t instanceof me)for(let s=t.pieceNum_;s<t.pieces_.length;s++)n.push(t.pieces_[s]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new me(n,0)}function je(e){return e.pieceNum_>=e.pieces_.length}function ke(e,t){const n=fe(e),s=fe(t);if(null===n)return t;if(n===s)return ke(ye(e),ye(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Ne(e,t){if(ge(e)!==ge(t))return!1;for(let n=e.pieceNum_,s=t.pieceNum_;n<=e.pieces_.length;n++,s++)if(e.pieces_[n]!==t.pieces_[s])return!1;return!0}function _e(e,t){let n=e.pieceNum_,s=t.pieceNum_;if(ge(e)>ge(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[s])return!1;++n,++s}return!0}class Ce{constructor(e,t){this.errorPrefix_=t,this.parts_=ve(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=(0,i.OE)(this.parts_[n]);Se(this)}}function Se(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ie(e))}function Ie(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class Ee extends ue{static getInstance(){return new Ee}constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}getInitialEvent(e){return(0,i.vA)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Te=1e3;class De extends de{constructor(e,t,n,s,r,a,o,l){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=s,this.onServerInfoUpdate_=r,this.authTokenProvider_=a,this.appCheckTokenProvider_=o,this.authOverride_=l,this.id=De.nextPersistentConnectionId_++,this.log_=N("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Te,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!(0,i.$g)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ee.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&he.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const s=++this.requestNumber_,r={r:s,a:e,b:t};this.log_((0,i.As)(r)),(0,i.vA)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),n&&(this.requestCBHash_[s]=n)}get(e){this.initConnection_();const t=new i.cY,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),t.promise}listen(e,t,n,s){this.initConnection_();const r=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+r),this.listens.has(a)||this.listens.set(a,new Map),(0,i.vA)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,i.vA)(!this.listens.get(a).has(r),"listen() called twice for same path/queryId.");const o={onComplete:s,hashFn:t,query:e,tag:n};this.listens.get(a).set(r,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),s=t._queryIdentifier;this.log_("Listen on "+n+" for "+s);const r={p:n};e.tag&&(r.q=t._queryObject,r.t=e.tag),r.h=e.hashFn(),this.sendRequest("q",r,(r=>{const i=r.d,a=r.s;De.warnOnListenWarnings_(i,t);(this.listens.get(n)&&this.listens.get(n).get(s))===e&&(this.log_("listen response",r),"ok"!==a&&this.removeListen_(n,s),e.onComplete&&e.onComplete(a,i))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&(0,i.gR)(e,"w")){const n=(0,i.yw)(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();S("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(e," at ")+"".concat(n," to your security rules for better performance."))}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,i.qc)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=(0,i.Cv)(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,s=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,s))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+s),(0,i.vA)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,s)&&this.connected_&&this.sendUnlisten_(n,s,e._queryObject,t)}sendUnlisten_(e,t,n,s){this.log_("Unlisten on "+e+" for "+t);const r={p:e};s&&(r.q=n,r.t=s),this.sendRequest("n",r)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,s){const r={p:t,d:n};this.log_("onDisconnect "+e,r),this.sendRequest(e,r,(e=>{s&&setTimeout((()=>{s(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,s){this.putInternal("p",e,t,n,s)}merge(e,t,n,s){this.putInternal("m",e,t,n,s)}putInternal(e,t,n,s,r){this.initConnection_();const i={p:t,d:n};void 0!==r&&(i.h=r),this.outstandingPuts_.push({action:e,request:i,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,i.As)(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):_("Unrecognized action received from server: "+(0,i.As)(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,i.vA)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Te,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Te,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Te),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=Math.max(0,(new Date).getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+De.nextConnectionId_++,r=this.lastSessionId;let a=!1,o=null;const l=function(){o?o.close():(a=!0,n())},c=function(e){(0,i.vA)(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(e)};this.realtime_={close:l,sendRequest:c};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[i,l]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?k("getToken() completed but was canceled"):(k("getToken() completed. Creating connection."),this.authToken_=i&&i.accessToken,this.appCheckToken_=l&&l.token,o=new ce(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{S(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),r))}catch(_){this.log_("Failed to get token: "+_),a||(this.repoInfo_.nodeAdmin&&S(_),l())}}}interrupt(e){k("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){k("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,i.Im)(this.interruptReasons_)&&(this.reconnectDelay_=Te,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>R(e))).join("$"):"default";const s=this.removeListen_(e,n);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,t){const n=new me(e).toString();let s;if(this.listens.has(n)){const e=this.listens.get(n);s=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else s=void 0;return s}onAuthRevoked_(e,t){k("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){k("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";(0,i.$g)()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+c.replace(/\./g,"-")]=1,(0,i.jZ)()?e["framework.cordova"]=1:(0,i.lV)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=he.getInstance().currentlyOnline();return(0,i.Im)(this.interruptReasons_)&&e}}De.nextPersistentConnectionId_=0,De.nextConnectionId_=0;class Ae{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Ae(e,t)}}class Pe{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new Ae(E,e),s=new Ae(E,t);return 0!==this.compare(n,s)}minPost(){return Ae.MIN}}let Re;class Me extends Pe{static get __EMPTY_NODE(){return Re}static set __EMPTY_NODE(e){Re=e}compare(e,t){return D(e.name,t.name)}isDefinedOn(e){throw(0,i.Hk)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Ae.MIN}maxPost(){return new Ae(T,Re)}makePost(e,t){return(0,i.vA)("string"===typeof e,"KeyIndex indexValue must always be a string."),new Ae(e,Re)}toString(){return".key"}}const Le=new Me;class Oe{constructor(e,t,n,s){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=s,this.resultGenerator_=r,this.nodeStack_=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,s&&(i*=-1),i<0)e=this.isReverse_?e.left:e.right;else{if(0===i){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Fe{constructor(e,t,n,s,r){this.key=e,this.value=t,this.color=null!=n?n:Fe.RED,this.left=null!=s?s:Ue.EMPTY_NODE,this.right=null!=r?r:Ue.EMPTY_NODE}copy(e,t,n,s,r){return new Fe(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=s?s:this.left,null!=r?r:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let s=this;const r=n(e,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(e,t,n),null):0===r?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,n)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ue.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,s;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Ue.EMPTY_NODE;s=n.right.min_(),n=n.copy(s.key,s.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Fe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Fe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Fe.RED=!0,Fe.BLACK=!1;class Ue{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ue.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new Ue(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Fe.BLACK,null,null))}remove(e){return new Ue(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Fe.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,s=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return s?s.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(s=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Oe(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Oe(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Oe(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Oe(this.root_,null,this.comparator_,!0,e)}}function ze(e,t){return D(e.name,t.name)}function qe(e,t){return D(e,t)}let We;Ue.EMPTY_NODE=new class{copy(e,t,n,s,r){return this}insert(e,t,n){return new Fe(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Be=function(e){return"number"===typeof e?"number:"+O(e):"string:"+e},He=function(e){if(e.isLeafNode()){const t=e.val();(0,i.vA)("string"===typeof t||"number"===typeof t||"object"===typeof t&&(0,i.gR)(t,".sv"),"Priority must be a string or number.")}else(0,i.vA)(e===We||e.isEmpty(),"priority of unexpected type.");(0,i.vA)(e===We||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Ve,Qe,Ke;class Ye{static set __childrenNodeConstructor(e){Ve=e}static get __childrenNodeConstructor(){return Ve}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ye.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,(0,i.vA)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),He(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Ye(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:Ye.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return je(e)?this:".priority"===fe(e)?this.priorityNode_:Ye.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:Ye.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=fe(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:((0,i.vA)(".priority"!==n||1===ge(e),".priority must be the last token in a path"),this.updateImmediateChild(n,Ye.__childrenNodeConstructor.EMPTY_NODE.updateChild(ye(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Be(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?O(this.value_):this.value_,this.lazyHash_=x(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Ye.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Ye.__childrenNodeConstructor?-1:((0,i.vA)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,s=Ye.VALUE_TYPE_ORDER.indexOf(t),r=Ye.VALUE_TYPE_ORDER.indexOf(n);return(0,i.vA)(s>=0,"Unknown leaf type: "+t),(0,i.vA)(r>=0,"Unknown leaf type: "+n),s===r?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:r-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}Ye.VALUE_TYPE_ORDER=["object","boolean","number","string"];const $e=new class extends Pe{compare(e,t){const n=e.node.getPriority(),s=t.node.getPriority(),r=n.compareTo(s);return 0===r?D(e.name,t.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Ae.MIN}maxPost(){return new Ae(T,new Ye("[PRIORITY-POST]",Ke))}makePost(e,t){const n=Qe(e);return new Ae(t,new Ye("[PRIORITY-POST]",n))}toString(){return".priority"}},Ge=Math.log(2);class Je{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/Ge,10)),this.current_=this.count-1;const n=(s=this.count,parseInt(Array(s+1).join("1"),2));var s;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Xe=function(e,t,n,s){e.sort(t);const r=function(t,s){const i=s-t;let a,o;if(0===i)return null;if(1===i)return a=e[t],o=n?n(a):a,new Fe(o,a.node,Fe.BLACK,null,null);{const l=parseInt(i/2,10)+t,c=r(t,l),d=r(l+1,s);return a=e[l],o=n?n(a):a,new Fe(o,a.node,Fe.BLACK,c,d)}},i=function(t){let s=null,i=null,a=e.length;const o=function(t,s){const i=a-t,o=a;a-=t;const c=r(i+1,o),d=e[i],u=n?n(d):d;l(new Fe(u,d.node,s,null,c))},l=function(e){s?(s.left=e,s=e):(i=e,s=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),s=Math.pow(2,t.count-(e+1));n?o(s,Fe.BLACK):(o(s,Fe.BLACK),o(s,Fe.RED))}return i}(new Je(e.length));return new Ue(s||t,i)};let Ze;const et={};class tt{static get Default(){return(0,i.vA)(et&&$e,"ChildrenNode.ts has not been loaded"),Ze=Ze||new tt({".priority":et},{".priority":$e}),Ze}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=(0,i.yw)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ue?t:null}hasIndex(e){return(0,i.gR)(this.indexSet_,e.toString())}addIndex(e,t){(0,i.vA)(e!==Le,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let s=!1;const r=t.getIterator(Ae.Wrap);let a,o=r.getNext();for(;o;)s=s||e.isDefinedOn(o.node),n.push(o),o=r.getNext();a=s?Xe(n,e.getCompare()):et;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const d=Object.assign({},this.indexes_);return d[l]=a,new tt(d,c)}addToIndexes(e,t){const n=(0,i.kH)(this.indexes_,((n,s)=>{const r=(0,i.yw)(this.indexSet_,s);if((0,i.vA)(r,"Missing index implementation for "+s),n===et){if(r.isDefinedOn(e.node)){const n=[],s=t.getIterator(Ae.Wrap);let i=s.getNext();for(;i;)i.name!==e.name&&n.push(i),i=s.getNext();return n.push(e),Xe(n,r.getCompare())}return et}{const s=t.get(e.name);let r=n;return s&&(r=r.remove(new Ae(e.name,s))),r.insert(e,e.node)}}));return new tt(n,this.indexSet_)}removeFromIndexes(e,t){const n=(0,i.kH)(this.indexes_,(n=>{if(n===et)return n;{const s=t.get(e.name);return s?n.remove(new Ae(e.name,s)):n}}));return new tt(n,this.indexSet_)}}let nt;class st{static get EMPTY_NODE(){return nt||(nt=new st(new Ue(qe),null,tt.Default))}constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&He(this.priorityNode_),this.children_.isEmpty()&&(0,i.vA)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||nt}updatePriority(e){return this.children_.isEmpty()?this:new st(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?nt:t}}getChild(e){const t=fe(e);return null===t?this:this.getImmediateChild(t).getChild(ye(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if((0,i.vA)(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new Ae(e,t);let s,r;t.isEmpty()?(s=this.children_.remove(e),r=this.indexMap_.removeFromIndexes(n,this.children_)):(s=this.children_.insert(e,t),r=this.indexMap_.addToIndexes(n,this.children_));const i=s.isEmpty()?nt:this.priorityNode_;return new st(s,i,r)}}updateChild(e,t){const n=fe(e);if(null===n)return t;{(0,i.vA)(".priority"!==fe(e)||1===ge(e),".priority must be the last token in a path");const s=this.getImmediateChild(n).updateChild(ye(e),t);return this.updateImmediateChild(n,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,s=0,r=!0;if(this.forEachChild($e,((i,a)=>{t[i]=a.val(e),n++,r&&st.INTEGER_REGEXP_.test(i)?s=Math.max(s,Number(i)):r=!1})),!e&&r&&s<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Be(this.getPriority().val())+":"),this.forEachChild($e,((t,n)=>{const s=n.hash();""!==s&&(e+=":"+t+":"+s)})),this.lazyHash_=""===e?"":x(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const s=this.resolveIndex_(n);if(s){const n=s.getPredecessorKey(new Ae(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Ae(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Ae(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,Ae.Wrap);let s=n.peek();for(;null!=s&&t.compare(s,e)<0;)n.getNext(),s=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,Ae.Wrap);let s=n.peek();for(;null!=s&&t.compare(s,e)>0;)n.getNext(),s=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===rt?-1:0}withIndex(e){if(e===Le||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new st(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Le||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator($e),n=t.getIterator($e);let s=e.getNext(),r=n.getNext();for(;s&&r;){if(s.name!==r.name||!s.node.equals(r.node))return!1;s=e.getNext(),r=n.getNext()}return null===s&&null===r}return!1}return!1}}resolveIndex_(e){return e===Le?null:this.indexMap_.get(e.toString())}}st.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const rt=new class extends st{constructor(){super(new Ue(qe),st.EMPTY_NODE,tt.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return st.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Ae,{MIN:{value:new Ae(E,st.EMPTY_NODE)},MAX:{value:new Ae(T,rt)}}),Me.__EMPTY_NODE=st.EMPTY_NODE,Ye.__childrenNodeConstructor=st,We=rt,function(e){Ke=e}(rt);function it(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return st.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),(0,i.vA)(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new Ye(e,it(t))}if(e instanceof Array){let n=st.EMPTY_NODE;return L(e,((t,s)=>{if((0,i.gR)(e,t)&&"."!==t.substring(0,1)){const e=it(s);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(it(t))}{const n=[];let s=!1;if(L(e,((e,t)=>{if("."!==e.substring(0,1)){const r=it(t);r.isEmpty()||(s=s||!r.getPriority().isEmpty(),n.push(new Ae(e,r)))}})),0===n.length)return st.EMPTY_NODE;const r=Xe(n,ze,(e=>e.name),qe);if(s){const e=Xe(n,$e.getCompare());return new st(r,it(t),new tt({".priority":e},{".priority":$e}))}return new st(r,it(t),tt.Default)}}!function(e){Qe=e}(it);class at extends Pe{constructor(e){super(),this.indexPath_=e,(0,i.vA)(!je(e)&&".priority"!==fe(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),s=this.extractChild(t.node),r=n.compareTo(s);return 0===r?D(e.name,t.name):r}makePost(e,t){const n=it(e),s=st.EMPTY_NODE.updateChild(this.indexPath_,n);return new Ae(t,s)}maxPost(){const e=st.EMPTY_NODE.updateChild(this.indexPath_,rt);return new Ae(T,e)}toString(){return ve(this.indexPath_,0).join("/")}}const ot=new class extends Pe{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?D(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Ae.MIN}maxPost(){return Ae.MAX}makePost(e,t){const n=it(e);return new Ae(t,n)}toString(){return".value"}};function lt(e){return{type:"value",snapshotNode:e}}function ct(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function dt(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function ut(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class ht{constructor(e){this.index_=e}updateChild(e,t,n,s,r,a){(0,i.vA)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(t);return o.getChild(s).equals(n.getChild(s))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(dt(t,o)):(0,i.vA)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(ct(t,n)):a.trackChildChange(ut(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild($e,((e,s)=>{t.hasChild(e)||n.trackChildChange(dt(e,s))})),t.isLeafNode()||t.forEachChild($e,((t,s)=>{if(e.hasChild(t)){const r=e.getImmediateChild(t);r.equals(s)||n.trackChildChange(ut(t,s,r))}else n.trackChildChange(ct(t,s))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?st.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class mt{constructor(e){this.indexedFilter_=new ht(e.getIndex()),this.index_=e.getIndex(),this.startPost_=mt.getStartPost_(e),this.endPost_=mt.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,s,r,i){return this.matches(new Ae(t,n))||(n=st.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,s,r,i)}updateFullNode(e,t,n){t.isLeafNode()&&(t=st.EMPTY_NODE);let s=t.withIndex(this.index_);s=s.updatePriority(st.EMPTY_NODE);const r=this;return t.forEachChild($e,((e,t)=>{r.matches(new Ae(e,t))||(s=s.updateImmediateChild(e,st.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,s,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class pt{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new mt(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,s,r,i){return this.rangedFilter_.matches(new Ae(t,n))||(n=st.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,s,r,i):this.fullLimitUpdateChild_(e,t,n,r,i)}updateFullNode(e,t,n){let s;if(t.isLeafNode()||t.isEmpty())s=st.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;s=st.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;s=s.updateImmediateChild(t.name,t.node),n++}}}else{let e;s=t.withIndex(this.index_),s=s.updatePriority(st.EMPTY_NODE),e=this.reverse_?s.getReverseIterator(this.index_):s.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:s=s.updateImmediateChild(t.name,st.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,s,r){let a;if(this.reverse_){const e=this.index_.getCompare();a=(t,n)=>e(n,t)}else a=this.index_.getCompare();const o=e;(0,i.vA)(o.numChildren()===this.limit_,"");const l=new Ae(t,n),c=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),d=this.rangedFilter_.matches(l);if(o.hasChild(t)){const e=o.getImmediateChild(t);let i=s.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=i&&(i.name===t||o.hasChild(i.name));)i=s.getChildAfterChild(this.index_,i,this.reverse_);const u=null==i?1:a(i,l);if(d&&!n.isEmpty()&&u>=0)return null!=r&&r.trackChildChange(ut(t,n,e)),o.updateImmediateChild(t,n);{null!=r&&r.trackChildChange(dt(t,e));const n=o.updateImmediateChild(t,st.EMPTY_NODE);return null!=i&&this.rangedFilter_.matches(i)?(null!=r&&r.trackChildChange(ct(i.name,i.node)),n.updateImmediateChild(i.name,i.node)):n}}return n.isEmpty()?e:d&&a(c,l)>=0?(null!=r&&(r.trackChildChange(dt(c.name,c.node)),r.trackChildChange(ct(t,n))),o.updateImmediateChild(t,n).updateImmediateChild(c.name,st.EMPTY_NODE)):e}}class ft{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=$e}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,i.vA)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,i.vA)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:E}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,i.vA)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,i.vA)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:T}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,i.vA)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===$e}copy(){const e=new ft;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function gt(e){const t={};if(e.isDefault())return t;let n;if(e.index_===$e?n="$priority":e.index_===ot?n="$value":e.index_===Le?n="$key":((0,i.vA)(e.index_ instanceof at,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=(0,i.As)(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=(0,i.As)(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+(0,i.As)(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=(0,i.As)(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+(0,i.As)(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function yt(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==$e&&(t.i=e.index_.toString()),t}class xt extends de{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,i.vA)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,n,s){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=s,this.log_=N("p:rest:"),this.listens_={}}listen(e,t,n,s){const r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);const a=xt.getListenId_(e,n),o={};this.listens_[a]=o;const l=gt(e._queryParams);this.restRequest_(r+".json",l,((e,t)=>{let l=t;if(404===e&&(l=null,e=null),null===e&&this.onDataUpdate_(r,l,!1,n),(0,i.yw)(this.listens_,a)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",s(t,null)}}))}unlisten(e,t){const n=xt.getListenId_(e,t);delete this.listens_[n]}get(e){const t=gt(e._queryParams),n=e._path.toString(),s=new i.cY;return this.restRequest_(n+".json",t,((e,t)=>{let r=t;404===e&&(r=null,e=null),null===e?(this.onDataUpdate_(n,r,!1,null),s.resolve(r)):s.reject(new Error(r))})),s.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((s=>{let[r,a]=s;r&&r.accessToken&&(t.auth=r.accessToken),a&&a.token&&(t.ac=a.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,i.Am)(t);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(n&&4===l.readyState){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let t=null;if(l.status>=200&&l.status<300){try{t=(0,i.$L)(l.responseText)}catch(e){S("Failed to parse JSON response for "+o+": "+l.responseText)}n(null,t)}else 401!==l.status&&404!==l.status&&S("Got unsuccessful REST response for "+o+" Status: "+l.status),n(l.status);n=null}},l.open("GET",o,!0),l.send()}))}}class vt{constructor(){this.rootNode_=st.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function bt(){return{value:null,children:new Map}}function wt(e,t,n){if(je(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const s=fe(t);e.children.has(s)||e.children.set(s,bt());wt(e.children.get(s),t=ye(t),n)}}function jt(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,s)=>{jt(s,new me(t.toString()+"/"+e),n)}))}class kt{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&L(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class Nt{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new kt(e);const n=1e4+2e4*Math.random();q(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;L(e,((e,s)=>{s>0&&(0,i.gR)(this.statsToReport_,e)&&(t[e]=s,n=!0)})),n&&this.server_.reportStats(t),q(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var _t;function Ct(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(_t||(_t={}));class St{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=_t.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(je(this.path)){if(null!=this.affectedTree.value)return(0,i.vA)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new me(e));return new St(pe(),t,this.revert)}}return(0,i.vA)(fe(this.path)===e,"operationForChild called for unrelated child."),new St(ye(this.path),this.affectedTree,this.revert)}}class It{constructor(e,t){this.source=e,this.path=t,this.type=_t.LISTEN_COMPLETE}operationForChild(e){return je(this.path)?new It(this.source,pe()):new It(this.source,ye(this.path))}}class Et{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=_t.OVERWRITE}operationForChild(e){return je(this.path)?new Et(this.source,pe(),this.snap.getImmediateChild(e)):new Et(this.source,ye(this.path),this.snap)}}class Tt{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=_t.MERGE}operationForChild(e){if(je(this.path)){const t=this.children.subtree(new me(e));return t.isEmpty()?null:t.value?new Et(this.source,pe(),t.value):new Tt(this.source,pe(),t)}return(0,i.vA)(fe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Tt(this.source,ye(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Dt{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(je(e))return this.isFullyInitialized()&&!this.filtered_;const t=fe(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class At{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Pt(e,t,n,s,r,a){const o=s.filter((e=>e.type===n));o.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw(0,i.Hk)("Should only compare child_ events.");const s=new Ae(t.childName,t.snapshotNode),r=new Ae(n.childName,n.snapshotNode);return e.index_.compare(s,r)}(e,t,n))),o.forEach((n=>{const s=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);r.forEach((r=>{r.respondsTo(n.type)&&t.push(r.createEvent(s,e.query_))}))}))}function Rt(e,t){return{eventCache:e,serverCache:t}}function Mt(e,t,n,s){return Rt(new Dt(t,n,s),e.serverCache)}function Lt(e,t,n,s){return Rt(e.eventCache,new Dt(t,n,s))}function Ot(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Ft(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let Ut;class zt{static fromObject(e){let t=new zt(null);return L(e,((e,n)=>{t=t.set(new me(e),n)})),t}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(Ut||(Ut=new Ue(A)),Ut);this.value=e,this.children=t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:pe(),value:this.value};if(je(e))return null;{const n=fe(e),s=this.children.get(n);if(null!==s){const r=s.findRootMostMatchingPathAndValue(ye(e),t);if(null!=r){return{path:we(new me(n),r.path),value:r.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(je(e))return this;{const t=fe(e),n=this.children.get(t);return null!==n?n.subtree(ye(e)):new zt(null)}}set(e,t){if(je(e))return new zt(t,this.children);{const n=fe(e),s=(this.children.get(n)||new zt(null)).set(ye(e),t),r=this.children.insert(n,s);return new zt(this.value,r)}}remove(e){if(je(e))return this.children.isEmpty()?new zt(null):new zt(null,this.children);{const t=fe(e),n=this.children.get(t);if(n){const s=n.remove(ye(e));let r;return r=s.isEmpty()?this.children.remove(t):this.children.insert(t,s),null===this.value&&r.isEmpty()?new zt(null):new zt(this.value,r)}return this}}get(e){if(je(e))return this.value;{const t=fe(e),n=this.children.get(t);return n?n.get(ye(e)):null}}setTree(e,t){if(je(e))return t;{const n=fe(e),s=(this.children.get(n)||new zt(null)).setTree(ye(e),t);let r;return r=s.isEmpty()?this.children.remove(n):this.children.insert(n,s),new zt(this.value,r)}}fold(e){return this.fold_(pe(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((s,r)=>{n[s]=r.fold_(we(e,s),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,pe(),t)}findOnPath_(e,t,n){const s=!!this.value&&n(t,this.value);if(s)return s;if(je(e))return null;{const s=fe(e),r=this.children.get(s);return r?r.findOnPath_(ye(e),we(t,s),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,pe(),t)}foreachOnPath_(e,t,n){if(je(e))return this;{this.value&&n(t,this.value);const s=fe(e),r=this.children.get(s);return r?r.foreachOnPath_(ye(e),we(t,s),n):new zt(null)}}foreach(e){this.foreach_(pe(),e)}foreach_(e,t){this.children.inorderTraversal(((n,s)=>{s.foreach_(we(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class qt{constructor(e){this.writeTree_=e}static empty(){return new qt(new zt(null))}}function Wt(e,t,n){if(je(t))return new qt(new zt(n));{const s=e.writeTree_.findRootMostValueAndPath(t);if(null!=s){const r=s.path;let i=s.value;const a=ke(r,t);return i=i.updateChild(a,n),new qt(e.writeTree_.set(r,i))}{const s=new zt(n),r=e.writeTree_.setTree(t,s);return new qt(r)}}}function Bt(e,t,n){let s=e;return L(n,((e,n)=>{s=Wt(s,we(t,e),n)})),s}function Ht(e,t){if(je(t))return qt.empty();{const n=e.writeTree_.setTree(t,new zt(null));return new qt(n)}}function Vt(e,t){return null!=Qt(e,t)}function Qt(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(ke(n.path,t)):null}function Kt(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild($e,((e,n)=>{t.push(new Ae(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new Ae(e,n.value))})),t}function Yt(e,t){if(je(t))return e;{const n=Qt(e,t);return new qt(null!=n?new zt(n):e.writeTree_.subtree(t))}}function $t(e){return e.writeTree_.isEmpty()}function Gt(e,t){return Jt(pe(),e.writeTree_,t)}function Jt(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let s=null;return t.children.inorderTraversal(((t,r)=>{".priority"===t?((0,i.vA)(null!==r.value,"Priority writes must always be leaf nodes"),s=r.value):n=Jt(we(e,t),r,n)})),n.getChild(e).isEmpty()||null===s||(n=n.updateChild(we(e,".priority"),s)),n}}function Xt(e,t){return hn(t,e)}function Zt(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));(0,i.vA)(n>=0,"removeWrite called with nonexistent writeId.");const s=e.allWrites[n];e.allWrites.splice(n,1);let r=s.visible,a=!1,o=e.allWrites.length-1;for(;r&&o>=0;){const t=e.allWrites[o];t.visible&&(o>=n&&en(t,s.path)?r=!1:_e(s.path,t.path)&&(a=!0)),o--}if(r){if(a)return function(e){e.visibleWrites=nn(e.allWrites,tn,pe()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(s.snap)e.visibleWrites=Ht(e.visibleWrites,s.path);else{L(s.children,(t=>{e.visibleWrites=Ht(e.visibleWrites,we(s.path,t))}))}return!0}return!1}function en(e,t){if(e.snap)return _e(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&_e(we(e.path,n),t))return!0;return!1}function tn(e){return e.visible}function nn(e,t,n){let s=qt.empty();for(let r=0;r<e.length;++r){const a=e[r];if(t(a)){const e=a.path;let t;if(a.snap)_e(n,e)?(t=ke(n,e),s=Wt(s,t,a.snap)):_e(e,n)&&(t=ke(e,n),s=Wt(s,pe(),a.snap.getChild(t)));else{if(!a.children)throw(0,i.Hk)("WriteRecord should have .snap or .children");if(_e(n,e))t=ke(n,e),s=Bt(s,t,a.children);else if(_e(e,n))if(t=ke(e,n),je(t))s=Bt(s,pe(),a.children);else{const e=(0,i.yw)(a.children,fe(t));if(e){const n=e.getChild(ye(t));s=Wt(s,pe(),n)}}}}}return s}function sn(e,t,n,s,r){if(s||r){const i=Yt(e.visibleWrites,t);if(!r&&$t(i))return n;if(r||null!=n||Vt(i,pe())){const i=function(e){return(e.visible||r)&&(!s||!~s.indexOf(e.writeId))&&(_e(e.path,t)||_e(t,e.path))};return Gt(nn(e.allWrites,i,t),n||st.EMPTY_NODE)}return null}{const s=Qt(e.visibleWrites,t);if(null!=s)return s;{const s=Yt(e.visibleWrites,t);if($t(s))return n;if(null!=n||Vt(s,pe())){return Gt(s,n||st.EMPTY_NODE)}return null}}}function rn(e,t,n,s){return sn(e.writeTree,e.treePath,t,n,s)}function an(e,t){return function(e,t,n){let s=st.EMPTY_NODE;const r=Qt(e.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild($e,((e,t)=>{s=s.updateImmediateChild(e,t)})),s;if(n){const r=Yt(e.visibleWrites,t);return n.forEachChild($e,((e,t)=>{const n=Gt(Yt(r,new me(e)),t);s=s.updateImmediateChild(e,n)})),Kt(r).forEach((e=>{s=s.updateImmediateChild(e.name,e.node)})),s}return Kt(Yt(e.visibleWrites,t)).forEach((e=>{s=s.updateImmediateChild(e.name,e.node)})),s}(e.writeTree,e.treePath,t)}function on(e,t,n,s){return function(e,t,n,s,r){(0,i.vA)(s||r,"Either existingEventSnap or existingServerSnap must exist");const a=we(t,n);if(Vt(e.visibleWrites,a))return null;{const t=Yt(e.visibleWrites,a);return $t(t)?r.getChild(n):Gt(t,r.getChild(n))}}(e.writeTree,e.treePath,t,n,s)}function ln(e,t){return function(e,t){return Qt(e.visibleWrites,t)}(e.writeTree,we(e.treePath,t))}function cn(e,t,n,s,r,i){return function(e,t,n,s,r,i,a){let o;const l=Yt(e.visibleWrites,t),c=Qt(l,pe());if(null!=c)o=c;else{if(null==n)return[];o=Gt(l,n)}if(o=o.withIndex(a),o.isEmpty()||o.isLeafNode())return[];{const e=[],t=a.getCompare(),n=i?o.getReverseIteratorFrom(s,a):o.getIteratorFrom(s,a);let l=n.getNext();for(;l&&e.length<r;)0!==t(l,s)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,s,r,i)}function dn(e,t,n){return function(e,t,n,s){const r=we(t,n),i=Qt(e.visibleWrites,r);if(null!=i)return i;if(s.isCompleteForChild(n))return Gt(Yt(e.visibleWrites,r),s.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function un(e,t){return hn(we(e.treePath,t),e.writeTree)}function hn(e,t){return{treePath:e,writeTree:t}}class mn{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;(0,i.vA)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,i.vA)(".priority"!==n,"Only non-priority child changes can be tracked.");const s=this.changeMap.get(n);if(s){const r=s.type;if("child_added"===t&&"child_removed"===r)this.changeMap.set(n,ut(n,e.snapshotNode,s.snapshotNode));else if("child_removed"===t&&"child_added"===r)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===r)this.changeMap.set(n,dt(n,s.oldSnap));else if("child_changed"===t&&"child_added"===r)this.changeMap.set(n,ct(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==r)throw(0,i.Hk)("Illegal combination of changes: "+e+" occurred after "+s);this.changeMap.set(n,ut(n,e.snapshotNode,s.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const pn=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class fn{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new Dt(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return dn(this.writes_,e,t)}}getChildAfterChild(e,t,n){const s=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ft(this.viewCache_),r=cn(this.writes_,s,t,1,n,e);return 0===r.length?null:r[0]}}function gn(e,t,n,s,r){const a=new mn;let o,l;if(n.type===_t.OVERWRITE){const c=n;c.source.fromUser?o=vn(e,t,c.path,c.snap,s,r,a):((0,i.vA)(c.source.fromServer,"Unknown source."),l=c.source.tagged||t.serverCache.isFiltered()&&!je(c.path),o=xn(e,t,c.path,c.snap,s,r,l,a))}else if(n.type===_t.MERGE){const c=n;c.source.fromUser?o=function(e,t,n,s,r,i,a){let o=t;return s.foreach(((s,l)=>{const c=we(n,s);bn(t,fe(c))&&(o=vn(e,o,c,l,r,i,a))})),s.foreach(((s,l)=>{const c=we(n,s);bn(t,fe(c))||(o=vn(e,o,c,l,r,i,a))})),o}(e,t,c.path,c.children,s,r,a):((0,i.vA)(c.source.fromServer,"Unknown source."),l=c.source.tagged||t.serverCache.isFiltered(),o=jn(e,t,c.path,c.children,s,r,l,a))}else if(n.type===_t.ACK_USER_WRITE){const l=n;o=l.revert?function(e,t,n,s,r,a){let o;if(null!=ln(s,n))return t;{const l=new fn(s,t,r),c=t.eventCache.getNode();let d;if(je(n)||".priority"===fe(n)){let n;if(t.serverCache.isFullyInitialized())n=rn(s,Ft(t));else{const e=t.serverCache.getNode();(0,i.vA)(e instanceof st,"serverChildren would be complete if leaf node"),n=an(s,e)}d=e.filter.updateFullNode(c,n,a)}else{const r=fe(n);let i=dn(s,r,t.serverCache);null==i&&t.serverCache.isCompleteForChild(r)&&(i=c.getImmediateChild(r)),d=null!=i?e.filter.updateChild(c,r,i,ye(n),l,a):t.eventCache.getNode().hasChild(r)?e.filter.updateChild(c,r,st.EMPTY_NODE,ye(n),l,a):c,d.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=rn(s,Ft(t)),o.isLeafNode()&&(d=e.filter.updateFullNode(d,o,a)))}return o=t.serverCache.isFullyInitialized()||null!=ln(s,pe()),Mt(t,d,o,e.filter.filtersNodes())}}(e,t,l.path,s,r,a):function(e,t,n,s,r,i,a){if(null!=ln(r,n))return t;const o=t.serverCache.isFiltered(),l=t.serverCache;if(null!=s.value){if(je(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return xn(e,t,n,l.getNode().getChild(n),r,i,o,a);if(je(n)){let s=new zt(null);return l.getNode().forEachChild(Le,((e,t)=>{s=s.set(new me(e),t)})),jn(e,t,n,s,r,i,o,a)}return t}{let c=new zt(null);return s.foreach(((e,t)=>{const s=we(n,e);l.isCompleteForPath(s)&&(c=c.set(e,l.getNode().getChild(s)))})),jn(e,t,n,c,r,i,o,a)}}(e,t,l.path,l.affectedTree,s,r,a)}else{if(n.type!==_t.LISTEN_COMPLETE)throw(0,i.Hk)("Unknown operation type: "+n.type);o=function(e,t,n,s,r){const i=t.serverCache,a=Lt(t,i.getNode(),i.isFullyInitialized()||je(n),i.isFiltered());return yn(e,a,n,s,pn,r)}(e,t,n.path,s,a)}const c=a.getChanges();return function(e,t,n){const s=t.eventCache;if(s.isFullyInitialized()){const r=s.getNode().isLeafNode()||s.getNode().isEmpty(),i=Ot(e);(n.length>0||!e.eventCache.isFullyInitialized()||r&&!s.getNode().equals(i)||!s.getNode().getPriority().equals(i.getPriority()))&&n.push(lt(Ot(t)))}}(t,o,c),{viewCache:o,changes:c}}function yn(e,t,n,s,r,a){const o=t.eventCache;if(null!=ln(s,n))return t;{let l,c;if(je(n))if((0,i.vA)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=Ft(t),r=an(s,n instanceof st?n:st.EMPTY_NODE);l=e.filter.updateFullNode(t.eventCache.getNode(),r,a)}else{const n=rn(s,Ft(t));l=e.filter.updateFullNode(t.eventCache.getNode(),n,a)}else{const d=fe(n);if(".priority"===d){(0,i.vA)(1===ge(n),"Can't have a priority with additional path components");const r=o.getNode();c=t.serverCache.getNode();const a=on(s,n,r,c);l=null!=a?e.filter.updatePriority(r,a):o.getNode()}else{const i=ye(n);let u;if(o.isCompleteForChild(d)){c=t.serverCache.getNode();const e=on(s,n,o.getNode(),c);u=null!=e?o.getNode().getImmediateChild(d).updateChild(i,e):o.getNode().getImmediateChild(d)}else u=dn(s,d,t.serverCache);l=null!=u?e.filter.updateChild(o.getNode(),d,u,i,r,a):o.getNode()}}return Mt(t,l,o.isFullyInitialized()||je(n),e.filter.filtersNodes())}}function xn(e,t,n,s,r,i,a,o){const l=t.serverCache;let c;const d=a?e.filter:e.filter.getIndexedFilter();if(je(n))c=d.updateFullNode(l.getNode(),s,null);else if(d.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,s);c=d.updateFullNode(l.getNode(),e,null)}else{const e=fe(n);if(!l.isCompleteForPath(n)&&ge(n)>1)return t;const r=ye(n),i=l.getNode().getImmediateChild(e).updateChild(r,s);c=".priority"===e?d.updatePriority(l.getNode(),i):d.updateChild(l.getNode(),e,i,r,pn,null)}const u=Lt(t,c,l.isFullyInitialized()||je(n),d.filtersNodes());return yn(e,u,n,r,new fn(r,u,i),o)}function vn(e,t,n,s,r,i,a){const o=t.eventCache;let l,c;const d=new fn(r,t,i);if(je(n))c=e.filter.updateFullNode(t.eventCache.getNode(),s,a),l=Mt(t,c,!0,e.filter.filtersNodes());else{const r=fe(n);if(".priority"===r)c=e.filter.updatePriority(t.eventCache.getNode(),s),l=Mt(t,c,o.isFullyInitialized(),o.isFiltered());else{const i=ye(n),c=o.getNode().getImmediateChild(r);let u;if(je(i))u=s;else{const e=d.getCompleteChild(r);u=null!=e?".priority"===xe(i)&&e.getChild(be(i)).isEmpty()?e:e.updateChild(i,s):st.EMPTY_NODE}if(c.equals(u))l=t;else{l=Mt(t,e.filter.updateChild(o.getNode(),r,u,i,d,a),o.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function bn(e,t){return e.eventCache.isCompleteForChild(t)}function wn(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function jn(e,t,n,s,r,i,a,o){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=je(n)?s:new zt(null).setTree(n,s);const d=t.serverCache.getNode();return l.children.inorderTraversal(((n,s)=>{if(d.hasChild(n)){const l=wn(0,t.serverCache.getNode().getImmediateChild(n),s);c=xn(e,c,new me(n),l,r,i,a,o)}})),l.children.inorderTraversal(((n,s)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===s.value;if(!d.hasChild(n)&&!l){const l=wn(0,t.serverCache.getNode().getImmediateChild(n),s);c=xn(e,c,new me(n),l,r,i,a,o)}})),c}class kn{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,s=new ht(n.getIndex()),r=(i=n).loadsAllData()?new ht(i.getIndex()):i.hasLimit()?new pt(i):new mt(i);var i;this.processor_=function(e){return{filter:e}}(r);const a=t.serverCache,o=t.eventCache,l=s.updateFullNode(st.EMPTY_NODE,a.getNode(),null),c=r.updateFullNode(st.EMPTY_NODE,o.getNode(),null),d=new Dt(l,a.isFullyInitialized(),s.filtersNodes()),u=new Dt(c,o.isFullyInitialized(),r.filtersNodes());this.viewCache_=Rt(u,d),this.eventGenerator_=new At(this.query_)}get query(){return this.query_}}function Nn(e,t){const n=Ft(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!je(t)&&!n.getImmediateChild(fe(t)).isEmpty())?n.getChild(t):null}function _n(e){return 0===e.eventRegistrations_.length}function Cn(e,t,n){const s=[];if(n){(0,i.vA)(null==t,"A cancel should cancel all event registrations.");const r=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,r);t&&s.push(t)}))}if(t){let n=[];for(let s=0;s<e.eventRegistrations_.length;++s){const r=e.eventRegistrations_[s];if(r.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(s+1));break}}else n.push(r)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return s}function Sn(e,t,n,s){t.type===_t.MERGE&&null!==t.source.queryId&&((0,i.vA)(Ft(e.viewCache_),"We should always have a full cache before handling merges"),(0,i.vA)(Ot(e.viewCache_),"Missing event cache, even though we have a server cache"));const r=e.viewCache_,a=gn(e.processor_,r,t,n,s);var o,l;return o=e.processor_,l=a.viewCache,(0,i.vA)(l.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),(0,i.vA)(l.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),(0,i.vA)(a.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=a.viewCache,In(e,a.changes,a.viewCache.eventCache.getNode(),null)}function In(e,t,n,s){const r=s?[s]:e.eventRegistrations_;return function(e,t,n,s){const r=[],i=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&i.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Pt(e,r,"child_removed",t,s,n),Pt(e,r,"child_added",t,s,n),Pt(e,r,"child_moved",i,s,n),Pt(e,r,"child_changed",t,s,n),Pt(e,r,"value",t,s,n),r}(e.eventGenerator_,t,n,r)}let En,Tn;class Dn{constructor(){this.views=new Map}}function An(e,t,n,s){const r=t.source.queryId;if(null!==r){const a=e.views.get(r);return(0,i.vA)(null!=a,"SyncTree gave us an op for an invalid query."),Sn(a,t,n,s)}{let r=[];for(const i of e.views.values())r=r.concat(Sn(i,t,n,s));return r}}function Pn(e,t,n,s,r){const i=t._queryIdentifier,a=e.views.get(i);if(!a){let e=rn(n,r?s:null),i=!1;e?i=!0:s instanceof st?(e=an(n,s),i=!1):(e=st.EMPTY_NODE,i=!1);const a=Rt(new Dt(e,i,!1),new Dt(s,r,!1));return new kn(t,a)}return a}function Rn(e,t,n,s,r,i){const a=Pn(e,t,s,r,i);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,a),function(e,t){e.eventRegistrations_.push(t)}(a,n),function(e,t){const n=e.viewCache_.eventCache,s=[];n.getNode().isLeafNode()||n.getNode().forEachChild($e,((e,t)=>{s.push(ct(e,t))}));return n.isFullyInitialized()&&s.push(lt(n.getNode())),In(e,s,n.getNode(),t)}(a,n)}function Mn(e,t,n,s){const r=t._queryIdentifier,a=[];let o=[];const l=zn(e);if("default"===r)for(const[i,c]of e.views.entries())o=o.concat(Cn(c,n,s)),_n(c)&&(e.views.delete(i),c.query._queryParams.loadsAllData()||a.push(c.query));else{const t=e.views.get(r);t&&(o=o.concat(Cn(t,n,s)),_n(t)&&(e.views.delete(r),t.query._queryParams.loadsAllData()||a.push(t.query)))}return l&&!zn(e)&&a.push(new((0,i.vA)(En,"Reference.ts has not been loaded"),En)(t._repo,t._path)),{removed:a,events:o}}function Ln(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function On(e,t){let n=null;for(const s of e.views.values())n=n||Nn(s,t);return n}function Fn(e,t){if(t._queryParams.loadsAllData())return qn(e);{const n=t._queryIdentifier;return e.views.get(n)}}function Un(e,t){return null!=Fn(e,t)}function zn(e){return null!=qn(e)}function qn(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let Wn=1;class Bn{constructor(e){this.listenProvider_=e,this.syncPointTree_=new zt(null),this.pendingWriteTree_={visibleWrites:qt.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Hn(e,t,n,s,r){return function(e,t,n,s,r){(0,i.vA)(s>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),e.allWrites.push({path:t,snap:n,writeId:s,visible:r}),r&&(e.visibleWrites=Wt(e.visibleWrites,t,n)),e.lastWriteId=s}(e.pendingWriteTree_,t,n,s,r),r?Jn(e,new Et({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Vn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=function(e,t){for(let n=0;n<e.allWrites.length;n++){const s=e.allWrites[n];if(s.writeId===t)return s}return null}(e.pendingWriteTree_,t);if(Zt(e.pendingWriteTree_,t)){let t=new zt(null);return null!=s.snap?t=t.set(pe(),!0):L(s.children,(e=>{t=t.set(new me(e),!0)})),Jn(e,new St(s.path,t,n))}return[]}function Qn(e,t,n){return Jn(e,new Et({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Kn(e,t,n,s){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const i=t._path,a=e.syncPointTree_.get(i);let o=[];if(a&&("default"===t._queryIdentifier||Un(a,t))){const l=Mn(a,t,n,s);0===a.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(i));const c=l.removed;if(o=l.events,!r){const n=-1!==c.findIndex((e=>e._queryParams.loadsAllData())),r=e.syncPointTree_.findOnPath(i,((e,t)=>zn(t)));if(n&&!r){const t=e.syncPointTree_.subtree(i);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&zn(t)){return[qn(t)]}{let e=[];return t&&(e=Ln(t)),L(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const s=n[t],r=s.query,i=es(e,s);e.listenProvider_.startListening(as(r),ts(e,r),i.hashFn,i.onComplete)}}}if(!r&&c.length>0&&!s)if(n){const n=null;e.listenProvider_.stopListening(as(t),n)}else c.forEach((t=>{const n=e.queryToTagMap.get(ns(t));e.listenProvider_.stopListening(as(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){const s=t[n];if(!s._queryParams.loadsAllData()){const t=ns(s),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return o}function Yn(e,t,n,s){const r=ss(e,s);if(null!=r){const s=rs(r),i=s.path,a=s.queryId,o=ke(i,t);return is(e,i,new Et(Ct(a),o,n))}return[]}function $n(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=t._path;let a=null,o=!1;e.syncPointTree_.foreachOnPath(r,((e,t)=>{const n=ke(e,r);a=a||On(t,n),o=o||zn(t)}));let l,c=e.syncPointTree_.get(r);if(c?(o=o||zn(c),a=a||On(c,pe())):(c=new Dn,e.syncPointTree_=e.syncPointTree_.set(r,c)),null!=a)l=!0;else{l=!1,a=st.EMPTY_NODE;e.syncPointTree_.subtree(r).foreachChild(((e,t)=>{const n=On(t,pe());n&&(a=a.updateImmediateChild(e,n))}))}const d=Un(c,t);if(!d&&!t._queryParams.loadsAllData()){const n=ns(t);(0,i.vA)(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const s=Wn++;e.queryToTagMap.set(n,s),e.tagToQueryMap.set(s,n)}let u=Rn(c,t,n,Xt(e.pendingWriteTree_,r),a,l);if(!d&&!o&&!s){const n=Fn(c,t);u=u.concat(function(e,t,n){const s=t._path,r=ts(e,t),a=es(e,n),o=e.listenProvider_.startListening(as(t),r,a.hashFn,a.onComplete),l=e.syncPointTree_.subtree(s);if(r)(0,i.vA)(!zn(l.value),"If we're adding a query, it shouldn't be shadowed");else{const t=l.fold(((e,t,n)=>{if(!je(e)&&t&&zn(t))return[qn(t).query];{let e=[];return t&&(e=e.concat(Ln(t).map((e=>e.query)))),L(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const s=t[n];e.listenProvider_.stopListening(as(s),ts(e,s))}}return o}(e,t,n))}return u}function Gn(e,t,n){const s=e.pendingWriteTree_,r=e.syncPointTree_.findOnPath(t,((e,n)=>{const s=On(n,ke(e,t));if(s)return s}));return sn(s,t,r,n,!0)}function Jn(e,t){return Xn(t,e.syncPointTree_,null,Xt(e.pendingWriteTree_,pe()))}function Xn(e,t,n,s){if(je(e.path))return Zn(e,t,n,s);{const r=t.get(pe());null==n&&null!=r&&(n=On(r,pe()));let i=[];const a=fe(e.path),o=e.operationForChild(a),l=t.children.get(a);if(l&&o){const e=n?n.getImmediateChild(a):null,t=un(s,a);i=i.concat(Xn(o,l,e,t))}return r&&(i=i.concat(An(r,e,s,n))),i}}function Zn(e,t,n,s){const r=t.get(pe());null==n&&null!=r&&(n=On(r,pe()));let i=[];return t.children.inorderTraversal(((t,r)=>{const a=n?n.getImmediateChild(t):null,o=un(s,t),l=e.operationForChild(t);l&&(i=i.concat(Zn(l,r,a,o)))})),r&&(i=i.concat(An(r,e,s,n))),i}function es(e,t){const n=t.query,s=ts(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||st.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return s?function(e,t,n){const s=ss(e,n);if(s){const n=rs(s),r=n.path,i=n.queryId,a=ke(r,t);return is(e,r,new It(Ct(i),a))}return[]}(e,n._path,s):function(e,t){return Jn(e,new It({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const s=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const s=new Error(e+" at "+t._path.toString()+": "+n);return s.code=e.toUpperCase(),s}(t,n);return Kn(e,n,null,s)}}}}function ts(e,t){const n=ns(t);return e.queryToTagMap.get(n)}function ns(e){return e._path.toString()+"$"+e._queryIdentifier}function ss(e,t){return e.tagToQueryMap.get(t)}function rs(e){const t=e.indexOf("$");return(0,i.vA)(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new me(e.substr(0,t))}}function is(e,t,n){const s=e.syncPointTree_.get(t);(0,i.vA)(s,"Missing sync point for query tag that we're tracking");return An(s,n,Xt(e.pendingWriteTree_,t),null)}function as(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new((0,i.vA)(Tn,"Reference.ts has not been loaded"),Tn)(e._repo,e._path):e}class os{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new os(t)}node(){return this.node_}}class ls{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=we(this.path_,e);return new ls(this.syncTree_,t)}node(){return Gn(this.syncTree_,this.path_)}}const cs=function(e,t,n){return e&&"object"===typeof e?((0,i.vA)(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?ds(e[".sv"],t,n):"object"===typeof e[".sv"]?us(e[".sv"],t):void(0,i.vA)(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},ds=function(e,t,n){if("timestamp"===e)return n.timestamp;(0,i.vA)(!1,"Unexpected server value: "+e)},us=function(e,t,n){e.hasOwnProperty("increment")||(0,i.vA)(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const s=e.increment;"number"!==typeof s&&(0,i.vA)(!1,"Unexpected increment value: "+s);const r=t.node();if((0,i.vA)(null!==r&&"undefined"!==typeof r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return s;const a=r.getValue();return"number"!==typeof a?s:a+s},hs=function(e,t,n,s){return ps(t,new ls(n,e),s)},ms=function(e,t,n){return ps(e,new os(t),n)};function ps(e,t,n){const s=e.getPriority().val(),r=cs(s,t.getImmediateChild(".priority"),n);let i;if(e.isLeafNode()){const s=e,i=cs(s.getValue(),t,n);return i!==s.getValue()||r!==s.getPriority().val()?new Ye(i,it(r)):e}{const s=e;return i=s,r!==s.getPriority().val()&&(i=i.updatePriority(new Ye(r))),s.forEachChild($e,((e,s)=>{const r=ps(s,t.getImmediateChild(e),n);r!==s&&(i=i.updateImmediateChild(e,r))})),i}}class fs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function gs(e,t){let n=t instanceof me?t:new me(t),s=e,r=fe(n);for(;null!==r;){const e=(0,i.yw)(s.node.children,r)||{children:{},childCount:0};s=new fs(r,s,e),n=ye(n),r=fe(n)}return s}function ys(e){return e.node.value}function xs(e,t){e.node.value=t,ks(e)}function vs(e){return e.node.childCount>0}function bs(e,t){L(e.node.children,((n,s)=>{t(new fs(n,e,s))}))}function ws(e,t,n,s){n&&!s&&t(e),bs(e,(e=>{ws(e,t,!0,s)})),n&&s&&t(e)}function js(e){return new me(null===e.parent?e.name:js(e.parent)+"/"+e.name)}function ks(e){null!==e.parent&&function(e,t,n){const s=function(e){return void 0===ys(e)&&!vs(e)}(n),r=(0,i.gR)(e.node.children,t);s&&r?(delete e.node.children[t],e.node.childCount--,ks(e)):s||r||(e.node.children[t]=n.node,e.node.childCount++,ks(e))}(e.parent,e.name,e)}const Ns=/[\[\].#$\/\u0000-\u001F\u007F]/,_s=/[\[\].#$\u0000-\u001F\u007F]/,Cs=10485760,Ss=function(e){return"string"===typeof e&&0!==e.length&&!Ns.test(e)},Is=function(e){return"string"===typeof e&&0!==e.length&&!_s.test(e)},Es=function(e,t,n){const s=n instanceof me?new Ce(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+Ie(s));if("function"===typeof t)throw new Error(e+"contains a function "+Ie(s)+" with contents = "+t.toString());if(I(t))throw new Error(e+"contains "+t.toString()+" "+Ie(s));if("string"===typeof t&&t.length>Cs/3&&(0,i.OE)(t)>Cs)throw new Error(e+"contains a string greater than "+Cs+" utf8 bytes "+Ie(s)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,r=!1;if(L(t,((t,a)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(r=!0,!Ss(t)))throw new Error(e+" contains an invalid key ("+t+") "+Ie(s)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=(0,i.OE)(t),Se(e)}(s,t),Es(e,a,s),function(e){const t=e.parts_.pop();e.byteLength_-=(0,i.OE)(t),e.parts_.length>0&&(e.byteLength_-=1)}(s)})),n&&r)throw new Error(e+' contains ".value" child '+Ie(s)+" in addition to actual children.")}},Ts=function(e,t,n,s){if((!s||void 0!==n)&&!Is(n))throw new Error((0,i.dI)(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ds=function(e,t,n,s){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Ts(e,t,n,s)},As=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!Ss(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Is(e)}(n))throw new Error((0,i.dI)(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Ps{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Rs(e,t){let n=null;for(let s=0;s<t.length;s++){const r=t[s],i=r.getPath();null===n||Ne(i,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:i}),n.events.push(r)}n&&e.eventLists_.push(n)}function Ms(e,t,n){Rs(e,n),Os(e,(e=>Ne(e,t)))}function Ls(e,t,n){Rs(e,n),Os(e,(e=>_e(e,t)||_e(t,e)))}function Os(e,t){e.recursionDepth_++;let n=!0;for(let s=0;s<e.eventLists_.length;s++){const r=e.eventLists_[s];if(r){t(r.path)?(Fs(e.eventLists_[s]),e.eventLists_[s]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function Fs(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const s=n.getEventRunner();b&&k("event: "+n.toString()),z(s)}}}const Us="repo_interrupt";class zs{constructor(e,t,n,s){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ps,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=bt(),this.transactionQueueTree_=new fs,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function qs(e,t,n){if(e.stats_=te(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new xt(e.repoInfo_,((t,n,s,r)=>{Hs(e,t,n,s,r)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>Vs(e,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,i.As)(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}e.persistentConnection_=new De(e.repoInfo_,t,((t,n,s,r)=>{Hs(e,t,n,s,r)}),(t=>{Vs(e,t)}),(t=>{!function(e,t){L(t,((t,n)=>{Qs(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return ee[n]||(ee[n]=t()),ee[n]}(e.repoInfo_,(()=>new Nt(e.stats_,e.server_))),e.infoData_=new vt,e.infoSyncTree_=new Bn({startListening:(t,n,s,r)=>{let i=[];const a=e.infoData_.getNode(t._path);return a.isEmpty()||(i=Qn(e.infoSyncTree_,t._path,a),setTimeout((()=>{r("ok")}),0)),i},stopListening:()=>{}}),Qs(e,"connected",!1),e.serverSyncTree_=new Bn({startListening:(t,n,s,r)=>(e.server_.listen(t,s,n,((n,s)=>{const i=r(n,s);Ls(e.eventQueue_,t._path,i)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function Ws(e){const t=e.infoData_.getNode(new me(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Bs(e){return(t=(t={timestamp:Ws(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function Hs(e,t,n,s,r){e.dataUpdateCount++;const a=new me(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(r)if(s){const t=(0,i.kH)(n,(e=>it(e)));o=function(e,t,n,s){const r=ss(e,s);if(r){const s=rs(r),i=s.path,a=s.queryId,o=ke(i,t),l=zt.fromObject(n);return is(e,i,new Tt(Ct(a),o,l))}return[]}(e.serverSyncTree_,a,t,r)}else{const t=it(n);o=Yn(e.serverSyncTree_,a,t,r)}else if(s){const t=(0,i.kH)(n,(e=>it(e)));o=function(e,t,n){const s=zt.fromObject(n);return Jn(e,new Tt({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,s))}(e.serverSyncTree_,a,t)}else{const t=it(n);o=Qn(e.serverSyncTree_,a,t)}let l=a;o.length>0&&(l=Zs(e,a)),Ls(e.eventQueue_,l,o)}function Vs(e,t){Qs(e,"connected",t),!1===t&&function(e){Gs(e,"onDisconnectEvents");const t=Bs(e),n=bt();jt(e.onDisconnect_,pe(),((s,r)=>{const i=hs(s,r,e.serverSyncTree_,t);wt(n,s,i)}));let s=[];jt(n,pe(),((t,n)=>{s=s.concat(Qn(e.serverSyncTree_,t,n));const r=rr(e,t);Zs(e,r)})),e.onDisconnect_=bt(),Ls(e.eventQueue_,pe(),s)}(e)}function Qs(e,t,n){const s=new me("/.info/"+t),r=it(n);e.infoData_.updateSnapshot(s,r);const i=Qn(e.infoSyncTree_,s,r);Ls(e.eventQueue_,s,i)}function Ks(e){return e.nextWriteId_++}function Ys(e,t,n){let s;s=".info"===fe(t._path)?Kn(e.infoSyncTree_,t,n):Kn(e.serverSyncTree_,t,n),Ms(e.eventQueue_,t._path,s)}function $s(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Us)}function Gs(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];k(t,...s)}function Js(e,t,n){return Gn(e.serverSyncTree_,t,n)||st.EMPTY_NODE}function Xs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||sr(e,t),ys(t)){const n=tr(e,t);(0,i.vA)(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const s=n.map((e=>e.currentWriteId)),r=Js(e,t,s);let a=r;const o=r.hash();for(let d=0;d<n.length;d++){const e=n[d];(0,i.vA)(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const s=ke(t,e.path);a=a.updateChild(s,e.currentOutputSnapshotRaw)}const l=a.val(!0),c=t;e.server_.put(c.toString(),l,(s=>{Gs(e,"transaction put response",{path:c.toString(),status:s});let r=[];if("ok"===s){const s=[];for(let t=0;t<n.length;t++)n[t].status=2,r=r.concat(Vn(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&s.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();sr(e,gs(e.transactionQueueTree_,t)),Xs(e,e.transactionQueueTree_),Ls(e.eventQueue_,t,r);for(let e=0;e<s.length;e++)z(s[e])}else{if("datastale"===s)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{S("transaction at "+c.toString()+" failed: "+s);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=s}Zs(e,t)}}),o)}(e,js(t),n)}else vs(t)&&bs(t,(t=>{Xs(e,t)}))}function Zs(e,t){const n=er(e,t),s=js(n);return function(e,t,n){if(0===t.length)return;const s=[];let r=[];const a=t.filter((e=>0===e.status)),o=a.map((e=>e.currentWriteId));for(let c=0;c<t.length;c++){const a=t[c],d=ke(n,a.path);let u,h=!1;if((0,i.vA)(null!==d,"rerunTransactionsUnderNode_: relativePath should not be null."),4===a.status)h=!0,u=a.abortReason,r=r.concat(Vn(e.serverSyncTree_,a.currentWriteId,!0));else if(0===a.status)if(a.retryCount>=25)h=!0,u="maxretry",r=r.concat(Vn(e.serverSyncTree_,a.currentWriteId,!0));else{const n=Js(e,a.path,o);a.currentInputSnapshot=n;const s=t[c].update(n.val());if(void 0!==s){Es("transaction failed: Data returned ",s,a.path);let t=it(s);"object"===typeof s&&null!=s&&(0,i.gR)(s,".priority")||(t=t.updatePriority(n.getPriority()));const l=a.currentWriteId,c=Bs(e),d=ms(t,n,c);a.currentOutputSnapshotRaw=t,a.currentOutputSnapshotResolved=d,a.currentWriteId=Ks(e),o.splice(o.indexOf(l),1),r=r.concat(Hn(e.serverSyncTree_,a.path,d,a.currentWriteId,a.applyLocally)),r=r.concat(Vn(e.serverSyncTree_,l,!0))}else h=!0,u="nodata",r=r.concat(Vn(e.serverSyncTree_,a.currentWriteId,!0))}Ls(e.eventQueue_,n,r),r=[],h&&(t[c].status=2,l=t[c].unwatcher,setTimeout(l,Math.floor(0)),t[c].onComplete&&("nodata"===u?s.push((()=>t[c].onComplete(null,!1,t[c].currentInputSnapshot))):s.push((()=>t[c].onComplete(new Error(u),!1,null)))))}var l;sr(e,e.transactionQueueTree_);for(let i=0;i<s.length;i++)z(s[i]);Xs(e,e.transactionQueueTree_)}(e,tr(e,n),s),s}function er(e,t){let n,s=e.transactionQueueTree_;for(n=fe(t);null!==n&&void 0===ys(s);)s=gs(s,n),n=fe(t=ye(t));return s}function tr(e,t){const n=[];return nr(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function nr(e,t,n){const s=ys(t);if(s)for(let r=0;r<s.length;r++)n.push(s[r]);bs(t,(t=>{nr(e,t,n)}))}function sr(e,t){const n=ys(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,xs(t,n.length>0?n:void 0)}bs(t,(t=>{sr(e,t)}))}function rr(e,t){const n=js(er(e,t)),s=gs(e.transactionQueueTree_,t);return function(e,t,n){let s=n?e:e.parent;for(;null!==s;){if(t(s))return!0;s=s.parent}}(s,(t=>{ir(e,t)})),ir(e,s),ws(s,(t=>{ir(e,t)})),n}function ir(e,t){const n=ys(t);if(n){const s=[];let r=[],a=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?((0,i.vA)(a===t-1,"All SENT items should be at beginning of queue."),a=t,n[t].status=3,n[t].abortReason="set"):((0,i.vA)(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),r=r.concat(Vn(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&s.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===a?xs(t,void 0):n.length=a+1,Ls(e.eventQueue_,js(t),r);for(let e=0;e<s.length;e++)z(s[e])}}const ar=function(e,t){const n=or(e),s=n.namespace;"firebase.com"===n.domain&&C(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),s&&"undefined"!==s||"localhost"===n.domain||C("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&S("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const r="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new G(n.host,n.secure,s,r,t,"",s!==n.subdomain),path:new me(n.pathString)}},or=function(e){let t="",n="",s="",r="",i="",a=!0,o="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(o=e.substring(0,c-1),e=e.substring(c+2));let d=e.indexOf("/");-1===d&&(d=e.length);let u=e.indexOf("?");-1===u&&(u=e.length),t=e.substring(0,Math.min(d,u)),d<u&&(r=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(s){}t+="/"+e}return t}(e.substring(d,u)));const h=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const s=n.split("=");2===s.length?t[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):S("Invalid query segment '".concat(n,"' in query '").concat(e,"'"))}return t}(e.substring(Math.min(e.length,u)));c=t.indexOf(":"),c>=0?(a="https"===o||"wss"===o,l=parseInt(t.substring(c+1),10)):c=t.length;const m=t.slice(0,c);if("localhost"===m.toLowerCase())n="localhost";else if(m.split(".").length<=2)n=m;else{const e=t.indexOf(".");s=t.substring(0,e).toLowerCase(),n=t.substring(e+1),i=s}"ns"in h&&(i=h.ns)}return{host:t,port:l,domain:n,subdomain:s,secure:a,scheme:o,pathString:r,namespace:i}},lr="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){let e=0;const t=[]}();class cr{constructor(e,t,n,s){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=s}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,i.As)(this.snapshot.exportVal())}}class dr{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class ur{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,i.vA)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class hr{constructor(e,t,n,s){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=s}get key(){return je(this._path)?null:xe(this._path)}get ref(){return new mr(this._repo,this._path)}get _queryIdentifier(){const e=yt(this._queryParams),t=R(e);return"{}"===t?"default":t}get _queryObject(){return yt(this._queryParams)}isEqual(e){if(!((e=(0,i.Ku)(e))instanceof hr))return!1;const t=this._repo===e._repo,n=Ne(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return t&&n&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class mr extends hr{constructor(e,t){super(e,t,new ft,!1)}get parent(){const e=be(this._path);return null===e?null:new mr(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class pr{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new me(e),n=gr(this.ref,e);return new pr(this._node.getChild(t),n,$e)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,((t,n)=>e(new pr(n,gr(this.ref,t),$e))))}hasChild(e){const t=new me(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function fr(e,t){return(e=(0,i.Ku)(e))._checkNotDeleted("ref"),void 0!==t?gr(e._root,t):e._root}function gr(e,t){return null===fe((e=(0,i.Ku)(e))._path)?Ds("child","path",t,!1):Ts("child","path",t,!1),new mr(e._repo,we(e._path,t))}class yr{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new cr("value",this,new pr(e.snapshotNode,new mr(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new dr(this,e,t):null}matches(e){return e instanceof yr&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class xr{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new dr(this,e,t):null}createEvent(e,t){(0,i.vA)(null!=e.childName,"Child events should have a childName.");const n=gr(new mr(t._repo,t._path),e.childName),s=t._queryParams.getIndex();return new cr(e.type,this,new pr(e.snapshotNode,n,s),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof xr&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function vr(e,t,n,s,r){let i;if("object"===typeof s&&(i=void 0,r=s),"function"===typeof s&&(i=s),r&&r.onlyOnce){const t=n,s=(n,s)=>{Ys(e._repo,e,o),t(n,s)};s.userCallback=n.userCallback,s.context=n.context,n=s}const a=new ur(n,i||void 0),o="value"===t?new yr(a):new xr(t,a);return function(e,t,n){let s;s=".info"===fe(t._path)?$n(e.infoSyncTree_,t,n):$n(e.serverSyncTree_,t,n),Ms(e.eventQueue_,t._path,s)}(e._repo,e,o),()=>Ys(e._repo,e,o)}function br(e,t,n,s){return vr(e,"value",t,n,s)}function wr(e,t,n){let s=null;const r=n?new ur(n):null;"value"===t?s=new yr(r):t&&(s=new xr(t,r)),Ys(e._repo,e,s)}!function(e){(0,i.vA)(!En,"__referenceConstructor has already been defined"),En=e}(mr),function(e){(0,i.vA)(!Tn,"__referenceConstructor has already been defined"),Tn=e}(mr);const jr={};let kr=!1;function Nr(e,t,n,s,r){let i=s||e.options.databaseURL;void 0===i&&(e.options.projectId||C("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),k("Using default host for project ",e.options.projectId),i="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));let a,o,l=ar(i,r),c=l.repoInfo;"undefined"!==typeof process&&(o={NODE_ENV:"production",PUBLIC_URL:"/hamptownControlPanel",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),o?(a=!0,i="http://".concat(o,"?ns=").concat(c.namespace),l=ar(i,r),c=l.repoInfo):a=!l.repoInfo.secure;const d=r&&a?new H(H.OWNER):new B(e.name,e.options,t);As("Invalid Firebase Database URL",l),je(l.path)||C("Database URL must point to the root of a Firebase Database (not including a child path).");const u=function(e,t,n,s){let r=jr[t.name];r||(r={},jr[t.name]=r);let i=r[e.toURLString()];i&&C("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return i=new zs(e,kr,n,s),r[e.toURLString()]=i,i}(c,e,d,new W(e,n));return new _r(u,e)}class _r{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(qs(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new mr(this._repo,pe())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=jr[t];n&&n[e.key]===e||C("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),$s(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&C("Cannot call "+e+" on a deleted database.")}}function Cr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.Sx)(),t=arguments.length>1?arguments[1]:void 0;const n=(0,s.j6)(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=(0,i.yU)("database");e&&function(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=(0,i.Ku)(e),e._checkNotDeleted("useEmulator");const r="".concat(t,":").concat(n),a=e._repoInternal;if(e._instanceStarted){if(r===e._repoInternal.repoInfo_.host&&(0,i.bD)(s,a.repoInfo_.emulatorOptions))return;C("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(a.repoInfo_.nodeAdmin)s.mockUserToken&&C('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new H(H.OWNER);else if(s.mockUserToken){const t="string"===typeof s.mockUserToken?s.mockUserToken:(0,i.Fy)(s.mockUserToken,e.app.options.projectId);o=new H(t)}(0,i.zJ)(t)&&((0,i.gE)(t),(0,i.P1)("Database",!0));!function(e,t,n,s){const r=t.lastIndexOf(":"),a=t.substring(0,r),o=(0,i.zJ)(a);e.repoInfo_=new G(t,o,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),s&&(e.authTokenProvider_=s)}(a,r,s,o)}(n,...e)}return n}De.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},De.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var Sr;d(s.MF),(0,s.om)(new r.uA("database",((e,t)=>{let{instanceIdentifier:n}=t;return Nr(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),(0,s.KO)(o,l,Sr),(0,s.KO)(o,l,"esm2017")},581:(e,t,n)=>{var s=n(635),r=Object.prototype,i=r.hasOwnProperty,a=r.toString,o=s?s.toStringTag:void 0;e.exports=function(e){var t=i.call(e,o),n=e[o];try{e[o]=void 0;var s=!0}catch(l){}var r=a.call(e);return s&&(t?e[o]=n:delete e[o]),r}},588:(e,t,n)=>{var s=n(914),r=n(567),i=n(184),a=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=s(e);var n=o.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):a.test(e)?NaN:+e}},607:(e,t,n)=>{"use strict";n.d(t,{DQ:()=>l,Nd:()=>s,Sh:()=>o,Ur:()=>i,_M:()=>a,qw:()=>r});const s={apiKey:"AIzaSyBBWLn8mFblzOqtbfaGS52aDhFWixSEn0Y",authDomain:"hamptown-panel.firebaseapp.com",databaseURL:"https://hamptown-panel-default-rtdb.firebaseio.com",projectId:"hamptown-panel",storageBucket:"hamptown-panel.firebasestorage.app",messagingSenderId:"937251959184",appId:"1:937251959184:web:b1afb3ed1eecd52fdcc315",measurementId:"G-50NK2PWM7E"},r="6969",i=["\ud83d\ude2b","\ud83d\ude14","\ud83d\ude10","\ud83d\ude0a","\ud83e\udd29"],a=["Terrible","Poor","Okay","Good","Excellent"],o={high:"border-red-400",medium:"border-yellow-400",low:"border-green-400"},l=["bg-red-500","bg-orange-500","bg-yellow-500","bg-green-500","bg-blue-500"]},624:(e,t,n)=>{"use strict";n.d(t,{$b:()=>r,Vy:()=>c});const s=[];var r;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(r||(r={}));const i={debug:r.DEBUG,verbose:r.VERBOSE,info:r.INFO,warn:r.WARN,error:r.ERROR,silent:r.SILENT},a=r.INFO,o={[r.DEBUG]:"log",[r.VERBOSE]:"log",[r.INFO]:"info",[r.WARN]:"warn",[r.ERROR]:"error"},l=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),s=o[t];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];console[s]("[".concat(n,"]  ").concat(e.name,":"),...i)};class c{constructor(e){this.name=e,this._logLevel=a,this._logHandler=l,this._userLogHandler=null,s.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in r))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?i[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,r.DEBUG,...t),this._logHandler(this,r.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,r.VERBOSE,...t),this._logHandler(this,r.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,r.INFO,...t),this._logHandler(this,r.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,r.WARN,...t),this._logHandler(this,r.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,r.ERROR,...t),this._logHandler(this,r.ERROR,...t)}}},635:(e,t,n)=>{var s=n(759).Symbol;e.exports=s},654:(e,t,n)=>{"use strict";var s=n(950),r=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var s,i={},c=null,d=null;for(s in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)a.call(t,s)&&!l.hasOwnProperty(s)&&(i[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===i[s]&&(i[s]=t[s]);return{$$typeof:r,type:e,key:c,ref:d,props:i,_owner:o.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},658:(e,t,n)=>{var s="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=s},759:(e,t,n)=>{var s=n(658),r="object"==typeof self&&self&&self.Object===Object&&self,i=s||r||Function("return this")();e.exports=i},761:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var s=n-1>>>1,r=e[s];if(!(0<i(r,t)))break e;e[s]=t,e[n]=r,n=s}}function s(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var s=0,r=e.length,a=r>>>1;s<a;){var o=2*(s+1)-1,l=e[o],c=o+1,d=e[c];if(0>i(l,n))c<r&&0>i(d,l)?(e[s]=d,e[c]=n,s=c):(e[s]=l,e[o]=n,s=o);else{if(!(c<r&&0>i(d,n)))break e;e[s]=d,e[c]=n,s=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,m=3,p=!1,f=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,x="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=s(d);null!==t;){if(null===t.callback)r(d);else{if(!(t.startTime<=e))break;r(d),t.sortIndex=t.expirationTime,n(c,t)}t=s(d)}}function w(e){if(g=!1,b(e),!f)if(null!==s(c))f=!0,P(j);else{var t=s(d);null!==t&&R(w,t.startTime-e)}}function j(e,n){f=!1,g&&(g=!1,x(C),C=-1),p=!0;var i=m;try{for(b(n),h=s(c);null!==h&&(!(h.expirationTime>n)||e&&!E());){var a=h.callback;if("function"===typeof a){h.callback=null,m=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===s(c)&&r(c),b(n)}else r(c);h=s(c)}if(null!==h)var l=!0;else{var u=s(d);null!==u&&R(w,u.startTime-n),l=!1}return l}finally{h=null,m=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,N=!1,_=null,C=-1,S=5,I=-1;function E(){return!(t.unstable_now()-I<S)}function T(){if(null!==_){var e=t.unstable_now();I=e;var n=!0;try{n=_(!0,e)}finally{n?k():(N=!1,_=null)}}else N=!1}if("function"===typeof v)k=function(){v(T)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,A=D.port2;D.port1.onmessage=T,k=function(){A.postMessage(null)}}else k=function(){y(T,0)};function P(e){_=e,N||(N=!0,k())}function R(e,n){C=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||p||(f=!0,P(j))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var n=m;m=t;try{return e()}finally{m=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=m;m=e;try{return t()}finally{m=n}},t.unstable_scheduleCallback=function(e,r,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:r,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(e.sortIndex=i,n(d,e),null===s(c)&&e===s(d)&&(g?(x(C),C=-1):g=!0,R(w,i-a))):(e.sortIndex=o,n(c,e),f||p||(f=!0,P(j))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=m;return function(){var n=m;m=t;try{return e.apply(this,arguments)}finally{m=n}}}},798:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},815:(e,t,n)=>{"use strict";n.d(t,{Wp:()=>s.Wp});var s=n(913);(0,s.KO)("firebase","11.9.1","app")},867:(e,t,n)=>{"use strict";n.d(t,{eX:()=>a,po:()=>r,zQ:()=>i});var s=n(607);const r=e=>"".concat(e.getFullYear(),"-").concat(String(e.getMonth()+1).padStart(2,"0"),"-").concat(String(e.getDate()).padStart(2,"0")),i=e=>s.DQ[e-1]||"bg-gray-500",a=e=>s.Sh[e]},913:(e,t,n)=>{"use strict";n.d(t,{MF:()=>ue,j6:()=>ae,xZ:()=>oe,om:()=>ie,Sx:()=>me,Wp:()=>he,KO:()=>pe});var s=n(253),r=n(624),i=n(170),a=n(51);let o,l;const c=new WeakMap,d=new WeakMap,u=new WeakMap,h=new WeakMap,m=new WeakMap;let p={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return d.get(e);if("objectStoreNames"===t)return e.objectStoreNames||u.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return y(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function f(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(l||(l=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e.apply(x(this),n),y(c.get(this))}:function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return y(e.apply(x(this),n))}:function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];const i=e.call(x(this),t,...s);return u.set(i,t.sort?t.sort():[t]),y(i)}}function g(e){return"function"===typeof e?f(e):(e instanceof IDBTransaction&&function(e){if(d.has(e))return;const t=new Promise(((t,n)=>{const s=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",i),e.removeEventListener("abort",i)},r=()=>{t(),s()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",r),e.addEventListener("error",i),e.addEventListener("abort",i)}));d.set(e,t)}(e),t=e,(o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,p):e);var t}function y(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const s=()=>{e.removeEventListener("success",r),e.removeEventListener("error",i)},r=()=>{t(y(e.result)),s()},i=()=>{n(e.error),s()};e.addEventListener("success",r),e.addEventListener("error",i)}));return t.then((t=>{t instanceof IDBCursor&&c.set(t,e)})).catch((()=>{})),m.set(t,e),t}(e);if(h.has(e))return h.get(e);const t=g(e);return t!==e&&(h.set(e,t),m.set(t,e)),t}const x=e=>m.get(e);const v=["get","getKey","getAll","getAllKeys","count"],b=["put","add","delete","clear"],w=new Map;function j(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(w.get(t))return w.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,r=b.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!r&&!v.includes(n))return;const i=async function(e){const t=this.transaction(e,r?"readwrite":"readonly");let i=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return s&&(i=i.index(o.shift())),(await Promise.all([i[n](...o),r&&t.done]))[0]};return w.set(t,i),i}p=(e=>(0,a.A)((0,a.A)({},e),{},{get:(t,n,s)=>j(t,n)||e.get(t,n,s),has:(t,n)=>!!j(t,n)||e.has(t,n)}))(p);class k{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const N="@firebase/app",_="0.13.1",C=new r.Vy("@firebase/app"),S="@firebase/app-compat",I="@firebase/analytics-compat",E="@firebase/analytics",T="@firebase/app-check-compat",D="@firebase/app-check",A="@firebase/auth",P="@firebase/auth-compat",R="@firebase/database",M="@firebase/data-connect",L="@firebase/database-compat",O="@firebase/functions",F="@firebase/functions-compat",U="@firebase/installations",z="@firebase/installations-compat",q="@firebase/messaging",W="@firebase/messaging-compat",B="@firebase/performance",H="@firebase/performance-compat",V="@firebase/remote-config",Q="@firebase/remote-config-compat",K="@firebase/storage",Y="@firebase/storage-compat",$="@firebase/firestore",G="@firebase/ai",J="@firebase/firestore-compat",X="firebase",Z="[DEFAULT]",ee={[N]:"fire-core",[S]:"fire-core-compat",[E]:"fire-analytics",[I]:"fire-analytics-compat",[D]:"fire-app-check",[T]:"fire-app-check-compat",[A]:"fire-auth",[P]:"fire-auth-compat",[R]:"fire-rtdb",[M]:"fire-data-connect",[L]:"fire-rtdb-compat",[O]:"fire-fn",[F]:"fire-fn-compat",[U]:"fire-iid",[z]:"fire-iid-compat",[q]:"fire-fcm",[W]:"fire-fcm-compat",[B]:"fire-perf",[H]:"fire-perf-compat",[V]:"fire-rc",[Q]:"fire-rc-compat",[K]:"fire-gcs",[Y]:"fire-gcs-compat",[$]:"fire-fst",[J]:"fire-fst-compat",[G]:"fire-vertex","fire-js":"fire-js",[X]:"fire-js-all"},te=new Map,ne=new Map,se=new Map;function re(e,t){try{e.container.addComponent(t)}catch(n){C.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function ie(e){const t=e.name;if(se.has(t))return C.debug("There were multiple attempts to register component ".concat(t,".")),!1;se.set(t,e);for(const n of te.values())re(n,e);for(const n of ne.values())re(n,e);return!0}function ae(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function oe(e){return null!==e&&void 0!==e&&void 0!==e.settings}const le={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ce=new i.FA("app","Firebase",le);class de{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new s.uA("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ce.create("app-deleted",{appName:this._name})}}const ue="11.9.0";function he(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Z,automaticDataCollectionEnabled:!0},t),a=r.name;if("string"!==typeof a||!a)throw ce.create("bad-app-name",{appName:String(a)});if(n||(n=(0,i.T9)()),!n)throw ce.create("no-options");const o=te.get(a);if(o){if((0,i.bD)(n,o.options)&&(0,i.bD)(r,o.config))return o;throw ce.create("duplicate-app",{appName:a})}const l=new s.h1(a);for(const s of se.values())l.addComponent(s);const c=new de(n,r,l);return te.set(a,c),c}function me(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z;const t=te.get(e);if(!t&&e===Z&&(0,i.T9)())return he();if(!t)throw ce.create("no-app",{appName:e});return t}function pe(e,t,n){var r;let i=null!==(r=ee[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void C.warn(e.join(" "))}ie(new s.uA("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}const fe="firebase-heartbeat-store";let ge=null;function ye(){return ge||(ge=function(e,t){let{blocked:n,upgrade:s,blocking:r,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=y(a);return s&&a.addEventListener("upgradeneeded",(e=>{s(y(a.result),e.oldVersion,e.newVersion,y(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),o.then((e=>{i&&e.addEventListener("close",(()=>i())),r&&e.addEventListener("versionchange",(e=>r(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(fe)}catch(n){console.warn(n)}}}).catch((e=>{throw ce.create("idb-open",{originalErrorMessage:e.message})}))),ge}async function xe(e,t){try{const n=(await ye()).transaction(fe,"readwrite"),s=n.objectStore(fe);await s.put(t,ve(e)),await n.done}catch(n){if(n instanceof i.g)C.warn(n.message);else{const e=ce.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});C.warn(e.message)}}}function ve(e){return"".concat(e.name,"!").concat(e.options.appId)}class be{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new je(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=we();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some((e=>e.date===s)))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let s=1;s<e.length;s++)e[s].date<n&&(n=e[s].date,t=s);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){C.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=we(),{heartbeatsToSend:n,unsentEntries:s}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let s=e.slice();for(const r of e){const e=n.find((e=>e.agent===r.agent));if(e){if(e.dates.push(r.date),ke(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),ke(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}(this._heartbeatsCache.heartbeats),r=(0,i.Uj)(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(t){return C.warn(t),""}}}function we(){return(new Date).toISOString().substring(0,10)}class je{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,i.zW)()&&(0,i.eX)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ye()).transaction(fe),n=await t.objectStore(fe).get(ve(e));return await t.done,n}catch(t){if(t instanceof i.g)C.warn(t.message);else{const e=ce.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});C.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return xe(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return xe(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ke(e){return(0,i.Uj)(JSON.stringify({version:2,heartbeats:e})).length}var Ne;Ne="",ie(new s.uA("platform-logger",(e=>new k(e)),"PRIVATE")),ie(new s.uA("heartbeat",(e=>new be(e)),"PRIVATE")),pe(N,_,Ne),pe(N,_,"esm2017"),pe("fire-js","")},914:(e,t,n)=>{var s=n(798),r=/^\s+/;e.exports=function(e){return e?e.slice(0,s(e)+1).replace(r,""):e}},950:(e,t,n)=>{"use strict";e.exports=n(49)}},t={};function n(s){var r=t[s];if(void 0!==r)return r.exports;var i=t[s]={exports:{}};return e[s](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(950),t=n(352),s=n(51);function r(e,t){if(null==e)return{};var n,s,r=function(e,t){if(null==e)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;n[s]=e[s]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const a=["color","size","strokeWidth","absoluteStrokeWidth","className","children"],o=(t,n)=>{const o=(0,e.forwardRef)(((o,l)=>{let{color:c="currentColor",size:d=24,strokeWidth:u=2,absoluteStrokeWidth:h,className:m="",children:p}=o,f=r(o,a);return(0,e.createElement)("svg",(0,s.A)((0,s.A)({ref:l},i),{},{width:d,height:d,stroke:c,strokeWidth:h?24*Number(u)/Number(d):u,className:["lucide","lucide-".concat((g=t,g.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim())),m].join(" ")},f),[...n.map((t=>{let[n,s]=t;return(0,e.createElement)(n,s)})),...Array.isArray(p)?p:[p]]);var g}));return o.displayName="".concat(t),o},l=o("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),c=o("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),d=o("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),u=o("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),h=o("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),m=o("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),p=o("ChefHat",[["path",{d:"M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z",key:"z3ra2g"}],["line",{x1:"6",x2:"18",y1:"17",y2:"17",key:"12q60k"}]]),f=o("UtensilsCrossed",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]]),g=o("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),y=o("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),x=o("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),v=o("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),b=o("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);var w=n(607),j=n(867);var k=n(414);const N=e=>{let{currentUser:t,employees:n,userMood:r,setUserMood:i,setEmployees:a,setDailyData:o}=e;const l=(e=>(e.reduce(((e,t)=>e+t.mood),0)/e.length).toFixed(1))(n),c=((e,t)=>{const n=new Date,s=(0,j.po)(n),r=t.find((t=>t.id===e));return!r||r.lastMoodDate!==s})(t.id,n),d=((e,t)=>{const n=t.find((t=>t.id===e));if(!n||!n.lastMoodDate)return"";const s=new Date,r=(0,j.po)(s);return n.lastMoodDate===r?"You can update your mood again tomorrow!":""})(t.id,n),u=e=>{const r=((e,t,n,r,i)=>{const a=new Date,o=(0,j.po)(a),l=n.find((e=>e.id===t));if(l&&l.lastMoodDate===o)return alert("You have already updated your mood today! Come back tomorrow \ud83d\ude0a"),!1;r((n=>n.map((n=>n.id===t?(0,s.A)((0,s.A)({},n),{},{mood:e,lastUpdated:"Just now",lastMoodDate:o}):n))));const c=(new Date).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"});return i((n=>{const r=n[o]||{completedTasks:[],employeeMoods:[],totalTasks:22,completionRate:0},i=Array.isArray(r.employeeMoods)?r.employeeMoods:[],a={employeeId:t,mood:e,updatedAt:c};return(0,s.A)((0,s.A)({},n),{},{[o]:(0,s.A)((0,s.A)({},r),{},{employeeMoods:[...i.filter((e=>e.employeeId!==t)),a]})})})),!0})(e,t.id,n,a,o);r&&i(e)};return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:(0,k.jsxs)("div",{className:"text-center mb-6",children:[(0,k.jsx)("div",{className:"text-3xl font-bold text-gray-800 mb-2",children:l}),(0,k.jsx)("div",{className:"text-lg text-gray-600 mb-4",children:"Team Average Mood"}),(0,k.jsx)("div",{className:"flex justify-center space-x-2",children:[1,2,3,4,5].map((e=>(0,k.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(e<=Math.round(Number(l))?"bg-blue-500":"bg-gray-200")},e)))})]})}),(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,k.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 text-center",children:"How are you feeling today?"}),c?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:"flex justify-between items-center mb-4",children:[1,2,3,4,5].map((e=>(0,k.jsxs)("button",{onClick:()=>u(e),className:"flex flex-col items-center p-3 rounded-xl transition-all hover:scale-105 ".concat(r===e?"bg-blue-100 scale-110":"hover:bg-gray-50"),children:[(0,k.jsx)("div",{className:"text-2xl mb-1",children:w.Ur[e-1]}),(0,k.jsx)("div",{className:"text-xs text-gray-600",children:w._M[e-1]})]},e)))}),(0,k.jsx)("div",{className:"text-center text-sm text-gray-500",children:"Select how you're feeling today"})]}):(0,k.jsxs)("div",{className:"text-center",children:[(0,k.jsx)("div",{className:"text-6xl mb-4",children:w.Ur[r-1]}),(0,k.jsxs)("div",{className:"text-lg font-medium text-gray-700 mb-2",children:["Today's Mood: ",w._M[r-1]]}),(0,k.jsx)("div",{className:"text-sm text-gray-500 mb-4",children:d}),(0,k.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,k.jsx)("div",{className:"text-sm text-blue-700",children:"\u2728 You've already shared your mood today! Your well-being matters to us."})})]})]}),(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,k.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,k.jsx)(b,{className:"w-5 h-5 mr-2"}),"Team Mood"]}),(0,k.jsx)("div",{className:"space-y-3",children:n.map((e=>(0,k.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("div",{className:"w-3 h-3 rounded-full mr-3 ".concat((0,j.zQ)(e.mood))}),(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:"font-medium text-gray-800",children:e.name}),(0,k.jsxs)("div",{className:"text-xs text-gray-500",children:[e.lastUpdated,e.lastMoodDate===(0,j.po)(new Date)&&(0,k.jsx)("span",{className:"ml-2 px-2 py-0.5 bg-green-100 text-green-700 rounded-full text-xs",children:"Today"})]})]})]}),(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("span",{className:"text-lg mr-2",children:w.Ur[e.mood-1]}),(0,k.jsxs)("span",{className:"text-sm text-gray-600",children:[e.mood,"/5"]})]})]},e.id)))})]})]})},_=o("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),C=(e,t,n,r,i,a)=>{const o=new Date,l=(0,j.po)(o),c=(new Date).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"}),d={taskId:e,employeeId:t,completedAt:c,taskName:n,date:l,pointsEarned:r};a((t=>{const n=t[l]||{completedTasks:[],employeeMoods:[],purchases:[],totalTasks:i.length,completionRate:0,totalPointsEarned:0,totalPointsSpent:0},r=[...(Array.isArray(n.completedTasks)?n.completedTasks:[]).filter((t=>t.taskId!==e)),d],a=Math.round(r.length/i.length*100),o=r.reduce(((e,t)=>e+(t.pointsEarned||0)),0);return(0,s.A)((0,s.A)({},t),{},{[l]:(0,s.A)((0,s.A)({},n),{},{completedTasks:r,totalTasks:i.length,completionRate:a,totalPointsEarned:o})})})),console.log("\ud83d\udcca Task completion logged (replacing any previous completion):",d)},S=(e,t,n)=>{n((n=>n.map((n=>n.id===e?(0,s.A)((0,s.A)({},n),{},{points:n.points+t}):n))))},I=(e,t,n)=>{const s=t[e];return n.find((e=>e.id===s))},E=(e,t,n,r,i,a,o,l,c,d,u,h)=>{const m=r.has(e),p=new Set(r),f=a.find((t=>t.id===e)),g=I(e,i,o);if(f){if(m)console.log("\ud83d\udd04 Uncompleting task: ".concat(f.task)),p.delete(e),c((t=>{const n=(0,s.A)({},t);return delete n[e],n})),g&&(((e,t,n)=>{n((n=>n.map((n=>n.id===e?(0,s.A)((0,s.A)({},n),{},{points:Math.max(0,n.points-t)}):n))))})(g.id,f.points,u),console.log("\ud83d\udcc9 Deducted ".concat(f.points," points from ").concat(g.name," for uncompleting task"))),((e,t,n)=>{const r=new Date,i=(0,j.po)(r);n((n=>{const r=n[i]||{completedTasks:[],employeeMoods:[],purchases:[],totalTasks:t.length,completionRate:0,totalPointsEarned:0,totalPointsSpent:0},a=(Array.isArray(r.completedTasks)?r.completedTasks:[]).filter((t=>t.taskId!==e)),o=Math.round(a.length/t.length*100),l=a.reduce(((e,t)=>e+(t.pointsEarned||0)),0);return(0,s.A)((0,s.A)({},n),{},{[i]:(0,s.A)((0,s.A)({},r),{},{completedTasks:a,totalTasks:t.length,completionRate:o,totalPointsEarned:l})})})),console.log("\ud83d\uddd1\ufe0f Task completion removed from daily data:",e)})(e,a,d);else{console.log("\u2705 Completing task: ".concat(f.task));const r=t||(null===g||void 0===g?void 0:g.id)||n;t?c((n=>(0,s.A)((0,s.A)({},n),{},{[e]:t}))):g||c((t=>(0,s.A)((0,s.A)({},t),{},{[e]:n}))),p.add(e),S(r,f.points,u),C(e,r,f.task,f.points,a,d),console.log("\ud83d\udcc8 Awarded ".concat(f.points," points to employee ").concat(r," for completing task"))}l(p),h&&(console.log("\ud83d\udd25 Immediate save triggered by task completion"),setTimeout((()=>{console.log("\u23f0 Executing immediate save now..."),h()}),200))}else console.error("Task not found:",e)},T=(e,t,n,r,i,a,o,l,c,d)=>{const u=i.find((t=>t.id===e)),h=I(e,r,a),m=a.find((e=>e.id===t));u&&m?n.has(e)&&(null===h||void 0===h?void 0:h.id)!==t?(console.log("\ud83d\udd04 Reassigning completed task from ".concat((null===h||void 0===h?void 0:h.name)||"unassigned"," to ").concat(m.name)),h?((e,t,n,r)=>{r((r=>r.map((r=>r.id===e?(0,s.A)((0,s.A)({},r),{},{points:Math.max(0,r.points-n)}):r.id===t?(0,s.A)((0,s.A)({},r),{},{points:r.points+n}):r)))),console.log("\ud83d\udcb0 Transferred ".concat(n," points from employee ").concat(e," to ").concat(t))})(h.id,t,u.points,c):S(t,u.points,c),o((n=>(0,s.A)((0,s.A)({},n),{},{[e]:t}))),C(e,t,u.task,u.points,i,l),d&&(console.log("\ud83d\udd25 Immediate save triggered by task reassignment"),setTimeout((()=>{d()}),200))):o((n=>(0,s.A)((0,s.A)({},n),{},{[e]:t}))):console.error("Task or new employee not found")},D=t=>{var n,r;let{currentUser:i,tasks:a,employees:o,completedTasks:l,taskAssignments:c,dailyData:d,setCompletedTasks:h,setTaskAssignments:p,setDailyData:f,setEmployees:g}=t;(0,e.useEffect)((()=>{console.log("\ud83d\udccb TaskManager - completedTasks updated:",{size:l.size,tasks:Array.from(l),timestamp:(new Date).toLocaleTimeString()})}),[l]);const y=(e,t)=>{l.has(e)?T(e,t,l,c,a,o,p,f,g):((e,t,n)=>{n((n=>(0,s.A)((0,s.A)({},n),{},{[e]:t})))})(e,t,p)},x=o.find((e=>e.id===i.id)),v=d[(0,j.po)(new Date)],w=(null===v||void 0===v||null===(n=v.completedTasks)||void 0===n||null===(r=n.filter((e=>e.employeeId===i.id)))||void 0===r?void 0:r.reduce(((e,t)=>e+(t.pointsEarned||0)),0))||0;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,k.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4 text-center border border-green-200",children:[(0,k.jsx)("div",{className:"text-3xl font-bold text-green-600 mb-1",children:l.size}),(0,k.jsx)("div",{className:"text-sm font-medium text-green-700",children:"Completed"})]}),(0,k.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-4 text-center border border-orange-200",children:[(0,k.jsx)("div",{className:"text-3xl font-bold text-orange-600 mb-1",children:a.length-l.size}),(0,k.jsx)("div",{className:"text-sm font-medium text-orange-700",children:"Pending"})]}),(0,k.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4 text-center border border-purple-200",children:[(0,k.jsx)("div",{className:"text-3xl font-bold text-purple-600 mb-1",children:(null===x||void 0===x?void 0:x.points)||0}),(0,k.jsx)("div",{className:"text-sm font-medium text-purple-700",children:"Your Points"})]})]}),(0,k.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl p-4 mb-6 text-white",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"text-lg font-semibold",children:"Today's Points"}),(0,k.jsxs)("div",{className:"text-2xl font-bold",children:[w," pts earned"]})]}),(0,k.jsx)(_,{className:"w-8 h-8 opacity-80"})]})}),(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,k.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,k.jsx)(m,{className:"w-5 h-5 mr-2"}),"Cleaning Tasks"]}),(0,k.jsx)("div",{className:"space-y-4",children:a.map((e=>{const t=I(e.id,c,o),n=l.has(e.id);return(0,k.jsxs)("div",{className:"border rounded-lg p-4 ".concat((0,j.eX)(e.priority)," ").concat(n?"bg-green-50":"bg-white"),children:[(0,k.jsxs)("div",{className:"flex items-start justify-between",children:[(0,k.jsxs)("div",{className:"flex-1",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,k.jsx)("div",{className:"font-medium ".concat(n?"line-through text-gray-500":"text-gray-800"),children:e.task}),(0,k.jsxs)("div",{className:"flex items-center bg-purple-100 text-purple-700 px-2 py-1 rounded-full text-sm font-medium",children:[(0,k.jsx)(_,{className:"w-3 h-3 mr-1"}),e.points," pts"]})]}),(0,k.jsxs)("div",{className:"text-sm text-gray-600 mb-2",children:["\ud83d\udccd ",e.location]}),(0,k.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,k.jsxs)("div",{className:"text-xs px-2 py-1 rounded-full inline-block ".concat("high"===e.priority?"bg-red-100 text-red-700":"medium"===e.priority?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"),children:[e.priority," priority"]}),(0,k.jsxs)("div",{className:"text-xs text-gray-500",children:["\u23f1\ufe0f ",e.estimatedTime]})]})]}),(0,k.jsx)("button",{onClick:()=>{return t=e.id,void E(t,n,i.id,l,c,a,o,h,p,f,g);var t,n},className:"ml-3 p-2 rounded-full ".concat(n?"bg-green-500 text-white":"bg-gray-200 text-gray-600 hover:bg-gray-300"),children:(0,k.jsx)(u,{className:"w-4 h-4"})})]}),(0,k.jsxs)("div",{className:"mt-3",children:[t&&(0,k.jsxs)("div",{className:"flex items-center text-sm text-gray-600 mb-2",children:[(0,k.jsx)(b,{className:"w-4 h-4 mr-1"}),"Assigned to: ",(0,k.jsx)("span",{className:"font-medium ml-1",children:t.name}),n&&(0,k.jsxs)("span",{className:"ml-2 text-green-600 font-medium",children:["(+",e.points," pts earned!)"]})]}),!t&&(0,k.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:n?"Reassign to:":"Assign to:"}),(0,k.jsx)("div",{className:"flex flex-wrap gap-2",children:o.map((s=>(0,k.jsxs)("button",{onClick:()=>y(e.id,s.id),className:"text-xs px-3 py-1 rounded-full transition-colors ".concat((null===t||void 0===t?void 0:t.id)===s.id?"bg-blue-500 text-white":"bg-blue-100 text-blue-700 hover:bg-blue-200"),title:n&&(null===t||void 0===t?void 0:t.id)!==s.id?"Transfer ".concat(e.points," points from ").concat((null===t||void 0===t?void 0:t.name)||"unassigned"," to ").concat(s.name):"Assign task to ".concat(s.name),children:[s.name,(0,k.jsxs)("span",{className:"ml-1 text-purple-600 font-medium",children:["(",s.points,"pts)"]}),n&&(null===t||void 0===t?void 0:t.id)!==s.id&&(0,k.jsx)("span",{className:"ml-1",children:"\ud83d\udd04"})]},s.id)))}),n&&(0,k.jsxs)("div",{className:"mt-2 text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded",children:["\ud83d\udca1 Tip: Click another employee's name to transfer the ",e.points," points to them"]})]})]},e.id)}))})]})]})},A=o("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]),P=o("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),R=o("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),M=o("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),L=o("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),O=o("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),F=(e,t)=>e.points>=t.cost&&t.available,U=t=>{var n;let{currentUser:r,employees:i,storeItems:a,dailyData:o,setEmployees:l,setDailyData:c,saveToFirebase:d}=t;const[u,h]=(0,e.useState)("all"),[m,p]=(0,e.useState)(!1),f=i.find((e=>e.id===r.id)),g=((e,t)=>{const n=t.find((t=>t.id===e));return(null===n||void 0===n?void 0:n.points)||0})(r.id,i),y=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30;const s=[],r=new Date;for(let i=0;i<n;i++){const n=new Date(r);n.setDate(n.getDate()-i);const a=t[(0,j.po)(n)];if(null!==a&&void 0!==a&&a.purchases){const t=a.purchases.filter((t=>t.employeeId===e));s.push(...t)}}return s.sort(((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()))}(r.id,o),x=(e=>[...e].sort(((e,t)=>t.points-e.points)).slice(0,10))(i),v=[{id:"all",name:"All Items",icon:"\ud83d\udecd\ufe0f"},{id:"food",name:"Food & Drinks",icon:"\ud83c\udf7d\ufe0f"},{id:"break",name:"Time Off",icon:"\u23f0"},{id:"reward",name:"Rewards",icon:"\ud83c\udf81"},{id:"social",name:"Social",icon:"\ud83d\udc65"}],w="all"===u?a:a.filter((e=>e.category===u)),N=e=>{if(!f)return;const t=((e,t,n,r,i)=>{const a=n.find((t=>t.id===e));if(!a)return alert("Employee with id ".concat(e," not found")),!1;if(!F(a,t))return alert("Insufficient points! You need ".concat(t.cost," points but only have ").concat(a.points,".")),!1;const o=new Date,l=(0,j.po)(o),c=(new Date).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"});r((n=>n.map((n=>n.id===e?(0,s.A)((0,s.A)({},n),{},{points:n.points-t.cost}):n))));const d={id:Date.now(),employeeId:e,itemId:t.id,itemName:t.name,cost:t.cost,purchasedAt:c,date:l,status:"pending"};return i((e=>{const n=e[l]||{completedTasks:[],employeeMoods:[],purchases:[],totalTasks:22,completionRate:0,totalPointsEarned:0,totalPointsSpent:0},r=Array.isArray(n.purchases)?[...n.purchases,d]:[d],i=(n.totalPointsSpent||0)+t.cost;return(0,s.A)((0,s.A)({},e),{},{[l]:(0,s.A)((0,s.A)({},n),{},{purchases:r,totalPointsSpent:i})})})),console.log("\ud83d\uded2 Purchase logged:",d),!0})(r.id,e,i,l,c);t&&alert("\ud83c\udf89 Successfully purchased: ".concat(e.name,"! Check with your manager to redeem."))};e.useEffect((()=>{o&&Object.keys(o).length>0&&d()}),[o,d]);const C=e=>{switch(e){case"food":return(0,k.jsx)(A,{className:"w-4 h-4"});case"break":return(0,k.jsx)(P,{className:"w-4 h-4"});case"reward":return(0,k.jsx)(R,{className:"w-4 h-4"});case"social":return(0,k.jsx)(b,{className:"w-4 h-4"});default:return(0,k.jsx)(_,{className:"w-4 h-4"})}};return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl shadow-sm p-6 text-white",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("h2",{className:"text-2xl font-bold",children:"Your Points"}),(0,k.jsx)("div",{className:"text-4xl font-bold mt-2",children:g}),(0,k.jsx)("div",{className:"text-purple-100 text-sm",children:"Available to spend"})]}),(0,k.jsx)("div",{className:"text-6xl opacity-50",children:"\ud83d\udc8e"})]}),(0,k.jsxs)("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-purple-400",children:[(0,k.jsxs)("button",{onClick:()=>p(!m),className:"flex items-center bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition-colors",children:[(0,k.jsx)(M,{className:"w-4 h-4 mr-2"}),"Purchase History"]}),(0,k.jsxs)("div",{className:"text-right",children:[(0,k.jsx)("div",{className:"text-sm text-purple-100",children:"Your Rank"}),(0,k.jsxs)("div",{className:"font-bold",children:["#",x.findIndex((e=>e.id===r.id))+1||"Unranked"]})]})]})]}),m&&(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,k.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Recent Purchases"}),y.length>0?(0,k.jsx)("div",{className:"space-y-3",children:y.slice(0,10).map((e=>(0,k.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("div",{className:"text-lg mr-3",children:"\ud83d\uded2"}),(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:"font-medium text-gray-800",children:e.itemName}),(0,k.jsxs)("div",{className:"text-sm text-gray-500",children:[e.date," at ",e.purchasedAt]})]})]}),(0,k.jsxs)("div",{className:"text-right",children:[(0,k.jsxs)("div",{className:"font-bold text-purple-600",children:["-",e.cost," pts"]}),(0,k.jsx)("div",{className:"text-xs px-2 py-1 rounded-full ".concat("pending"===e.status?"bg-yellow-100 text-yellow-700":"approved"===e.status?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"),children:e.status})]})]},e.id)))}):(0,k.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No purchases yet. Start earning points by completing tasks!"})]}),(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,k.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Store Categories"}),(0,k.jsx)("div",{className:"flex flex-wrap gap-2",children:v.map((e=>(0,k.jsxs)("button",{onClick:()=>h(e.id),className:"flex items-center px-4 py-2 rounded-lg transition-colors ".concat(u===e.id?"bg-purple-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[(0,k.jsx)("span",{className:"mr-2",children:e.icon}),e.name]},e.id)))})]}),(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,k.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,k.jsx)(L,{className:"w-5 h-5 mr-2"}),"all"===u?"All Items":null===(n=v.find((e=>e.id===u)))||void 0===n?void 0:n.name]}),(0,k.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:w.map((e=>{const t=!!f&&F(f,e);return(0,k.jsxs)("div",{className:"border rounded-lg p-4 transition-all ".concat(t?"border-green-200 hover:border-green-300 hover:shadow-md":"border-gray-200 opacity-60"),children:[(0,k.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,k.jsx)("div",{className:"text-3xl",children:e.icon}),(0,k.jsx)("div",{className:"flex items-center",children:C(e.category)})]}),(0,k.jsx)("h4",{className:"font-semibold text-gray-800 mb-2",children:e.name}),(0,k.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{className:"text-lg font-bold text-purple-600",children:[e.cost," pts"]}),(0,k.jsx)("button",{onClick:()=>N(e),disabled:!t||!e.available,className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat(t&&e.available?"bg-purple-500 text-white hover:bg-purple-600":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:e.available?t?"Purchase":"Need more points":"Unavailable"})]}),!t&&e.available&&(0,k.jsxs)("div",{className:"mt-2 text-xs text-red-500",children:["Need ",e.cost-g," more points"]})]},e.id)}))}),0===w.length&&(0,k.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No items available in this category"})]}),(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,k.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,k.jsx)(O,{className:"w-5 h-5 mr-2"}),"Points Leaderboard"]}),(0,k.jsx)("div",{className:"space-y-3",children:x.map(((e,t)=>(0,k.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg ".concat(e.id===r.id?"bg-purple-50 border border-purple-200":"bg-gray-50"),children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold mr-3 ".concat(0===t?"bg-yellow-400 text-white":1===t?"bg-gray-400 text-white":2===t?"bg-orange-400 text-white":"bg-gray-200 text-gray-600"),children:t+1}),(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:"font-medium text-gray-800",children:[e.name,e.id===r.id&&(0,k.jsx)("span",{className:"ml-2 text-purple-600 text-sm",children:"(You)"})]}),(0,k.jsx)("div",{className:"text-sm text-gray-500",children:e.role})]})]}),(0,k.jsxs)("div",{className:"text-right",children:[(0,k.jsxs)("div",{className:"font-bold text-purple-600",children:[e.points," pts"]}),0===t&&(0,k.jsx)("div",{className:"text-xs text-yellow-600",children:"\ud83d\udc51 Top Performer"})]})]},e.id)))})]})]})};var z=n(526);const q=o("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),W=o("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),B=o("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),H=o("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),V=o("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),Q=o("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);class K{constructor(e){this.clock={},e&&(this.clock=(0,s.A)({},e))}increment(e){this.clock[e]||(this.clock[e]=0),this.clock[e]++}update(e){for(const[t,n]of Object.entries(e))(!this.clock[t]||this.clock[t]<n)&&(this.clock[t]=n)}compare(e){let t=!1,n=!1,s=!0;const r=new Set([...Object.keys(this.clock),...Object.keys(e)]);for(const o of r){const r=this.clock[o]||0,i=e[o]||0;r<i?(t=!0,s=!1):r>i&&(n=!0,s=!1)}if(s)return"concurrent";if(t&&!n)return"before";if(!t&&n)return"after";const i=Object.values(this.clock).reduce(((e,t)=>e+t),0),a=Object.values(e).reduce(((e,t)=>e+t),0);return i>a?"after":i<a?"before":"concurrent"}merge(e){const t=(0,s.A)({},this.clock);for(const[n,s]of Object.entries(e))t[n]=Math.max(t[n]||0,s);return t}getClock(){return(0,s.A)({},this.clock)}}class Y{constructor(e,t){this.deviceId=void 0,this.vectorClock=void 0,this.deviceId=e,this.vectorClock=new K(t)}createOperation(e,t,n){this.vectorClock.increment(this.deviceId);return{id:"".concat(this.deviceId,"-").concat(Date.now(),"-").concat(Math.random().toString(36).slice(2,8)),type:e,payload:t,timestamp:Date.now(),deviceId:this.deviceId,vectorClock:this.vectorClock.getClock(),targetField:n,version:this.vectorClock.getClock()[this.deviceId]||0}}applyOperation(e,t){if("tasks"===e.targetField)switch(e.type){case"ADD_TASK":return(0,s.A)((0,s.A)({},t),{},{tasks:[...t.tasks,e.payload]});case"COMPLETE_TASK":return(0,s.A)((0,s.A)({},t),{},{tasks:t.tasks.map((t=>t.id===e.payload.id?(0,s.A)((0,s.A)({},t),{},{completed:!0}):t))});case"DELETE_ITEM":return(0,s.A)((0,s.A)({},t),{},{tasks:t.tasks.filter((t=>t.id!==e.payload.id))});default:return t}if("employees"===e.targetField)switch(e.type){case"UPDATE_EMPLOYEE":return(0,s.A)((0,s.A)({},t),{},{employees:t.employees.map((t=>t.id===e.payload.id?(0,s.A)((0,s.A)({},t),e.payload):t))});case"DELETE_ITEM":return(0,s.A)((0,s.A)({},t),{},{employees:t.employees.filter((t=>t.id!==e.payload.id))});default:return t}return t}resolveConflicts(e){const t=new Map;for(const n of e){const e="".concat(n.targetField,":").concat(n.payload.id||n.id);if(t.has(e)){const s=t.get(e),r=new K(s.vectorClock).compare(n.vectorClock);("before"===r||"concurrent"===r&&n.timestamp>s.timestamp)&&t.set(e,n)}else t.set(e,n)}return Array.from(t.values())}rollbackOperations(e,t){let n=(0,s.A)({},t);for(const r of e)if("tasks"===r.targetField)switch(r.type){case"ADD_TASK":n.tasks=n.tasks.filter((e=>e.id!==r.payload.id));break;case"COMPLETE_TASK":n.tasks=n.tasks.map((e=>e.id===r.payload.id?(0,s.A)((0,s.A)({},e),{},{completed:!1}):e));break;case"DELETE_ITEM":n.tasks=[...n.tasks,r.payload]}return n}}const $=new Y((()=>{let e=localStorage.getItem("deviceId");return e||(e="dev-"+Math.random().toString(36).slice(2,10),localStorage.setItem("deviceId",e)),e})()),G=new class{constructor(){this.queue=[],this.db=null,this.dbName="SyncOfflineQueue",this.storeName="operations",this._lastLogTime=null,this.initDB()}initDB(){const e=indexedDB.open(this.dbName,1);e.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains(this.storeName)||t.createObjectStore(this.storeName,{keyPath:"id"})},e.onsuccess=()=>{this.db=e.result,this.loadQueueFromDB()},e.onerror=()=>{console.error("OfflineQueue: Failed to open IndexedDB")}}loadQueueFromDB(){if(!this.db)return;const e=this.db.transaction(this.storeName,"readonly").objectStore(this.storeName).getAll();e.onsuccess=()=>{this.queue=e.result||[]}}enqueue(e){this.queue.push(e),this.saveOperationToDB(e)}saveOperationToDB(e){if(!this.db)return;this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).put(e)}saveQueueToDB(){if(!this.db)return;const e=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName);e.clear().onsuccess=()=>{for(const t of this.queue)e.put(t)}}compactOperationLog(){const e=new Map;for(const t of this.queue){const n="".concat(t.targetField,":").concat(t.payload.id||t.id);e.set(n,t)}this.queue=Array.from(e.values()),this.saveQueueToDB()}cleanExpiredOperations(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6048e5;const t=Date.now();this.queue=this.queue.filter((n=>t-n.timestamp<e)),this.saveQueueToDB()}async processQueue(e){this.compactOperationLog(),this.cleanExpiredOperations();const t=this.queue.filter((e=>"COMPLETE_TASK"===e.type)),n=this.queue.filter((e=>"ADD_TASK"===e.type||"UPDATE_EMPLOYEE"===e.type)),s=this.queue.filter((e=>"DELETE_ITEM"===e.type));for(const r of t)await e(r),this.removeOperationFromDB(r.id);n.length&&await Promise.all(n.map((async t=>{await e(t),this.removeOperationFromDB(t.id)}))),s.forEach(((t,n)=>{setTimeout((async()=>{await e(t),this.removeOperationFromDB(t.id)}),1e3*n)})),this.loadQueueFromDB()}removeAppliedOperations(e){this.queue=this.queue.filter((t=>!e.includes(t.id))),this.saveQueueToDB()}removeOperationFromDB(e){if(!this.db)return;this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).delete(e),this.queue=this.queue.filter((t=>t.id!==e))}prioritizeOperations(){return[...this.queue.filter((e=>"COMPLETE_TASK"===e.type)),...this.queue.filter((e=>"ADD_TASK"===e.type||"UPDATE_EMPLOYEE"===e.type)),...this.queue.filter((e=>"DELETE_ITEM"===e.type))]}resolveQueueConflicts(){}logThrottled(e){(!this._lastLogTime||Date.now()-this._lastLogTime>2e3)&&(console.log("[OfflineQueue]",e),this._lastLogTime=Date.now())}monitorPerformance(e,t){const n=performance.now();t();const s=performance.now()-n;s>100&&this.logThrottled("\u26a0\ufe0f ".concat(e," took ").concat(Math.round(s),"ms"))}};function J(e,t){return $.applyOperation(t,{tasks:e}).tasks}const X=new Y((()=>{let e=localStorage.getItem("deviceId");return e||(e="dev-"+Math.random().toString(36).slice(2,10),localStorage.setItem("deviceId",e)),e})());function Z(e,t){return X.applyOperation(t,{employees:e}).employees}new Y((()=>{let e=localStorage.getItem("deviceId");return e||(e="dev-"+Math.random().toString(36).slice(2,10),localStorage.setItem("deviceId",e)),e})());const ee=new Y((()=>{let e=localStorage.getItem("deviceId");return e||(e="dev-"+Math.random().toString(36).slice(2,10),localStorage.setItem("deviceId",e)),e})());function te(e,t){return ee.applyOperation(t,{storeItems:e}).storeItems}new Y((()=>{let e=localStorage.getItem("deviceId");return e||(e="dev-"+Math.random().toString(36).slice(2,10),localStorage.setItem("deviceId",e)),e})());new Y((()=>{let e=localStorage.getItem("deviceId");return e||(e="dev-"+Math.random().toString(36).slice(2,10),localStorage.setItem("deviceId",e)),e})());const ne=(e,t,n,s,r,i)=>{if(e.trim()){const o={id:Math.max(...n.map((e=>e.id)),0)+1,name:e.trim(),mood:3,lastUpdated:"Just added",role:t,lastMoodDate:null,points:0},l=(a=o,X.createOperation("UPDATE_EMPLOYEE",a,"employees"));s((e=>Z(e,l))),r(""),i("Cleaner")}var a},se=(e,t)=>{window.confirm("Are you sure you want to remove this employee?")&&t((t=>{const n=function(e,t){const n=e.find((e=>e.id===t));if(!n)throw new Error("Employee not found");return X.createOperation("DELETE_ITEM",n,"employees")}(t,e);return Z(t,n)}))},re=(e,t,n,r)=>{r((r=>{const i=function(e,t,n,r){const i=e.find((e=>e.id===t));if(!i)throw new Error("Employee not found");const a=(0,s.A)((0,s.A)({},i),{},{[n]:r});return X.createOperation("UPDATE_EMPLOYEE",a,"employees")}(r,e,t,n);return Z(r,i)}))},ie=(e,t,n,r)=>{r((r=>{const i=function(e,t,n,r){const i=e.find((e=>e.id===t));if(!i)throw new Error("Task not found");const a=(0,s.A)((0,s.A)({},i),{},{[n]:r});return $.createOperation("ADD_TASK",a,"tasks")}(r,e,t,n);return J(r,i)}))},ae=(e,t)=>{window.confirm("Are you sure you want to remove this task?")&&t((t=>{const n=function(e,t){const n=e.find((e=>e.id===t));if(!n)throw new Error("Task not found");return $.createOperation("DELETE_ITEM",n,"tasks")}(t,e);return J(t,n)}))};var oe=n(491),le=n.n(oe);const ce=t=>{let{employees:n,tasks:i,customRoles:a,storeItems:o,prepItems:l,setEmployees:c,setTasks:u,setCustomRoles:h,setStoreItems:f,setPrepItems:y,quickSave:x}=t;const[v,w]=(0,e.useState)(!1),[N,C]=(0,e.useState)(!1),[S,I]=(0,e.useState)(!1),[E,T]=(0,e.useState)(""),[D,A]=(0,e.useState)("Cleaner"),[R,M]=(0,e.useState)(""),[L,O]=(0,e.useState)(null),[F,U]=(0,e.useState)(null),[K,Y]=(0,e.useState)(null),[$,J]=(0,e.useState)(null),[X,Z]=(0,e.useState)(null),[oe,ce]=(0,e.useState)(""),[de,ue]=(0,e.useState)(""),[he,me]=(0,e.useState)(""),[pe,fe]=(0,e.useState)("food"),[ge,ye]=(0,e.useState)("\ud83c\udf81"),[xe,ve]=(0,e.useState)(""),[be,we]=(0,e.useState)("majoneesit"),[je,ke]=(0,e.useState)(""),[Ne,_e]=(0,e.useState)(""),[Ce,Se]=(0,e.useState)(!1),[Ie,Ee]=(0,e.useState)({ingredients:"",instructions:""}),Te=[{id:"majoneesit",name:"Majoneesit",icon:"\ud83e\udd44"},{id:"proteiinit",name:"Proteiinit",icon:"\ud83e\udd69"},{id:"kasvikset",name:"Kasvikset",icon:"\ud83e\udd57"},{id:"marinointi",name:"Marinointi & pikkel\xf6inti",icon:"\ud83e\udd52"},{id:"kastikkeet",name:"Kastikkeet",icon:"\ud83e\uddc2"},{id:"muut",name:"Muut",icon:"\ud83d\udd27"}],[De,Ae]=(0,e.useState)([]),Pe=()=>{((e,t,n,s)=>{e.trim()&&!t.includes(e.trim())&&(n((t=>[...t,e.trim()])),s(""))})(R,a,h,M)},Re=(e,t,n)=>{!function(e,t,n,r,i){const a=e.find((e=>e.id===t));if(!a)throw new Error("StoreItem not found");const o=(0,s.A)((0,s.A)({},a),{},{[n]:r}),l=ee.createOperation("ADD_TASK",o,"storeItems");G.enqueue(l),i((e=>te(e,l)))}(o,e,t,n,f)},Me=e=>{!function(e,t,n){const s=e.find((e=>e.id===t));if(!s)throw new Error("StoreItem not found");const r=ee.createOperation("DELETE_ITEM",s,"storeItems");G.enqueue(r),n((e=>te(e,r)))}(o,e,f)},Le=(e,t,n)=>{y((r=>r.map((r=>r.id===e?(0,s.A)((0,s.A)({},r),{},{[t]:n}):r))))},Oe=(e,t,n)=>{y((r=>r.map((r=>r.id===e?(0,s.A)((0,s.A)({},r),{},{recipe:r.recipe?(0,s.A)((0,s.A)({},r.recipe),{},{[t]:n}):{ingredients:"",instructions:"",[t]:n}}):r))))},Fe=(e,t,n)=>{const s=l.find((t=>t.id===e));if(null===s||void 0===s||!s.recipe)return;const r=document.getElementById("".concat(t,"-").concat(e));if(!r)return;const i=r.selectionStart,a=r.selectionEnd,o=s.recipe[t],c=o.substring(0,i),d=o.substring(i,a),u=o.substring(a);let h="";switch(n){case"bold":h=c+"**"+d+"**"+u;break;case"italic":h=c+"*"+d+"*"+u;break;case"bullet":h=c+"\n\u2022 "+u;break;case"number":h=c+"\n1. "+u;break;default:return}Oe(e,t,h)},[Ue,ze]=(0,e.useState)({}),qe=e.useMemo((()=>le()(((e,t,n)=>{ie(e,t,n,u),ze((t=>{const{[e]:n}=t;return r(t,[e].map(z.A))}))}),800)),[u]),We=(e,t,n)=>{ze((r=>(0,s.A)((0,s.A)({},r),{},{[e]:(0,s.A)((0,s.A)({},r[e]),{},{[t]:n})}))),qe(e,t,n)},Be=(e,t)=>{var n,s;return null!==(n=null===(s=Ue[e.id])||void 0===s?void 0:s[t])&&void 0!==n?n:e[t]},He=(e,t,n)=>{Ae((r=>r.map((r=>r.id===e?(0,s.A)((0,s.A)({},r),{},{[t]:n}):r))))};return(0,k.jsxs)("div",{className:"space-y-6",children:[(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm mb-6 ".concat(v?"p-6":"p-2"),children:[(0,k.jsxs)("button",{onClick:()=>w(!v),className:"w-full flex items-center justify-between hover:text-gray-600 ".concat(v?"text-lg font-semibold text-gray-800 mb-4":"text-sm font-medium text-gray-700 py-1"),children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)(d,{className:"mr-2 ".concat(v?"w-5 h-5":"w-4 h-4")}),"Role Management"]}),(0,k.jsx)("span",{className:"transition-transform ".concat(v?"text-xl rotate-180":"text-sm"),children:"\u25bc"})]}),v&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,k.jsx)("h4",{className:"font-medium text-gray-700 mb-3",children:"Add New Role"}),(0,k.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,k.jsx)("input",{type:"text",placeholder:"Role name",value:R,onChange:e=>M(e.target.value),onKeyPress:e=>"Enter"===e.key&&Pe(),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,k.jsx)("button",{onClick:Pe,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center",children:(0,k.jsx)(q,{className:"w-4 h-4"})})]})]}),(0,k.jsx)("div",{className:"space-y-2",children:a.map((e=>(0,k.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,k.jsx)("span",{className:"font-medium text-gray-700",children:e}),(0,k.jsx)("button",{onClick:()=>((e,t,n)=>{const s=t.filter((t=>t.role===e));s.length>0?alert('Cannot remove role "'.concat(e,'" - ').concat(s.length," employee(s) are using it.")):window.confirm('Are you sure you want to remove the role "'.concat(e,'"?'))&&n((t=>t.filter((t=>t!==e))))})(e,n,h),className:"p-1 text-red-600 hover:text-red-800",title:"Remove role",children:(0,k.jsx)(W,{className:"w-4 h-4"})})]},e)))})]})]}),(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm mb-6 ".concat(N?"p-6":"p-2"),children:[(0,k.jsxs)("button",{onClick:()=>C(!N),className:"w-full flex items-center justify-between hover:text-gray-600 ".concat(N?"text-lg font-semibold text-gray-800 mb-4":"text-sm font-medium text-gray-700 py-1"),children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)(g,{className:"mr-2 ".concat(N?"w-5 h-5":"w-4 h-4")}),"Store Management"]}),(0,k.jsx)("span",{className:"transition-transform ".concat(N?"text-xl rotate-180":"text-sm"),children:"\u25bc"})]}),N&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,k.jsx)("h4",{className:"font-medium text-gray-700 mb-3",children:"Add New Store Item"}),(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Name"}),(0,k.jsx)("input",{type:"text",placeholder:"e.g., Free Coffee",value:oe,onChange:e=>ce(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost (Points)"}),(0,k.jsx)("input",{type:"number",min:"1",placeholder:"10",value:he,onChange:e=>me(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,k.jsxs)("select",{value:pe,onChange:e=>fe(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,k.jsx)("option",{value:"food",children:"Food & Drinks"}),(0,k.jsx)("option",{value:"break",children:"Time Off"}),(0,k.jsx)("option",{value:"reward",children:"Rewards"}),(0,k.jsx)("option",{value:"social",children:"Social"})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Icon"}),(0,k.jsx)("input",{type:"text",placeholder:"\ud83c\udf81",value:ge,onChange:e=>ye(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,k.jsxs)("div",{className:"md:col-span-2",children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,k.jsx)("input",{type:"text",placeholder:"e.g., Get a free coffee from the kitchen",value:de,onChange:e=>ue(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,k.jsx)("div",{className:"md:col-span-2",children:(0,k.jsxs)("button",{onClick:()=>{if(oe.trim()&&de.trim()&&he.trim()){const e={id:Math.max(...o.map((e=>e.id)),0)+1,name:oe.trim(),description:de.trim(),cost:parseInt(he)||10,category:pe,icon:ge,available:!0};!function(e,t,n){const s=ee.createOperation("ADD_TASK",n,"storeItems");G.enqueue(s),t((e=>te(e,s)))}(0,f,e),ce(""),ue(""),me(""),fe("food"),ye("\ud83c\udf81")}},className:"w-full bg-purple-500 text-white py-2 px-4 rounded-lg hover:bg-purple-600 flex items-center justify-center",children:[(0,k.jsx)(B,{className:"w-4 h-4 mr-2"}),"Add Store Item"]})})]})]}),(0,k.jsxs)("div",{className:"space-y-3",children:[(0,k.jsx)("h4",{className:"font-medium text-gray-700",children:"Current Store Items"}),o.map((e=>(0,k.jsxs)("div",{className:"border rounded-lg p-4 bg-white",children:[(0,k.jsxs)("div",{className:"flex items-start justify-between",children:[(0,k.jsxs)("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Name"}),K===e.id?(0,k.jsx)("input",{type:"text",value:e.name,onChange:t=>Re(e.id,"name",t.target.value),className:"w-full px-2 py-1 border rounded text-sm"}):(0,k.jsxs)("div",{className:"font-medium text-gray-800 flex items-center",children:[(0,k.jsx)("span",{className:"text-lg mr-2",children:e.icon}),e.name]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Cost"}),K===e.id?(0,k.jsx)("input",{type:"number",min:"1",value:e.cost,onChange:t=>Re(e.id,"cost",parseInt(t.target.value)||1),className:"w-full px-2 py-1 border rounded text-sm"}):(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)(_,{className:"w-3 h-3 text-purple-500 mr-1"}),(0,k.jsxs)("span",{className:"font-medium text-purple-600",children:[e.cost," pts"]})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Category"}),K===e.id?(0,k.jsxs)("select",{value:e.category,onChange:t=>Re(e.id,"category",t.target.value),className:"w-full px-2 py-1 border rounded text-sm",children:[(0,k.jsx)("option",{value:"food",children:"Food & Drinks"}),(0,k.jsx)("option",{value:"break",children:"Time Off"}),(0,k.jsx)("option",{value:"reward",children:"Rewards"}),(0,k.jsx)("option",{value:"social",children:"Social"})]}):(0,k.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("food"===e.category?"bg-orange-100 text-orange-700":"break"===e.category?"bg-blue-100 text-blue-700":"reward"===e.category?"bg-green-100 text-green-700":"bg-purple-100 text-purple-700"),children:e.category})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Status"}),(0,k.jsx)("button",{onClick:()=>Re(e.id,"available",!e.available),className:"px-2 py-1 rounded-full text-xs font-medium ".concat(e.available?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:e.available?"Available":"Unavailable"})]})]}),(0,k.jsxs)("div",{className:"flex gap-2 ml-4",children:[K===e.id?(0,k.jsx)("button",{onClick:()=>Y(null),className:"p-1 text-green-600 hover:text-green-800",children:(0,k.jsx)(H,{className:"w-4 h-4"})}):(0,k.jsx)("button",{onClick:()=>Y(e.id),className:"p-1 text-blue-600 hover:text-blue-800",children:(0,k.jsx)(V,{className:"w-4 h-4"})}),(0,k.jsx)("button",{onClick:()=>Me(e.id),className:"p-1 text-red-600 hover:text-red-800",children:(0,k.jsx)(W,{className:"w-4 h-4"})})]})]}),(0,k.jsxs)("div",{className:"mt-3",children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Description"}),K===e.id?(0,k.jsx)("input",{type:"text",value:e.description,onChange:t=>Re(e.id,"description",t.target.value),className:"w-full px-2 py-1 border rounded text-sm"}):(0,k.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]}),K===e.id&&(0,k.jsxs)("div",{className:"mt-2",children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Icon"}),(0,k.jsx)("input",{type:"text",value:e.icon,onChange:t=>Re(e.id,"icon",t.target.value),className:"w-20 px-2 py-1 border rounded text-sm",placeholder:"\ud83c\udf81"})]})]},e.id))),0===o.length&&(0,k.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No store items yet. Add your first item above!"})]})]})]}),(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm mb-6 ".concat(S?"p-6":"p-2"),children:[(0,k.jsxs)("button",{onClick:()=>I(!S),className:"w-full flex items-center justify-between hover:text-gray-600 ".concat(S?"text-lg font-semibold text-gray-800 mb-4":"text-sm font-medium text-gray-700 py-1"),children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)(p,{className:"mr-2 ".concat(S?"w-5 h-5":"w-4 h-4")}),"Prep List Management"]}),(0,k.jsx)("span",{className:"transition-transform ".concat(S?"text-xl rotate-180":"text-sm"),children:"\u25bc"})]}),S&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,k.jsx)("h4",{className:"font-medium text-gray-700 mb-3",children:"Add New Prep Item"}),(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prep Name"}),(0,k.jsx)("input",{type:"text",placeholder:"e.g., Valkosipulimajoneesi",value:xe,onChange:e=>ve(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,k.jsx)("select",{value:be,onChange:e=>we(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500",children:Te.map((e=>(0,k.jsxs)("option",{value:e.id,children:[e.icon," ",e.name]},e.id)))})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estimated Time"}),(0,k.jsx)("input",{type:"text",placeholder:"e.g., 15 min",value:je,onChange:e=>ke(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Frequency (days)"}),(0,k.jsx)("input",{type:"number",min:"1",max:"30",placeholder:"3",value:Ne,onChange:e=>_e(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"})]}),(0,k.jsx)("div",{className:"md:col-span-2",children:(0,k.jsxs)("label",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[(0,k.jsx)("input",{type:"checkbox",checked:Ce,onChange:e=>Se(e.target.checked),className:"rounded border-gray-300 text-green-500 focus:ring-green-500"}),(0,k.jsx)("span",{children:"Include Recipe"})]})}),Ce&&(0,k.jsxs)("div",{className:"md:col-span-2 space-y-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ingredients"}),(0,k.jsx)("textarea",{value:Ie.ingredients,onChange:e=>Ee((t=>(0,s.A)((0,s.A)({},t),{},{ingredients:e.target.value}))),placeholder:"\u2022 **1 cup** majoneesi\n\u2022 **3-4** valkosipulin kyntt\xe4",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 h-24 font-mono text-sm"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instructions"}),(0,k.jsx)("textarea",{value:Ie.instructions,onChange:e=>Ee((t=>(0,s.A)((0,s.A)({},t),{},{instructions:e.target.value}))),placeholder:"1. **Sekoita**: Yhdist\xe4 majoneesi ja valkosipuli\n2. **Mausta**: Lis\xe4\xe4 sitruunamehu",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 h-24 font-mono text-sm"})]})]}),(0,k.jsx)("div",{className:"md:col-span-2",children:(0,k.jsxs)("button",{onClick:async()=>{if(xe.trim()&&je.trim()&&Ne.trim()){const e={id:Math.max(...l.map((e=>e.id)),0)+1,name:xe.trim(),category:be,estimatedTime:je.trim(),isCustom:!0,hasRecipe:Ce,frequency:parseInt(Ne)||1,recipe:Ce?Ie:null};y((t=>{const n=[...t,e];return x("prepItems",n),n})),ve(""),we("majoneesit"),ke(""),_e(""),Se(!1),Ee({ingredients:"",instructions:""})}},className:"w-full bg-green-500 text-white py-2 px-4 rounded-lg hover:bg-green-600 flex items-center justify-center",children:[(0,k.jsx)(p,{className:"w-4 h-4 mr-2"}),"Add Prep Item"]})})]})]}),(0,k.jsxs)("div",{className:"space-y-3",children:[(0,k.jsxs)("h4",{className:"font-medium text-gray-700",children:["Current Prep Items (",l.length,")"]}),l.map((e=>{var t,n;const r=Te.find((t=>t.id===e.category));return(0,k.jsxs)("div",{className:"border rounded-lg p-4 bg-white",children:[(0,k.jsxs)("div",{className:"flex items-start justify-between",children:[(0,k.jsxs)("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Name"}),$===e.id?(0,k.jsx)("input",{type:"text",value:e.name,onChange:t=>Le(e.id,"name",t.target.value),className:"w-full px-2 py-1 border rounded text-sm"}):(0,k.jsxs)("div",{className:"font-medium text-gray-800 flex items-center",children:[(0,k.jsx)("span",{className:"text-lg mr-2",children:null===r||void 0===r?void 0:r.icon}),e.name]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Category"}),$===e.id?(0,k.jsx)("select",{value:e.category,onChange:t=>Le(e.id,"category",t.target.value),className:"w-full px-2 py-1 border rounded text-sm",children:Te.map((e=>(0,k.jsx)("option",{value:e.id,children:e.name},e.id)))}):(0,k.jsx)("span",{className:"text-sm text-gray-600",children:null===r||void 0===r?void 0:r.name})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Time"}),$===e.id?(0,k.jsx)("input",{type:"text",value:e.estimatedTime,onChange:t=>Le(e.id,"estimatedTime",t.target.value),className:"w-full px-2 py-1 border rounded text-sm"}):(0,k.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,k.jsx)(P,{className:"w-3 h-3 mr-1"}),e.estimatedTime]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Frequency"}),$===e.id?(0,k.jsx)("input",{type:"number",min:"1",max:"30",value:e.frequency,onChange:t=>Le(e.id,"frequency",parseInt(t.target.value)||1),className:"w-full px-2 py-1 border rounded text-sm"}):(0,k.jsxs)("span",{className:"text-sm text-gray-600",children:["Every ",e.frequency," days"]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Recipe"}),(0,k.jsx)("div",{className:"flex items-center space-x-2",children:(0,k.jsx)("button",{onClick:()=>Le(e.id,"hasRecipe",!e.hasRecipe),className:"px-2 py-1 rounded-full text-xs font-medium ".concat(e.hasRecipe?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"),children:e.hasRecipe?"\ud83d\udcd6 Has Recipe":"No Recipe"})})]})]}),(0,k.jsxs)("div",{className:"flex gap-2 ml-4",children:[$===e.id?(0,k.jsx)("button",{onClick:()=>{return t=e.id,y((e=>{const n=e.map((e=>e.id===t?(0,s.A)({},e):e));return x("prepItems",n),n})),J(null),void Z(null);var t},className:"p-1 text-green-600 hover:text-green-800",children:(0,k.jsx)(H,{className:"w-4 h-4"})}):(0,k.jsx)("button",{onClick:()=>{e.hasRecipe?(Z(X===e.id?null:e.id),J(e.id)):J(e.id)},className:"p-1 text-blue-600 hover:text-blue-800",children:(0,k.jsx)(V,{className:"w-4 h-4"})}),(0,k.jsx)("button",{onClick:()=>{return t=e.id,void(window.confirm("Are you sure you want to remove this prep item?")&&y((e=>{const n=e.filter((e=>e.id!==t));return x("prepItems",n),n})));var t},className:"p-1 text-red-600 hover:text-red-800",children:(0,k.jsx)(W,{className:"w-4 h-4"})})]})]}),X===e.id&&e.hasRecipe&&(0,k.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[(0,k.jsx)("h5",{className:"font-medium text-gray-700 mb-3",children:"Recipe Editor"}),(0,k.jsxs)("div",{className:"space-y-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ingredients"}),(0,k.jsxs)("div",{className:"mb-2 flex space-x-2",children:[(0,k.jsx)("button",{onClick:()=>Fe(e.id,"ingredients","bold"),className:"px-2 py-1 bg-gray-100 rounded text-sm font-bold hover:bg-gray-200",children:"B"}),(0,k.jsx)("button",{onClick:()=>Fe(e.id,"ingredients","italic"),className:"px-2 py-1 bg-gray-100 rounded text-sm italic hover:bg-gray-200",children:"I"}),(0,k.jsx)("button",{onClick:()=>Fe(e.id,"ingredients","bullet"),className:"px-2 py-1 bg-gray-100 rounded text-sm hover:bg-gray-200",children:"\u2022"})]}),(0,k.jsx)("textarea",{id:"ingredients-".concat(e.id),value:(null===(t=e.recipe)||void 0===t?void 0:t.ingredients)||"",onChange:t=>Oe(e.id,"ingredients",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 h-24 font-mono text-sm",placeholder:"\u2022 **1 cup** majoneesi\n\u2022 **3-4** valkosipulin kyntt\xe4"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instructions"}),(0,k.jsxs)("div",{className:"mb-2 flex space-x-2",children:[(0,k.jsx)("button",{onClick:()=>Fe(e.id,"instructions","bold"),className:"px-2 py-1 bg-gray-100 rounded text-sm font-bold hover:bg-gray-200",children:"B"}),(0,k.jsx)("button",{onClick:()=>Fe(e.id,"instructions","italic"),className:"px-2 py-1 bg-gray-100 rounded text-sm italic hover:bg-gray-200",children:"I"}),(0,k.jsx)("button",{onClick:()=>Fe(e.id,"instructions","number"),className:"px-2 py-1 bg-gray-100 rounded text-sm hover:bg-gray-200",children:"1."})]}),(0,k.jsx)("textarea",{id:"instructions-".concat(e.id),value:(null===(n=e.recipe)||void 0===n?void 0:n.instructions)||"",onChange:t=>Oe(e.id,"instructions",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 h-24 font-mono text-sm",placeholder:"1. **Sekoita**: Yhdist\xe4 majoneesi ja valkosipuli\n2. **Mausta**: Lis\xe4\xe4 sitruunamehu"})]})]})]})]},e.id)})),0===l.length&&(0,k.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No prep items yet. Add your first prep item above!"})]})]})]}),(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,k.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,k.jsx)(b,{className:"w-5 h-5 mr-2"}),"Employee Management"]}),(0,k.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,k.jsx)("h4",{className:"font-medium text-gray-700 mb-3",children:"Add New Employee"}),(0,k.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,k.jsx)("input",{type:"text",placeholder:"Employee name",value:E,onChange:e=>T(e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,k.jsx)("select",{value:D,onChange:e=>A(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:a.map((e=>(0,k.jsx)("option",{value:e,children:e},e)))}),(0,k.jsx)("button",{onClick:()=>{ne(E,D,n,c,T,A)},className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 flex items-center",children:(0,k.jsx)(Q,{className:"w-4 h-4"})})]})]}),(0,k.jsx)("div",{className:"overflow-x-auto",children:(0,k.jsxs)("table",{className:"w-full border-collapse",children:[(0,k.jsx)("thead",{children:(0,k.jsxs)("tr",{className:"bg-gray-50",children:[(0,k.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Name"}),(0,k.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Role"}),(0,k.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Points"}),(0,k.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Mood"}),(0,k.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Last Updated"}),(0,k.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-center",children:"Actions"})]})}),(0,k.jsx)("tbody",{children:n.map((e=>(0,k.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,k.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:L===e.id?(0,k.jsx)("input",{type:"text",value:e.name,onChange:t=>re(e.id,"name",t.target.value,c),className:"w-full px-2 py-1 border rounded"}):e.name}),(0,k.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:L===e.id?(0,k.jsx)("select",{value:e.role,onChange:t=>re(e.id,"role",t.target.value,c),className:"w-full px-2 py-1 border rounded",children:a.map((e=>(0,k.jsx)("option",{value:e,children:e},e)))}):e.role}),(0,k.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)(_,{className:"w-3 h-3 text-purple-500 mr-1"}),(0,k.jsx)("span",{className:"font-medium text-purple-600",children:e.points})]})}),(0,k.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("div",{className:"w-3 h-3 rounded-full mr-2 ".concat((0,j.zQ)(e.mood))}),e.mood,"/5"]})}),(0,k.jsx)("td",{className:"border border-gray-200 px-4 py-2 text-sm text-gray-600",children:e.lastUpdated}),(0,k.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:(0,k.jsxs)("div",{className:"flex gap-2 justify-center",children:[L===e.id?(0,k.jsx)("button",{onClick:()=>O(null),className:"p-1 text-green-600 hover:text-green-800",children:(0,k.jsx)(H,{className:"w-4 h-4"})}):(0,k.jsx)("button",{onClick:()=>O(e.id),className:"p-1 text-blue-600 hover:text-blue-800",children:(0,k.jsx)(V,{className:"w-4 h-4"})}),(0,k.jsx)("button",{onClick:()=>se(e.id,c),className:"p-1 text-red-600 hover:text-red-800",children:(0,k.jsx)(W,{className:"w-4 h-4"})})]})})]},e.id)))})]})})]}),(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,k.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,k.jsx)(m,{className:"w-5 h-5 mr-2"}),"Task Management"]}),(0,k.jsxs)("button",{onClick:()=>{const e=Math.max(0,...i.map((e=>e.id)),...De.map((e=>e.id)))+1,t={id:e,task:"",location:"",priority:"medium",estimatedTime:"",points:5};Ae((e=>[...e,t])),U(e)},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center",children:[(0,k.jsx)(q,{className:"w-4 h-4 mr-2"}),"Add Task"]})]}),(0,k.jsx)("div",{className:"overflow-x-auto",children:(0,k.jsxs)("table",{className:"w-full border-collapse",children:[(0,k.jsx)("thead",{children:(0,k.jsxs)("tr",{className:"bg-gray-50",children:[(0,k.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Task"}),(0,k.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Location"}),(0,k.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Priority"}),(0,k.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Points"}),(0,k.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Est. Time"}),(0,k.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-center",children:"Actions"})]})}),(0,k.jsxs)("tbody",{children:[De.map((e=>(0,k.jsxs)("tr",{className:"hover:bg-yellow-50",children:[(0,k.jsx)("td",{className:"border border-yellow-300 px-4 py-2",children:(0,k.jsx)("input",{type:"text",value:e.task,onChange:t=>He(e.id,"task",t.target.value),className:"w-full px-2 py-1 border rounded"})}),(0,k.jsx)("td",{className:"border border-yellow-300 px-4 py-2",children:(0,k.jsx)("input",{type:"text",value:e.location,onChange:t=>He(e.id,"location",t.target.value),className:"w-full px-2 py-1 border rounded"})}),(0,k.jsx)("td",{className:"border border-yellow-300 px-4 py-2",children:(0,k.jsxs)("select",{value:e.priority,onChange:t=>He(e.id,"priority",t.target.value),className:"w-full px-2 py-1 border rounded",children:[(0,k.jsx)("option",{value:"low",children:"Low"}),(0,k.jsx)("option",{value:"medium",children:"Medium"}),(0,k.jsx)("option",{value:"high",children:"High"})]})}),(0,k.jsx)("td",{className:"border border-yellow-300 px-4 py-2",children:(0,k.jsx)("input",{type:"number",min:"1",max:"100",value:e.points,onChange:t=>He(e.id,"points",t.target.value),className:"w-full px-2 py-1 border rounded"})}),(0,k.jsx)("td",{className:"border border-yellow-300 px-4 py-2",children:(0,k.jsx)("input",{type:"text",value:e.estimatedTime,onChange:t=>He(e.id,"estimatedTime",t.target.value),className:"w-full px-2 py-1 border rounded"})}),(0,k.jsx)("td",{className:"border border-yellow-300 px-4 py-2",children:(0,k.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,k.jsx)("button",{onClick:()=>(e=>{const t=De.find((t=>t.id===e));t&&(u((e=>[...e,t])),Ae((t=>t.filter((t=>t.id!==e)))),U(null))})(e.id),className:"px-2 py-1 bg-green-500 text-white rounded hover:bg-green-600",title:"Save Task",children:(0,k.jsx)(H,{className:"w-4 h-4"})}),(0,k.jsx)("button",{onClick:()=>{return t=e.id,Ae((e=>e.filter((e=>e.id!==t)))),void U(null);var t},className:"px-2 py-1 bg-gray-400 text-white rounded hover:bg-gray-600",title:"Cancel",children:"\u2715"})]})})]},e.id))),i.map((e=>(0,k.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,k.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:F===e.id?(0,k.jsx)("input",{type:"text",value:Be(e,"task"),onChange:t=>We(e.id,"task",t.target.value),className:"w-full px-2 py-1 border rounded"}):e.task}),(0,k.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:F===e.id?(0,k.jsx)("input",{type:"text",value:Be(e,"location"),onChange:t=>We(e.id,"location",t.target.value),className:"w-full px-2 py-1 border rounded"}):e.location}),(0,k.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:F===e.id?(0,k.jsxs)("select",{value:e.priority,onChange:t=>ie(e.id,"priority",t.target.value,u),className:"w-full px-2 py-1 border rounded",children:[(0,k.jsx)("option",{value:"low",children:"Low"}),(0,k.jsx)("option",{value:"medium",children:"Medium"}),(0,k.jsx)("option",{value:"high",children:"High"})]}):(0,k.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("high"===e.priority?"bg-red-100 text-red-700":"medium"===e.priority?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"),children:e.priority})}),(0,k.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:F===e.id?(0,k.jsx)("input",{type:"number",min:"1",max:"100",value:e.points,onChange:t=>ie(e.id,"points",t.target.value,u),className:"w-full px-2 py-1 border rounded"}):(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)(_,{className:"w-3 h-3 text-purple-500 mr-1"}),(0,k.jsx)("span",{className:"font-medium text-purple-600",children:e.points})]})}),(0,k.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:F===e.id?(0,k.jsx)("input",{type:"text",value:Be(e,"estimatedTime"),onChange:t=>We(e.id,"estimatedTime",t.target.value),className:"w-full px-2 py-1 border rounded"}):e.estimatedTime}),(0,k.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:(0,k.jsxs)("div",{className:"flex gap-2 justify-center",children:[F===e.id?(0,k.jsx)("button",{onClick:()=>U(null),className:"p-1 text-green-600 hover:text-green-800",children:(0,k.jsx)(H,{className:"w-4 h-4"})}):(0,k.jsx)("button",{onClick:()=>U(e.id),className:"p-1 text-blue-600 hover:text-blue-800",children:(0,k.jsx)(V,{className:"w-4 h-4"})}),(0,k.jsx)("button",{onClick:()=>ae(e.id,u),className:"p-1 text-red-600 hover:text-red-800",title:"Delete Task",children:(0,k.jsx)(W,{className:"w-4 h-4"})})]})})]},e.id)))]})]})})]})]})},de=o("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),ue=o("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),he=e=>{var t,n,s,r;let{selectedDate:i,setSelectedDate:a,dailyData:o,employees:l,connectionStatus:c}=e;const d=o[i];return(0,k.jsxs)("div",{className:"space-y-6",children:[(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,k.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,k.jsx)(de,{className:"w-5 h-5 mr-2"}),"Daily Reports (Firebase Storage)"]}),(0,k.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,k.jsx)("div",{className:"w-2 h-2 rounded-full ".concat("connected"===c?"bg-green-500":"bg-red-500")}),(0,k.jsx)("span",{className:"text-xs text-gray-600",children:"connected"===c?"Live Data":"Offline"}),(0,k.jsx)("input",{type:"date",value:i,onChange:e=>a(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"}),(0,k.jsxs)("button",{className:"px-3 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 flex items-center",children:[(0,k.jsx)(ue,{className:"w-4 h-4 mr-1"}),"Export"]})]})]}),d?(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,k.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[(0,k.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:(null===(t=d.completedTasks)||void 0===t?void 0:t.length)||0}),(0,k.jsx)("div",{className:"text-sm text-blue-700",children:"Tasks Completed"})]}),(0,k.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[(0,k.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[d.completionRate||0,"%"]}),(0,k.jsx)("div",{className:"text-sm text-green-700",children:"Completion Rate"})]}),(0,k.jsxs)("div",{className:"bg-orange-50 rounded-lg p-4 text-center",children:[(0,k.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:(null===(n=d.employeeMoods)||void 0===n?void 0:n.length)||0}),(0,k.jsx)("div",{className:"text-sm text-orange-700",children:"Mood Updates"})]})]}):(0,k.jsxs)("div",{className:"text-center py-8 text-gray-500",children:["No data available for ",i]})]}),(null===d||void 0===d?void 0:d.completedTasks)&&(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,k.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Task Completions"}),(0,k.jsx)("div",{className:"overflow-x-auto",children:(0,k.jsxs)("table",{className:"w-full border-collapse",children:[(0,k.jsx)("thead",{children:(0,k.jsxs)("tr",{className:"bg-gray-50",children:[(0,k.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Time"}),(0,k.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Task"}),(0,k.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Employee"}),(0,k.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Status"})]})}),(0,k.jsx)("tbody",{children:d.completedTasks.map(((e,t)=>{const n=l.find((t=>t.id===e.employeeId));return(0,k.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,k.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:e.completedAt}),(0,k.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:e.taskName}),(0,k.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:(null===n||void 0===n?void 0:n.name)||"Unknown"}),(0,k.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:(0,k.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs",children:"Completed"})})]},t)}))})]})})]}),(null===d||void 0===d?void 0:d.employeeMoods)&&(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,k.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Mood Updates"}),(0,k.jsx)("div",{className:"overflow-x-auto",children:(0,k.jsxs)("table",{className:"w-full border-collapse",children:[(0,k.jsx)("thead",{children:(0,k.jsxs)("tr",{className:"bg-gray-50",children:[(0,k.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Time"}),(0,k.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Employee"}),(0,k.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Mood"}),(0,k.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Rating"})]})}),(0,k.jsx)("tbody",{children:d.employeeMoods.map(((e,t)=>{const n=l.find((t=>t.id===e.employeeId));return(0,k.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,k.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:e.updatedAt}),(0,k.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:(null===n||void 0===n?void 0:n.name)||"Unknown"}),(0,k.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("span",{className:"text-lg mr-2",children:w.Ur[e.mood-1]}),w._M[e.mood-1]]})}),(0,k.jsxs)("td",{className:"border border-gray-200 px-4 py-2",children:[e.mood,"/5"]})]},t)}))})]})})]}),(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,k.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"30-Day Overview"}),(0,k.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,k.jsx)("div",{className:"text-sm font-medium text-gray-600 mb-1",children:(new Date).toLocaleDateString("en-US",{month:"long",year:"numeric"})}),(0,k.jsxs)("div",{className:"grid grid-cols-7 gap-1",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((e=>(0,k.jsx)("div",{className:"text-xs font-medium text-gray-500 text-center",children:e},e))),(()=>{const e=new Date,t=[],n=new Date(e.getFullYear(),e.getMonth(),1);for(let r=0;r<n.getDay();r++)t.push((0,k.jsx)("div",{className:"p-2"},"empty-".concat(r)));const s=new Date(e.getFullYear(),e.getMonth()+1,0).getDate();for(let r=1;r<=s;r++){const n=new Date(e.getFullYear(),e.getMonth(),r),s=(0,j.po)(n),l=o[s]||{},c=(null===l||void 0===l?void 0:l.completionRate)||0,d=Math.floor((e.getTime()-n.getTime())/864e5);d>=0&&d<30?t.push((0,k.jsx)("div",{className:"p-2 rounded text-xs cursor-pointer transition-colors ".concat(s===i?"bg-purple-500 text-white":c>=80?"bg-green-100 text-green-700 hover:bg-green-200":c>=50?"bg-yellow-100 text-yellow-700 hover:bg-yellow-200":c>0?"bg-red-100 text-red-700 hover:bg-red-200":"bg-gray-100 text-gray-500 hover:bg-gray-200"),onClick:()=>a(s),title:"".concat(n.toLocaleDateString("en-US",{month:"short"})," ").concat(n.getDate(),": ").concat(c,"% completion"),children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsx)("span",{className:"font-medium",children:n.getDate()}),(0,k.jsxs)("span",{children:[c,"%"]})]})},s)):t.push((0,k.jsx)("div",{className:"p-2 rounded text-xs text-gray-300",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsx)("span",{children:n.getDate()}),(0,k.jsx)("span",{children:"-"})]})},"disabled-".concat(r)))}return t})()]})]}),(0,k.jsxs)("div",{className:"mt-4 flex justify-center space-x-4 text-xs",children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("div",{className:"w-3 h-3 bg-green-100 rounded mr-1"}),"80%+ completion"]}),(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("div",{className:"w-3 h-3 bg-yellow-100 rounded mr-1"}),"50-79% completion"]}),(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("div",{className:"w-3 h-3 bg-red-100 rounded mr-1"}),"Below 50%"]})]})]}),d&&(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,k.jsxs)("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:["Daily Summary - ",new Date(i).toLocaleDateString()]}),(0,k.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,k.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3 text-center",children:[(0,k.jsx)("div",{className:"text-xl font-bold text-blue-600",children:(null===(s=d.completedTasks)||void 0===s?void 0:s.length)||0}),(0,k.jsx)("div",{className:"text-sm text-blue-700",children:"Tasks Done"})]}),(0,k.jsxs)("div",{className:"bg-green-50 rounded-lg p-3 text-center",children:[(0,k.jsxs)("div",{className:"text-xl font-bold text-green-600",children:[d.completionRate||0,"%"]}),(0,k.jsx)("div",{className:"text-sm text-green-700",children:"Completion"})]}),(0,k.jsxs)("div",{className:"bg-purple-50 rounded-lg p-3 text-center",children:[(0,k.jsx)("div",{className:"text-xl font-bold text-purple-600",children:(null===(r=d.employeeMoods)||void 0===r?void 0:r.length)||0}),(0,k.jsx)("div",{className:"text-sm text-purple-700",children:"Mood Updates"})]})]}),(0,k.jsx)("div",{className:"overflow-x-auto",children:(0,k.jsxs)("table",{className:"w-full border-collapse border border-gray-200",children:[(0,k.jsx)("thead",{children:(0,k.jsxs)("tr",{className:"bg-gray-50",children:[(0,k.jsx)("th",{className:"border border-gray-200 px-3 py-2 text-left text-sm font-medium",children:"Time"}),(0,k.jsx)("th",{className:"border border-gray-200 px-3 py-2 text-left text-sm font-medium",children:"Employee"}),(0,k.jsx)("th",{className:"border border-gray-200 px-3 py-2 text-left text-sm font-medium",children:"Action"}),(0,k.jsx)("th",{className:"border border-gray-200 px-3 py-2 text-left text-sm font-medium",children:"Details"})]})}),(0,k.jsxs)("tbody",{children:[(d.completedTasks||[]).map(((e,t)=>{const n=l.find((t=>t.id===e.employeeId));return(0,k.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,k.jsx)("td",{className:"border border-gray-200 px-3 py-2 text-sm",children:e.completedAt}),(0,k.jsx)("td",{className:"border border-gray-200 px-3 py-2 text-sm font-medium",children:(null===n||void 0===n?void 0:n.name)||"Unknown"}),(0,k.jsx)("td",{className:"border border-gray-200 px-3 py-2",children:(0,k.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs",children:"\u2713 Task Completed"})}),(0,k.jsx)("td",{className:"border border-gray-200 px-3 py-2 text-sm",children:e.taskName})]},"task-".concat(t))})),(d.employeeMoods||[]).map(((e,t)=>{const n=l.find((t=>t.id===e.employeeId));return(0,k.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,k.jsx)("td",{className:"border border-gray-200 px-3 py-2 text-sm",children:e.updatedAt}),(0,k.jsx)("td",{className:"border border-gray-200 px-3 py-2 text-sm font-medium",children:(null===n||void 0===n?void 0:n.name)||"Unknown"}),(0,k.jsx)("td",{className:"border border-gray-200 px-3 py-2",children:(0,k.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-xs",children:"\ud83d\ude0a Mood Update"})}),(0,k.jsx)("td",{className:"border border-gray-200 px-3 py-2 text-sm",children:(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("span",{className:"text-lg mr-2",children:w.Ur[e.mood-1]}),w._M[e.mood-1]," (",e.mood,"/5)"]})})]},"mood-".concat(t))})),(!d.completedTasks||0===d.completedTasks.length)&&(!d.employeeMoods||0===d.employeeMoods.length)&&(0,k.jsx)("tr",{children:(0,k.jsx)("td",{colSpan:4,className:"border border-gray-200 px-3 py-8 text-center text-gray-500",children:"No activity recorded for this date"})})]})]})})]})]})},me=o("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),pe=[{id:"all",name:"All Items",icon:"\ud83c\udf7d\ufe0f"},{id:"majoneesit",name:"Majoneesit",icon:"\ud83e\udd44"},{id:"proteiinit",name:"Proteiinit",icon:"\ud83e\udd69"},{id:"kasvikset",name:"Kasvikset",icon:"\ud83e\udd57"},{id:"marinointi",name:"Marinointi & pikkel\xf6inti",icon:"\ud83e\udd52"},{id:"kastikkeet",name:"Kastikkeet",icon:"\ud83e\uddc2"},{id:"muut",name:"Muut",icon:"\ud83d\udd27"}],fe=[{id:"morning",name:"Morning (6-10 AM)",icon:"\ud83c\udf05"},{id:"midday",name:"Mid-day (10 AM-2 PM)",icon:"\u2600\ufe0f"},{id:"afternoon",name:"Afternoon (2-6 PM)",icon:"\ud83c\udf24\ufe0f"},{id:"evening",name:"Evening (6-10 PM)",icon:"\ud83c\udf06"}],ge=[{id:"low",name:"Low",color:"bg-green-100 text-green-700",icon:"\ud83d\udfe2"},{id:"medium",name:"Medium",color:"bg-yellow-100 text-yellow-700",icon:"\ud83d\udfe1"},{id:"high",name:"High",color:"bg-red-100 text-red-700",icon:"\ud83d\udd34"}],ye=e=>{const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(s)},xe=e=>e.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/\n/g,"<br/>"),ve=(e,t)=>"".concat(ye(e),"-").concat(t),be=()=>Date.now()+Math.random(),we=o("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),je=t=>{let{scheduledPreps:n,onToggleCompletion:s,onShowRecipe:r}=t;const[i,a]=(0,e.useState)(new Set),o=ye(new Date),l=n.filter((e=>e.scheduledDate===o));e.useEffect((()=>{console.log("\ud83d\udd0d TodayView Debug Info:",{todayDateString:o,totalScheduledPreps:n.length,todayScheduledPreps:l.length,allScheduledDates:Array.from(new Set(n.map((e=>e.scheduledDate)))).sort(),sampleTodayPreps:l.slice(0,3).map((e=>({id:e.id,name:e.name,scheduledDate:e.scheduledDate,completed:e.completed})))})}),[o,n,l]);const c=l.filter((e=>e.completed)).length,d=l.length,h=e=>{var t;const n=ge.find((t=>t.id===e.priority)),o=i.has(e.id);return(0,k.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg transition-all ".concat(o?"bg-blue-50 border-blue-200":"hover:bg-gray-50"),children:[(0,k.jsxs)("div",{className:"flex items-center space-x-3 select-none",children:[(0,k.jsx)("button",{onClick:t=>{t.stopPropagation(),(async e=>{if(i.has(e))console.log("\u23f3 Completion toggle already in progress for prep:",e);else{a((t=>new Set(t).add(e)));try{console.log("\ud83d\udd04 TodayView: Toggling completion for prep:",e),await s(e),console.log("\u2705 TodayView: Completion toggle finished for prep:",e)}catch(t){console.error("\u274c TodayView: Completion toggle failed for prep:",e,t)}finally{a((t=>{const n=new Set(t);return n.delete(e),n}))}}})(e.id)},disabled:o,className:"w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ".concat(e.completed?"bg-green-500 border-green-500":o?"border-blue-400 bg-blue-50":"border-gray-300 hover:border-green-500"," ").concat(o?"cursor-wait":"cursor-pointer"," disabled:cursor-wait"),title:o?"Saving...":e.completed?"Mark as incomplete":"Mark as complete",children:o?(0,k.jsx)(we,{className:"w-4 h-4 text-blue-500 animate-spin"}):e.completed?(0,k.jsx)(u,{className:"w-4 h-4 text-white"}):null}),(0,k.jsxs)("div",{className:"flex-1",children:[(0,k.jsxs)("div",{className:"font-medium flex items-center space-x-2 transition-all ".concat(e.completed?"line-through text-gray-500":"text-gray-800"),children:[(0,k.jsx)("span",{children:e.name}),e.hasRecipe&&e.recipe&&(0,k.jsx)("button",{onClick:()=>r(e.recipe,e.name),className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full hover:bg-green-200 transition-colors",children:"\ud83d\udcd6 Recipe"}),o&&(0,k.jsx)("span",{className:"text-xs text-blue-600 bg-blue-100 px-2 py-0.5 rounded-full",children:"Saving..."})]}),(0,k.jsxs)("div",{className:"text-sm text-gray-600",children:[e.estimatedTime," \u2022 ",e.category,e.timeSlot&&(0,k.jsxs)(k.Fragment,{children:[" "," \u2022 ",(null===(t=fe.find((t=>t.id===e.timeSlot)))||void 0===t?void 0:t.name)||e.timeSlot]})]})]})]}),(0,k.jsx)("div",{className:"flex items-center space-x-2",children:(0,k.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat((null===n||void 0===n?void 0:n.color)||"bg-gray-100 text-gray-700"),children:(null===n||void 0===n?void 0:n.name)||"Medium"})})]},e.id)};return(0,k.jsxs)("div",{className:"space-y-6",children:[(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,k.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Today's Progress"}),(0,k.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,k.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[(0,k.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:d}),(0,k.jsx)("div",{className:"text-sm text-blue-700",children:"Total Preps"})]}),(0,k.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[(0,k.jsx)("div",{className:"text-2xl font-bold text-green-600",children:c}),(0,k.jsx)("div",{className:"text-sm text-green-700",children:"Completed"})]}),(0,k.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[(0,k.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[d>0?Math.round(c/d*100):0,"%"]}),(0,k.jsx)("div",{className:"text-sm text-purple-700",children:"Complete"})]})]}),d>0&&(0,k.jsxs)("div",{className:"mt-4",children:[(0,k.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[(0,k.jsx)("span",{children:"Progress"}),(0,k.jsxs)("span",{children:[c," of ",d," tasks"]})]}),(0,k.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,k.jsx)("div",{className:"bg-gradient-to-r from-green-400 to-green-600 h-2 rounded-full transition-all duration-500",style:{width:"".concat(d>0?c/d*100:0,"%")}})})]})]}),(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,k.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Today's Prep Tasks"}),i.size>0&&(0,k.jsxs)("div",{className:"flex items-center text-blue-600 text-sm",children:[(0,k.jsx)(we,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving ",i.size," change",1!==i.size?"s":"","..."]})]}),0===l.length?(0,k.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,k.jsx)(p,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),(0,k.jsx)("p",{className:"text-lg mb-2",children:"No prep tasks scheduled for today"}),(0,k.jsx)("p",{className:"text-sm",children:'Use the "Plan Preps" tab to schedule tasks.'})]}):(0,k.jsxs)("div",{className:"space-y-4",children:[fe.map((e=>{const t=l.filter((t=>t.timeSlot===e.id));if(0===t.length)return null;const n=t.filter((e=>e.completed)).length;return(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,k.jsxs)("h4",{className:"font-medium text-gray-700 flex items-center",children:[(0,k.jsx)("span",{className:"mr-2",children:e.icon}),e.name]}),(0,k.jsxs)("span",{className:"text-sm text-gray-500",children:[n,"/",t.length," completed"]})]}),(0,k.jsx)("div",{className:"space-y-3",children:t.map(h)})]},e.id)})),(()=>{const e=l.filter((e=>""===e.timeSlot));if(0===e.length)return null;const t=e.filter((e=>e.completed)).length;return(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,k.jsx)("h4",{className:"font-medium text-gray-700 flex items-center",children:"\ud83d\udd50 Anytime"}),(0,k.jsxs)("span",{className:"text-sm text-gray-500",children:[t,"/",e.length," completed"]})]}),(0,k.jsx)("div",{className:"space-y-3",children:e.map(h)})]})})()]})]}),d>0&&c===d&&(0,k.jsxs)("div",{className:"bg-gradient-to-r from-green-400 to-green-600 rounded-xl p-6 text-white text-center",children:[(0,k.jsx)("div",{className:"text-3xl mb-2",children:"\ud83c\udf89"}),(0,k.jsx)("h3",{className:"text-xl font-bold mb-1",children:"All Done!"}),(0,k.jsxs)("p",{className:"text-green-100",children:["Great job! You've completed all ",d," prep tasks for today."]})]})]})},ke=t=>{let{scheduledPreps:n,currentDate:s,setCurrentDate:r,selectedDate:i,setSelectedDate:a,setActiveView:o,onToggleCompletion:l,onShowRecipe:c}=t;const[d,h]=(0,e.useState)(null),m=()=>{const e=[];for(let t=0;t<7;t++){const n=new Date(s);n.setDate(s.getDate()+t),e.push(n)}return e};return(0,k.jsxs)("div",{className:"space-y-6",children:[(0,k.jsx)("style",{dangerouslySetInnerHTML:{__html:'\n          .priority-glow {\n            position: relative;\n            z-index: 0;\n            font-weight: 600;\n            border-radius: 0.25rem;\n            padding: 0.125rem 0.25rem;\n          }\n          .priority-glow::before {\n            content: "";\n            position: absolute;\n            top: 50%;\n            left: 50%;\n            width: 110%;\n            height: 2em;\n            transform: translate(-50%, -50%);\n            border-radius: 0.375rem;\n            filter: blur(6px);\n            z-index: -1;\n            opacity: 0.3;\n          }\n          .priority-low {\n            color: #047857;\n          }\n          .priority-low::before {\n            box-shadow: 0 0 8px 4px rgba(5, 150, 105, 0.4);\n          }\n          .priority-medium {\n            color: #92400e;\n          }\n          .priority-medium::before {\n            box-shadow: 0 0 8px 4px rgba(202, 138, 4, 0.4);\n          }\n          .priority-high {\n            color: #b91c1c;\n          }\n          .priority-high::before {\n            box-shadow: 0 0 8px 4px rgba(185, 28, 28, 0.4);\n          }\n        '}}),(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,k.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Week Overview"}),(0,k.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,k.jsx)("button",{onClick:()=>{const e=new Date(s);e.setDate(e.getDate()-7),r(e)},className:"px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm",children:"\u2190 Previous Week"}),(0,k.jsx)("button",{onClick:()=>{const e=new Date(s);e.setDate(e.getDate()+7),r(e)},className:"px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm",children:"Next Week \u2192"})]})]}),(0,k.jsx)("div",{className:"space-y-3",children:m().map(((e,t)=>{const s=n.filter((t=>t.scheduledDate===ye(e))),r=s.filter((e=>e.completed)).length,m=ye(e)===ye(new Date),p=ye(e)===ye(i),f=d===ye(e);return(0,k.jsxs)("div",{className:"border rounded-xl transition-all duration-500 ease-in-out overflow-hidden ".concat(f?"bg-gray-50":"bg-white hover:bg-gray-50"," ").concat(m?"ring-2 ring-blue-500":p&&!f?"ring-2 ring-purple-500":f?"ring-2 ring-green-500 shadow-lg":"hover:shadow-md"),children:[(0,k.jsxs)("div",{className:"flex items-center cursor-pointer transition-all duration-300 ".concat(f?"p-4 bg-white border-b":"p-4"),onClick:()=>{h(f?null:ye(e))},children:[(0,k.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,k.jsxs)("div",{className:"text-center",children:[(0,k.jsx)("div",{className:"font-medium text-gray-800 text-sm",children:e.toLocaleDateString("en-US",{weekday:"short"})}),(0,k.jsx)("div",{className:"text-2xl font-bold ".concat(m?"text-blue-600":p&&!f?"text-purple-600":f?"text-green-600":"text-gray-600"),children:e.getDate()}),m&&(0,k.jsx)("div",{className:"text-xs text-blue-600 font-medium",children:"Today"}),p&&!m&&!f&&(0,k.jsx)("div",{className:"text-xs text-purple-600 font-medium",children:"Selected"}),f&&(0,k.jsx)("div",{className:"text-xs text-green-600 font-medium",children:"Expanded"})]}),(0,k.jsxs)("div",{className:"flex-1",children:[(0,k.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,k.jsxs)("div",{className:"text-sm text-gray-600",children:[r,"/",s.length," tasks"]}),s.length>0&&(0,k.jsx)("div",{className:"flex-1 max-w-32",children:(0,k.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,k.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(r===s.length?"bg-green-500":r>0?"bg-yellow-500":"bg-gray-300"),style:{width:"".concat(r/s.length*100,"%")}})})})]}),!f&&s.length>0&&(0,k.jsxs)("div",{className:"text-xs mt-1",children:[s.slice(0,2).map(((e,t)=>(0,k.jsxs)("span",{className:"priority-glow priority-".concat(e.priority," ").concat(t>0?"ml-1":""),children:[e.name,t<Math.min(s.length,2)-1&&", "]},e.id))),s.length>2&&(0,k.jsxs)("span",{className:"text-gray-500 ml-1",children:["+",s.length-2," more"]})]}),!f&&0===s.length&&(0,k.jsx)("div",{className:"text-xs text-gray-400 mt-1 italic",children:"No preps scheduled"})]})]}),(0,k.jsx)("div",{className:"transform transition-transform duration-300 ".concat(f?"rotate-180":"rotate-0"),children:(0,k.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,k.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),(0,k.jsx)("div",{className:"transition-all duration-500 ease-in-out overflow-hidden ".concat(f?"max-h-96 opacity-100":"max-h-0 opacity-0"),children:f&&(0,k.jsx)("div",{className:"p-4 space-y-3 overflow-y-auto max-h-80",children:0===s.length?(0,k.jsxs)("div",{className:"text-center py-8",children:[(0,k.jsx)("div",{className:"text-gray-400 text-sm",children:"No prep tasks scheduled"}),(0,k.jsx)("button",{onClick:t=>{t.stopPropagation(),a(e),o("plan")},className:"mt-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm",children:"Plan Preps for This Day"})]}):(0,k.jsxs)(k.Fragment,{children:[(()=>{const e=s.filter((e=>""===e.timeSlot)),t=fe.map((e=>({slot:e,preps:s.filter((t=>t.timeSlot===e.id))}))).filter((e=>e.preps.length>0));return(0,k.jsxs)(k.Fragment,{children:[t.map((e=>{let{slot:t,preps:n}=e;return(0,k.jsxs)("div",{children:[(0,k.jsxs)("h5",{className:"font-medium text-gray-700 text-sm mb-2 flex items-center",children:[(0,k.jsx)("span",{className:"mr-2",children:t.icon}),t.name]}),(0,k.jsx)("div",{className:"space-y-2",children:n.map((e=>{const t=ge.find((t=>t.id===e.priority));return(0,k.jsx)("div",{className:"p-3 rounded-lg border-l-4 transition-colors ".concat(e.completed?"bg-green-50 border-green-500":"bg-white border-gray-300 hover:bg-gray-50"),children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,k.jsx)("button",{onClick:t=>{t.stopPropagation(),l(e.id)},className:"w-5 h-5 rounded-full border-2 flex items-center justify-center transition-colors ".concat(e.completed?"bg-green-500 border-green-500":"border-gray-300 hover:border-green-500"),children:e.completed&&(0,k.jsx)(u,{className:"w-3 h-3 text-white"})}),(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:"font-medium text-sm flex items-center space-x-2 priority-glow priority-".concat(e.priority," ").concat(e.completed?"line-through opacity-60":""),children:[(0,k.jsx)("span",{children:e.name}),e.hasRecipe&&(0,k.jsx)("button",{onClick:t=>{t.stopPropagation(),e.recipe&&c(e.recipe,e.name)},className:"text-xs bg-green-100 text-green-700 px-1.5 py-0.5 rounded-full hover:bg-green-200 transition-colors",children:"\ud83d\udcd6"})]}),(0,k.jsxs)("div",{className:"text-xs text-gray-500",children:[e.estimatedTime," \u2022 ",e.category]})]})]}),(0,k.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat((null===t||void 0===t?void 0:t.color)||"bg-gray-100 text-gray-700"),children:(null===t||void 0===t?void 0:t.name)||"Medium"})]})},e.id)}))})]},t.id)})),e.length>0&&(0,k.jsxs)("div",{children:[(0,k.jsx)("h5",{className:"font-medium text-gray-700 text-sm mb-2 flex items-center",children:"\ud83d\udd50 Anytime"}),(0,k.jsx)("div",{className:"space-y-2",children:e.map((e=>{const t=ge.find((t=>t.id===e.priority));return(0,k.jsx)("div",{className:"p-3 rounded-lg border-l-4 transition-colors ".concat(e.completed?"bg-green-50 border-green-500":"bg-white border-gray-300 hover:bg-gray-50"),children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,k.jsx)("button",{onClick:t=>{t.stopPropagation(),l(e.id)},className:"w-5 h-5 rounded-full border-2 flex items-center justify-center transition-colors ".concat(e.completed?"bg-green-500 border-green-500":"border-gray-300 hover:border-green-500"),children:e.completed&&(0,k.jsx)(u,{className:"w-3 h-3 text-white"})}),(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:"font-medium text-sm flex items-center space-x-2 priority-glow priority-".concat(e.priority," ").concat(e.completed?"line-through opacity-60":""),children:[(0,k.jsx)("span",{children:e.name}),e.hasRecipe&&(0,k.jsx)("button",{onClick:t=>{t.stopPropagation(),e.recipe&&c(e.recipe,e.name)},className:"text-xs bg-green-100 text-green-700 px-1.5 py-0.5 rounded-full hover:bg-green-200 transition-colors",children:"\ud83d\udcd6"})]}),(0,k.jsxs)("div",{className:"text-xs text-gray-500",children:[e.estimatedTime," \u2022 ",e.category]})]})]}),(0,k.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat((null===t||void 0===t?void 0:t.color)||"bg-gray-100 text-gray-700"),children:(null===t||void 0===t?void 0:t.name)||"Medium"})]})},e.id)}))})]})]})})(),(0,k.jsxs)("div",{className:"flex gap-2 pt-2 border-t",children:[(0,k.jsx)("button",{onClick:t=>{t.stopPropagation(),a(e),o("plan")},className:"flex-1 px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm",children:"Edit Preps"}),(0,k.jsx)("button",{onClick:e=>{e.stopPropagation(),h(null)},className:"px-3 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-sm",children:"Collapse"})]})]})})})]},t)}))}),(0,k.jsxs)("div",{className:"mt-6 grid grid-cols-3 gap-4",children:[(0,k.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3 text-center",children:[(0,k.jsx)("div",{className:"text-xl font-bold text-blue-600",children:m().reduce(((e,t)=>e+n.filter((e=>e.scheduledDate===ye(t))).length),0)}),(0,k.jsx)("div",{className:"text-sm text-blue-700",children:"Total Tasks This Week"})]}),(0,k.jsxs)("div",{className:"bg-green-50 rounded-lg p-3 text-center",children:[(0,k.jsx)("div",{className:"text-xl font-bold text-green-600",children:m().reduce(((e,t)=>e+n.filter((e=>e.scheduledDate===ye(t)&&e.completed)).length),0)}),(0,k.jsx)("div",{className:"text-sm text-green-700",children:"Completed"})]}),(0,k.jsxs)("div",{className:"bg-purple-50 rounded-lg p-3 text-center",children:[(0,k.jsxs)("div",{className:"text-xl font-bold text-purple-600",children:[(()=>{const e=m().reduce(((e,t)=>e+n.filter((e=>e.scheduledDate===ye(t))).length),0),t=m().reduce(((e,t)=>e+n.filter((e=>e.scheduledDate===ye(t)&&e.completed)).length),0);return e>0?Math.round(t/e*100):0})(),"%"]}),(0,k.jsx)("div",{className:"text-sm text-purple-700",children:"Week Progress"})]})]})]})]})},Ne=e=>{var t,n,s;let{prep:r,isSelected:i,selection:a,showPriorityOptions:o,showTimeOptions:l,assignmentStep:c,onToggleSelection:d,onUpdateSelection:h,onShowPriorityOptions:m,onShowRecipe:p,onSave:f,context:g="main"}=e;const y="suggested"===g?"suggested-".concat(r.id):r.id;return(0,k.jsx)("div",{className:"border rounded-lg p-4 transition-colors ".concat(i?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:(0,k.jsx)("div",{className:"flex items-center justify-between",children:(0,k.jsxs)("div",{className:"flex items-center space-x-3 flex-1",children:[(0,k.jsx)("button",{onClick:()=>d(r),className:"w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ".concat(i?"bg-blue-500 border-blue-500":"border-gray-300 hover:border-blue-500"),children:i&&(0,k.jsx)(u,{className:"w-4 h-4 text-white"})}),(0,k.jsxs)("div",{className:"flex-1",children:[(0,k.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,k.jsx)("h4",{className:"font-medium ".concat(i?"text-blue-900":"text-gray-800"),children:r.name}),r.hasRecipe&&r.recipe&&(0,k.jsx)("button",{onClick:()=>p(r.recipe,r.name),className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full hover:bg-green-200 transition-colors",children:"\ud83d\udcd6 Recipe"})]}),(0,k.jsxs)("p",{className:"text-sm text-gray-600 flex items-center space-x-2",children:[(0,k.jsx)("span",{children:r.estimatedTime}),(0,k.jsx)("span",{children:"\u2022"}),(0,k.jsx)("span",{children:r.category}),(0,k.jsx)("span",{children:"\u2022"}),(0,k.jsxs)("span",{children:["Every ",r.frequency," days"]}),r.isCustom&&(0,k.jsx)("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 rounded-full text-xs",children:"Custom"})]}),(0,k.jsx)("div",{className:"mt-2",children:(0,k.jsxs)("div",{className:"relative w-2/3",children:[(0,k.jsx)("button",{onClick:()=>{m(o===y?null:y)},className:"w-full px-2 py-1 rounded text-xs transition-colors ".concat(i?(null===(t=ge.find((e=>e.id===a.priority)))||void 0===t?void 0:t.color)+" font-medium":"timeSlot"===c[r.id]?"bg-green-100 text-green-700 font-medium":"bg-blue-100 text-blue-700 hover:bg-blue-200"),children:i?"".concat(null===(n=ge.find((e=>e.id===a.priority)))||void 0===n?void 0:n.name," Priority").concat(a.timeSlot?" \u2022 ".concat(null===(s=fe.find((e=>e.id===a.timeSlot)))||void 0===s?void 0:s.name):" \u2022 Anytime"):"timeSlot"===c[r.id]?"Now choose time slot":"Click to assign priority & time"}),o===y&&(0,k.jsx)("div",{className:"dropdown-container soft-dropdown absolute top-full left-0 mt-2 rounded-xl p-3 z-20 w-full min-w-64 max-w-xs",children:(0,k.jsx)("div",{className:"space-y-3",children:(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center",children:[(0,k.jsx)("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),"Choose Priority Level"]}),(0,k.jsx)("div",{className:"space-y-2",children:ge.map((e=>(0,k.jsx)("button",{onClick:()=>h(r,"priority",e.id,g),className:"soft-button w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 hover:scale-105 active:scale-95 ".concat(e.color),children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsx)("span",{children:e.name}),(0,k.jsx)("span",{className:"text-xs opacity-70",children:e.icon})]})},e.id)))})]})})}),l===y&&(0,k.jsx)("div",{className:"dropdown-container soft-dropdown absolute top-full left-0 mt-2 rounded-xl p-3 z-20 w-full min-w-64 max-w-sm",children:(0,k.jsx)("div",{className:"space-y-3",children:(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center",children:[(0,k.jsx)("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"Choose Time Slot"]}),(0,k.jsxs)("div",{className:"space-y-2",children:[(0,k.jsx)("button",{onClick:()=>h(r,"timeSlot","",g),className:"soft-button w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 hover:scale-105 active:scale-95 bg-gray-50 text-gray-700 hover:bg-gray-100",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsx)("span",{children:"Anytime"}),(0,k.jsx)("span",{className:"text-xs opacity-70",children:"\ud83d\udd50"})]})}),fe.map((e=>(0,k.jsx)("button",{onClick:()=>h(r,"timeSlot",e.id,g),className:"soft-button w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 hover:scale-105 active:scale-95 bg-blue-50 text-blue-700 hover:bg-blue-100",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsx)("span",{children:e.name}),(0,k.jsx)("span",{className:"text-xs opacity-70",children:e.icon})]})},e.id)))]})]})})})]})})]})]})})})},_e=e=>{let{isOpen:t,recipe:n,recipeName:s,onClose:r}=e;return t&&n?(0,k.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,k.jsxs)("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,k.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,k.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:(0,k.jsx)(p,{className:"w-5 h-5 text-green-600"})}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:s}),(0,k.jsx)("p",{className:"text-sm text-gray-600",children:"Recipe Details"})]})]}),(0,k.jsx)("button",{onClick:r,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:(0,k.jsx)(v,{className:"w-5 h-5"})})]}),(0,k.jsxs)("div",{className:"p-6 space-y-6",children:[(0,k.jsxs)("div",{children:[(0,k.jsxs)("h4",{className:"text-md font-semibold text-gray-800 mb-3 flex items-center",children:[(0,k.jsx)("span",{className:"w-6 h-6 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-sm mr-2",children:"\ud83e\udd44"}),"Ingredients"]}),(0,k.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,k.jsx)("div",{className:"whitespace-pre-wrap text-gray-700",dangerouslySetInnerHTML:{__html:xe(n.ingredients)}})})]}),(0,k.jsxs)("div",{children:[(0,k.jsxs)("h4",{className:"text-md font-semibold text-gray-800 mb-3 flex items-center",children:[(0,k.jsx)("span",{className:"w-6 h-6 bg-green-100 text-green-600 rounded-full flex items-center justify-center text-sm mr-2",children:"\ud83d\udcdd"}),"Instructions"]}),(0,k.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,k.jsx)("div",{className:"whitespace-pre-wrap text-gray-700",dangerouslySetInnerHTML:{__html:xe(n.instructions)}})})]})]}),(0,k.jsx)("div",{className:"flex justify-end p-6 border-t bg-gray-50",children:(0,k.jsx)("button",{onClick:r,className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Close Recipe"})})]})}):null},Ce=o("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),Se=o("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),Ie=o("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Ee=o("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),Te=o("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),De=o("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Ae=o("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),Pe=o("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),Re=t=>{let{currentDate:n,selectedDate:s,prepItems:r,scheduledPreps:i,prepSelections:a,selectedCategory:o,searchQuery:l,onToggleSelection:c,onUpdateSelection:d,onShowRecipe:u,showPriorityOptions:m,showTimeOptions:p,assignmentStep:f,onShowPriorityOptions:g,onResetWorkflow:y}=t;const[x,v]=(0,e.useState)(!0),[b,w]=(0,e.useState)("smart"),[j,N]=(0,e.useState)(5),[C,S]=(0,e.useState)(!1),[I,E]=(0,e.useState)([]),[T,D]=(0,e.useState)(!1);(0,e.useEffect)((()=>{const e=()=>{var e,t,n;const s=document.querySelector(".bg-red-100.text-red-700"),r=s&&(null===(e=s.textContent)||void 0===e?void 0:e.includes("Admin Mode")),i=document.querySelector(".bg-white.border-b"),a=i&&((null===(t=i.textContent)||void 0===t?void 0:t.includes("Admin Panel"))||(null===(n=i.textContent)||void 0===n?void 0:n.includes("Daily Reports"))),o=document.querySelector('[title="Logout Admin"]'),l=r||a||!!o;D(l),l!==T&&console.log("\ud83d\udd27 Prep Suggestions: Admin mode detected:",{hasAdminBadge:!!r,hasAdminTabs:!!a,hasLogoutButton:!!o,isAdmin:l})};e();const t=setInterval(e,1e3);return()=>clearInterval(t)}),[T]);const A=[{id:"low",name:"Low",color:"bg-green-100 text-green-700",icon:"\ud83d\udfe2"},{id:"medium",name:"Medium",color:"bg-yellow-100 text-yellow-700",icon:"\ud83d\udfe1"},{id:"high",name:"High",color:"bg-red-100 text-red-700",icon:"\ud83d\udd34"}],P=[{id:"morning",name:"Morning (6-10 AM)",icon:"\ud83c\udf05"},{id:"midday",name:"Mid-day (10 AM-2 PM)",icon:"\u2600\ufe0f"},{id:"afternoon",name:"Afternoon (2-6 PM)",icon:"\ud83c\udf24\ufe0f"},{id:"evening",name:"Evening (6-10 PM)",icon:"\ud83c\udf06"}],R=e=>{const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(s)},M=e=>{var t;const n="".concat(R(s),"-").concat(e.id);return(null===(t=a[n])||void 0===t?void 0:t.selected)||!1},L=(0,e.useMemo)((()=>{const e=R(n),t=R(s);return r.filter((e=>{const n="all"===o||e.category===o,s=""===l||e.name.toLowerCase().includes(l.toLowerCase())||e.category.toLowerCase().includes(l.toLowerCase()),r=i.some((n=>n.prepId===e.id&&n.scheduledDate===t));return n&&s&&!r})).map((t=>{var n;const s=i.filter((e=>e.prepId===t.id&&e.completed)).sort(((e,t)=>new Date(t.scheduledDate).getTime()-new Date(e.scheduledDate).getTime())),r=null===(n=s[0])||void 0===n?void 0:n.scheduledDate,a=r?Math.floor((new Date(e).getTime()-new Date(r).getTime())/864e5):999,{learnedFreq:o,confidence:l,dayPatterns:c}=((e,t)=>{if(t.length<2)return{learnedFreq:0,confidence:0,dayPatterns:{}};const n=[],s={};for(let a=0;a<t.length-1;a++){const e=Math.floor((new Date(t[a].scheduledDate).getTime()-new Date(t[a+1].scheduledDate).getTime())/864e5);n.push(e)}t.forEach((e=>{const t=new Date(e.scheduledDate).toLocaleDateString("en-US",{weekday:"long"});s[t]=(s[t]||0)+1}));const r=n.reduce(((e,t)=>e+t),0)/n.length,i=100*(1/(1+n.reduce(((e,t)=>e+Math.pow(t-r,2)),0)/n.length/r)*.7+.3*Math.min(t.length/10,1));return{learnedFreq:Math.round(10*r)/10,confidence:Math.round(i),dayPatterns:s}})(t.id,s),d=l>60&&o>0?o:t.frequency;if(T&&o>0&&Math.abs(o-t.frequency)>.5){const e={prepId:t.id,prepName:t.name,timestamp:(new Date).toISOString(),recommendedFreq:t.frequency,learnedFreq:o,reason:"Pattern analysis from ".concat(s.length," completions"),confidence:l,dataPoints:s.length};E((n=>n.some((e=>e.prepId===t.id&&Math.abs(new Date(e.timestamp).getTime()-(new Date).getTime())<6e4))?n:[e,...n.slice(0,49)]))}const u=i.filter((e=>e.prepId===t.id)).length,h=u>0?s.length/u*100:0,m=d,p=a-m;let f,g=0,y="",x="",v="medium",b="morning";return 999===a?(f="high",g=90,y="Never prepared before",x="\u2753",v="high"):p>m?(f="critical",g=100+p,y="".concat(Math.round(p)," days overdue"),x="\ud83d\udea8",v="high",b="morning"):p>0?(f="high",g=70+p,y="".concat(Math.round(p)," ").concat(1===Math.round(p)?"day":"days"," overdue"),x="\u26a0\ufe0f",v="high"):a>=m-1?(f="medium",g=m-a+50,y="Due soon",x="\u23f0",v="medium"):h<60?(f="medium",g=60-h+40,y="Low completion rate (".concat(Math.round(h),"%)"),x="\ud83d\udcc9",v="medium"):l>60&&Math.abs(o-t.frequency)>1?(f="low",g=35,y="Frequency analysis suggests ".concat(Math.round(o)," days"),x="\ud83d\udd0d",v="low",b="afternoon"):(f="low",g=20,y="Routine preparation",x="\u2728",v="low",b="afternoon"),d<=2&&(g+=15),t.hasRecipe&&(g+=10),"majoneesit"===t.category||"kastikkeet"===t.category?b="morning":"proteiinit"===t.category?b="midday":"kasvikset"===t.category?b="afternoon":"marinointi"===t.category&&(b="morning"),{prep:t,reason:y,urgency:f,lastCompleted:r,daysSinceLastPrep:a,suggestedPriority:v,suggestedTimeSlot:b,icon:x,score:g,completionRate:h,avgDaysBetween:o,learnedFrequency:o,frequencyConfidence:l,dayPatterns:c}})).filter((e=>"overdue"===b?"critical"===e.urgency||"high"===e.urgency:"smart"!==b||e.score>=30)).sort(((e,t)=>t.score-e.score)).slice(0,j)}),[r,i,n,s,o,l,b,j,T]);return 0===L.length?null:(0,k.jsxs)("div",{className:"mb-6 rounded-xl overflow-hidden shadow-sm border border-orange-200",children:[(0,k.jsxs)("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 p-4 border-b border-orange-200",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("button",{onClick:()=>v(!x),className:"flex items-center space-x-3 text-left hover:text-orange-600 transition-colors group",children:[(0,k.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,k.jsx)(Ce,{className:"w-5 h-5 text-orange-600"}),(0,k.jsxs)("h4",{className:"font-semibold text-orange-800",children:["Smart Prep Suggestions",T&&(0,k.jsx)("span",{className:"ml-2 text-xs bg-red-100 text-red-700 px-2 py-1 rounded-full",children:"ADMIN"})]}),(0,k.jsx)("span",{className:"bg-orange-200 text-orange-800 px-2 py-1 rounded-full text-xs font-medium",children:L.length})]}),(0,k.jsx)("span",{className:"transform transition-transform duration-200 ".concat(x?"rotate-180":"rotate-0"),children:(0,k.jsx)("svg",{className:"w-4 h-4 text-orange-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,k.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),x&&(0,k.jsxs)("div",{className:"flex items-center space-x-2",children:[T&&(0,k.jsxs)("button",{onClick:()=>S(!C),className:"flex items-center space-x-1 px-3 py-1 bg-purple-200 text-purple-800 rounded-lg hover:bg-purple-300 transition-colors text-xs font-medium",title:"View AI Learning Log",children:[(0,k.jsx)(Se,{className:"w-3 h-3"}),(0,k.jsx)("span",{children:"Learning Log"})]}),(0,k.jsxs)("select",{value:b,onChange:e=>w(e.target.value),className:"text-xs bg-white border border-orange-300 rounded-lg px-2 py-1 text-orange-700 focus:ring-2 focus:ring-orange-500",children:[(0,k.jsx)("option",{value:"smart",children:"Smart"}),(0,k.jsx)("option",{value:"overdue",children:"Overdue Only"}),(0,k.jsx)("option",{value:"all",children:"All"})]}),(0,k.jsxs)("button",{onClick:()=>{L.slice(0,3).forEach((e=>{let{prep:t,suggestedPriority:n,suggestedTimeSlot:s}=e;M(t)||(c(t),setTimeout((()=>{d(t,"priority",n,"suggested"),setTimeout((()=>{d(t,"timeSlot",s,"suggested")}),100)}),100))}))},className:"flex items-center space-x-1 px-3 py-1 bg-orange-200 text-orange-800 rounded-lg hover:bg-orange-300 transition-colors text-xs font-medium",title:"Auto-apply top 3 suggestions",children:[(0,k.jsx)(Ie,{className:"w-3 h-3"}),(0,k.jsx)("span",{children:"Auto-Apply"})]})]})]}),x&&(0,k.jsx)("div",{className:"mt-2 text-xs text-orange-700",children:(0,k.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,k.jsx)(Ee,{className:"w-3 h-3"}),(0,k.jsxs)("span",{children:["AI-powered suggestions with hybrid frequency learning from ",i.filter((e=>e.completed)).length," completions"]})]})})]}),T&&C&&(0,k.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,k.jsxs)("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,k.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,k.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,k.jsx)(Te,{className:"w-5 h-5 text-purple-600"})}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"AI Learning Log"}),(0,k.jsx)("p",{className:"text-sm text-gray-600",children:"Frequency optimization analysis"})]})]}),(0,k.jsx)("button",{onClick:()=>S(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:"\u2715"})]}),(0,k.jsx)("div",{className:"p-6",children:0===I.length?(0,k.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,k.jsx)(Te,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),(0,k.jsx)("p",{children:"No learning data yet. AI will start analyzing patterns as you complete more preps."})]}):(0,k.jsx)("div",{className:"space-y-4",children:I.map(((e,t)=>(0,k.jsxs)("div",{className:"border rounded-lg p-4 bg-gray-50",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,k.jsx)("h4",{className:"font-medium text-gray-800",children:e.prepName}),(0,k.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,k.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(e.confidence>80?"bg-green-100 text-green-700":e.confidence>60?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"),children:[e.confidence,"% confidence"]}),(0,k.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleString()})]})]}),(0,k.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("span",{className:"text-gray-600",children:"Recommended:"}),(0,k.jsxs)("div",{className:"font-medium",children:["Every ",e.recommendedFreq," days"]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("span",{className:"text-gray-600",children:"AI Learned:"}),(0,k.jsxs)("div",{className:"font-medium text-blue-600",children:["Every ",e.learnedFreq," days"]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("span",{className:"text-gray-600",children:"Data Points:"}),(0,k.jsxs)("div",{className:"font-medium",children:[e.dataPoints," completions"]})]})]}),(0,k.jsx)("div",{className:"mt-2 text-sm text-gray-600",children:e.reason})]},t)))})})]})}),x&&(0,k.jsxs)("div",{className:"bg-white p-4 space-y-3",children:[L.map((e=>{var t,n,r,i;let{prep:o,reason:l,urgency:h,daysSinceLastPrep:x,icon:v,score:b,completionRate:w,suggestedPriority:j,suggestedTimeSlot:N,learnedFrequency:C,frequencyConfidence:S}=e;const I=M(o),E=(e=>{const t="".concat(R(s),"-").concat(e.id);return a[t]||{priority:"medium",timeSlot:"",selected:!1}})(o),D={low:"text-blue-800",medium:"text-yellow-800",high:"text-orange-800",critical:"text-red-800"};return(0,k.jsx)("div",{className:"rounded-lg border-2 transition-all duration-200 hover:shadow-md ".concat(I?"border-green-400 bg-green-50 shadow-sm":{low:"border-blue-300 bg-blue-50",medium:"border-yellow-300 bg-yellow-50",high:"border-orange-400 bg-orange-50",critical:"border-red-400 bg-red-50"}[h]),children:(0,k.jsx)("div",{className:"p-3",children:(0,k.jsxs)("div",{className:"flex items-start justify-between",children:[(0,k.jsxs)("div",{className:"flex items-start space-x-3 flex-1 min-w-0",children:[(0,k.jsx)("button",{onClick:()=>c(o),className:"w-5 h-5 rounded-full border-2 flex items-center justify-center transition-colors flex-shrink-0 mt-0.5 ".concat(I?"bg-green-500 border-green-500":"critical"===h?"border-red-400 hover:border-red-500":"high"===h?"border-orange-400 hover:border-orange-500":"border-gray-400 hover:border-gray-500"),children:I&&(0,k.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,k.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,k.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,k.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,k.jsx)("span",{className:"text-sm",children:v}),(0,k.jsx)("h5",{className:"font-medium text-sm truncate ".concat(I?"text-green-900":D[h]),children:o.name}),o.hasRecipe&&(0,k.jsx)("button",{onClick:()=>o.recipe&&u(o.recipe,o.name),className:"flex-shrink-0 text-xs bg-green-100 text-green-700 px-1.5 py-0.5 rounded-full hover:bg-green-200 transition-colors",children:"\ud83d\udcd6"})]}),(0,k.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-gray-600 mb-1",children:[(0,k.jsx)("span",{children:o.estimatedTime}),(0,k.jsx)("span",{children:"\u2022"}),(0,k.jsx)("span",{children:o.category}),(0,k.jsx)("span",{children:"\u2022"}),(0,k.jsxs)("span",{children:["Every ",o.frequency," days"]}),C>0&&S>60&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("span",{children:"\u2192"}),(0,k.jsxs)("span",{className:"text-blue-600 font-medium",children:[C," days (learned)"]})]})]}),(0,k.jsxs)("div",{className:"flex items-center space-x-3 text-xs",children:[(0,k.jsx)("span",{className:"font-medium ".concat(D[h]),children:l}),w>0&&(0,k.jsxs)("span",{className:"text-gray-500",children:[Math.round(w),"% completion rate"]}),T&&(0,k.jsxs)("span",{className:"text-gray-400",children:["Score: ",b]})]}),x<999&&(0,k.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Last done: ",x," days ago"]})]})]}),(0,k.jsx)("div",{className:"flex-shrink-0 ml-3",children:(0,k.jsxs)("div",{className:"relative",children:[(0,k.jsx)("button",{onClick:()=>{m==="suggested-".concat(o.id)?y():g("suggested-".concat(o.id))},className:"px-3 py-1.5 rounded-lg text-xs transition-colors whitespace-nowrap font-medium ".concat(I?(null===(t=A.find((e=>e.id===E.priority)))||void 0===t?void 0:t.color)+" shadow-sm":"timeSlot"===f[o.id]?"bg-green-100 text-green-700 shadow-sm":"critical"===h?"bg-red-100 text-red-700 hover:bg-red-200":"high"===h?"bg-orange-100 text-orange-700 hover:bg-orange-200":"bg-blue-100 text-blue-700 hover:bg-blue-200"),children:I?"".concat(null===(n=A.find((e=>e.id===E.priority)))||void 0===n?void 0:n.name).concat(E.timeSlot?" \u2022 ".concat(null===(r=P.find((e=>e.id===E.timeSlot)))||void 0===r?void 0:r.name.split(" ")[0]):" \u2022 Anytime"):"timeSlot"===f[o.id]?"Choose time":"Click to assign (".concat(j,")")}),m==="suggested-".concat(o.id)&&(0,k.jsx)("div",{className:"dropdown-container absolute top-full right-0 mt-2 rounded-xl p-3 z-20 w-52 backdrop-filter backdrop-blur-lg bg-white/95 border border-white/30 shadow-xl",children:(0,k.jsx)("div",{className:"space-y-3",children:(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center",children:[(0,k.jsx)(De,{className:"w-4 h-4 mr-2 text-blue-500"}),(0,k.jsx)("span",{children:"Choose Priority"}),(0,k.jsxs)("span",{className:"ml-auto text-xs text-green-600",children:["Suggested: ",j]})]}),(0,k.jsx)("div",{className:"space-y-2",children:A.map((e=>(0,k.jsx)("button",{onClick:()=>d(o,"priority",e.id,"suggested"),className:"w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 hover:scale-105 active:scale-95 backdrop-filter backdrop-blur-sm border border-white/20 ".concat(e.color," ").concat(e.id===j?"ring-2 ring-green-400":""),children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsx)("span",{children:e.name}),(0,k.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,k.jsx)("span",{className:"text-xs opacity-70",children:e.icon}),e.id===j&&(0,k.jsx)(_,{className:"w-3 h-3 text-green-500"})]})]})},e.id)))})]})})}),p==="suggested-".concat(o.id)&&(0,k.jsx)("div",{className:"dropdown-container absolute top-full right-0 mt-2 rounded-xl p-3 z-20 w-64 backdrop-filter backdrop-blur-lg bg-white/95 border border-white/30 shadow-xl",children:(0,k.jsx)("div",{className:"space-y-3",children:(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center",children:[(0,k.jsx)(Ae,{className:"w-4 h-4 mr-2 text-green-500"}),(0,k.jsx)("span",{children:"Choose Time Slot"}),(0,k.jsxs)("span",{className:"ml-auto text-xs text-green-600",children:["Suggested: ",null===(i=P.find((e=>e.id===N)))||void 0===i?void 0:i.name.split(" ")[0]]})]}),(0,k.jsxs)("div",{className:"space-y-2",children:[(0,k.jsx)("button",{onClick:()=>d(o,"timeSlot","","suggested"),className:"w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 hover:scale-105 active:scale-95 bg-gray-50 text-gray-700 hover:bg-gray-100 backdrop-filter backdrop-blur-sm border border-white/20",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsx)("span",{children:"Anytime"}),(0,k.jsx)("span",{className:"text-xs opacity-70",children:"\ud83d\udd50"})]})}),P.map((e=>(0,k.jsx)("button",{onClick:()=>d(o,"timeSlot",e.id,"suggested"),className:"w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 hover:scale-105 active:scale-95 bg-blue-50 text-blue-700 hover:bg-blue-100 backdrop-filter backdrop-blur-sm border border-white/20 ".concat(e.id===N?"ring-2 ring-green-400":""),children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsx)("span",{children:e.name.split(" ")[0]}),(0,k.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,k.jsx)("span",{className:"text-xs opacity-70",children:e.icon}),e.id===N&&(0,k.jsx)(_,{className:"w-3 h-3 text-green-500"})]})]})},e.id)))]})]})})})]})})]})})},"suggested-".concat(o.id))})),(0,k.jsx)("div",{className:"mt-4 pt-3 border-t border-gray-200",children:(0,k.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[(0,k.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,k.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,k.jsx)(Ce,{className:"w-3 h-3"}),(0,k.jsx)("span",{children:"Hybrid frequency learning"})]}),(0,k.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,k.jsx)(h,{className:"w-3 h-3"}),(0,k.jsxs)("span",{children:["Based on ",i.filter((e=>e.completed)).length," completions"]})]}),T&&(0,k.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,k.jsx)(Pe,{className:"w-3 h-3"}),(0,k.jsx)("span",{children:"Admin mode active"})]})]}),(0,k.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,k.jsx)("span",{children:"Show:"}),(0,k.jsxs)("select",{value:j,onChange:e=>N(Number(e.target.value)),className:"bg-transparent border border-gray-300 rounded px-2 py-1 text-xs",children:[(0,k.jsx)("option",{value:3,children:"3"}),(0,k.jsx)("option",{value:5,children:"5"}),(0,k.jsx)("option",{value:10,children:"10"})]})]})]})})]})]})},Me=t=>{let{currentUser:n,connectionStatus:r,prepItems:i,scheduledPreps:a,prepSelections:o,setPrepItems:l,setScheduledPreps:c,setPrepSelections:d,quickSave:h}=t;const[m,f]=(0,e.useState)("today"),[g,y]=(0,e.useState)((()=>new Date)),[x,w]=(0,e.useState)(new Date),[j,N]=(0,e.useState)(!1),[_,C]=(0,e.useState)(""),[S,I]=(0,e.useState)("all"),[E,T]=(0,e.useState)(!1),[D,A]=(0,e.useState)(""),[P,R]=(0,e.useState)(!1),[M,L]=(0,e.useState)({ingredients:"",instructions:""}),[O,F]=(0,e.useState)(!1),[U,z]=(0,e.useState)(null),[W,B]=(0,e.useState)(""),[H,V]=(0,e.useState)(null),[Q,K]=(0,e.useState)(null),[Y,$]=(0,e.useState)({}),[G,J]=(0,e.useState)(0),[X,Z]=(0,e.useState)(!1),[ee,te]=(0,e.useState)(!1);(0,e.useEffect)((()=>{const e=()=>{var e,t,n;const s=document.querySelector(".bg-red-100.text-red-700"),r=s&&(null===(e=s.textContent)||void 0===e?void 0:e.includes("Admin Mode")),i=document.querySelector(".bg-white.border-b"),a=i&&((null===(t=i.textContent)||void 0===t?void 0:t.includes("Admin Panel"))||(null===(n=i.textContent)||void 0===n?void 0:n.includes("Daily Reports"))),o=document.querySelector('[title="Logout Admin"]'),l=r||a||!!o;te(l),l!==ee&&console.log("\ud83d\udd27 Admin mode detected:",{hasAdminBadge:!!r,hasAdminTabs:!!a,hasLogoutButton:!!o,isAdmin:l})};e();const t=setInterval(e,500);return()=>clearInterval(t)}),[ee]),(0,e.useEffect)((()=>{if(0===i.length){const e=[{id:1,name:"Valkosipulimajoneesi",category:"majoneesit",estimatedTime:"15 min",isCustom:!1,hasRecipe:!0,frequency:3,recipe:{ingredients:"\u2022 **1 cup** majoneesi\n\u2022 **3-4** valkosipulin kyntt\xe4, hienoksi hakattuna\n\u2022 **1 rkl** sitruunamehua\n\u2022 **Suolaa** ja **mustapippuria** maun mukaan",instructions:"1. **Sekoita**: Yhdist\xe4 majoneesi ja hienonnettu valkosipuli\n2. **Mausta**: Lis\xe4\xe4 sitruunamehu, suola ja pippuri\n3. **Anna maustua**: Anna seisoa j\xe4\xe4kaapissa v\xe4hint\xe4\xe4n 30 minuuttia\n4. **Tarkista maku**: S\xe4\xe4d\xe4 mausteita tarpeen mukaan"}},{id:2,name:"Chilimajoneesi",category:"majoneesit",estimatedTime:"10 min",isCustom:!1,hasRecipe:!0,frequency:4,recipe:{ingredients:"\u2022 **1 cup** majoneesi\n\u2022 **2-3 rkl** sriracha-kastiketta\n\u2022 **1 tl** hunajaa\n\u2022 **1 tl** limemehua",instructions:"1. **Yhdist\xe4**: Sekoita majoneesi ja sriracha-kastike\n2. **Makeutus**: Lis\xe4\xe4 hunaja ja limemehu\n3. **Sekoita hyvin**: Varmista tasainen sekoitus\n4. **Maista ja s\xe4\xe4d\xe4**: Lis\xe4\xe4 chilimakua tai hunajaa tarpeen mukaan"}},{id:3,name:"Kev\xe4tsipulimajoneesi",category:"majoneesit",estimatedTime:"10 min",isCustom:!1,hasRecipe:!1,frequency:3,recipe:null},{id:4,name:"Bad Santa -majoneesi",category:"majoneesit",estimatedTime:"15 min",isCustom:!1,hasRecipe:!1,frequency:5,recipe:null},{id:5,name:"Manse-majoneesi",category:"majoneesit",estimatedTime:"12 min",isCustom:!1,hasRecipe:!1,frequency:4,recipe:null},{id:6,name:"Marinoitu kana",category:"proteiinit",estimatedTime:"30 min",isCustom:!1,hasRecipe:!0,frequency:2,recipe:{ingredients:"\u2022 **4** kananfileet\xe4\n\u2022 **1/4 cup** oliivi\xf6ljy\xe4\n\u2022 **2 rkl** sitruunamehua\n\u2022 **3** valkosipulin kyntt\xe4, murskattuna\n\u2022 **1 tl** kuivattuja yrttej\xe4\n\u2022 **Suolaa** ja **pippuria**",instructions:"1. **Valmista marinade**: Sekoita \xf6ljy, sitruunamehu, valkosipuli ja yrtit\n2. **Mausta kana**: Hiero kanaan suolaa ja pippuria\n3. **Marinoi**: Laita kana marinadiin 2-4 tunniksi\n4. **Huoneenl\xe4mp\xf6**: Anna tulla huoneenl\xe4mp\xf6\xf6n ennen kypsennyst\xe4"}},{id:7,name:"Lihapullat",category:"proteiinit",estimatedTime:"45 min",isCustom:!1,hasRecipe:!0,frequency:3,recipe:{ingredients:"\u2022 **500g** jauhelihaa\n\u2022 **1** sipuli, hienoksi hakattuna\n\u2022 **1** muna\n\u2022 **1/2 cup** korppujauhoja\n\u2022 **Suolaa**, **pippuria**, **mausteet**",instructions:"1. **Sekoita**: Yhdist\xe4 kaikki ainekset kulhossa\n2. **Muotoile**: Tee tasakokoisia palloja\n3. **Kypsenn\xe4**: Paista pannulla tai uunissa\n4. **Valmista**: Kypsyys 65\xb0C sis\xe4l\xe4mp\xf6tila"}},{id:8,name:"Tuoreet tomaatit (leikattu)",category:"kasvikset",estimatedTime:"15 min",isCustom:!1,hasRecipe:!1,frequency:1,recipe:null},{id:9,name:"Kev\xe4tsipuli",category:"kasvikset",estimatedTime:"10 min",isCustom:!1,hasRecipe:!1,frequency:2,recipe:null},{id:10,name:"Marinoitu punasipuli",category:"marinointi",estimatedTime:"20 min",isCustom:!1,hasRecipe:!0,frequency:4,recipe:{ingredients:"\u2022 **2** punasipulia, ohuksi viipaloiduna\n\u2022 **1/2 cup** valkoviinietikkaa\n\u2022 **2 rkl** sokeria\n\u2022 **1 tl** suolaa\n\u2022 **1** laakerinlehti",instructions:"1. **Liuota**: Sekoita etikka, sokeri ja suola\n2. **Sipulit**: Laita viipaloidut sipulit kulhoon\n3. **Kaada liuos**: Kaada kuuma liuos sipulien p\xe4\xe4lle\n4. **Anna marinoitua**: V\xe4hint\xe4\xe4n 30 minuuttia ennen k\xe4ytt\xf6\xe4"}},{id:11,name:"Pikkel\xf6ity punasipuli",category:"marinointi",estimatedTime:"25 min",isCustom:!1,hasRecipe:!1,frequency:5,recipe:null},{id:12,name:"Pikkel\xf6ity tomaatti",category:"marinointi",estimatedTime:"20 min",isCustom:!1,hasRecipe:!1,frequency:4,recipe:null},{id:13,name:"Pikkel\xf6ity kurkku",category:"marinointi",estimatedTime:"20 min",isCustom:!1,hasRecipe:!1,frequency:4,recipe:null},{id:14,name:"Paholaisen hillo",category:"marinointi",estimatedTime:"30 min",isCustom:!1,hasRecipe:!1,frequency:7,recipe:null},{id:15,name:"Hapan omena -hillo",category:"marinointi",estimatedTime:"35 min",isCustom:!1,hasRecipe:!1,frequency:7,recipe:null},{id:16,name:"Marinoitu punakaali",category:"marinointi",estimatedTime:"25 min",isCustom:!1,hasRecipe:!1,frequency:5,recipe:null},{id:17,name:"Konjakki-sinappi",category:"kastikkeet",estimatedTime:"15 min",isCustom:!1,hasRecipe:!0,frequency:6,recipe:{ingredients:"\u2022 **1/2 cup** dijon-sinappia\n\u2022 **3 rkl** konjakkia\n\u2022 **1 rkl** hunajaa\n\u2022 **1 tl** valkosipulijauhetta",instructions:"1. **Sekoita**: Yhdist\xe4 sinappi ja konjakki\n2. **Makeutus**: Lis\xe4\xe4 hunaja ja valkosipulijauhe\n3. **Sekoita hyvin**: Varmista tasainen sekoitus\n4. **Anna vet\xe4yty\xe4**: S\xe4ilyt\xe4 j\xe4\xe4kaapissa k\xe4ytt\xf6\xf6n asti"}},{id:18,name:"BBQ-hunaja-sinappi",category:"kastikkeet",estimatedTime:"12 min",isCustom:!1,hasRecipe:!1,frequency:5,recipe:null},{id:19,name:"T\xe4yt\xe4 kylm\xe4vitriini",category:"muut",estimatedTime:"20 min",isCustom:!1,hasRecipe:!1,frequency:1,recipe:null},{id:20,name:"Vaihda \xf6ljy",category:"muut",estimatedTime:"15 min",isCustom:!1,hasRecipe:!1,frequency:7,recipe:null},{id:21,name:"Asiakasjuomakaappi kuntoon",category:"muut",estimatedTime:"25 min",isCustom:!1,hasRecipe:!1,frequency:2,recipe:null},{id:22,name:"Alkoholijuomakaappi kuntoon",category:"muut",estimatedTime:"20 min",isCustom:!1,hasRecipe:!1,frequency:3,recipe:null},{id:23,name:"Keit\xe4 smash-perunat",category:"muut",estimatedTime:"45 min",isCustom:!1,hasRecipe:!0,frequency:2,recipe:{ingredients:"\u2022 **1kg** pieni\xe4 perunoita\n\u2022 **Suolaa** keitinveteen\n\u2022 **Oliivi\xf6ljy\xe4**\n\u2022 **Rosmariinia**\n\u2022 **Merisuolaa**\n\u2022 **Mustapippuria**",instructions:"1. **Keit\xe4**: Keit\xe4 perunat kuoressa suolavedess\xe4 kypsiksi\n2. **Valuta**: Anna valua ja j\xe4\xe4hty\xe4 hieman\n3. **Smash**: Litist\xe4 perunat haarukalla kevyesti\n4. **Paista**: Paista uunissa 200\xb0C \xf6ljyss\xe4 ja mausteissa kultaisiksi"}}];l((()=>e)),h("prepItems",e)}}),[i.length,l,h]),(0,e.useEffect)((()=>{if(a.length>0&&!X){console.log("\ud83d\udd04 Auto-saving scheduledPreps due to state change");const e=setTimeout((()=>{h("scheduledPreps",a).then((()=>{console.log("\u2705 ScheduledPreps auto-save completed")})).catch((e=>{console.error("\u274c ScheduledPreps auto-save failed:",e)}))}),300);return()=>clearTimeout(e)}}),[a,h,X]),(0,e.useEffect)((()=>{const e=localStorage.getItem("lastPrepMoveCheck"),t=ye(new Date);e!==t&&((()=>{const e=new Date,t=new Date(e);t.setDate(t.getDate()-1);const n=ye(e),r=ye(t),i=a.filter((e=>e.scheduledDate===r&&!e.completed));if(i.length>0){console.log("\ud83d\udd04 Moving ".concat(i.length," incomplete preps from ").concat(r," to ").concat(n)),J(i.length),setTimeout((()=>J(0)),8e3);const t=i.map((e=>(0,s.A)((0,s.A)({},e),{},{id:be(),scheduledDate:n})));c((e=>[...e.filter((e=>!(e.scheduledDate===r&&!e.completed))),...t]));const a={};i.forEach((t=>{const n=ve(e,t.prepId);a[n]={priority:t.priority,timeSlot:t.timeSlot,selected:!0}})),d((e=>(0,s.A)((0,s.A)({},e),a)))}})(),localStorage.setItem("lastPrepMoveCheck",t))}),[a,d,c]);const ne=async e=>{if(console.log("\ud83d\udd04 Toggling prep completion for ID:",e),X)console.log("\u23f3 Save in progress, skipping...");else{Z(!0);try{const t=a.find((t=>t.id===e));if(!t)return void console.error("\u274c Prep item not found:",e);const n=!t.completed;console.log("\ud83d\udccb ".concat(t.name,": ").concat(t.completed?"COMPLETED":"PENDING"," \u2192 ").concat(n?"COMPLETED":"PENDING")),console.log("\ud83d\udee1\ufe0f SYNC PAUSED during save operation");const r=a.map((t=>t.id===e?(0,s.A)((0,s.A)({},t),{},{completed:n}):t)),i=ye(new Date),o=r.filter((e=>e.scheduledDate===i)),l=o.filter((e=>e.completed));console.log("\ud83d\udce4 About to save scheduledPreps:",{totalCount:r.length,todayCount:o.length,todayCompletedCount:l.length,updatedItem:{id:e,name:t.name,completed:n,scheduledDate:t.scheduledDate}}),c((()=>r)),console.log("\ud83d\udd25 Saving prep completion to Firebase...");await h("scheduledPreps",r)?(console.log("\u2705 Prep completion saved successfully"),setTimeout((async()=>{console.log("\ud83d\udd04 Save completion verification");try{const t=await fetch("https://hamptown-panel-default-rtdb.firebaseio.com/scheduledPreps.json"),s=await t.json();if(s){const t=s.filter((e=>e.scheduledDate===i)),r=t.filter((e=>!0===e.completed)),a=s.find((t=>t.id===e));console.log("\ud83d\udd0d Firebase verification after save:",{firebaseTotalCount:s.length,firebaseTodayCount:t.length,firebaseTodayCompleted:r.length,firebaseUpdatedItem:a?{id:a.id,name:a.name,completed:a.completed,scheduledDate:a.scheduledDate}:"NOT FOUND"}),a&&a.completed===n?console.log("\u2705 Save verification passed"):console.error("\u274c SAVE VERIFICATION FAILED! Item not found or completion status mismatch")}else console.error("\u274c No data found in Firebase during verification")}catch(t){console.warn("\u26a0\ufe0f Failed to verify save:",t)}}),3e3)):(console.error("\u274c Failed to save prep completion to Firebase"),c((()=>a)))}catch(t){console.error("\u274c Error toggling prep completion:",t),c((()=>a))}finally{Z(!1)}}},se=e=>{var t;const n=ve(g,e.id);return(null===(t=o[n])||void 0===t?void 0:t.selected)||!1},re=e=>{const t=ve(g,e.id);return o[t]||{priority:"medium",timeSlot:"",selected:!1}},ie=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"main";const i=ve(g,e.id),l=o[i]||{priority:"medium",timeSlot:"",selected:!1};if("priority"===t){d((e=>(0,s.A)((0,s.A)({},e),{},{[i]:(0,s.A)((0,s.A)({},e[i]),{},{priority:n,selected:l.selected})}))),$((t=>(0,s.A)((0,s.A)({},t),{},{[e.id]:"timeSlot"}))),V(null);const t="suggested"===r?"suggested-".concat(e.id):e.id;K(t)}else if("timeSlot"===t){const t={priority:l.priority,timeSlot:n,selected:!0};d((e=>(0,s.A)((0,s.A)({},e),{},{[i]:t})));if(a.find((t=>t.prepId===e.id&&t.scheduledDate===ye(g))))c((r=>r.map((r=>r.prepId===e.id&&r.scheduledDate===ye(g)?(0,s.A)((0,s.A)({},r),{},{priority:t.priority,timeSlot:n}):r))));else{const s={id:be(),prepId:e.id,name:e.name,category:e.category,estimatedTime:e.estimatedTime,isCustom:e.isCustom,hasRecipe:e.hasRecipe,recipe:e.recipe,scheduledDate:ye(g),priority:t.priority,timeSlot:n,completed:!1,assignedTo:null,notes:""};c((e=>[...e,s]))}$((t=>(0,s.A)((0,s.A)({},t),{},{[e.id]:null}))),V(null),K(null)}},ae=()=>{V(null),K(null),$({})};(0,e.useEffect)((()=>{const e=e=>{e.target.closest(".dropdown-container")||ae()};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);const oe=(e,t)=>{z(e),B(t),F(!0)},le=e=>{var t;const n=ve(g,e.id);if(null===(t=o[n])||void 0===t?void 0:t.selected)d((e=>{const t=(0,s.A)({},e);return delete t[n],t})),c((t=>t.filter((t=>!(t.prepId===e.id&&t.scheduledDate===ye(g))))));else{const t=a.find((t=>t.prepId===e.id&&t.scheduledDate===ye(g)));if(t)d((e=>(0,s.A)((0,s.A)({},e),{},{[n]:{priority:t.priority,timeSlot:t.timeSlot,selected:!0}})));else{const t={priority:"medium",timeSlot:"",selected:!0};d((e=>(0,s.A)((0,s.A)({},e),{},{[n]:t})));const r={id:be(),prepId:e.id,name:e.name,category:e.category,estimatedTime:e.estimatedTime,isCustom:e.isCustom,hasRecipe:e.hasRecipe,recipe:e.recipe,scheduledDate:ye(g),priority:"medium",timeSlot:"",completed:!1,assignedTo:null,notes:""};c((e=>[...e,r]))}}},ce=i.filter((e=>{const t="all"===S||e.category===S,n=""===D||e.name.toLowerCase().includes(D.toLowerCase())||e.category.toLowerCase().includes(D.toLowerCase());return t&&n}));return(0,k.jsxs)("div",{className:"space-y-6",children:[(0,k.jsx)("style",{dangerouslySetInnerHTML:{__html:'\n.priority-glow {\n  position: relative;\n  z-index: 0;\n  font-weight: 600;\n  border-radius: 0.25rem;\n  padding: 0.125rem 0.25rem;\n}\n.priority-glow::before {\n  content: "";\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 110%;\n  height: 2em;\n  transform: translate(-50%, -50%);\n  border-radius: 0.375rem;\n  filter: blur(6px);\n  z-index: -1;\n  opacity: 0.3;\n}\n.priority-low {\n  color: #047857;\n}\n.priority-low::before {\n  box-shadow: 0 0 8px 4px rgba(5, 150, 105, 0.4);\n}\n.priority-medium {\n  color: #92400e;\n}\n.priority-medium::before {\n  box-shadow: 0 0 8px 4px rgba(202, 138, 4, 0.4);\n}\n.priority-high {\n  color: #b91c1c;\n}\n.priority-high::before {\n  box-shadow: 0 0 8px 4px rgba(185, 28, 28, 0.4);\n}\n\n.soft-dropdown {\n  backdrop-filter: blur(16px);\n  background: rgba(255, 255, 255, 0.95);\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.15),\n              0 0 0 1px rgba(255, 255, 255, 0.05),\n              inset 0 1px 0 rgba(255, 255, 255, 0.1);\n}\n\n.soft-button {\n  backdrop-filter: blur(8px);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05),\n              inset 0 1px 0 rgba(255, 255, 255, 0.1);\n}\n\n.soft-button:hover {\n  backdrop-filter: blur(12px);\n  box-shadow: 0 8px 15px -3px rgba(0, 0, 0, 0.1),\n              inset 0 1px 0 rgba(255, 255, 255, 0.2);\n}\n'}}),(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)(p,{className:"w-8 h-8 text-blue-600 mr-3"}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Prep List Manager"}),(0,k.jsx)("p",{className:"text-gray-600",children:"Plan and track kitchen preparation tasks"})]})]}),(0,k.jsx)("div",{className:"flex items-center space-x-2"})]}),(0,k.jsxs)("div",{className:"flex space-x-2",children:[(0,k.jsxs)("button",{onClick:()=>f("today"),className:"flex items-center px-4 py-2 rounded-lg transition-colors ".concat("today"===m?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[(0,k.jsx)(u,{className:"w-4 h-4 mr-2"}),"Today's Preps"]}),(0,k.jsxs)("button",{onClick:()=>f("plan"),className:"flex items-center px-4 py-2 rounded-lg transition-colors ".concat("plan"===m?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[(0,k.jsx)(de,{className:"w-4 h-4 mr-2"}),"Plan Preps"]}),(0,k.jsxs)("button",{onClick:()=>f("week"),className:"flex items-center px-4 py-2 rounded-lg transition-colors ".concat("week"===m?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[(0,k.jsx)(b,{className:"w-4 h-4 mr-2"}),"Week View"]})]})]}),G>0&&(0,k.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 mb-6",children:(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("div",{className:"flex-shrink-0",children:(0,k.jsx)("svg",{className:"w-5 h-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,k.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),(0,k.jsxs)("div",{className:"ml-3 flex-1",children:[(0,k.jsx)("h3",{className:"text-sm font-medium text-blue-800",children:"\ud83d\udcc5 Prep items moved to today"}),(0,k.jsxs)("div",{className:"mt-1 text-sm text-blue-600",children:[G," incomplete prep",G>1?"s":""," from yesterday ",G>1?"have":"has"," been automatically moved to today's schedule."]})]}),(0,k.jsx)("div",{className:"flex-shrink-0",children:(0,k.jsx)("button",{onClick:()=>J(0),className:"text-blue-400 hover:text-blue-600",children:(0,k.jsx)(v,{className:"w-5 h-5"})})})]})}),"today"===m&&(0,k.jsxs)(k.Fragment,{children:[!!ee&&(0,k.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,k.jsxs)("h4",{className:"font-medium text-blue-800",children:["\ud83d\udd0d Debug Info ",ee?"(Admin Mode Active)":"(Development Mode)"]}),(0,k.jsxs)("div",{className:"flex gap-2",children:[!1,(0,k.jsx)("button",{onClick:async()=>{console.log("\ud83d\udd04 Manual Firebase check triggered");try{const e=await fetch("https://hamptown-panel-default-rtdb.firebaseio.com/scheduledPreps.json"),t=await e.json(),n=ye(new Date),s=t?t.filter((e=>e.scheduledDate===n)):[];console.log("\ud83d\udd0d Manual Firebase check result:",{firebaseHasData:!!t,firebaseTotalCount:t?t.length:0,firebaseTodayCount:s.length,firebaseTodayCompleted:s.filter((e=>!0===e.completed)).length,localTodayCount:a.filter((e=>e.scheduledDate===n)).length,firebaseSample:s.slice(0,3)}),alert("Firebase Check:\nTotal: ".concat(t?t.length:0,"\nToday: ").concat(s.length,"\nCompleted: ").concat(s.filter((e=>!0===e.completed)).length))}catch(e){console.error("\u274c Manual Firebase check failed:",e),alert("Firebase check failed - see console")}},className:"px-3 py-1 bg-blue-500 text-white rounded text-xs hover:bg-blue-600",children:"Check Firebase"}),(0,k.jsx)("button",{onClick:()=>{console.log("\ud83d\udd04 Manual reload triggered"),window.location.reload()},className:"px-3 py-1 bg-green-500 text-white rounded text-xs hover:bg-green-600",children:"Force Reload"})]})]}),(0,k.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:"font-medium text-blue-700",children:"Today's Date"}),(0,k.jsx)("div",{className:"text-blue-600",children:ye(new Date)})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:"font-medium text-blue-700",children:"Total Scheduled"}),(0,k.jsx)("div",{className:"text-blue-600",children:a.length})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:"font-medium text-blue-700",children:"Today's Preps"}),(0,k.jsx)("div",{className:"text-blue-600",children:a.filter((e=>e.scheduledDate===ye(new Date))).length})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:"font-medium text-blue-700",children:"Connection"}),(0,k.jsx)("div",{className:"connected"===r?"text-green-600":"text-red-600",children:r})]})]}),(0,k.jsxs)("div",{className:"mt-3",children:[(0,k.jsx)("div",{className:"font-medium text-blue-700 mb-1",children:"All Scheduled Dates:"}),(0,k.jsx)("div",{className:"text-blue-600 text-xs",children:Array.from(new Set(a.map((e=>e.scheduledDate)))).sort().join(", ")||"None"})]}),a.length>0&&(0,k.jsxs)("div",{className:"mt-2",children:[(0,k.jsx)("div",{className:"font-medium text-blue-700 mb-1",children:"Sample Preps:"}),(0,k.jsx)("div",{className:"text-blue-600 text-xs",children:a.slice(0,3).map((e=>"".concat(e.name," (").concat(e.scheduledDate,")").concat(e.completed?" \u2705":" \u23f3"))).join(" | ")})]})]}),(0,k.jsx)(je,{scheduledPreps:a,onToggleCompletion:ne,onShowRecipe:oe})]}),"plan"===m&&(0,k.jsxs)("div",{className:"space-y-6",children:[(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,k.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Select Date to Plan"}),(0,k.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,k.jsx)("input",{type:"date",value:ye(g),onChange:e=>y(new Date(e.target.value)),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,k.jsxs)("div",{className:"text-gray-600",children:["Planning for: ",(0,k.jsx)("strong",{children:(ue=g,ue.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}))})]})]})]}),(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,k.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Choose Prep Items"}),(0,k.jsxs)("button",{onClick:()=>T(!E),className:"flex items-center px-4 py-2 rounded-lg transition-colors ".concat(E?"bg-blue-500 text-white":"bg-gray-100 hover:bg-gray-200"),children:[(0,k.jsx)(me,{className:"w-4 h-4 mr-2"}),"Search"]})]}),E&&(0,k.jsx)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:(0,k.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,k.jsx)(me,{className:"w-5 h-5 text-gray-400"}),(0,k.jsx)("input",{type:"text",placeholder:"Search prep items...",value:D,onChange:e=>A(e.target.value),className:"flex-1 px-3 py-2 border-0 bg-transparent focus:outline-none",autoFocus:!0}),D&&(0,k.jsx)("button",{onClick:()=>A(""),className:"p-1 text-gray-400 hover:text-gray-600",children:(0,k.jsx)(v,{className:"w-4 h-4"})})]})}),(0,k.jsx)("div",{className:"flex flex-wrap gap-2 mb-6",children:pe.map((e=>(0,k.jsxs)("button",{onClick:()=>I(e.id),className:"flex items-center px-4 py-2 rounded-lg transition-colors ".concat(S===e.id?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[(0,k.jsx)("span",{className:"mr-2",children:e.icon}),e.name]},e.id)))}),(0,k.jsx)(Re,{currentDate:x,selectedDate:g,prepItems:i,scheduledPreps:a,prepSelections:o,selectedCategory:S,searchQuery:D,onToggleSelection:le,onUpdateSelection:ie,onShowRecipe:oe,showPriorityOptions:H,showTimeOptions:Q,assignmentStep:Y,onShowPriorityOptions:V,onResetWorkflow:ae}),(0,k.jsx)("div",{className:"space-y-3",children:ce.map((e=>(0,k.jsx)(Ne,{prep:e,isSelected:se(e),selection:re(e),showPriorityOptions:H,showTimeOptions:Q,assignmentStep:Y,onToggleSelection:le,onUpdateSelection:ie,onShowPriorityOptions:V,onShowRecipe:oe,onSave:(e,t)=>{console.log("Save clicked for prep:",e,t)},context:"main"},e.id)))}),(0,k.jsx)("div",{className:"mt-6 pt-6 border-t",children:j?(0,k.jsxs)("div",{className:"border rounded-lg p-4 bg-gray-50",children:[(0,k.jsx)("h4",{className:"font-medium text-gray-800 mb-4",children:"Add Custom Prep"}),(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prep Name"}),(0,k.jsx)("input",{type:"text",value:_,onChange:e=>C(e.target.value),placeholder:"e.g., Prep special sauce",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,k.jsx)("select",{value:"all"===S?"majoneesit":S,onChange:e=>I(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:pe.slice(1).map((e=>(0,k.jsx)("option",{value:e.id,children:e.name},e.id)))})]})]}),(0,k.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,k.jsx)("button",{onClick:()=>{if(!_.trim())return;const e={id:Date.now(),name:_.trim(),category:"all"===S?"majoneesit":S,estimatedTime:"20 min",isCustom:!0,hasRecipe:P,frequency:2,recipe:P?{ingredients:M.ingredients,instructions:M.instructions}:null};l((t=>[...t,e])),C(""),N(!1),R(!1),L({ingredients:"",instructions:""}),I("majoneesit"),le(e)},className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors",children:"Add Prep"}),(0,k.jsx)("button",{onClick:()=>{N(!1),C(""),R(!1),L({ingredients:"",instructions:""}),I("majoneesit")},className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"})]})]}):(0,k.jsxs)("button",{onClick:()=>N(!0),className:"flex items-center px-4 py-2 border border-dashed border-gray-300 rounded-lg hover:border-blue-500 hover:text-blue-500 transition-colors",children:[(0,k.jsx)(q,{className:"w-4 h-4 mr-2"}),"Add Custom Prep Item"]})})]})]}),"week"===m&&(0,k.jsx)(ke,{scheduledPreps:a,currentDate:x,setCurrentDate:w,selectedDate:g,setSelectedDate:y,setActiveView:f,onToggleCompletion:ne,onShowRecipe:oe}),(0,k.jsx)(_e,{isOpen:O,recipe:U,recipeName:W,onClose:()=>F(!1)})]});var ue},Le=o("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Oe=o("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),Fe=o("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Ue=o("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]),ze=e=>{if(!e)return"\u2753";switch(e){case"produce":return"\ud83e\udd6c";case"meat":return"\ud83e\udd69";case"dairy":return"\ud83e\udd5b";case"bread":return"\ud83c\udf5e";case"beverages":return"\ud83e\udd64";case"cooking":return"\ud83e\uded2";case"baking":case"grains":return"\ud83c\udf3e";case"cleaning":return"\ud83e\uddfd";case"supplies":case"packaging":return"\ud83d\udce6";case"tukku":return"\ud83c\udfea";case"uncategorized":return"\u2753";default:return"\ud83d\udccb"}},qe=e=>0===e.currentStock||e.currentStock<=.5*e.minLevel?{status:"critical",color:"red"}:e.currentStock<=e.minLevel?{status:"low",color:"yellow"}:{status:"normal",color:"green"},We=e=>{if("undefined"===typeof window)return;if(!document.getElementById("toastContainer")){const e=document.createElement("div");e.id="toastContainer",e.className="fixed top-4 right-4 z-50 space-y-2",document.body.appendChild(e)}const t=document.getElementById("toastContainer"),n=document.createElement("div");n.className="toast bg-white/90 backdrop-blur-sm text-black p-3 mb-2 rounded-lg shadow-lg border transform transition-all duration-300 translate-x-0 opacity-100",n.textContent=e,t.appendChild(n),requestAnimationFrame((()=>{n.classList.add("animate-slide-in")})),setTimeout((()=>{n.classList.add("opacity-0","translate-x-full"),n.addEventListener("transitionend",(()=>{n.parentNode&&n.remove()}))}),3e3)};let Be=0;const He=()=>{Be>=1e5&&(Be=0);return 1e5*Math.floor(Date.now()/1e3)+ ++Be},Ve=(0,e.createContext)(void 0),Qe=()=>{const t=(0,e.useContext)(Ve);if(!t)throw new Error("useInventory must be used within an InventoryProvider");return t},Ke=t=>{let{children:n,inventoryDailyItems:r,inventoryWeeklyItems:i,inventoryMonthlyItems:a,inventoryDatabaseItems:o,inventoryActivityLog:l,setInventoryDailyItems:c,setInventoryWeeklyItems:d,setInventoryMonthlyItems:u,setInventoryDatabaseItems:h,setInventoryActivityLog:m,quickSave:p}=t;const f=r,g=i,y=a,x=o,v=l,[b,w]=(0,e.useState)(new Set),[j,N]=(0,e.useState)("daily"),_=(0,e.useCallback)((e=>{switch(e){case"daily":return f;case"weekly":return g;case"monthly":return y;default:return[]}}),[f,g,y]),C=(0,e.useCallback)(((e,t)=>{switch(e){case"daily":c(t),p("inventoryDailyItems",t);break;case"weekly":d(t),p("inventoryWeeklyItems",t);break;case"monthly":u(t),p("inventoryMonthlyItems",t)}}),[c,d,u,p]),S=(0,e.useCallback)((e=>{const t=[(0,s.A)((0,s.A)({},e),{},{id:He(),timestamp:(new Date).toLocaleString()}),...v];m(t),p("inventoryActivityLog",t)}),[v,m,p]),I=(0,e.useCallback)(((e,t,n,r,i)=>{const a=_(n),o=a.find((t=>t.id.toString()===e.toString()));if(!o)return void We("Item not found!");const l=o.currentStock,c=a.map((n=>n.id.toString()===e.toString()?(0,s.A)((0,s.A)({},n),{},{currentStock:t,lastUsed:(new Date).toISOString().split("T")[0]}):n));C(n,c),S({type:"count_update",item:o.name,quantity:t,unit:o.unit,employee:r,notes:i||"Count updated from ".concat(l," to ").concat(t)}),We("Successfully updated ".concat(o.name," count to ").concat(t," ").concat(o.unit,"!"))}),[_,C,S]),E=(0,e.useCallback)(((e,t,n,r,i,a)=>{const o=_(r),l=o.find((t=>t.id.toString()===e.toString()));if(!l)return void We("Item not found!");if(t>l.currentStock)return void We("Waste amount cannot exceed current stock!");const c=o.map((n=>n.id.toString()===e.toString()?(0,s.A)((0,s.A)({},n),{},{currentStock:n.currentStock-t}):n));C(r,c),S({type:"waste",item:l.name,quantity:t,unit:l.unit,employee:i,notes:a||"Waste reported: ".concat(n),reason:n}),We("Successfully reported waste of ".concat(t," ").concat(l.unit," ").concat(l.name,"!"))}),[_,C,S]),T=(0,e.useCallback)((e=>{console.log("Importing items:",e.length);const t=new Set(x.map((e=>e.id))),n=new Set,s=e.filter((e=>((t.has(e.id)||n.has(e.id))&&(console.warn("Duplicate ID detected, generating new ID for:",e.name),e.id=He()),n.add(e.id),!0)));console.log("Filtered unique items:",s.length);const r=[...x,...s];h(r),p("inventoryDatabaseItems",r),We("Imported ".concat(s.length," items to database")),S({type:"import",item:"Excel Import",quantity:s.length,unit:"items",employee:"System"})}),[x,h,p,S]),D=(0,e.useCallback)((e=>{const t=(0,s.A)((0,s.A)({},e),{},{id:He(),frequency:"database",isAssigned:!1}),n=[...x,t];h(n),p("inventoryDatabaseItems",n),We("Item added to database successfully"),S({type:"manual_add",item:e.name,quantity:1,unit:"item",employee:"Current User"})}),[x,h,p,S]),A=(0,e.useCallback)(((e,t,n,r,i)=>{const a=x.filter((t=>e.includes(t.id)));if(0===a.length)return void We("No items found to assign");const o=["daily","weekly","monthly"],l={};o.forEach((e=>{l[e]=_(e)}));const c=[];a.forEach((e=>{if(e.isAssigned){if(o.forEach((a=>{l[a].filter((t=>t.databaseId===e.id)).length>0&&(l[a]=a===t?l[a].map((t=>t.databaseId===e.id?(0,s.A)((0,s.A)({},t),{},{category:n,minLevel:r,currentStock:i,lastUsed:(new Date).toISOString().split("T")[0]}):t)):l[a].filter((t=>t.databaseId!==e.id)))})),e.assignedTo!==t){const t={id:He(),name:e.name,category:n,currentStock:i,minLevel:r,unit:e.unit||"pieces",lastUsed:(new Date).toISOString().split("T")[0],cost:e.cost||0,ean:e.ean||"",databaseId:e.id};c.push(t)}}else{const t={id:He(),name:e.name,category:n,currentStock:i,minLevel:r,unit:e.unit||"pieces",lastUsed:(new Date).toISOString().split("T")[0],cost:e.cost||0,ean:e.ean||"",databaseId:e.id};c.push(t)}})),c.length>0&&(l[t]=[...l[t],...c]),o.forEach((e=>{const t=_(e);l[e].length===t.length&&JSON.stringify(l[e])===JSON.stringify(t)||C(e,l[e])}));const d=x.map((r=>e.includes(r.id)?(0,s.A)((0,s.A)({},r),{},{isAssigned:!0,assignedTo:t,assignedCategory:n,assignedDate:(new Date).toISOString().split("T")[0]}):r));h(d),p("inventoryDatabaseItems",d),w(new Set),We("Successfully ".concat(a.some((e=>e.isAssigned))?"updated":"assigned"," ").concat(a.length," items to ").concat(t," - ").concat(n)),S({type:"manual_add",item:"".concat(a.length," items"),quantity:a.length,unit:"items",employee:"Current User",notes:"".concat(a.some((e=>e.isAssigned))?"Updated assignment to":"Assigned to"," ").concat(t," - ").concat(n)})}),[x,S,_,C,h,p]),P=(0,e.useCallback)((e=>{const t=x.find((t=>t.id===e));if(!t)return void We("Database item not found!");if(!t.isAssigned)return void We("Item is not currently assigned!");["daily","weekly","monthly"].forEach((t=>{const n=_(t),s=n.filter((t=>t.databaseId!==e));s.length!==n.length&&(C(t,s),console.log("Removed ".concat(n.length-s.length," duplicate(s) from ").concat(t)))}));const n=x.map((t=>t.id===e?(0,s.A)((0,s.A)({},t),{},{isAssigned:!1,assignedTo:void 0,assignedCategory:void 0,assignedDate:void 0}):t));h(n),p("inventoryDatabaseItems",n),We("Successfully unassigned ".concat(t.name," from inventory (removed all duplicates)"))}),[x,_,p,h,C]),R=(0,e.useCallback)((e=>{if(0===e.length)return;const t={};["daily","weekly","monthly"].forEach((n=>{const s=_(n).filter((t=>!e.includes(t.databaseId||"")));t[n]=s})),t.daily.length!==f.length&&c(t.daily),t.weekly.length!==g.length&&d(t.weekly),t.monthly.length!==y.length&&u(t.monthly);const n=x.filter((t=>!e.includes(t.id)));h(n);const s=[];t.daily.length!==f.length&&s.push(p("inventoryDailyItems",t.daily)),t.weekly.length!==g.length&&s.push(p("inventoryWeeklyItems",t.weekly)),t.monthly.length!==y.length&&s.push(p("inventoryMonthlyItems",t.monthly)),s.push(p("inventoryDatabaseItems",n)),Promise.allSettled(s).then((()=>{console.log("\u2705 All delete operations saved successfully")})).catch((e=>{console.warn("\u26a0\ufe0f Some delete operations failed to save:",e)})),w(new Set),We("Deleted ".concat(e.length," items from database"))}),[x,f.length,g.length,y.length,h,c,d,u,p,_]),M=(0,e.useCallback)((e=>{w((t=>{const n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n}))}),[]),L=(0,e.useCallback)((e=>{w((t=>{const n=new Set(t);return e.forEach((e=>n.add(e))),n}))}),[]),O=(0,e.useCallback)((()=>{w(new Set)}),[]),F=(0,e.useCallback)((()=>{let e=0;const t=new Set,n=x.map((n=>{if(t.has(n.id)){console.warn("Duplicate database ID detected:",n.id,"for item:",n.name);const r=He();return console.log("Assigned new ID:",r),e++,t.add(r),(0,s.A)((0,s.A)({},n),{},{id:r})}return t.add(n.id),n}));e>0&&(h(n),p("inventoryDatabaseItems",n)),["daily","weekly","monthly"].forEach((t=>{const n=_(t),s=new Set,r=n.filter((t=>t.databaseId&&s.has(t.databaseId)?(e++,!1):(t.databaseId&&s.add(t.databaseId),!0)));r.length!==n.length&&(C(t,r),console.log("Cleaned ".concat(n.length-r.length," duplicates from ").concat(t)))})),We(e>0?"Cleaned up ".concat(e," duplicate items from database and inventory"):"No duplicate items found")}),[x,h,p,_,C]),U=(0,e.useCallback)((e=>{N(e),w(new Set)}),[]),z={dailyItems:f,weeklyItems:g,monthlyItems:y,databaseItems:x,activityLog:v,selectedItems:b,currentTab:j,setDailyItems:c,setWeeklyItems:d,setMonthlyItems:u,setDatabaseItems:h,setActivityLog:m,addActivityEntry:S,updateItemStock:I,reportWaste:E,importFromExcel:T,addManualItem:D,assignToCategory:A,unassignFromCategory:P,cleanupDuplicates:F,deleteItems:R,toggleItemSelection:M,selectMultipleItems:L,clearSelection:O,switchTab:U};return(0,k.jsx)(Ve.Provider,{value:z,children:n})},Ye=o("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),$e=o("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Ge=t=>{let{onClose:n}=t;const{importFromExcel:s}=Qe(),[r,i]=(0,e.useState)(!1),[a,o]=(0,e.useState)([]),[l,c]=(0,e.useState)(!1),[d,u]=(0,e.useState)(!1),[h,m]=(0,e.useState)(!1);(0,e.useEffect)((()=>{(async()=>{if(window.XLSX)u(!0);else{m(!0);try{const e=document.createElement("script");e.src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js",e.async=!0,await new Promise(((t,n)=>{e.onload=t,e.onerror=n,document.head.appendChild(e)})),u(!0),console.log("SheetJS loaded successfully")}catch(e){console.error("Failed to load SheetJS:",e),We("Failed to load Excel parser. Please try refreshing the page.")}finally{m(!1)}}})()}),[]);const p=()=>{c(!1),o([])};return(0,k.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,k.jsxs)("div",{className:"bg-white rounded-xl p-6 mx-4 ".concat(l?"max-w-4xl w-full max-h-[90vh] overflow-y-auto":"max-w-md w-full"),children:[(0,k.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,k.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:l?"Preview Import Data":"Import Items from Excel"}),(0,k.jsx)("button",{onClick:l?p:n,className:"text-gray-400 hover:text-gray-600",children:(0,k.jsx)(v,{className:"w-5 h-5"})})]}),l?(0,k.jsxs)("div",{className:"space-y-4",children:[(0,k.jsx)("div",{className:"flex items-center justify-between",children:(0,k.jsxs)("div",{className:"flex items-center text-green-600",children:[(0,k.jsx)(Fe,{className:"w-5 h-5 mr-2"}),(0,k.jsxs)("span",{className:"font-medium",children:[a.length," items ready to import"]})]})}),(0,k.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 max-h-96 overflow-y-auto",children:[(0,k.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:a.slice(0,20).map(((e,t)=>(0,k.jsxs)("div",{className:"bg-white p-3 rounded border",children:[(0,k.jsx)("div",{className:"font-medium text-sm text-gray-800 truncate",title:e.name,children:e.name}),(0,k.jsxs)("div",{className:"text-xs text-gray-500 space-y-1 mt-1",children:[e.ean&&(0,k.jsxs)("div",{children:["EAN: ",e.ean]}),e.unit&&(0,k.jsxs)("div",{children:["Unit: ",e.unit]}),e.cost&&e.cost>0&&(0,k.jsxs)("div",{children:["Price: \u20ac",e.cost.toFixed(2)]}),e.costWithTax&&e.costWithTax>0&&(0,k.jsxs)("div",{children:["Price (tax): \u20ac",e.costWithTax.toFixed(2)]})]})]},e.id)))}),a.length>20&&(0,k.jsxs)("div",{className:"text-center text-sm text-gray-500 mt-3",children:["... and ",a.length-20," more items"]})]}),(0,k.jsxs)("div",{className:"flex gap-4",children:[(0,k.jsxs)("button",{onClick:()=>{0!==a.length&&(s(a),We("Successfully imported ".concat(a.length," items!")),n())},className:"flex-1 bg-green-500 text-white py-2 rounded-lg hover:bg-green-600 transition-colors",children:["Import ",a.length," Items"]}),(0,k.jsx)("button",{onClick:p,className:"flex-1 bg-gray-500 text-white py-2 rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"})]})]}):(0,k.jsxs)("div",{className:"space-y-4",children:[h&&(0,k.jsx)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500 mr-2"}),(0,k.jsx)("span",{className:"text-blue-700",children:"Loading Excel parser..."})]})}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Excel File"}),(0,k.jsx)("input",{type:"file",accept:".xls,.xlsx,.csv",onChange:async e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n)if(d){i(!0);try{console.log("Processing file:",n.name,"Type:",n.type,"Size:",n.size);const e=[".xls",".xlsx",".csv"],t=n.name.toLowerCase().substring(n.name.lastIndexOf("."));if(!e.includes(t))throw new Error("Invalid file type: ".concat(t,". Please use .xls, .xlsx, or .csv files."));if(n.size>10485760)throw new Error("File size too large. Please use files smaller than 10MB.");const s=await n.arrayBuffer();console.log("File loaded, size:",s.byteLength,"bytes");const r=window.XLSX.read(s,{type:"array",cellStyles:!0,cellFormulas:!1,cellDates:!0,cellNF:!1,sheetStubs:!1});if(console.log("Workbook loaded, sheets:",r.SheetNames),0===r.SheetNames.length)throw new Error("No sheets found in the Excel file");const i=r.SheetNames[0],a=r.Sheets[i];console.log("Processing sheet:",i);const l=window.XLSX.utils.sheet_to_json(a,{header:1,defval:null,blankrows:!1,raw:!1});if(console.log("Raw JSON data sample:",l.slice(0,3)),!l||0===l.length)throw new Error("Sheet appears to be empty");const d=(e=>{if(e.length<2)throw new Error("File appears to be empty or invalid");const t=e[0];console.log("Header row:",t);const n=t.findIndex((e=>{if(!e)return!1;const t=e.toString().toLowerCase().trim();return t.includes("tuotenimi")||t.includes("name")||t.includes("nimi")||t.includes("product")||t.includes("catentdesc")})),s=t.findIndex((e=>{if(!e)return!1;const t=e.toString().toLowerCase().trim();return t.includes("ean")||t.includes("barcode")})),r=t.findIndex((e=>{if(!e)return!1;const t=e.toString().toLowerCase().trim();return"pmy"===t||t.includes("unit")||t.includes("yksikk\xf6")||t.includes("baseunit")||"baseunit_size"===t})),i=t.findIndex((e=>{if(!e)return!1;const t=e.toString().toLowerCase().trim();return t.includes("hinta veroton")||t.includes("price")&&!t.includes("tax")||t.includes("veroton")})),a=t.findIndex((e=>{if(!e)return!1;const t=e.toString().toLowerCase().trim();return t.includes("hinta verollinen")||t.includes("pricetax")||t.includes("hinta")&&t.includes("verollinen")}));if(console.log("Column mapping:",{nameIdx:n>=0?t[n]:"Not found",eanIdx:s>=0?t[s]:"Not found",unitIdx:r>=0?t[r]:"Not found",priceIdx:i>=0?t[i]:"Not found",priceTaxIdx:a>=0?t[a]:"Not found"}),-1===n)throw new Error('Could not find product name column. Expected columns containing "tuotenimi", "name", "nimi", or "product".');const o=e.slice(1).filter((e=>e&&e[n]&&e[n].toString().trim().length>0));console.log("Found ".concat(o.length," valid data rows out of ").concat(e.length-1," total rows"));const l=o.map(((e,t)=>{var o,l,c;return{id:He(),name:(null===(o=e[n])||void 0===o?void 0:o.toString().trim())||"",ean:-1!==s&&(null===(l=e[s])||void 0===l?void 0:l.toString().trim())||"",unit:-1!==r&&(null===(c=e[r])||void 0===c?void 0:c.toString().trim())||"",cost:-1!==i&&parseFloat(e[i])||0,costWithTax:-1!==a&&parseFloat(e[a])||0,type:"",frequency:"database"}})).filter((e=>e.name.length>0));return console.log("Successfully parsed ".concat(l.length," items")),l})(l);if(0===d.length)throw new Error("No valid items found in the file. Please check that your file has a header row and product names.");o(d),c(!0),We("Found ".concat(d.length," items. Review before importing."))}catch(s){console.error("Excel parsing error:",s);const e=s instanceof Error?s.message:"Unknown error occurred";We("Error reading file: "+e)}finally{i(!1),e.target.value=""}}else We("Excel parser is still loading. Please wait a moment and try again.")},disabled:r||!d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100"}),(0,k.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Supports .xls, .xlsx, and .csv files (max 10MB)"})]}),(0,k.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,k.jsxs)("h4",{className:"font-medium text-blue-800 mb-2 flex items-center",children:[(0,k.jsx)($e,{className:"w-4 h-4 mr-1"}),"Expected Excel Format:"]}),(0,k.jsxs)("ul",{className:"text-sm text-blue-700 space-y-1",children:[(0,k.jsxs)("li",{children:["\u2022 ",(0,k.jsx)("strong",{children:"Product Name:"})," tuotenimi, name, nimi, product"]}),(0,k.jsxs)("li",{children:["\u2022 ",(0,k.jsx)("strong",{children:"EAN Code:"})," ean, barcode"]}),(0,k.jsxs)("li",{children:["\u2022 ",(0,k.jsx)("strong",{children:"Unit:"})," PMY, unit, yksikk\xf6, baseunit_size"]}),(0,k.jsxs)("li",{children:["\u2022 ",(0,k.jsx)("strong",{children:"Price (excl. tax):"})," hinta veroton, price"]}),(0,k.jsxs)("li",{children:["\u2022 ",(0,k.jsx)("strong",{children:"Price (incl. tax):"})," hinta verollinen, pricetax"]})]}),(0,k.jsxs)("button",{onClick:()=>{const e=[["tuotenimi","ean","PMY","hinta veroton","hinta verollinen"],["Sample Product 1","1234567890123","kg","10.50","12.60"],["Sample Product 2","2345678901234","pcs","5.25","6.30"],["Sample Product 3","3456789012345","liters","8.75","10.50"]].map((e=>e.join(","))).join("\n"),t=new Blob([e],{type:"text/csv;charset=utf-8;"}),n=window.URL.createObjectURL(t),s=document.createElement("a");s.href=n,s.download="sample_inventory.csv",s.click(),window.URL.revokeObjectURL(n)},className:"mt-2 text-xs text-blue-600 hover:text-blue-800 flex items-center",children:[(0,k.jsx)(ue,{className:"w-3 h-3 mr-1"}),"Download sample file"]})]}),r&&(0,k.jsxs)("div",{className:"flex items-center justify-center py-4",children:[(0,k.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),(0,k.jsx)("span",{className:"ml-2 text-gray-600",children:"Processing file..."})]})]}),!l&&(0,k.jsx)("div",{className:"flex gap-4 mt-6",children:(0,k.jsx)("button",{onClick:n,className:"flex-1 bg-gray-500 text-white py-2 rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"})})]})})},Je=t=>{let{onClose:n}=t;const{addManualItem:r}=Qe(),[i,a]=(0,e.useState)({name:"",ean:"",unit:"",cost:"",costWithTax:"",type:""});return(0,k.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,k.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,k.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Add Manual Item"}),(0,k.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:(0,k.jsx)(v,{className:"w-5 h-5"})})]}),(0,k.jsxs)("div",{className:"space-y-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Name"}),(0,k.jsx)("input",{type:"text",placeholder:"Enter product name",value:i.name,onChange:e=>a((t=>(0,s.A)((0,s.A)({},t),{},{name:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"EAN Code (Optional)"}),(0,k.jsx)("input",{type:"text",placeholder:"Enter EAN code",value:i.ean,onChange:e=>a((t=>(0,s.A)((0,s.A)({},t),{},{ean:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit"}),(0,k.jsx)("input",{type:"text",placeholder:"e.g., kg, pieces, bottles",value:i.unit,onChange:e=>a((t=>(0,s.A)((0,s.A)({},t),{},{unit:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),(0,k.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price (excl. tax)"}),(0,k.jsx)("input",{type:"number",step:"0.01",placeholder:"0.00",value:i.cost,onChange:e=>a((t=>(0,s.A)((0,s.A)({},t),{},{cost:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price (incl. tax)"}),(0,k.jsx)("input",{type:"number",step:"0.01",placeholder:"0.00",value:i.costWithTax,onChange:e=>a((t=>(0,s.A)((0,s.A)({},t),{},{costWithTax:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),(0,k.jsxs)("select",{value:i.type,onChange:e=>a((t=>(0,s.A)((0,s.A)({},t),{},{type:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:[(0,k.jsx)("option",{value:"",children:"Select type..."}),(0,k.jsx)("option",{value:"tukku",children:"\ud83c\udfea Tukku (Wholesale)"}),(0,k.jsx)("option",{value:"beverages",children:"\ud83e\udd64 Beverages"}),(0,k.jsx)("option",{value:"packaging",children:"\ud83d\udce6 Packaging"}),(0,k.jsx)("option",{value:"produce",children:"\ud83e\udd6c Produce"}),(0,k.jsx)("option",{value:"meat",children:"\ud83e\udd69 Meat & Fish"}),(0,k.jsx)("option",{value:"dairy",children:"\ud83e\udd5b Dairy"})]})]})]}),(0,k.jsxs)("div",{className:"flex gap-4 mt-6",children:[(0,k.jsx)("button",{onClick:()=>{if(!i.name.trim())return void We("Please enter a product name");const e={name:i.name.trim(),ean:i.ean.trim(),unit:i.unit.trim(),cost:parseFloat(i.cost)||0,costWithTax:parseFloat(i.costWithTax)||0,type:i.type};r(e),n()},className:"flex-1 bg-green-500 text-white py-2 rounded-lg hover:bg-green-600 transition-colors",children:"Add to Database"}),(0,k.jsx)("button",{onClick:n,className:"flex-1 bg-gray-500 text-white py-2 rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"})]})]})})},Xe=t=>{let{onClose:n,preSelectedFrequency:s}=t;const{databaseItems:r,selectedItems:i,assignToCategory:a}=Qe(),[o,l]=(0,e.useState)(s||"daily"),[c,d]=(0,e.useState)("produce"),[u,h]=(0,e.useState)(5),[m,p]=(0,e.useState)(0),f=r.filter((e=>i.has(e.id)));return(0,k.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,k.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,k.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Assign Category and Settings"}),(0,k.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:(0,k.jsx)(v,{className:"w-5 h-5"})})]}),(0,k.jsxs)("div",{className:"space-y-4",children:[!s&&(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Frequency"}),(0,k.jsxs)("select",{value:o,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:[(0,k.jsx)("option",{value:"daily",children:"\ud83d\udd25 Daily Items"}),(0,k.jsx)("option",{value:"weekly",children:"\ud83d\udcc5 Weekly Items"}),(0,k.jsx)("option",{value:"monthly",children:"\ud83d\udce6 Monthly Items"})]})]}),s&&(0,k.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[(0,k.jsx)("div",{className:"text-sm font-medium text-blue-800 mb-1",children:"Selected Frequency:"}),(0,k.jsxs)("div",{className:"text-lg font-semibold text-blue-700",children:["daily"===s&&"\ud83d\udd25 Daily Items","weekly"===s&&"\ud83d\udcc5 Weekly Items","monthly"===s&&"\ud83d\udce6 Monthly Items"]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),(0,k.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:[(0,k.jsx)("option",{value:"produce",children:"\ud83e\udd6c Produce"}),(0,k.jsx)("option",{value:"meat",children:"\ud83e\udd69 Meat & Fish"}),(0,k.jsx)("option",{value:"dairy",children:"\ud83e\udd5b Dairy"}),(0,k.jsx)("option",{value:"bread",children:"\ud83c\udf5e Bread & Baked"}),(0,k.jsx)("option",{value:"beverages",children:"\ud83e\udd64 Beverages"}),(0,k.jsx)("option",{value:"packaging",children:"\ud83d\udce6 Packaging"}),(0,k.jsx)("option",{value:"tukku",children:"\ud83c\udfea Tukku (Wholesale)"}),(0,k.jsx)("option",{value:"cleaning",children:"\ud83e\uddfd Cleaning"}),(0,k.jsx)("option",{value:"supplies",children:"\ud83d\udce6 Supplies"})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Stock Level"}),(0,k.jsx)("input",{type:"number",min:"0",value:u,onChange:e=>h(parseInt(e.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Initial Stock"}),(0,k.jsx)("input",{type:"number",min:"0",value:m,onChange:e=>p(parseInt(e.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),(0,k.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,k.jsx)("h4",{className:"font-medium text-blue-800 mb-2",children:"Items to assign:"}),(0,k.jsx)("div",{className:"text-sm text-blue-700 max-h-32 overflow-y-auto",children:f.map((e=>(0,k.jsxs)("div",{className:"py-1",children:["\u2022 ",e.name]},e.id)))})]})]}),(0,k.jsxs)("div",{className:"flex gap-4 mt-6",children:[(0,k.jsx)("button",{onClick:()=>{a(Array.from(i),o,c,u,m),n()},className:"flex-1 bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600 transition-colors",children:"Assign Category"}),(0,k.jsx)("button",{onClick:n,className:"flex-1 bg-gray-500 text-white py-2 rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"})]})]})})},Ze=e=>{let{onAssignCategory:t,onDelete:n}=e;const{selectedItems:s,clearSelection:r}=Qe();return 0===s.size?null:(0,k.jsx)("div",{className:"fixed bottom-4 left-4 right-4 z-50 md:left-1/2 md:right-auto md:transform md:-translate-x-1/2",children:(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border p-4 w-full md:min-w-96 md:w-auto",children:[(0,k.jsxs)("div",{className:"block md:hidden space-y-3",children:[(0,k.jsx)("div",{className:"text-center",children:(0,k.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[s.size," items selected"]})}),(0,k.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,k.jsx)("button",{onClick:()=>t("daily"),className:"bg-red-500 text-white px-2 py-1 rounded text-xs hover:bg-red-600 transition-colors flex items-center justify-center",children:"\ud83d\udd25 Daily"}),(0,k.jsx)("button",{onClick:()=>t("weekly"),className:"bg-yellow-500 text-white px-2 py-1 rounded text-xs hover:bg-yellow-600 transition-colors flex items-center justify-center",children:"\ud83d\udcc5 Weekly"}),(0,k.jsx)("button",{onClick:()=>t("monthly"),className:"bg-green-500 text-white px-2 py-1 rounded text-xs hover:bg-green-600 transition-colors flex items-center justify-center",children:"\ud83d\udce6 Monthly"})]}),(0,k.jsxs)("div",{className:"flex space-x-2",children:[(0,k.jsx)("button",{onClick:r,className:"flex-1 bg-gray-500 text-white px-3 py-2 rounded text-sm hover:bg-gray-600 transition-colors",children:"Clear"}),(0,k.jsx)("button",{onClick:n,className:"flex-1 bg-red-600 text-white px-3 py-2 rounded text-sm hover:bg-red-700 transition-colors",children:"Delete"})]})]}),(0,k.jsxs)("div",{className:"hidden md:flex items-center justify-between",children:[(0,k.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,k.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[s.size," items selected"]}),(0,k.jsx)("div",{className:"h-4 w-px bg-gray-300"}),(0,k.jsxs)("div",{className:"flex space-x-2",children:[(0,k.jsx)("button",{onClick:()=>t("daily"),className:"bg-red-500 text-white px-3 py-1 rounded text-sm hover:bg-red-600 transition-colors",children:"\ud83d\udd25 Daily"}),(0,k.jsx)("button",{onClick:()=>t("weekly"),className:"bg-yellow-500 text-white px-3 py-1 rounded text-sm hover:bg-yellow-600 transition-colors",children:"\ud83d\udcc5 Weekly"}),(0,k.jsx)("button",{onClick:()=>t("monthly"),className:"bg-green-500 text-white px-3 py-1 rounded text-sm hover:bg-green-600 transition-colors",children:"\ud83d\udce6 Monthly"})]})]}),(0,k.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,k.jsx)("button",{onClick:r,className:"bg-gray-500 text-white px-3 py-1 rounded text-sm hover:bg-gray-600 transition-colors",children:"Clear"}),(0,k.jsx)("button",{onClick:n,className:"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700 transition-colors",children:"Delete"})]})]})]})})},et=t=>{let{item:n,onClose:s,onSave:r,onUnassign:i}=t;const[a,o]=(0,e.useState)(n.assignedTo||"daily"),[l,c]=(0,e.useState)(n.assignedCategory||"produce"),[d,u]=(0,e.useState)(5),[h,m]=(0,e.useState)(0);return(0,k.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,k.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,k.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Edit Item Assignment"}),(0,k.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:(0,k.jsx)(v,{className:"w-5 h-5"})})]}),(0,k.jsx)("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("span",{className:"text-2xl mr-3",children:ze(n.type||"supplies")}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h4",{className:"font-medium text-gray-800",children:n.name}),(0,k.jsxs)("p",{className:"text-sm text-gray-600",children:[n.ean||"No EAN"," \u2022 ",n.unit||"pieces"]}),n.isAssigned&&(0,k.jsxs)("p",{className:"text-xs text-blue-600 mt-1",children:["Currently assigned to ",n.assignedTo," - ",n.assignedCategory]})]})]})}),(0,k.jsxs)("div",{className:"space-y-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Frequency"}),(0,k.jsxs)("select",{value:a,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:[(0,k.jsx)("option",{value:"daily",children:"\ud83d\udd25 Daily Items"}),(0,k.jsx)("option",{value:"weekly",children:"\ud83d\udcc5 Weekly Items"}),(0,k.jsx)("option",{value:"monthly",children:"\ud83d\udce6 Monthly Items"})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),(0,k.jsxs)("select",{value:l,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:[(0,k.jsx)("option",{value:"produce",children:"\ud83e\udd6c Produce"}),(0,k.jsx)("option",{value:"meat",children:"\ud83e\udd69 Meat & Fish"}),(0,k.jsx)("option",{value:"dairy",children:"\ud83e\udd5b Dairy"}),(0,k.jsx)("option",{value:"bread",children:"\ud83c\udf5e Bread & Bakery"}),(0,k.jsx)("option",{value:"beverages",children:"\ud83e\udd64 Beverages"}),(0,k.jsx)("option",{value:"cooking",children:"\ud83e\uded2 Cooking Ingredients"}),(0,k.jsx)("option",{value:"baking",children:"\ud83c\udf3e Baking Supplies"}),(0,k.jsx)("option",{value:"grains",children:"\ud83c\udf3e Grains & Rice"}),(0,k.jsx)("option",{value:"cleaning",children:"\ud83e\uddfd Cleaning Supplies"}),(0,k.jsx)("option",{value:"supplies",children:"\ud83d\udce6 General Supplies"}),(0,k.jsx)("option",{value:"packaging",children:"\ud83d\udce6 Packaging"}),(0,k.jsx)("option",{value:"tukku",children:"\ud83c\udfea Tukku (Wholesale)"})]})]}),(0,k.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Min Level"}),(0,k.jsx)("input",{type:"number",min:"0",value:d,onChange:e=>u(parseInt(e.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Initial Stock"}),(0,k.jsx)("input",{type:"number",min:"0",value:h,onChange:e=>m(parseInt(e.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]})]})]}),(0,k.jsxs)("div",{className:"flex gap-3 mt-6",children:[n.isAssigned&&(0,k.jsx)("button",{onClick:()=>{i(),s()},className:"flex-1 bg-orange-500 text-white py-2 rounded-lg hover:bg-orange-600 transition-colors",children:"Unassign"}),(0,k.jsx)("button",{onClick:()=>{r(a,l,d,h),s()},className:"flex-1 bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600 transition-colors",children:n.isAssigned?"Update Assignment":"Assign to Inventory"}),(0,k.jsx)("button",{onClick:s,className:"flex-1 bg-gray-500 text-white py-2 rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"})]})]})})},tt=()=>{const{databaseItems:t,selectedItems:n,toggleItemSelection:s,selectMultipleItems:r,clearSelection:i,deleteItems:a,assignToCategory:o,unassignFromCategory:l,cleanupDuplicates:c}=Qe(),[d,u]=(0,e.useState)(!1),[h,m]=(0,e.useState)(!1),[p,f]=(0,e.useState)(!1),[g,y]=(0,e.useState)(void 0),[x,v]=(0,e.useState)(!1),[b,w]=(0,e.useState)(null),[j,N]=(0,e.useState)("all"),[_,C]=(0,e.useState)(""),[S,I]=(0,e.useState)(!1),E=t.filter((e=>{const t="all"===j||"assigned"===j&&e.isAssigned||"unassigned"===j&&!e.isAssigned||"uncategorized"===j&&(!e.type||""===e.type)||e.type===j,n=!_||e.name.toLowerCase().includes(_.toLowerCase())||e.ean&&e.ean.toLowerCase().includes(_.toLowerCase());return t&&n}));(0,e.useEffect)((()=>{i(),I(!1)}),[j,_,i]),(0,e.useEffect)((()=>{if(0===E.length)return void I(!1);const e=E.every((e=>n.has(e.id))),t=E.some((e=>n.has(e.id)));I(e&&t)}),[n,E]);const T=t.filter((e=>e.isAssigned)).length,D=t.filter((e=>!e.isAssigned)).length;return(0,k.jsxs)("div",{className:"space-y-6",children:[(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,k.jsxs)("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,k.jsx)("span",{className:"mr-2",children:"\ud83d\udcbe"}),"Items Database Management"]}),(0,k.jsx)("p",{className:"text-gray-600 mb-4",children:"Import items from Excel and assign them to inventory categories"}),(0,k.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[(0,k.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg text-center",children:[(0,k.jsx)("div",{className:"text-2xl font-bold text-blue-700",children:t.length}),(0,k.jsx)("div",{className:"text-sm text-blue-600",children:"Total Items"})]}),(0,k.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg text-center",children:[(0,k.jsx)("div",{className:"text-2xl font-bold text-green-700",children:T}),(0,k.jsx)("div",{className:"text-sm text-green-600",children:"Assigned"})]}),(0,k.jsxs)("div",{className:"bg-orange-50 p-3 rounded-lg text-center",children:[(0,k.jsx)("div",{className:"text-2xl font-bold text-orange-700",children:D}),(0,k.jsx)("div",{className:"text-sm text-orange-600",children:"Unassigned"})]})]}),(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,k.jsxs)("button",{onClick:()=>u(!0),className:"bg-blue-500 text-white px-4 py-3 rounded-lg hover:bg-blue-600 transition-colors flex items-center justify-center",children:[(0,k.jsx)(Ye,{className:"w-5 h-5 mr-2"}),"Import from Excel"]}),(0,k.jsxs)("button",{onClick:()=>m(!0),className:"bg-green-500 text-white px-4 py-3 rounded-lg hover:bg-green-600 transition-colors flex items-center justify-center",children:[(0,k.jsx)(q,{className:"w-5 h-5 mr-2"}),"Add Manual Item"]}),(0,k.jsxs)("button",{onClick:()=>{if(0===t.length)return void alert("No items in database to export");const e=[["Name","EAN","Unit","Price (excl. tax)","Price (incl. tax)","Type","Assigned To","Category"].join(","),...t.map((e=>['"'.concat(e.name||"",'"'),e.ean||"",e.unit||"",e.cost||0,e.costWithTax||0,e.type||"",e.assignedTo||"",e.assignedCategory||""].join(",")))].join("\n"),n=new Blob([e],{type:"text/csv;charset=utf-8;"}),s=window.URL.createObjectURL(n),r=document.createElement("a");r.href=s,r.download="database_items_".concat((new Date).toISOString().split("T")[0],".csv"),r.click(),window.URL.revokeObjectURL(s)},className:"bg-purple-500 text-white px-4 py-3 rounded-lg hover:bg-purple-600 transition-colors flex items-center justify-center",children:[(0,k.jsx)(ue,{className:"w-5 h-5 mr-2"}),"Export Database"]}),(0,k.jsxs)("button",{onClick:c,className:"bg-orange-500 text-white px-4 py-3 rounded-lg hover:bg-orange-600 transition-colors flex items-center justify-center",children:[(0,k.jsx)(W,{className:"w-5 h-5 mr-2"}),"Clean Duplicates"]})]})]}),(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm",children:[(0,k.jsxs)("div",{className:"p-6 border-b",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,k.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Database Items"}),(0,k.jsx)("div",{className:"text-sm text-gray-500",children:"Click on items to edit individually, or use checkboxes for bulk actions"})]}),(0,k.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,k.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,k.jsx)("input",{type:"checkbox",checked:S,onChange:()=>{if(S)i(),I(!1);else{const e=E.map((e=>e.id));i(),r(e),I(!0)}},className:"rounded"}),(0,k.jsx)("label",{className:"text-sm text-gray-600",children:(()=>{const e="all"!==j,n=t.length,s=E.length;return e?"Select All Visible (".concat(s," of ").concat(n,")"):"Select All (".concat(n,")")})()})]}),(0,k.jsxs)("select",{value:j,onChange:e=>N(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[(0,k.jsx)("option",{value:"all",children:"All Items"}),(0,k.jsx)("option",{value:"assigned",children:"\u2705 Assigned Items"}),(0,k.jsx)("option",{value:"unassigned",children:"\u23f3 Unassigned Items"}),(0,k.jsx)("option",{value:"tukku",children:"\ud83c\udfea Tukku (Wholesale)"}),(0,k.jsx)("option",{value:"beverages",children:"\ud83e\udd64 Beverages"}),(0,k.jsx)("option",{value:"packaging",children:"\ud83d\udce6 Packaging"}),(0,k.jsx)("option",{value:"uncategorized",children:"\u2753 Uncategorized"})]}),(0,k.jsxs)("div",{className:"relative",children:[(0,k.jsx)(me,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,k.jsx)("input",{type:"text",placeholder:"Search database...",value:_,onChange:e=>C(e.target.value),className:"pl-10 pr-3 py-2 border border-gray-300 rounded-lg text-sm w-full sm:w-48 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),(0,k.jsx)("div",{className:"p-6",children:0===E.length?(0,k.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,k.jsx)("div",{className:"text-4xl mb-4",children:"\ud83d\udcc2"}),(0,k.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No items found"}),(0,k.jsx)("p",{className:"text-sm",children:_||"all"!==j?"Try adjusting your search or filter":"Import items from Excel or add them manually to get started"})]}):(0,k.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:E.map((e=>(0,k.jsxs)("div",{onClick:t=>((e,t)=>{const n=t.target;"INPUT"===n.tagName&&"checkbox"===n.type||w(e)})(e,t),className:"cursor-pointer bg-white border rounded-xl p-4 transition-all hover:shadow-md ".concat(n.has(e.id)?"border-blue-500 bg-blue-50":e.isAssigned?"border-green-300 bg-green-50":"border-gray-200 hover:border-gray-300"),children:[(0,k.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("input",{type:"checkbox",checked:n.has(e.id),onChange:()=>s(e.id),className:"mr-3 rounded",onClick:e=>e.stopPropagation()}),(0,k.jsx)("span",{className:"text-2xl mr-3",children:ze(e.type||"supplies")}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h4",{className:"font-semibold text-gray-800",children:e.name}),(0,k.jsx)("p",{className:"text-sm text-gray-600",children:e.ean||"No EAN"})]})]}),(0,k.jsx)("div",{className:"flex items-center space-x-1",children:e.isAssigned?(0,k.jsxs)("span",{className:"bg-green-100 text-green-700 px-2 py-1 rounded-full text-xs font-medium",children:["\u2705 ",e.assignedTo]}):(0,k.jsx)("span",{className:"bg-orange-100 text-orange-700 px-2 py-1 rounded-full text-xs font-medium",children:"\u23f3 Unassigned"})})]}),(0,k.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("span",{className:"font-medium",children:"Unit:"})," ",e.unit||"pieces"]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("span",{className:"font-medium",children:"Cost:"})," \u20ac",(e.cost||0).toFixed(2)]})]}),e.isAssigned&&(0,k.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:[(0,k.jsxs)("div",{children:["Category: ",(0,k.jsx)("span",{className:"font-medium capitalize",children:e.assignedCategory})]}),(0,k.jsxs)("div",{children:["Assigned: ",e.assignedDate]})]}),(0,k.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-100 flex items-center justify-between",children:[(0,k.jsxs)("div",{className:"text-xs text-gray-500",children:["Click to ",e.isAssigned?"edit assignment":"assign to inventory"]}),(0,k.jsx)(V,{className:"w-4 h-4 text-gray-400"})]})]},e.id)))})})]}),(0,k.jsx)(Ze,{onAssignCategory:e=>{y(e),f(!0)},onDelete:()=>{0!==n.size&&v(!0)}}),x&&(0,k.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,k.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[(0,k.jsxs)("div",{className:"flex items-center mb-4",children:[(0,k.jsx)("div",{className:"p-3 bg-red-100 rounded-lg mr-4",children:(0,k.jsx)(Le,{className:"w-6 h-6 text-red-600"})}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Confirm Deletion"}),(0,k.jsx)("p",{className:"text-gray-600",children:"This action cannot be undone."})]})]}),(0,k.jsxs)("p",{className:"text-gray-700 mb-6",children:["Are you sure you want to delete ",(0,k.jsx)("span",{className:"font-semibold",children:n.size})," selected items? This will permanently remove them from the database and any assigned inventory lists."]}),(0,k.jsxs)("div",{className:"flex gap-3",children:[(0,k.jsx)("button",{onClick:()=>v(!1),className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,k.jsx)("button",{onClick:()=>{a(Array.from(n)),v(!1),I(!1)},className:"flex-1 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Delete Items"})]})]})}),d&&(0,k.jsx)(Ge,{onClose:()=>u(!1)}),h&&(0,k.jsx)(Je,{onClose:()=>m(!1)}),p&&(0,k.jsx)(Xe,{onClose:()=>{f(!1),y(void 0)},preSelectedFrequency:g}),b&&(0,k.jsx)(et,{item:b,onClose:()=>w(null),onSave:(e,t,n,s)=>{b&&o([b.id],e,t,n,s)},onUnassign:()=>{b&&l(b.id)}})]})},nt=e=>{let{item:t,onUpdateCount:n,onReportWaste:s,showQuickActions:r=!0}=e;const i=qe(t).status;return(0,k.jsxs)("div",{className:"bg-white rounded-xl p-4 shadow-sm transition-all hover:shadow-md hover:-translate-y-1 ".concat((()=>{switch(i){case"critical":return"bg-gradient-to-br from-red-50 to-red-100 border-l-4 border-red-500";case"low":return"bg-gradient-to-br from-yellow-50 to-yellow-100 border-l-4 border-yellow-500";default:return"bg-gradient-to-br from-green-50 to-green-100 border-l-4 border-green-500"}})()),children:[(0,k.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("span",{className:"text-2xl mr-3",children:ze(t.category)}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h4",{className:"font-semibold text-gray-800",children:t.name}),(0,k.jsx)("p",{className:"text-sm text-gray-600 capitalize",children:t.category})]})]}),(()=>{switch(i){case"critical":return(0,k.jsx)("span",{className:"bg-red-100 text-red-700 px-2 py-1 rounded-full text-xs font-medium animate-pulse",children:"\ud83d\udea8 Critical"});case"low":return(0,k.jsx)("span",{className:"bg-yellow-100 text-yellow-700 px-2 py-1 rounded-full text-xs font-medium",children:"\u26a0\ufe0f Low Stock"});default:return(0,k.jsx)("span",{className:"bg-green-100 text-green-700 px-2 py-1 rounded-full text-xs font-medium",children:"\u2705 Good Stock"})}})()]}),(0,k.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Current Count"}),(0,k.jsxs)("div",{className:"text-lg font-bold ".concat((()=>{switch(i){case"critical":return"text-red-600";case"low":return"text-yellow-600";default:return"text-green-600"}})()),children:[t.currentStock," ",t.unit]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Min Level"}),(0,k.jsxs)("div",{className:"text-lg font-medium text-gray-700",children:[t.minLevel," ",t.unit]})]})]}),(0,k.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4 text-xs text-gray-600",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("span",{className:"font-medium",children:"Cost:"})," \u20ac",t.cost.toFixed(2)]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("span",{className:"font-medium",children:"Last Used:"})," ",t.lastUsed]})]}),t.ean&&(0,k.jsxs)("div",{className:"mb-4 text-xs text-gray-500",children:[(0,k.jsx)("span",{className:"font-medium",children:"EAN:"})," ",t.ean]}),r&&(0,k.jsxs)("div",{className:"flex gap-2",children:[(0,k.jsxs)("button",{onClick:()=>n(t.id),className:"flex-1 flex items-center justify-center px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm",children:[(0,k.jsx)(V,{className:"w-4 h-4 mr-1"}),"Update Count"]}),(0,k.jsxs)("button",{onClick:()=>s(t.id),className:"flex-1 flex items-center justify-center px-3 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors text-sm",children:[(0,k.jsx)(W,{className:"w-4 h-4 mr-1"}),"Report Waste"]})]})]})},st=t=>{let{value:n,onChange:s,min:r=0,max:i=100,step:a=1}=t;const o=(0,e.useRef)(null),l=(0,e.useRef)(null),[c,d]=(0,e.useState)(!1),[u,h]=(0,e.useState)(0),[m,p]=(0,e.useState)(0),[f,g]=(0,e.useState)(!1),[y,x]=(0,e.useState)(""),[v,b]=(0,e.useState)(0),w=(0,e.useRef)(null),j=(0,e.useMemo)((()=>{const e=[];for(let t=r;t<=i;t+=a)e.push(t);return e}),[r,i,a]),N=48,_=192,C=(0,e.useCallback)((e=>{const t=j.indexOf(e);if(-1===t)return 0;return 72-t*N}),[j,_,N]),S=(0,e.useCallback)((e=>{const t=Math.round((72-e)/N);return j[Math.max(0,Math.min(t,j.length-1))]}),[j,_,N]),I=(0,e.useCallback)((e=>{const t=72-N*(j.length-1);return Math.max(t,Math.min(72,e))}),[j.length,_,N]);(0,e.useEffect)((()=>{f&&w.current&&(w.current.focus(),w.current.select())}),[f]),(0,e.useEffect)((()=>{if(l.current&&!c){const e=C(n);l.current.style.transform="translateY(".concat(e,"px)")}}),[n,c,C]);const E=(0,e.useCallback)(((e,t)=>{if(t&&(t.preventDefault(),t.stopPropagation()),d(!0),h(e),l.current){const e=window.getComputedStyle(l.current),t=new DOMMatrix(e.transform);p(t.m42),l.current.style.transition="none"}}),[]),T=(0,e.useCallback)(((e,t)=>{if(!c||!l.current)return;t&&(t.preventDefault(),t.stopPropagation());const n=I(m+(e-u));l.current.style.transform="translateY(".concat(n,"px)")}),[c,u,m,I]),D=(0,e.useCallback)((e=>{if(!c||!l.current)return;e&&(e.preventDefault(),e.stopPropagation()),d(!1),l.current.style.transition="transform 0.3s ease-in-out";const t=window.getComputedStyle(l.current),n=new DOMMatrix(t.transform).m42,r=S(n),i=C(r);l.current.style.transform="translateY(".concat(i,"px)"),s(r)}),[c,S,C,s]),A=(0,e.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),x(n.toString()),g(!0)}),[n]),P=(0,e.useCallback)((e=>{const t=Date.now(),s=t-v;s<300&&s>0&&(e.preventDefault(),e.stopPropagation(),x(n.toString()),g(!0)),b(t)}),[v,n]),R=(0,e.useCallback)((e=>{const t=parseFloat(e);if(isNaN(t))return!1;const n=Math.max(r,Math.min(i,t)),o=Math.round((n-r)/a),l=r+o*a;return!!j.includes(l)&&(s(l),!0)}),[r,i,a,j,s]),M=(0,e.useCallback)((()=>{R(y)&&g(!1)}),[y,R]),L=(0,e.useCallback)((()=>{g(!1),x("")}),[]),O=(0,e.useCallback)((e=>{"Enter"===e.key?(e.preventDefault(),M()):"Escape"===e.key&&(e.preventDefault(),L())}),[M,L]),F=(0,e.useCallback)((()=>{M()}),[M]),U=(0,e.useCallback)((e=>{f||(e.preventDefault(),e.stopPropagation(),E(e.clientY,e.nativeEvent))}),[E,f]);(0,e.useEffect)((()=>{const e=e=>{T(e.clientY,e)},t=e=>{D(e)};return c&&(document.addEventListener("mousemove",e,{passive:!1}),document.addEventListener("mouseup",t,{passive:!1})),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t)}}),[c,T,D]);const z=(0,e.useCallback)((e=>{f||(e.preventDefault(),e.stopPropagation(),1===e.touches.length&&(P(e),E(e.touches[0].clientY,e.nativeEvent)))}),[E,P,f]),q=(0,e.useCallback)((e=>{f||(e.preventDefault(),e.stopPropagation(),1===e.touches.length&&c&&T(e.touches[0].clientY,e.nativeEvent))}),[c,T,f]),W=(0,e.useCallback)((e=>{f||(e.preventDefault(),e.stopPropagation(),D(e.nativeEvent))}),[D,f]),B=(0,e.useCallback)((e=>{e.preventDefault(),e.stopPropagation()}),[]);return(0,k.jsxs)("div",{className:"relative",children:[(0,k.jsxs)("div",{ref:o,className:"relative h-48 overflow-hidden bg-white border-2 border-gray-200 rounded-xl touch-none select-none",style:{height:"".concat(_,"px"),touchAction:"none",userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},onMouseDown:U,onDoubleClick:A,onTouchStart:z,onTouchMove:q,onTouchEnd:W,onContextMenu:B,children:[(0,k.jsx)("div",{className:"absolute top-0 left-0 right-0 h-16 bg-gradient-to-b from-white to-transparent pointer-events-none z-10"}),(0,k.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-16 bg-gradient-to-t from-white to-transparent pointer-events-none z-10"}),(0,k.jsx)("div",{className:"absolute left-0 right-0 border-t border-b border-gray-300 pointer-events-none z-10",style:{top:"".concat(72,"px"),height:"".concat(N,"px")}}),f&&(0,k.jsx)("div",{className:"absolute left-0 right-0 z-20 flex items-center justify-center",style:{top:"".concat(72,"px"),height:"".concat(N,"px")},children:(0,k.jsx)("input",{ref:w,type:"number",value:y,onChange:e=>x(e.target.value),onKeyDown:O,onBlur:F,min:r,max:i,step:a,className:"w-20 h-8 text-center text-lg font-semibold border-2 border-blue-500 rounded bg-white text-black focus:outline-none focus:ring-2 focus:ring-blue-300"})}),(0,k.jsx)("div",{ref:l,className:"absolute left-0 right-0 transition-transform duration-300 ease-in-out touch-none select-none",style:{transform:"translateY(".concat(C(n),"px)"),touchAction:"none",userSelect:"none",WebkitUserSelect:"none"},children:j.map(((e,t)=>{const s=e===n;return(0,k.jsx)("div",{className:"flex items-center justify-center transition-all duration-200 touch-none select-none ".concat(s?"text-black font-semibold text-xl":"text-gray-400 text-lg"),style:{height:"".concat(N,"px"),touchAction:"none",userSelect:"none",WebkitUserSelect:"none"},children:e},e)}))})]}),(0,k.jsxs)("div",{className:"mt-2 text-center",children:[(0,k.jsx)("span",{className:"text-sm text-gray-600",children:"Selected: "}),(0,k.jsx)("span",{className:"font-semibold text-gray-800",children:n}),(0,k.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Double-click or double-tap to enter value manually"})]})]})},rt=t=>{let{frequency:n,selectedItemId:s,onClose:r}=t;const{dailyItems:i,weeklyItems:a,monthlyItems:o,updateItemStock:l}=Qe(),[c,d]=(0,e.useState)(""),[u,h]=(0,e.useState)(0),[m,p]=(0,e.useState)("1"),[f,g]=(0,e.useState)(""),y=(()=>{switch(n){case"daily":return i;case"weekly":return a;case"monthly":return o;default:return[]}})();(0,e.useEffect)((()=>{if(s){const e=y.find((e=>e.id===s));e&&(d(s.toString()),h(e.currentStock))}}),[s,y]);const x=y.find((e=>e.id.toString()===c));return(0,k.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,k.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,k.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Update Current Count"}),(0,k.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:(0,k.jsx)(v,{className:"w-5 h-5"})})]}),(0,k.jsxs)("div",{className:"space-y-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Item"}),(0,k.jsxs)("select",{value:c,onChange:e=>{d(e.target.value);const t=y.find((t=>t.id.toString()===e.target.value));t&&h(t.currentStock)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:[(0,k.jsx)("option",{value:"",children:"Choose an item..."}),y.map((e=>(0,k.jsxs)("option",{value:e.id,children:[e.name," (Currently: ",e.currentStock," ",e.unit,")"]},e.id)))]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Count"}),(0,k.jsx)(st,{value:u,onChange:h,min:0,max:Math.max(100,((null===x||void 0===x?void 0:x.currentStock)||0)+20)})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee"}),(0,k.jsxs)("select",{value:m,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:[(0,k.jsx)("option",{value:"1",children:"John Smith - Kitchen"}),(0,k.jsx)("option",{value:"2",children:"Sarah Johnson - Prep"}),(0,k.jsx)("option",{value:"3",children:"Mike Wilson - Grill"}),(0,k.jsx)("option",{value:"4",children:"Emily Davis - Pantry"})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),(0,k.jsx)("textarea",{rows:2,placeholder:"Any notes about the count...",value:f,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,k.jsxs)("div",{className:"flex gap-4 mt-6",children:[(0,k.jsx)("button",{onClick:()=>{if(!c||u<0)return void alert("Please select an item and enter a valid count!");l(c,u,n,{1:"John Smith",2:"Sarah Johnson",3:"Mike Wilson",4:"Emily Davis"}[m],f),r()},className:"flex-1 bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600 transition-colors",children:"Update Count"}),(0,k.jsx)("button",{onClick:r,className:"flex-1 bg-gray-500 text-white py-2 rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"})]})]})})},it=t=>{let{frequency:n,selectedItemId:s,onClose:r}=t;const{dailyItems:i,weeklyItems:a,monthlyItems:o,reportWaste:l}=Qe(),[c,d]=(0,e.useState)(""),[u,h]=(0,e.useState)(""),[m,p]=(0,e.useState)("expired"),[f,g]=(0,e.useState)("1"),[y,x]=(0,e.useState)(""),b=(()=>{switch(n){case"daily":return i;case"weekly":return a;case"monthly":return o;default:return[]}})();(0,e.useEffect)((()=>{s&&d(s.toString())}),[s]);return(0,k.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,k.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,k.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Report Waste"}),(0,k.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:(0,k.jsx)(v,{className:"w-5 h-5"})})]}),(0,k.jsxs)("div",{className:"space-y-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Item"}),(0,k.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:[(0,k.jsx)("option",{value:"",children:"Choose an item..."}),b.map((e=>(0,k.jsxs)("option",{value:e.id,children:[e.name," (Available: ",e.currentStock," ",e.unit,")"]},e.id)))]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Waste Amount"}),(0,k.jsx)("input",{type:"number",min:"0",step:"0.1",placeholder:"Enter waste amount",value:u,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Waste Reason"}),(0,k.jsxs)("select",{value:m,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:[(0,k.jsx)("option",{value:"expired",children:"Expired/Spoiled"}),(0,k.jsx)("option",{value:"overcooked",children:"Overcooked"}),(0,k.jsx)("option",{value:"dropped",children:"Dropped/Contaminated"}),(0,k.jsx)("option",{value:"overordered",children:"Over-ordered"}),(0,k.jsx)("option",{value:"customer-return",children:"Customer Return"}),(0,k.jsx)("option",{value:"other",children:"Other"})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee"}),(0,k.jsxs)("select",{value:f,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:[(0,k.jsx)("option",{value:"1",children:"John Smith - Kitchen"}),(0,k.jsx)("option",{value:"2",children:"Sarah Johnson - Prep"}),(0,k.jsx)("option",{value:"3",children:"Mike Wilson - Grill"}),(0,k.jsx)("option",{value:"4",children:"Emily Davis - Pantry"})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),(0,k.jsx)("textarea",{rows:2,placeholder:"Details about the waste...",value:y,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,k.jsxs)("div",{className:"flex gap-4 mt-6",children:[(0,k.jsx)("button",{onClick:()=>{const e=parseFloat(u);if(!c||!u||e<=0)return void alert("Please select an item and enter a valid waste amount!");const t=b.find((e=>e.id.toString()===c));if(!t)return void alert("Item not found!");if(e>t.currentStock)return void alert("Waste amount cannot exceed current stock!");l(c,e,m,n,{1:"John Smith",2:"Sarah Johnson",3:"Mike Wilson",4:"Emily Davis"}[f],y),r()},className:"flex-1 bg-orange-500 text-white py-2 rounded-lg hover:bg-orange-600 transition-colors",children:"Report Waste"}),(0,k.jsx)("button",{onClick:r,className:"flex-1 bg-gray-500 text-white py-2 rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"})]})]})})},at=()=>{const{dailyItems:t,activityLog:n}=Qe(),[s,r]=(0,e.useState)(!1),[i,a]=(0,e.useState)(!1),[o,l]=(0,e.useState)(null),[c,d]=(0,e.useState)("all"),[u,h]=(0,e.useState)(""),m=t.filter((e=>{const t="all"===c||e.category===c,n=!u||e.name.toLowerCase().includes(u.toLowerCase());return t&&n})),p=e=>{l(e),r(!0)},f=e=>{l(e),a(!0)},g=n.filter((e=>new Date(e.timestamp).toDateString()===(new Date).toDateString())).slice(0,10);return(0,k.jsxs)("div",{className:"space-y-6",children:[(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,k.jsxs)("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,k.jsx)("span",{className:"mr-2",children:"\ud83d\udd25"}),"Daily High-Usage Items - ",(0,k.jsx)("span",{className:"text-red-600",children:(y=new Date,new Date(y).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}))})]}),(0,k.jsx)("p",{className:"text-gray-600 mb-4",children:"At the end of each day, count and update current quantities for high-usage items"}),(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,k.jsxs)("button",{onClick:()=>r(!0),className:"bg-blue-500 text-white px-4 py-3 rounded-lg hover:bg-blue-600 transition-colors flex items-center justify-center",children:[(0,k.jsx)(V,{className:"w-5 h-5 mr-2"}),"Update Current Count"]}),(0,k.jsxs)("button",{onClick:()=>a(!0),className:"bg-orange-500 text-white px-4 py-3 rounded-lg hover:bg-orange-600 transition-colors flex items-center justify-center",children:[(0,k.jsx)(W,{className:"w-5 h-5 mr-2"}),"Report Waste"]})]})]}),(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm",children:[(0,k.jsxs)("div",{className:"p-6 border-b",children:[(0,k.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,k.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Daily Usage Items"}),(0,k.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,k.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-blue-500 focus:border-blue-500",children:[(0,k.jsx)("option",{value:"all",children:"All Types"}),(0,k.jsx)("option",{value:"tukku",children:"\ud83c\udfea Tukku (Wholesale)"}),(0,k.jsx)("option",{value:"beverages",children:"\ud83e\udd64 Beverages"}),(0,k.jsx)("option",{value:"packaging",children:"\ud83d\udce6 Packaging"}),(0,k.jsx)("option",{value:"produce",children:"\ud83e\udd6c Produce"}),(0,k.jsx)("option",{value:"meat",children:"\ud83e\udd69 Meat & Fish"}),(0,k.jsx)("option",{value:"dairy",children:"\ud83e\udd5b Dairy"})]}),(0,k.jsxs)("div",{className:"relative",children:[(0,k.jsx)(me,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,k.jsx)("input",{type:"text",placeholder:"Search daily items...",value:u,onChange:e=>h(e.target.value),className:"pl-10 pr-3 py-2 border border-gray-300 rounded-lg text-sm w-full sm:w-48 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),(u||"all"!==c)&&(0,k.jsxs)("div",{className:"mt-4 text-sm text-gray-600",children:["Showing ",m.length," of ",t.length," daily items",u&&' matching "'.concat(u,'"'),"all"!==c&&" in ".concat(c," category")]})]}),(0,k.jsx)("div",{className:"p-6",children:(0,k.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:m.map((e=>(0,k.jsx)(nt,{item:e,onUpdateCount:p,onReportWaste:f},e.id)))})})]}),(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm",children:[(0,k.jsx)("div",{className:"p-6 border-b",children:(0,k.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Today's Activity"})}),(0,k.jsx)("div",{className:"p-6",children:(0,k.jsx)("div",{className:"space-y-3",children:0===g.length?(0,k.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,k.jsx)("div",{className:"text-3xl mb-2",children:"\ud83d\udccb"}),(0,k.jsx)("p",{children:"No activity recorded for today"})]}):g.map((e=>{let t,n,s;switch(e.type){case"count_update":t="\ud83d\udcdd",n="blue",s="Count Updated";break;case"waste":t="\ud83d\uddd1\ufe0f",n="red",s="Waste";break;default:t="\ud83d\udce6",n="gray",s="Activity"}return(0,k.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("div",{className:"bg-".concat(n,"-100 p-2 rounded-lg mr-3"),children:(0,k.jsx)("span",{className:"text-".concat(n,"-600"),children:t})}),(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:"font-medium text-gray-800",children:[s,": ",e.item]}),(0,k.jsxs)("div",{className:"text-sm text-gray-600",children:[e.employee," \u2022 ",e.timestamp,e.notes&&" \u2022 ".concat(e.notes),e.reason&&" (".concat(e.reason,")")]})]})]}),(0,k.jsxs)("div",{className:"text-right",children:[(0,k.jsxs)("div",{className:"font-bold text-gray-700",children:[e.quantity," ",e.unit]}),(0,k.jsx)("div",{className:"text-xs text-gray-500",children:e.type})]})]},e.id)}))})})]}),s&&(0,k.jsx)(rt,{frequency:"daily",selectedItemId:o,onClose:()=>{r(!1),l(null)}}),i&&(0,k.jsx)(it,{frequency:"daily",selectedItemId:o,onClose:()=>{a(!1),l(null)}})]});var y},ot=()=>{const{weeklyItems:t}=Qe(),[n,s]=(0,e.useState)(!1),[r,i]=(0,e.useState)(!1),[a,o]=(0,e.useState)(null),[l,c]=(0,e.useState)(""),[d,u]=(0,e.useState)("all"),m=t.filter((e=>{const t=!l||e.name.toLowerCase().includes(l.toLowerCase()),n="all"===d||e.category===d;return t&&n})),p=[...new Set(t.map((e=>e.category)))],f=e=>{o(e),s(!0)},g=e=>{o(e),i(!0)},y=t.length,x=t.filter((e=>0===e.currentStock)).length,v=t.filter((e=>e.currentStock>0&&e.currentStock<=e.minLevel)).length,b=t.reduce(((e,t)=>e+t.cost*t.currentStock),0),w=new Date,j=(8-w.getDay())%7,N=new Date(w);return N.setDate(w.getDate()+j),(0,k.jsxs)("div",{className:"space-y-6",children:[(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsxs)("h2",{className:"text-lg font-semibold text-gray-800 mb-2 flex items-center",children:[(0,k.jsx)(de,{className:"w-6 h-6 mr-2 text-yellow-600"}),"Weekly Reorder Items"]}),(0,k.jsx)("p",{className:"text-gray-600",children:"Items counted and updated weekly for regular restocking"})]}),(0,k.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[(0,k.jsx)(P,{className:"w-4 h-4"}),(0,k.jsxs)("span",{children:["Next count: ",N.toLocaleDateString()]})]})]}),(0,k.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,k.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[(0,k.jsx)("div",{className:"text-sm text-yellow-600 font-medium",children:"Total Items"}),(0,k.jsx)("div",{className:"text-2xl font-bold text-yellow-800",children:y})]}),(0,k.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg",children:[(0,k.jsx)("div",{className:"text-sm text-red-600 font-medium",children:"Critical"}),(0,k.jsx)("div",{className:"text-2xl font-bold text-red-800",children:x})]}),(0,k.jsxs)("div",{className:"bg-orange-50 p-4 rounded-lg",children:[(0,k.jsx)("div",{className:"text-sm text-orange-600 font-medium",children:"Low Stock"}),(0,k.jsx)("div",{className:"text-2xl font-bold text-orange-800",children:v})]}),(0,k.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,k.jsx)("div",{className:"text-sm text-blue-600 font-medium",children:"Total Value"}),(0,k.jsxs)("div",{className:"text-2xl font-bold text-blue-800",children:["\u20ac",b.toFixed(2)]})]})]}),(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,k.jsxs)("button",{onClick:()=>s(!0),className:"bg-blue-500 text-white px-4 py-3 rounded-lg hover:bg-blue-600 transition-colors flex items-center justify-center",children:[(0,k.jsx)(V,{className:"w-5 h-5 mr-2"}),"Weekly Count Update"]}),(0,k.jsxs)("button",{onClick:()=>i(!0),className:"bg-orange-500 text-white px-4 py-3 rounded-lg hover:bg-orange-600 transition-colors flex items-center justify-center",children:[(0,k.jsx)(W,{className:"w-5 h-5 mr-2"}),"Report Waste"]})]})]}),(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm",children:[(0,k.jsxs)("div",{className:"p-6 border-b",children:[(0,k.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,k.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Weekly Items Status"}),(0,k.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,k.jsxs)("select",{value:d,onChange:e=>u(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-blue-500 focus:border-blue-500",children:[(0,k.jsx)("option",{value:"all",children:"All Categories"}),p.map((e=>(0,k.jsx)("option",{value:e,className:"capitalize",children:e},e)))]}),(0,k.jsxs)("div",{className:"relative",children:[(0,k.jsx)(me,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,k.jsx)("input",{type:"text",placeholder:"Search weekly items...",value:l,onChange:e=>c(e.target.value),className:"pl-10 pr-3 py-2 border border-gray-300 rounded-lg text-sm w-full sm:w-48 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),(l||"all"!==d)&&(0,k.jsxs)("div",{className:"mt-4 text-sm text-gray-600",children:["Showing ",m.length," of ",y," weekly items",l&&' matching "'.concat(l,'"'),"all"!==d&&" in ".concat(d," category")]})]}),(0,k.jsx)("div",{className:"p-6",children:0===m.length?(0,k.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,k.jsx)(de,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),(0,k.jsx)("h3",{className:"text-lg font-medium mb-2",children:l||"all"!==d?"No items match your filters":"No weekly items yet"}),(0,k.jsx)("p",{className:"text-sm",children:l||"all"!==d?"Try adjusting your search or filter criteria":"Add items from the database to start tracking weekly inventory"})]}):(0,k.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:m.map((e=>(0,k.jsx)(nt,{item:e,onUpdateCount:f,onReportWaste:g},e.id)))})})]}),(0,k.jsxs)("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 rounded-xl p-6 border border-yellow-200",children:[(0,k.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center",children:[(0,k.jsx)(h,{className:"w-5 h-5 mr-2 text-yellow-600"}),"Weekly Inventory Insights"]}),(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"\ud83d\udcc5 Weekly Patterns"}),(0,k.jsxs)("ul",{className:"text-gray-600 space-y-1",children:[(0,k.jsx)("li",{children:"\u2022 Monitor weekend vs weekday usage"}),(0,k.jsx)("li",{children:"\u2022 Track seasonal demand changes"}),(0,k.jsx)("li",{children:"\u2022 Identify peak consumption days"})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"\ud83d\udd04 Reorder Strategy"}),(0,k.jsxs)("ul",{className:"text-gray-600 space-y-1",children:[(0,k.jsx)("li",{children:"\u2022 Set reorder points based on lead times"}),(0,k.jsx)("li",{children:"\u2022 Consider supplier delivery schedules"}),(0,k.jsx)("li",{children:"\u2022 Account for weekend availability"})]})]})]})]}),(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,k.jsx)("h4",{className:"font-semibold text-gray-800 mb-3",children:"This Week's Turnover"}),(0,k.jsxs)("div",{className:"space-y-2",children:[(0,k.jsxs)("div",{className:"flex justify-between",children:[(0,k.jsx)("span",{className:"text-gray-600",children:"Fast Moving:"}),(0,k.jsx)("span",{className:"font-medium",children:t.filter((e=>e.currentStock<.5*e.minLevel)).length})]}),(0,k.jsxs)("div",{className:"flex justify-between",children:[(0,k.jsx)("span",{className:"text-gray-600",children:"Normal:"}),(0,k.jsx)("span",{className:"font-medium",children:t.filter((e=>e.currentStock>=.5*e.minLevel&&e.currentStock<=e.minLevel)).length})]}),(0,k.jsxs)("div",{className:"flex justify-between",children:[(0,k.jsx)("span",{className:"text-gray-600",children:"Slow Moving:"}),(0,k.jsx)("span",{className:"font-medium",children:t.filter((e=>e.currentStock>e.minLevel)).length})]})]})]}),(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,k.jsx)("h4",{className:"font-semibold text-gray-800 mb-3",children:"Reorder Recommendations"}),(0,k.jsxs)("div",{className:"space-y-2",children:[t.filter((e=>e.currentStock<=e.minLevel)).slice(0,3).map((e=>(0,k.jsxs)("div",{className:"text-sm",children:[(0,k.jsx)("div",{className:"font-medium text-gray-700",children:e.name}),(0,k.jsxs)("div",{className:"text-gray-500",children:["Order: ",2*e.minLevel," ",e.unit]})]},e.id))),0===t.filter((e=>e.currentStock<=e.minLevel)).length&&(0,k.jsx)("p",{className:"text-gray-500 text-sm",children:"All items adequately stocked"})]})]}),(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,k.jsx)("h4",{className:"font-semibold text-gray-800 mb-3",children:"Cost Analysis"}),(0,k.jsxs)("div",{className:"space-y-2",children:[(0,k.jsxs)("div",{className:"flex justify-between",children:[(0,k.jsx)("span",{className:"text-gray-600",children:"Avg. Cost/Item:"}),(0,k.jsxs)("span",{className:"font-medium",children:["\u20ac",y>0?(b/y).toFixed(2):"0.00"]})]}),(0,k.jsxs)("div",{className:"flex justify-between",children:[(0,k.jsx)("span",{className:"text-gray-600",children:"Weekly Budget:"}),(0,k.jsxs)("span",{className:"font-medium",children:["\u20ac",(.25*b).toFixed(2)]})]}),(0,k.jsxs)("div",{className:"flex justify-between",children:[(0,k.jsx)("span",{className:"text-gray-600",children:"Reorder Value:"}),(0,k.jsxs)("span",{className:"font-medium text-orange-600",children:["\u20ac",t.filter((e=>e.currentStock<=e.minLevel)).reduce(((e,t)=>e+t.cost*t.minLevel),0).toFixed(2)]})]})]})]})]}),n&&(0,k.jsx)(rt,{frequency:"weekly",selectedItemId:a,onClose:()=>{s(!1),o(null)}}),r&&(0,k.jsx)(it,{frequency:"weekly",selectedItemId:a,onClose:()=>{i(!1),o(null)}})]})},lt=()=>{const{monthlyItems:t}=Qe(),[n,s]=(0,e.useState)(!1),[r,i]=(0,e.useState)(!1),[a,o]=(0,e.useState)(null),[l,c]=(0,e.useState)(""),[d,u]=(0,e.useState)("all"),h=t.filter((e=>{const t=!l||e.name.toLowerCase().includes(l.toLowerCase()),n="all"===d||e.category===d;return t&&n})),m=[...new Set(t.map((e=>e.category)))],p=e=>{o(e),s(!0)},f=e=>{o(e),i(!0)},g=t.length,y=t.filter((e=>0===e.currentStock)).length,x=t.filter((e=>e.currentStock>0&&e.currentStock<=e.minLevel)).length,v=t.reduce(((e,t)=>e+t.cost*t.currentStock),0);return(0,k.jsxs)("div",{className:"space-y-6",children:[(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsxs)("h2",{className:"text-lg font-semibold text-gray-800 mb-2 flex items-center",children:[(0,k.jsx)(B,{className:"w-6 h-6 mr-2 text-green-600"}),"Monthly Bulk Items"]}),(0,k.jsx)("p",{className:"text-gray-600",children:"Items counted and updated monthly for bulk ordering and storage"})]}),(0,k.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[(0,k.jsx)(de,{className:"w-4 h-4"}),(0,k.jsxs)("span",{children:["Last monthly count: ",(new Date).toLocaleDateString()]})]})]}),(0,k.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,k.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,k.jsx)("div",{className:"text-sm text-green-600 font-medium",children:"Total Items"}),(0,k.jsx)("div",{className:"text-2xl font-bold text-green-800",children:g})]}),(0,k.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg",children:[(0,k.jsx)("div",{className:"text-sm text-red-600 font-medium",children:"Critical"}),(0,k.jsx)("div",{className:"text-2xl font-bold text-red-800",children:y})]}),(0,k.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[(0,k.jsx)("div",{className:"text-sm text-yellow-600 font-medium",children:"Low Stock"}),(0,k.jsx)("div",{className:"text-2xl font-bold text-yellow-800",children:x})]}),(0,k.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,k.jsx)("div",{className:"text-sm text-blue-600 font-medium",children:"Total Value"}),(0,k.jsxs)("div",{className:"text-2xl font-bold text-blue-800",children:["\u20ac",v.toFixed(2)]})]})]}),(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,k.jsxs)("button",{onClick:()=>s(!0),className:"bg-blue-500 text-white px-4 py-3 rounded-lg hover:bg-blue-600 transition-colors flex items-center justify-center",children:[(0,k.jsx)(V,{className:"w-5 h-5 mr-2"}),"Monthly Count Update"]}),(0,k.jsxs)("button",{onClick:()=>i(!0),className:"bg-orange-500 text-white px-4 py-3 rounded-lg hover:bg-orange-600 transition-colors flex items-center justify-center",children:[(0,k.jsx)(W,{className:"w-5 h-5 mr-2"}),"Report Waste/Damage"]})]})]}),(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm",children:[(0,k.jsxs)("div",{className:"p-6 border-b",children:[(0,k.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,k.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Monthly Items Inventory"}),(0,k.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,k.jsxs)("select",{value:d,onChange:e=>u(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-blue-500 focus:border-blue-500",children:[(0,k.jsx)("option",{value:"all",children:"All Categories"}),m.map((e=>(0,k.jsx)("option",{value:e,className:"capitalize",children:e},e)))]}),(0,k.jsxs)("div",{className:"relative",children:[(0,k.jsx)(me,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,k.jsx)("input",{type:"text",placeholder:"Search monthly items...",value:l,onChange:e=>c(e.target.value),className:"pl-10 pr-3 py-2 border border-gray-300 rounded-lg text-sm w-full sm:w-48 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),(l||"all"!==d)&&(0,k.jsxs)("div",{className:"mt-4 text-sm text-gray-600",children:["Showing ",h.length," of ",g," monthly items",l&&' matching "'.concat(l,'"'),"all"!==d&&" in ".concat(d," category")]})]}),(0,k.jsx)("div",{className:"p-6",children:0===h.length?(0,k.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,k.jsx)(B,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),(0,k.jsx)("h3",{className:"text-lg font-medium mb-2",children:l||"all"!==d?"No items match your filters":"No monthly items yet"}),(0,k.jsx)("p",{className:"text-sm",children:l||"all"!==d?"Try adjusting your search or filter criteria":"Add items from the database to start tracking monthly inventory"})]}):(0,k.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map((e=>(0,k.jsx)(nt,{item:e,onUpdateCount:p,onReportWaste:f},e.id)))})})]}),(0,k.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-xl p-6 border border-green-200",children:[(0,k.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center",children:[(0,k.jsx)(B,{className:"w-5 h-5 mr-2 text-green-600"}),"Monthly Inventory Tips"]}),(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"\ud83d\udce6 Bulk Items Management"}),(0,k.jsxs)("ul",{className:"text-gray-600 space-y-1",children:[(0,k.jsx)("li",{children:"\u2022 Review monthly consumption patterns"}),(0,k.jsx)("li",{children:"\u2022 Check expiration dates on bulk items"}),(0,k.jsx)("li",{children:"\u2022 Plan storage space for large orders"})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"\ud83d\udcca Cost Optimization"}),(0,k.jsxs)("ul",{className:"text-gray-600 space-y-1",children:[(0,k.jsx)("li",{children:"\u2022 Compare supplier prices monthly"}),(0,k.jsx)("li",{children:"\u2022 Track seasonal price variations"}),(0,k.jsx)("li",{children:"\u2022 Identify bulk discount opportunities"})]})]})]})]}),y>0&&(0,k.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6",children:[(0,k.jsxs)("div",{className:"flex items-center mb-3",children:[(0,k.jsx)("div",{className:"p-2 bg-red-100 rounded-lg mr-3",children:(0,k.jsx)(W,{className:"w-5 h-5 text-red-600"})}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"text-lg font-semibold text-red-800",children:"Monthly Items Need Attention"}),(0,k.jsxs)("p",{className:"text-red-600 text-sm",children:[y," monthly items are out of stock and may need immediate ordering"]})]})]}),(0,k.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:t.filter((e=>0===e.currentStock)).map((e=>(0,k.jsxs)("div",{className:"bg-white p-3 rounded-lg border-l-4 border-red-500",children:[(0,k.jsx)("div",{className:"font-medium text-gray-800",children:e.name}),(0,k.jsxs)("div",{className:"text-sm text-red-600",children:["Out of stock - Min required: ",e.minLevel," ",e.unit]}),(0,k.jsx)("div",{className:"text-xs text-gray-500 capitalize",children:e.category})]},e.id)))})]}),n&&(0,k.jsx)(rt,{frequency:"monthly",selectedItemId:a,onClose:()=>{s(!1),o(null)}}),r&&(0,k.jsx)(it,{frequency:"monthly",selectedItemId:a,onClose:()=>{i(!1),o(null)}})]})},ct=o("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),dt=()=>{const{dailyItems:e,weeklyItems:t,monthlyItems:n,activityLog:s}=Qe(),r=[...e,...t,...n],i=r.filter((e=>"critical"===qe(e).status)),a=r.filter((e=>"low"===qe(e).status)),o=r.reduce(((e,t)=>e+t.cost*t.currentStock),0),l=s.filter((e=>new Date(e.timestamp).toDateString()===(new Date).toDateString())),c=l.filter((e=>"waste"===e.type)).reduce(((e,t)=>e+t.quantity),0),d=l.filter((e=>"waste"===e.type)).reduce(((e,t)=>{const n=r.find((e=>e.name===t.item));return e+t.quantity*((null===n||void 0===n?void 0:n.cost)||0)}),0);return(0,k.jsxs)("div",{className:"space-y-6",children:[(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,k.jsxs)("h2",{className:"text-lg font-semibold text-gray-800 mb-2 flex items-center",children:[(0,k.jsx)(Te,{className:"w-6 h-6 mr-2 text-purple-600"}),"Inventory Analytics Dashboard"]}),(0,k.jsx)("p",{className:"text-gray-600",children:"Overview of inventory status, trends, and performance metrics"})]}),(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,k.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Items"}),(0,k.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:r.length}),(0,k.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Daily: ",e.length," | Weekly: ",t.length," | Monthly: ",n.length]})]}),(0,k.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,k.jsx)(Te,{className:"w-6 h-6 text-blue-600"})})]})}),(0,k.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Critical Items"}),(0,k.jsx)("p",{className:"text-2xl font-bold text-red-600",children:i.length}),(0,k.jsx)("p",{className:"text-xs text-red-500 mt-1",children:i.length>0?"Immediate attention required":"All items properly stocked"})]}),(0,k.jsx)("div",{className:"p-3 bg-red-100 rounded-lg",children:(0,k.jsx)(Le,{className:"w-6 h-6 text-red-600"})})]})}),(0,k.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Inventory Value"}),(0,k.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["\u20ac",o.toFixed(2)]}),(0,k.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Current stock value"})]}),(0,k.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,k.jsx)(ct,{className:"w-6 h-6 text-green-600"})})]})}),(0,k.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Today's Waste"}),(0,k.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:c}),(0,k.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Items wasted today"})]}),(0,k.jsx)("div",{className:"p-3 bg-orange-100 rounded-lg",children:(0,k.jsx)(h,{className:"w-6 h-6 text-orange-600"})})]})})]}),(0,k.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,k.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Stock Status Distribution"}),(0,k.jsxs)("div",{className:"space-y-4",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-3"}),(0,k.jsx)("span",{className:"text-sm text-gray-600",children:"Normal Stock"})]}),(0,k.jsx)("span",{className:"font-semibold text-green-600",children:r.filter((e=>"normal"===qe(e).status)).length})]}),(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("div",{className:"w-3 h-3 bg-yellow-500 rounded-full mr-3"}),(0,k.jsx)("span",{className:"text-sm text-gray-600",children:"Low Stock"})]}),(0,k.jsx)("span",{className:"font-semibold text-yellow-600",children:a.length})]}),(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full mr-3"}),(0,k.jsx)("span",{className:"text-sm text-gray-600",children:"Critical Stock"})]}),(0,k.jsx)("span",{className:"font-semibold text-red-600",children:i.length})]})]})]}),(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,k.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Today's Activity Summary"}),(0,k.jsxs)("div",{className:"space-y-4",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("span",{className:"text-lg mr-2",children:"\ud83d\udcdd"}),(0,k.jsx)("span",{className:"text-sm text-gray-600",children:"Count Updates"})]}),(0,k.jsx)("span",{className:"font-semibold text-blue-600",children:l.filter((e=>"count_update"===e.type)).length})]}),(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("span",{className:"text-lg mr-2",children:"\ud83d\uddd1\ufe0f"}),(0,k.jsx)("span",{className:"text-sm text-gray-600",children:"Waste Reports"})]}),(0,k.jsx)("span",{className:"font-semibold text-orange-600",children:l.filter((e=>"waste"===e.type)).length})]}),(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("span",{className:"text-lg mr-2",children:"\ud83d\udcb0"}),(0,k.jsx)("span",{className:"text-sm text-gray-600",children:"Waste Value"})]}),(0,k.jsxs)("span",{className:"font-semibold text-red-600",children:["\u20ac",d.toFixed(2)]})]}),(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("span",{className:"text-lg mr-2",children:"\ud83d\udce5"}),(0,k.jsx)("span",{className:"text-sm text-gray-600",children:"Manual Adds"})]}),(0,k.jsx)("span",{className:"font-semibold text-green-600",children:l.filter((e=>"manual_add"===e.type)).length})]})]})]})]}),i.length>0&&(0,k.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6",children:[(0,k.jsxs)("div",{className:"flex items-center mb-4",children:[(0,k.jsx)(Le,{className:"w-6 h-6 text-red-600 mr-2"}),(0,k.jsx)("h3",{className:"text-lg font-semibold text-red-800",children:"\ud83d\udea8 Critical Stock Alert"})]}),(0,k.jsx)("p",{className:"text-red-700 mb-4",children:"The following items are critically low and require immediate restocking:"}),(0,k.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.map((e=>(0,k.jsxs)("div",{className:"bg-white p-4 rounded-lg border-l-4 border-red-500",children:[(0,k.jsx)("div",{className:"font-medium text-gray-800",children:e.name}),(0,k.jsxs)("div",{className:"text-sm text-red-600",children:["Current: ",(0,k.jsxs)("span",{className:"font-bold",children:[e.currentStock," ",e.unit]})," | Min Required: ",(0,k.jsxs)("span",{className:"font-bold",children:[e.minLevel," ",e.unit]})]}),(0,k.jsx)("div",{className:"text-xs text-gray-500 mt-1 capitalize",children:e.category}),(0,k.jsxs)("div",{className:"text-xs text-red-500 mt-1",children:["Shortage: ",e.minLevel-e.currentStock," ",e.unit]})]},e.id)))})]}),(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm",children:[(0,k.jsxs)("div",{className:"p-6 border-b",children:[(0,k.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Recent Activity Log"}),(0,k.jsx)("p",{className:"text-gray-600 text-sm",children:"Latest inventory transactions and updates"})]}),(0,k.jsx)("div",{className:"p-6",children:0===s.length?(0,k.jsxs)("div",{className:"text-center py-8",children:[(0,k.jsx)("div",{className:"text-gray-400 text-4xl mb-2",children:"\ud83d\udccb"}),(0,k.jsx)("p",{className:"text-gray-500",children:"No activity recorded yet"}),(0,k.jsx)("p",{className:"text-sm text-gray-400",children:"Start by updating item counts or reporting waste"})]}):(0,k.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:s.slice(0,20).map((e=>(0,k.jsxs)("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 rounded-lg",children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("span",{className:"text-lg mr-3",children:"count_update"===e.type?"\ud83d\udcdd":"waste"===e.type?"\ud83d\uddd1\ufe0f":"import"===e.type?"\ud83d\udce5":"\u2795"}),(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:"font-medium text-gray-800",children:e.item}),(0,k.jsxs)("div",{className:"text-sm text-gray-600",children:["count_update"===e.type&&"Updated count to ".concat(e.quantity," ").concat(e.unit),"waste"===e.type&&"Wasted ".concat(e.quantity," ").concat(e.unit," - ").concat(e.reason),"import"===e.type&&"Imported ".concat(e.quantity," ").concat(e.unit),"manual_add"===e.type&&"Added to database"]})]})]}),(0,k.jsxs)("div",{className:"text-right",children:[(0,k.jsx)("div",{className:"text-sm text-gray-500",children:e.employee}),(0,k.jsx)("div",{className:"text-xs text-gray-400",children:e.timestamp})]})]},e.id)))})})]})]})},ut=()=>((0,e.useEffect)((()=>{let e=document.getElementById("toastContainer");return e||(e=document.createElement("div"),e.id="toastContainer",e.className="fixed top-4 right-4 z-50 space-y-2 pointer-events-none",document.body.appendChild(e)),()=>{const e=document.getElementById("toastContainer");e&&0===e.children.length&&e.remove()}}),[]),(0,k.jsx)("div",{id:"toastContainer",className:"fixed top-4 right-4 z-50 space-y-2 pointer-events-none",style:{zIndex:9999}})),ht=()=>{const{dailyItems:e,weeklyItems:t,monthlyItems:n,databaseItems:s}=Qe(),r=[...e,...t,...n],i=r.filter((e=>"critical"===qe(e).status)).length,a=r.filter((e=>"low"===qe(e).status)).length,o=r.filter((e=>"normal"===qe(e).status)).length,l=s.length;return(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm mb-6 p-4 md:p-6",children:[(0,k.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4",children:(0,k.jsxs)("div",{className:"flex items-center mb-4 sm:mb-0",children:[(0,k.jsx)("div",{className:"bg-orange-500 p-2 md:p-3 rounded-lg mr-3 md:mr-4",children:(0,k.jsx)(p,{className:"text-white w-6 h-6 md:w-8 md:h-8"})}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h1",{className:"text-xl md:text-2xl font-bold text-gray-800",children:"Restaurant Inventory"}),(0,k.jsx)("p",{className:"text-sm md:text-base text-gray-600",children:"Track usage, waste, and consumption patterns"})]})]})}),(0,k.jsxs)("div",{className:"space-y-3",children:[i>0&&(0,k.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 p-3 rounded-lg",children:(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)(Le,{className:"w-5 h-5 text-red-600 mr-2"}),(0,k.jsxs)("div",{className:"flex-1",children:[(0,k.jsxs)("div",{className:"text-sm font-medium text-red-800",children:[i," Critical Item",i>1?"s":""," Need Attention"]}),(0,k.jsx)("div",{className:"text-xs text-red-600",children:"Immediate restocking required"})]}),(0,k.jsx)("div",{className:"text-2xl font-bold text-red-700",children:i})]})}),(0,k.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,k.jsx)("div",{className:"bg-yellow-50 p-3 rounded-lg border border-yellow-200",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:"text-xs font-medium text-yellow-600",children:"Low Stock"}),(0,k.jsx)("div",{className:"text-lg font-bold text-yellow-800",children:a})]}),(0,k.jsx)(Oe,{className:"w-4 h-4 text-yellow-600"})]})}),(0,k.jsx)("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:"text-xs font-medium text-green-600",children:"Good Stock"}),(0,k.jsx)("div",{className:"text-lg font-bold text-green-800",children:o})]}),(0,k.jsx)(Fe,{className:"w-4 h-4 text-green-600"})]})}),(0,k.jsx)("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:"text-xs font-medium text-blue-600",children:"Database"}),(0,k.jsx)("div",{className:"text-lg font-bold text-blue-800",children:l})]}),(0,k.jsx)(y,{className:"w-4 h-4 text-blue-600"})]})}),(0,k.jsx)("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:"text-xs font-medium text-gray-600",children:"Total Items"}),(0,k.jsx)("div",{className:"text-lg font-bold text-gray-800",children:r.length})]}),(0,k.jsx)(B,{className:"w-4 h-4 text-gray-600"})]})})]})]})]})},mt=()=>{const{currentTab:e,switchTab:t,dailyItems:n,weeklyItems:s,monthlyItems:r,databaseItems:i}=Qe(),a=[{id:"daily",label:"Daily",icon:Ue,count:n.length,color:"red"},{id:"weekly",label:"Weekly",icon:de,count:s.length,color:"yellow"},{id:"monthly",label:"Monthly",icon:B,count:r.length,color:"green"},{id:"database",label:"Database",icon:y,count:i.length,color:"blue"},{id:"reports",label:"Analytics",icon:Te,count:0,color:"purple"}];return(0,k.jsx)("div",{className:"bg-white rounded-xl shadow-sm mb-6 p-2",children:(0,k.jsx)("div",{className:"flex space-x-2 overflow-x-auto scrollbar-hide pb-2",children:a.map((n=>{const s=n.icon,r=e===n.id;return(0,k.jsxs)("button",{onClick:()=>t(n.id),className:"flex-shrink-0 flex items-center justify-center px-3 py-2 md:px-4 md:py-3 rounded-lg transition-all font-medium min-w-max ".concat(r?"bg-".concat(n.color,"-500 text-white"):"text-gray-600 hover:bg-gray-100"),children:[(0,k.jsx)(s,{className:"w-4 h-4 md:w-5 md:h-5 mr-1 md:mr-2"}),(0,k.jsx)("span",{className:"text-sm md:text-base",children:n.label}),(0,k.jsx)("span",{className:"ml-1 md:ml-2 px-1.5 py-0.5 md:px-2 md:py-1 rounded-full text-xs ".concat(r?"bg-".concat(n.color,"-600"):"bg-gray-300 text-gray-700"),children:n.count})]},n.id)}))})})},pt=()=>{const{currentTab:e}=Qe();return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(ut,{}),(0,k.jsx)(ht,{}),(0,k.jsx)(mt,{}),(()=>{switch(e){case"daily":default:return(0,k.jsx)(at,{});case"weekly":return(0,k.jsx)(ot,{});case"monthly":return(0,k.jsx)(lt,{});case"database":return(0,k.jsx)(tt,{});case"reports":return(0,k.jsx)(dt,{})}})()]})},ft=e=>{let{currentUser:t,connectionStatus:n,inventoryDailyItems:s,inventoryWeeklyItems:r,inventoryMonthlyItems:i,inventoryDatabaseItems:a,inventoryActivityLog:o,setInventoryDailyItems:l,setInventoryWeeklyItems:c,setInventoryMonthlyItems:d,setInventoryDatabaseItems:u,setInventoryActivityLog:h,quickSave:m}=e;return(0,k.jsx)(Ke,{inventoryDailyItems:s,inventoryWeeklyItems:r,inventoryMonthlyItems:i,inventoryDatabaseItems:a,inventoryActivityLog:o,setInventoryDailyItems:l,setInventoryWeeklyItems:c,setInventoryMonthlyItems:d,setInventoryDatabaseItems:u,setInventoryActivityLog:h,quickSave:m,children:(0,k.jsx)(pt,{})})},gt=o("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),yt=o("Tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]),xt=o("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),vt=o("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),bt=o("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),wt=o("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),jt=e=>{switch(e.toLowerCase()){case"mobile":return(0,k.jsx)(gt,{className:"w-3 h-3"});case"tablet":return(0,k.jsx)(yt,{className:"w-3 h-3"});default:return(0,k.jsx)(xt,{className:"w-3 h-3"})}},kt=e=>{const t=Date.now()-e;return t<6e4?"Just now":t<36e5?"".concat(Math.floor(t/6e4),"m ago"):t<864e5?"".concat(Math.floor(t/36e5),"h ago"):"".concat(Math.floor(t/864e5),"d ago")},Nt=t=>{let{syncState:n,activeDevices:s,className:r=""}=t;const[i,a]=(0,e.useState)(!1),[o,l]=(0,e.useState)([]);(0,e.useEffect)((()=>{const e=Date.now()-3e5,t=n.syncEvents.filter((t=>t.timestamp>e));l(t.slice(0,5))}),[n.syncEvents]);const{isConnected:c,connectionQuality:d,deviceCount:u,lastSync:h,isLoading:m,error:p}=n,f=((e,t)=>{if(!t)return"text-red-500";switch(e){case"excellent":return"text-green-500";case"good":return"text-yellow-500";case"poor":return"text-orange-500";default:return"text-gray-500"}})(d,c),g=((e,t)=>{if(!t)return"bg-red-50 border-red-200";switch(e){case"excellent":return"bg-green-50 border-green-200";case"good":return"bg-yellow-50 border-yellow-200";case"poor":return"bg-orange-50 border-orange-200";default:return"bg-gray-50 border-gray-200"}})(d,c);return(0,k.jsxs)("div",{className:"relative ".concat(r),children:[(0,k.jsxs)("button",{onClick:()=>a(!i),className:"flex items-center space-x-2 px-3 py-2 rounded-lg border transition-all duration-200 hover:shadow-md ".concat(g),title:"Professional Sync: ".concat(c?"Connected":"Disconnected"," \u2022 ").concat(u," devices"),children:[c?(0,k.jsx)(vt,{className:"w-4 h-4 ".concat(f)}):(0,k.jsx)(bt,{className:"w-4 h-4 text-red-500"}),m&&(0,k.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-current"}),(0,k.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,k.jsx)(b,{className:"w-3 h-3 text-gray-600"}),(0,k.jsx)("span",{className:"text-xs font-medium text-gray-700",children:u})]}),(0,k.jsxs)("div",{className:"flex items-center space-x-1 ".concat(f),children:["excellent"===d&&(0,k.jsx)(Fe,{className:"w-3 h-3"}),"good"===d&&(0,k.jsx)(Le,{className:"w-3 h-3"}),"poor"===d&&(0,k.jsx)(Le,{className:"w-3 h-3"}),(0,k.jsx)("span",{className:"text-xs font-medium capitalize",children:d})]}),h>0&&(0,k.jsxs)("div",{className:"flex items-center space-x-1 text-gray-500",children:[(0,k.jsx)(P,{className:"w-3 h-3"}),(0,k.jsx)("span",{className:"text-xs",children:kt(h)})]})]}),i&&(0,k.jsx)("div",{className:"absolute top-full left-0 mt-2 w-80 bg-white rounded-lg shadow-lg border z-50",children:(0,k.jsxs)("div",{className:"p-4",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,k.jsx)("h3",{className:"font-semibold text-gray-800",children:"Professional Sync Status"}),(0,k.jsx)("button",{onClick:()=>a(!1),className:"text-gray-400 hover:text-gray-600",children:"\xd7"})]}),p&&(0,k.jsxs)("div",{className:"mb-3 p-2 bg-red-50 border border-red-200 rounded text-red-700 text-sm",children:[(0,k.jsx)(Le,{className:"w-4 h-4 inline mr-1"}),p]}),(0,k.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,k.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,k.jsx)("span",{className:"text-gray-600",children:"Status:"}),(0,k.jsx)("span",{className:"font-medium ".concat(c?"text-green-600":"text-red-600"),children:c?"Connected":"Disconnected"})]}),(0,k.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,k.jsx)("span",{className:"text-gray-600",children:"Quality:"}),(0,k.jsx)("span",{className:"font-medium ".concat(f),children:d.charAt(0).toUpperCase()+d.slice(1)})]}),(0,k.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,k.jsx)("span",{className:"text-gray-600",children:"Active Devices:"}),(0,k.jsx)("span",{className:"font-medium",children:u})]}),h>0&&(0,k.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,k.jsx)("span",{className:"text-gray-600",children:"Last Sync:"}),(0,k.jsx)("span",{className:"font-medium",children:kt(h)})]})]}),s.length>0&&(0,k.jsxs)("div",{className:"mb-4",children:[(0,k.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Active Devices"}),(0,k.jsxs)("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:[s.slice(0,5).map((e=>(0,k.jsxs)("div",{className:"flex items-center justify-between text-xs bg-gray-50 rounded p-2",children:[(0,k.jsxs)("div",{className:"flex items-center space-x-2",children:[jt(e.platform),(0,k.jsx)("span",{className:"font-medium",children:e.name})]}),(0,k.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,k.jsx)("span",{className:"text-gray-500",children:e.user}),(0,k.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(e.isActive?"bg-green-400":"bg-gray-400")})]})]},e.id))),s.length>5&&(0,k.jsxs)("div",{className:"text-xs text-gray-500 text-center",children:["+",s.length-5," more devices"]})]})]}),o.length>0&&(0,k.jsxs)("div",{children:[(0,k.jsxs)("h4",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center",children:[(0,k.jsx)(wt,{className:"w-4 h-4 mr-1"}),"Recent Activity"]}),(0,k.jsx)("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:o.map(((e,t)=>(0,k.jsxs)("div",{className:"text-xs bg-gray-50 rounded p-2",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("span",{className:"font-medium",children:["data_update"===e.type&&(0,k.jsx)(Ie,{className:"w-3 h-3 inline mr-1 text-blue-500"}),"device_join"===e.type&&(0,k.jsx)(b,{className:"w-3 h-3 inline mr-1 text-green-500"}),"conflict_resolution"===e.type&&(0,k.jsx)(Le,{className:"w-3 h-3 inline mr-1 text-yellow-500"}),"error"===e.type&&(0,k.jsx)(Le,{className:"w-3 h-3 inline mr-1 text-red-500"}),e.field&&"".concat(e.field," "),e.type.replace("_"," ")]}),(0,k.jsx)("span",{className:"text-gray-500",children:kt(e.timestamp)})]}),e.description&&(0,k.jsx)("div",{className:"text-gray-600 mt-1 truncate",children:e.description})]},t)))})]})]})})]})};n(277);var _t=n(291);n(578),n(815);class Ct{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unknown User";this.baseUrl=w.Nd.databaseURL,this.deviceId=void 0,this.deviceInfo=void 0,this.syncCallbacks=new Map,this.isConnected=!1,this.eventSource=null,this.syncQueue=new Map,this.lastDataTimestamp=new Map,this.dataChecksums=new Map,this.pendingUpdates=new Set,this.connectionRetryCount=0,this.maxRetries=5,this.retryTimeouts=new Set,this.heartbeatInterval=null,this.connectionQuality="excellent",this.syncBatchTimer=null,this.isSyncing=!1,this.conflictResolutionInProgress=!1,this.onDeviceCountChange=void 0,this.onSyncEvent=void 0,this.onConflictDetected=void 0,this.deviceId=this.generateUniqueDeviceId(),this.deviceInfo=this.createDeviceInfo(e),console.log("\ud83d\ude80 Professional Multi-Device Sync initialized:",{deviceId:this.deviceId.substring(0,12)+"...",user:e,version:"2.0.0"}),window.addEventListener("beforeunload",(()=>{this.gracefulDisconnect()})),document.addEventListener("visibilitychange",(()=>{document.hidden?this.updatePresence(!1):this.updatePresence(!0)})),this.startConnectionQualityMonitoring()}generateUniqueDeviceId(){const e=Date.now().toString(36),t=crypto.getRandomValues(new Uint32Array(2)).reduce(((e,t)=>e+t.toString(36)),""),n="prof_".concat(e,"_").concat(t);return sessionStorage.setItem("professional_device_id",n),n}createDeviceInfo(e){const t=navigator.userAgent,n=navigator.connection;let s="Desktop",r="Unknown";/Mobile|Android|iPhone|iPod/.test(t)?s="Mobile":/iPad|Tablet/.test(t)&&(s="Tablet"),t.includes("Chrome")?r="Chrome":t.includes("Firefox")?r="Firefox":t.includes("Safari")?r="Safari":t.includes("Edge")&&(r="Edge");let i="excellent";if(n){const e=n.downlink||10;e<1?i="poor":e<5&&(i="good")}return{id:this.deviceId,name:"".concat(s," \u2022 ").concat(r),lastSeen:Date.now(),user:e,platform:s.toLowerCase(),isActive:!0,browserInfo:"".concat(r," ").concat(this.getBrowserVersion()," on ").concat(navigator.platform),version:"2.0.0",connectionQuality:i}}getBrowserVersion(){const e=navigator.userAgent.match(/(Chrome|Firefox|Safari|Edge)\/(\d+)/);return e?e[2]:"Unknown"}startConnectionQualityMonitoring(){const e=navigator.connection;e&&e.addEventListener("change",(()=>{const t=e.downlink||10;let n="excellent";t<1?n="poor":t<5&&(n="good"),n!==this.connectionQuality&&(this.connectionQuality=n,this.deviceInfo.connectionQuality=n,this.updatePresence(!0).catch(console.warn),console.log("\ud83d\udcf6 Connection quality changed to: ".concat(n," (").concat(t," Mbps)")))}))}async connect(){if(this.isConnected)console.log("\u2705 Already connected to professional sync");else try{console.log("\ud83d\udd17 Connecting professional multi-device sync..."),this.disconnect(),await this.updatePresenceWithRetry(),this.startEnhancedListening(),this.startAdaptiveHeartbeat(),await this.performDataIntegrityCheck(),this.isConnected=!0,this.connectionRetryCount=0,this.emitSyncEvent({type:"device_join",timestamp:Date.now(),deviceId:this.deviceId,deviceName:this.deviceInfo.name,description:"Professional sync connected (".concat(this.connectionQuality," connection)")}),console.log("\u2705 Professional multi-device sync connected successfully")}catch(e){console.error("\u274c Professional sync connection failed:",e),this.scheduleReconnect()}}async updatePresenceWithRetry(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;for(let n=1;n<=e;n++)try{return void await this.updatePresence(!0)}catch(t){if(console.warn("\u26a0\ufe0f Presence update attempt ".concat(n," failed:"),t),n===e)throw t;await new Promise((e=>setTimeout(e,1e3*n)))}}startEnhancedListening(){this.eventSource&&this.eventSource.close(),console.log("\ud83d\udc42 Starting enhanced EventSource listener...");const e="".concat(this.baseUrl,"/.json");this.eventSource=new EventSource(e),this.eventSource.onopen=()=>{console.log("\ud83d\udce1 EventSource connection opened"),this.connectionQuality="excellent"},this.eventSource.onmessage=e=>{try{const t=JSON.parse(e.data);if(null===t)return;this.processEnhancedDataUpdate(t)}catch(t){console.warn("\u26a0\ufe0f Error processing enhanced data update:",t),this.handleDataError(t)}},this.eventSource.onerror=e=>{console.warn("\u26a0\ufe0f Enhanced EventSource error:",e),this.connectionQuality="poor",this.handleConnectionError()}}processEnhancedDataUpdate(e){const t=["employees","tasks","dailyData","completedTasks","taskAssignments","customRoles","prepItems","scheduledPreps","prepSelections","storeItems","inventoryDailyItems","inventoryWeeklyItems","inventoryMonthlyItems","inventoryDatabaseItems","inventoryActivityLog"],n=Date.now();for(const s of t)if(e[s]&&this.syncCallbacks.has(s)){const t=this.calculateChecksum(e[s]),r=this.dataChecksums.get("".concat(s,"_pending"));if(r&&t===r){console.log("\u23ed\ufe0f Skipping own update for ".concat(s," (checksum match)")),this.dataChecksums.delete("".concat(s,"_pending"));continue}const i=this.syncCallbacks.get(s);if(n-(this.lastDataTimestamp.get(s)||0)>1e3){this.lastDataTimestamp.set(s,n);if(t!==this.dataChecksums.get(s)){if(this.conflictResolutionInProgress)return void console.log("\u23f3 Conflict resolution in progress for ".concat(s,", queuing update"));this.dataChecksums.set(s,t);let r=e[s];"completedTasks"===s&&Array.isArray(r)&&(r=new Set(r)),i(r),this.emitSyncEvent({type:"data_update",timestamp:n,deviceId:"remote",deviceName:"Remote Device",field:s,checksum:t,description:"".concat(s," updated professionally")})}}}}calculateChecksum(e){const t=JSON.stringify(e,Object.keys(e).sort());let n=0;for(let s=0;s<t.length;s++){n=(n<<5)-n+t.charCodeAt(s),n&=n}return n.toString(36)}startAdaptiveHeartbeat(){const e={excellent:6e4,good:45e3,poor:3e4}[this.connectionQuality];this.heartbeatInterval&&clearInterval(this.heartbeatInterval),this.heartbeatInterval=setInterval((()=>{this.isConnected&&this.updatePresence(!0).catch((()=>{this.connectionQuality="poor",this.startAdaptiveHeartbeat()}))}),e)}async performDataIntegrityCheck(){try{console.log("\ud83d\udd0d Performing initial data integrity check...");const e=await fetch("".concat(this.baseUrl,"/.json"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error("Integrity check failed: ".concat(e.status));const t=await e.json();t&&Object.keys(t).forEach((e=>{if(t[e]){const n=this.calculateChecksum(t[e]);this.dataChecksums.set(e,n)}})),console.log("\u2705 Data integrity check completed")}catch(e){console.warn("\u26a0\ufe0f Data integrity check failed:",e)}}async syncData(e,t){const n={field:e,data:t,timestamp:Date.now(),checksum:this.calculateChecksum(t),retry:0};this.dataChecksums.set("".concat(e,"_pending"),n.checksum),this.syncQueue.set(e,n),this.syncBatchTimer&&clearTimeout(this.syncBatchTimer),this.syncBatchTimer=setTimeout((()=>{this.processSyncQueueEnhanced()}),500)}async processSyncQueueEnhanced(){if(this.isSyncing||0===this.syncQueue.size)return;this.isSyncing=!0;const e=new Map(this.syncQueue);this.syncQueue.clear();try{console.log("\ud83d\udce4 Processing enhanced sync queue:",Array.from(e.keys()));const t=Array.from(e.entries()).map((async e=>{let[t,n]=e;try{await this.checkForConflicts(t,n);let e=n.data instanceof Set?Array.from(n.data):n.data;const s=await fetch("".concat(this.baseUrl,"/").concat(t,".json"),{method:"PUT",headers:{"Content-Type":"application/json","X-Device-ID":this.deviceId,"X-Checksum":n.checksum},body:JSON.stringify(e)});if(!s.ok)throw new Error("Sync failed for ".concat(t,": ").concat(s.status," ").concat(s.statusText));this.dataChecksums.set(t,n.checksum),console.log("\u2705 Enhanced sync completed for ".concat(t)),this.emitSyncEvent({type:"data_update",timestamp:Date.now(),deviceId:this.deviceId,deviceName:this.deviceInfo.name,field:t,checksum:n.checksum,description:"".concat(t," synced professionally")})}catch(s){console.warn("\u26a0\ufe0f Enhanced sync failed for ".concat(t,":"),s),n.retry++,n.retry<=3?setTimeout((()=>{this.syncQueue.set(t,n),this.processSyncQueueEnhanced()}),1e3*Math.pow(2,n.retry)):(this.dataChecksums.delete("".concat(t,"_pending")),this.emitSyncEvent({type:"error",timestamp:Date.now(),deviceId:this.deviceId,deviceName:this.deviceInfo.name,field:t,description:"Failed to sync ".concat(t," after ").concat(n.retry," attempts")}))}}));await Promise.allSettled(t)}catch(t){console.error("\u274c Enhanced sync queue processing failed:",t)}finally{this.isSyncing=!1,this.syncQueue.size>0&&setTimeout((()=>this.processSyncQueueEnhanced()),1e3)}}async checkForConflicts(e,t){try{const n=await fetch("".concat(this.baseUrl,"/").concat(e,".json"));if(!n.ok)return;const s=await n.json();if(!s)return;const r=this.calculateChecksum(s),i=this.dataChecksums.get(e);if(i&&r!==i&&r!==t.checksum&&(console.warn("\u26a0\ufe0f Conflict detected for ".concat(e)),this.onConflictDetected)){this.conflictResolutionInProgress=!0;try{const n=this.onConflictDetected(e,t.data,s);t.data=n,t.checksum=this.calculateChecksum(n),this.emitSyncEvent({type:"conflict_resolution",timestamp:Date.now(),deviceId:this.deviceId,deviceName:this.deviceInfo.name,field:e,description:"Conflict resolved for ".concat(e)})}finally{this.conflictResolutionInProgress=!1}}}catch(n){console.warn("\u26a0\ufe0f Conflict check failed for ".concat(e,":"),n)}}async updatePresence(e){this.deviceInfo=(0,s.A)((0,s.A)({},this.deviceInfo),{},{lastSeen:Date.now(),isActive:e,connectionQuality:this.connectionQuality});try{const e=await fetch("".concat(this.baseUrl,"/presence/").concat(this.deviceId,".json"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.deviceInfo)});if(!e.ok)throw new Error("Presence update failed: ".concat(e.status));this.getActiveDevices().then((e=>{this.onDeviceCountChange&&this.onDeviceCountChange(e.length,e)})).catch(console.warn)}catch(t){throw console.warn("\u26a0\ufe0f Enhanced presence update failed:",t),t}}handleConnectionError(){console.log("\ud83d\udd04 Handling connection error..."),this.connectionQuality="poor",this.stopListening(),this.connectionRetryCount<this.maxRetries?this.scheduleReconnect():(console.warn("\u26a0\ufe0f Max reconnection attempts reached, switching to offline mode"),this.isConnected=!1,this.emitSyncEvent({type:"error",timestamp:Date.now(),deviceId:this.deviceId,deviceName:this.deviceInfo.name,description:"Connection lost, offline mode activated"}))}handleDataError(e){console.warn("\u26a0\ufe0f Data processing error:",e),this.emitSyncEvent({type:"error",timestamp:Date.now(),deviceId:this.deviceId,deviceName:this.deviceInfo.name,description:"Data processing error: ".concat(e.message)})}scheduleReconnect(){this.connectionRetryCount++;const e=Math.min(1e3*Math.pow(2,this.connectionRetryCount),3e4);console.log("\ud83d\udd04 Professional reconnect scheduled in ".concat(e/1e3,"s (attempt ").concat(this.connectionRetryCount,"/").concat(this.maxRetries,")"));const t=setTimeout((()=>{this.retryTimeouts.delete(t),this.isConnected||this.connect().catch((()=>{this.connectionRetryCount<this.maxRetries&&this.scheduleReconnect()}))}),e);this.retryTimeouts.add(t)}stopListening(){this.eventSource&&(console.log("\ud83d\udd07 Stopping enhanced listener"),this.eventSource.close(),this.eventSource=null)}gracefulDisconnect(){console.log("\ud83d\udc4b Graceful disconnect initiated...");try{this.isConnected=!1,this.stopListening(),this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null),this.syncBatchTimer&&(clearTimeout(this.syncBatchTimer),this.syncBatchTimer=null),this.retryTimeouts.forEach((e=>clearTimeout(e))),this.retryTimeouts.clear(),fetch("".concat(this.baseUrl,"/presence/").concat(this.deviceId,".json"),{method:"DELETE",keepalive:!0}).catch((()=>{})),console.log("\u2705 Graceful disconnect completed")}catch(e){console.error("\u274c Graceful disconnect error:",e)}}async disconnect(){this.gracefulDisconnect()}async getActiveDevices(){try{const e=await fetch("".concat(this.baseUrl,"/presence.json")),t=await e.json();if(!t)return[];const n=Object.values(t),s=Date.now();return n.filter((e=>e.isActive&&s-e.lastSeen<18e4&&e.version)).slice(0,20)}catch(e){return console.warn("\u26a0\ufe0f Failed to get enhanced device list:",e),[]}}async refreshDataFromAllDevices(){try{console.log("\ud83d\udd04 Enhanced data refresh...");const e=new AbortController,t=setTimeout((()=>e.abort()),1e4),n=["employees","tasks","dailyData","completedTasks","taskAssignments","customRoles","prepItems","scheduledPreps","prepSelections","storeItems","inventoryDailyItems","inventoryWeeklyItems","inventoryMonthlyItems","inventoryDatabaseItems","inventoryActivityLog"],s=n.map((t=>fetch("".concat(this.baseUrl,"/").concat(t,".json"),{signal:e.signal,headers:{"X-Device-ID":this.deviceId}}).then((e=>e.json())).then((e=>{if(e){const n=this.calculateChecksum(e);this.dataChecksums.set(t,n)}return{[t]:e}})))),r=await Promise.allSettled(s);clearTimeout(t);const i={};let a=0;return r.forEach(((e,t)=>{"fulfilled"===e.status?(Object.assign(i,e.value),a++):console.warn("\u26a0\ufe0f Enhanced fetch failed for ".concat(n[t],":"),e.reason)})),console.log("\u2705 Enhanced refresh completed (".concat(a,"/").concat(n.length," fields)")),this.emitSyncEvent({type:"full_sync",timestamp:Date.now(),deviceId:this.deviceId,deviceName:this.deviceInfo.name,description:"Full refresh completed (".concat(a,"/").concat(n.length," fields)")}),i}catch(e){throw console.error("\u274c Enhanced refresh failed:",e),e}}onFieldChange(e,t){this.syncCallbacks.set(e,t)}offFieldChange(e){this.syncCallbacks.delete(e)}onDeviceCountChanged(e){this.onDeviceCountChange=e}onSyncEventReceived(e){this.onSyncEvent=e}onConflictResolution(e){this.onConflictDetected=e}emitSyncEvent(e){this.onSyncEvent&&this.onSyncEvent(e)}getSyncStats(){return{isConnected:this.isConnected,deviceCount:0,lastSync:Math.max(...Array.from(this.lastDataTimestamp.values()),0),isListening:null!==this.eventSource,queueSize:this.syncQueue.size,connectionQuality:this.connectionQuality,conflictCount:0,version:"2.0.0"}}getDeviceInfo(){return(0,s.A)((0,s.A)({},this.deviceInfo),{},{lastSeen:Date.now()})}updateCurrentUser(e){this.deviceInfo.user=e,this.updatePresence(!0).catch(console.warn)}async checkDataIntegrity(){const e=new Map;try{const t=await this.refreshDataFromAllDevices();Object.keys(t).forEach((n=>{const s=t[n];if(s){const t=this.calculateChecksum(s),r=this.dataChecksums.get(n);e.set(n,t===r)}}))}catch(t){console.error("\u274c Data integrity check failed:",t)}return e}}class St{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unknown User";this.syncService=void 0,this.syncState=void 0,this.conflictStrategy=void 0,this.syncCallbacks=new Map,this.eventHistory=[],this.maxEventHistory=100,this.stateChangeCallbacks=[],this.syncService=new Ct(e),this.syncState={isConnected:!1,deviceCount:0,lastSync:0,connectionQuality:"excellent",syncEvents:[],conflicts:0},this.conflictStrategy={employees:"merge",tasks:"merge",inventory:"newest",default:"newest"},this.setupEventHandlers(),this.setupConflictResolution(),console.log("\ud83c\udfaf Enhanced Sync Integration initialized")}setupEventHandlers(){this.syncService.onDeviceCountChanged(((e,t)=>{this.syncState.deviceCount=e,console.log("\ud83d\udcf1 Active devices: ".concat(e),t.map((e=>e.name))),this.emitSyncStateUpdate()})),this.syncService.onSyncEventReceived((e=>{this.handleSyncEvent(e)}))}setupConflictResolution(){this.syncService.onConflictResolution(((e,t,n)=>this.resolveConflict(e,t,n)))}handleSyncEvent(e){switch(this.eventHistory.unshift(e),this.eventHistory.length>this.maxEventHistory&&(this.eventHistory=this.eventHistory.slice(0,this.maxEventHistory)),this.syncState.lastSync=e.timestamp,this.syncState.syncEvents=this.eventHistory.slice(0,10),e.type){case"device_join":console.log("\ud83d\udc4b Device joined: ".concat(e.deviceName));break;case"device_leave":console.log("\ud83d\udc4b Device left: ".concat(e.deviceName));break;case"conflict_resolution":this.syncState.conflicts++,console.log("\u2696\ufe0f Conflict resolved for ".concat(e.field));break;case"error":console.warn("\u274c Sync error: ".concat(e.description))}this.emitSyncStateUpdate()}resolveConflict(e,t,n){const s=this.getConflictStrategy(e);switch(console.log("\u2696\ufe0f Resolving conflict for ".concat(e," using strategy: ").concat(s)),s){case"newest":return this.resolveByNewest(t,n);case"merge":return this.resolveByMerge(e,t,n);case"manual":return this.resolveManually(e,t,n);default:return n}}getConflictStrategy(e){return e.includes("employee")?this.conflictStrategy.employees:e.includes("task")?this.conflictStrategy.tasks:e.includes("inventory")?this.conflictStrategy.inventory:this.conflictStrategy.default}resolveByNewest(e,t){return this.getDataTimestamp(e)>this.getDataTimestamp(t)?e:t}resolveByMerge(e,t,n){try{switch(e){case"employees":return this.mergeEmployees(t,n);case"tasks":return this.mergeTasks(t,n);case"completedTasks":return this.mergeCompletedTasks(t,n);case"taskAssignments":return this.mergeTaskAssignments(t,n);default:return Array.isArray(t)&&Array.isArray(n)?this.mergeArraysByID(t,n):"object"===typeof t&&"object"===typeof n?(0,s.A)((0,s.A)({},n),t):n}}catch(r){return console.warn("\u26a0\ufe0f Merge failed for ".concat(e,", using remote data:"),r),n}}mergeEmployees(e,t){const n=[...t];return e.forEach((e=>{const t=n.findIndex((t=>t.id===e.id));if(t>=0){const s=n[t];e.points>=s.points&&(n[t]=e)}else n.push(e)})),n}mergeTasks(e,t){const n=[...t];return e.forEach((e=>{const t=n.findIndex((t=>t.id===e.id));t>=0?n[t]=(0,s.A)((0,s.A)({},n[t]),e):n.push(e)})),n}mergeCompletedTasks(e,t){const n=Array.isArray(e)?e:Array.from(e),s=Array.isArray(t)?t:Array.from(t);return new Set([...n,...s])}mergeTaskAssignments(e,t){return(0,s.A)((0,s.A)({},t),e)}mergeArraysByID(e,t){const n=[...t];return e.forEach((e=>{if(e.id){const t=n.findIndex((t=>t.id===e.id));t>=0?n[t]=e:n.push(e)}})),n}resolveManually(e,t,n){return console.warn("\ud83d\udd0d Manual conflict resolution needed for ".concat(e)),n}getDataTimestamp(e){if(e&&"object"===typeof e){if(e.lastModified)return e.lastModified;if(e.timestamp)return e.timestamp;if(e.updatedAt)return e.updatedAt}return Date.now()}async connect(){try{await this.syncService.connect(),this.syncState.isConnected=!0,this.emitSyncStateUpdate()}catch(e){throw console.error("\u274c Enhanced sync connection failed:",e),this.syncState.isConnected=!1,e}}async disconnect(){await this.syncService.disconnect(),this.syncState.isConnected=!1,this.emitSyncStateUpdate()}subscribeToField(e,t){this.syncCallbacks.set(e,t),this.syncService.onFieldChange(e,t)}unsubscribeFromField(e){this.syncCallbacks.delete(e),this.syncService.offFieldChange(e)}async syncField(e,t){try{await this.syncService.syncData(e,t)}catch(n){throw console.error("\u274c Failed to sync ".concat(e,":"),n),n}}async syncMultipleFields(e){const t=Object.entries(e).map((e=>{let[t,n]=e;return this.syncField(t,n)}));await Promise.allSettled(t)}async refreshAllData(){try{return await this.syncService.refreshDataFromAllDevices()}catch(e){throw console.error("\u274c Failed to refresh data:",e),e}}async getActiveDevices(){return await this.syncService.getActiveDevices()}updateUser(e){this.syncService.updateCurrentUser(e)}getSyncState(){const e=this.syncService.getSyncStats();return(0,s.A)((0,s.A)({},this.syncState),{},{isConnected:e.isConnected,lastSync:e.lastSync,connectionQuality:e.connectionQuality})}async checkDataIntegrity(){return await this.syncService.checkDataIntegrity()}getEventHistory(){return[...this.eventHistory]}clearEventHistory(){this.eventHistory=[],this.syncState.syncEvents=[],this.emitSyncStateUpdate()}setConflictStrategy(e){this.conflictStrategy=(0,s.A)((0,s.A)({},this.conflictStrategy),e),console.log("\u2696\ufe0f Conflict resolution strategies updated:",this.conflictStrategy)}onSyncStateChange(e){this.stateChangeCallbacks.push(e)}emitSyncStateUpdate(){const e=this.getSyncState();this.stateChangeCallbacks.forEach((t=>{try{t(e)}catch(n){console.warn("\u26a0\ufe0f Sync state callback error:",n)}}))}getPerformanceMetrics(){const e=this.eventHistory.filter((e=>"data_update"===e.type)),t=this.eventHistory.filter((e=>"conflict_resolution"===e.type)),n=this.eventHistory.filter((e=>"error"===e.type));return{avgSyncTime:0,syncSuccessRate:e.length/(e.length+n.length)||1,conflictRate:t.length/e.length||0,eventCount:this.eventHistory.length}}async recoverFromError(){console.log("\ud83d\udd04 Attempting error recovery...");try{await this.disconnect(),await new Promise((e=>setTimeout(e,2e3))),await this.connect(),await this.refreshAllData(),console.log("\u2705 Error recovery completed")}catch(e){throw console.error("\u274c Error recovery failed:",e),e}}}const It=()=>{const t=e.useRef(null);t.current||(t.current=new(n(277).f));const{currentUser:r,isAdmin:i,setIsAdmin:a,switchUser:o,logoutAdmin:b}=(()=>{const[t,n]=(0,e.useState)({id:1,name:"Luka"}),[s,r]=(0,e.useState)(!1),i=(0,e.useCallback)((e=>{n({id:e.id,name:e.name}),localStorage.setItem("currentUserName",e.name)}),[]),a=(0,e.useCallback)((()=>{r(!1)}),[]);return(0,e.useEffect)((()=>{t.name&&localStorage.setItem("currentUserName",t.name)}),[t.name]),{currentUser:t,isAdmin:s,setCurrentUser:n,setIsAdmin:r,switchUser:i,logoutAdmin:a}})(),{employees:_,tasks:C,dailyData:S,completedTasks:I,taskAssignments:E,customRoles:T,prepItems:A,scheduledPreps:P,prepSelections:R,storeItems:M,inventoryDailyItems:L,inventoryWeeklyItems:O,inventoryMonthlyItems:F,inventoryDatabaseItems:z,inventoryActivityLog:q,setEmployees:W,setTasks:B,setDailyData:H,setCompletedTasks:V,setTaskAssignments:Q,setCustomRoles:K,setPrepItems:Y,setScheduledPreps:$,setPrepSelections:G,setStoreItems:J,setInventoryDailyItems:X,setInventoryWeeklyItems:Z,setInventoryMonthlyItems:ee,setInventoryDatabaseItems:te,setInventoryActivityLog:ne,quickSave:se,syncState:re,activeDevices:ie}=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unknown User";const n=(0,e.useRef)(null),r=(0,e.useMemo)((()=>(n.current||(n.current=new St(t)),n.current)),[t]),[i,a]=(0,e.useState)([]),[o,l]=(0,e.useState)([]),[c,d]=(0,e.useState)({}),[u,h]=(0,e.useState)(new Set),[m,p]=(0,e.useState)({}),[f,g]=(0,e.useState)([]),[y,x]=(0,e.useState)([]),[v,b]=(0,e.useState)([]),[w,j]=(0,e.useState)({}),[k,N]=(0,e.useState)([]),[_,C]=(0,e.useState)([]),[S,I]=(0,e.useState)([]),[E,T]=(0,e.useState)([]),[D,A]=(0,e.useState)([]),[P,R]=(0,e.useState)([]),[M,L]=(0,e.useState)({isConnected:!1,connectionQuality:"excellent",deviceCount:0,lastSync:0,syncEvents:[],isLoading:!0,error:null}),[O,F]=(0,e.useState)([]),U=(0,e.useRef)(!1),z=(0,e.useRef)({}),q=(0,e.useCallback)(((e,t,n)=>s=>{const i=n?n(s):s;if(t(i),U.current){const t=Date.now();t-(z.current[e]||0)>500&&(z.current[e]=t,r.syncField(e,i).catch((t=>{console.warn("\u26a0\ufe0f Auto-sync failed for ".concat(e,":"),t)})))}}),[r]),W=(0,e.useMemo)((()=>q("employees",a)),[q]),B=(0,e.useMemo)((()=>q("tasks",l)),[q]),H=(0,e.useMemo)((()=>q("dailyData",d)),[q]),V=(0,e.useMemo)((()=>q("completedTasks",h,(e=>e instanceof Set?e:new Set(e)))),[q]),Q=(0,e.useMemo)((()=>q("taskAssignments",p)),[q]),K=(0,e.useMemo)((()=>q("customRoles",g)),[q]),Y=(0,e.useMemo)((()=>q("prepItems",x)),[q]),$=(0,e.useMemo)((()=>q("scheduledPreps",b)),[q]),G=(0,e.useMemo)((()=>q("prepSelections",j)),[q]),J=(0,e.useMemo)((()=>q("storeItems",N)),[q]),X=(0,e.useMemo)((()=>q("inventoryDailyItems",C)),[q]),Z=(0,e.useMemo)((()=>q("inventoryWeeklyItems",I)),[q]),ee=(0,e.useMemo)((()=>q("inventoryMonthlyItems",T)),[q]),te=(0,e.useMemo)((()=>q("inventoryDatabaseItems",A)),[q]),ne=(0,e.useMemo)((()=>q("inventoryActivityLog",R)),[q]),se=(0,e.useCallback)((async(e,t)=>{try{return await r.syncField(e,t),!0}catch(n){return console.error("\u274c Quick save failed for ".concat(e,":"),n),!1}}),[r]),re=(0,e.useCallback)((async e=>{try{return await r.syncMultipleFields(e),!0}catch(t){return console.error("\u274c Bulk save failed:",t),!1}}),[r]),ie=(0,e.useCallback)((async()=>{try{L((e=>(0,s.A)((0,s.A)({},e),{},{isLoading:!0,error:null})));const e=await r.refreshAllData();e.employees&&a(e.employees),e.tasks&&l(e.tasks),e.dailyData&&d(e.dailyData),e.completedTasks&&h(new Set(e.completedTasks)),e.taskAssignments&&p(e.taskAssignments),e.customRoles&&g(e.customRoles),e.prepItems&&x(e.prepItems),e.scheduledPreps&&b(e.scheduledPreps),e.prepSelections&&j(e.prepSelections),e.storeItems&&N(e.storeItems),e.inventoryDailyItems&&C(e.inventoryDailyItems),e.inventoryWeeklyItems&&I(e.inventoryWeeklyItems),e.inventoryMonthlyItems&&T(e.inventoryMonthlyItems),e.inventoryDatabaseItems&&A(e.inventoryDatabaseItems),e.inventoryActivityLog&&R(e.inventoryActivityLog),L((e=>(0,s.A)((0,s.A)({},e),{},{isLoading:!1}))),console.log("\u2705 Data refresh completed")}catch(e){console.error("\u274c Data refresh failed:",e),L((t=>(0,s.A)((0,s.A)({},t),{},{isLoading:!1,error:e instanceof Error?e.message:"Unknown error"})))}}),[r]),ae=(0,e.useCallback)((async()=>{try{L((e=>(0,s.A)((0,s.A)({},e),{},{isLoading:!0,error:null}))),await r.connect(),L((e=>(0,s.A)((0,s.A)({},e),{},{isConnected:!0,isLoading:!1})))}catch(e){console.error("\u274c Connection failed:",e),L((t=>(0,s.A)((0,s.A)({},t),{},{isConnected:!1,isLoading:!1,error:e instanceof Error?e.message:"Connection failed"})))}}),[r]),oe=(0,e.useCallback)((async()=>{try{await r.disconnect(),L((e=>(0,s.A)((0,s.A)({},e),{},{isConnected:!1})))}catch(e){console.error("\u274c Disconnect failed:",e)}}),[r]),le=(0,e.useCallback)((async()=>await r.checkDataIntegrity()),[r]),ce=(0,e.useCallback)((()=>r.getPerformanceMetrics()),[r]);return(0,e.useEffect)((()=>{const e=[{field:"employees",setter:a},{field:"tasks",setter:l},{field:"dailyData",setter:d},{field:"completedTasks",setter:e=>h(new Set(e))},{field:"taskAssignments",setter:p},{field:"customRoles",setter:g},{field:"prepItems",setter:x},{field:"scheduledPreps",setter:b},{field:"prepSelections",setter:j},{field:"storeItems",setter:N},{field:"inventoryDailyItems",setter:C},{field:"inventoryWeeklyItems",setter:I},{field:"inventoryMonthlyItems",setter:T},{field:"inventoryDatabaseItems",setter:A},{field:"inventoryActivityLog",setter:R}];return e.forEach((e=>{let{field:t,setter:n}=e;r.subscribeToField(t,(e=>{null!==e&&void 0!==e&&n(e)}))})),()=>{e.forEach((e=>{let{field:t}=e;r.unsubscribeFromField(t)}))}}),[r]),(0,e.useEffect)((()=>{r.onSyncStateChange((e=>{L((t=>(0,s.A)((0,s.A)({},t),{},{isConnected:e.isConnected,connectionQuality:e.connectionQuality,deviceCount:e.deviceCount,lastSync:e.lastSync,syncEvents:e.syncEvents})))}));const e=async()=>{try{const e=await r.getActiveDevices();F(e)}catch(e){console.warn("\u26a0\ufe0f Failed to update device list:",e)}};e();const t=setInterval(e,3e4);return()=>{clearInterval(t)}}),[r]),(0,e.useEffect)((()=>{let e=!0;return(async()=>{e&&(await ae(),await ie(),U.current=!0)})(),()=>{e=!1,U.current&&oe().catch(console.warn)}}),[ae,oe,ie]),(0,e.useEffect)((()=>()=>{n.current&&n.current.disconnect().catch(console.warn)}),[]),{employees:i,tasks:o,dailyData:c,completedTasks:u,taskAssignments:m,customRoles:f,prepItems:y,scheduledPreps:v,prepSelections:w,storeItems:k,inventoryDailyItems:_,inventoryWeeklyItems:S,inventoryMonthlyItems:E,inventoryDatabaseItems:D,inventoryActivityLog:P,setEmployees:W,setTasks:B,setDailyData:H,setCompletedTasks:V,setTaskAssignments:Q,setCustomRoles:K,setPrepItems:Y,setScheduledPreps:$,setPrepSelections:G,setStoreItems:J,setInventoryDailyItems:X,setInventoryWeeklyItems:Z,setInventoryMonthlyItems:ee,setInventoryDatabaseItems:te,setInventoryActivityLog:ne,quickSave:se,bulkSave:re,refreshData:ie,syncState:M,activeDevices:O,connect:ae,disconnect:oe,checkIntegrity:le,getMetrics:ce}}((null===r||void 0===r?void 0:r.name)||"Unknown User"),ae=re.isLoading,oe=re.isConnected?"connected":re.error?"error":"connecting",[le,de]=(0,e.useState)(3),[ue,me]=(0,e.useState)("mood"),[pe,fe]=(0,e.useState)(!1),[ge,ye]=(0,e.useState)(!1),[xe,ve]=(0,e.useState)(""),[be,we]=(0,e.useState)((0,j.po)(new Date)),[je,ke]=(0,e.useState)((0,_t.h3)()),[Ne,_e]=(0,e.useState)(!1);(0,e.useEffect)((()=>{const e=()=>{const e=localStorage.getItem("lastDailyResetNotification"),t=localStorage.getItem("lastTaskResetDate"),n=(0,j.po)(new Date);console.log("\ud83d\udd0d Checking notification:",{lastNotificationDate:e,lastResetDate:t,today:n,completedTasksSize:I.size,taskAssignmentsCount:Object.keys(E).length,shouldShow:t===n&&e!==n&&0===I.size&&0===Object.keys(E).length}),t===n&&e!==n&&0===I.size&&0===Object.keys(E).length&&(console.log("\ud83d\udce2 Showing daily reset notification"),_e(!0),localStorage.setItem("lastDailyResetNotification",n),setTimeout((()=>{_e(!1)}),8e3))};if(!ae&&"connected"===oe){const t=setTimeout(e,2e3);return()=>clearTimeout(t)}}),[I.size,E,ae,oe]),(0,e.useEffect)((()=>{const e=_.find((e=>e.id===r.id));e&&de(e.mood)}),[r.id,_]),(0,e.useEffect)((()=>{M&&M.length>0&&ke(M)}),[M]);const Ce=e=>{W("function"===typeof e?e(_):e)},Se=e=>{H("function"===typeof e?e(S):e)},Ie=V,Ee=e=>{Y("function"===typeof e?e(A):e)},Te=(0,e.useCallback)((()=>{if(!i)return;console.log("\ud83e\uddea MANUAL RESET: Triggered by admin"),console.log("\ud83d\udccb Before manual reset:",{completedTasksCount:I.size,taskAssignmentsCount:Object.keys(E).length,taskAssignments:E});const e=(0,j.po)(new Date);localStorage.removeItem("resetInProgress"),localStorage.removeItem("lastDailyResetNotification"),localStorage.removeItem("resetCheckedToday"),V(new Set),Q({}),localStorage.setItem("lastTaskResetDate",e),console.log("\u2705 MANUAL RESET: Cleared both completed tasks AND task assignments"),_e(!0),setTimeout((()=>{_e(!1)}),8e3),setTimeout((()=>{Promise.all([se("completedTasks",[]),se("taskAssignments",{})]).then((()=>{console.log("\u2705 MANUAL RESET: Both completedTasks=[] and taskAssignments={} saved to Firebase")})).catch((e=>{console.error("\u274c MANUAL RESET: Failed to save to Firebase:",e)}))}),500)}),[i,V,Q,se,I,E]),De=(0,e.useCallback)((()=>{((e,t,n,s)=>{e===w.qw?(t(!0),n("admin"),s("")):alert("Invalid password!")})(xe,a,me,ve),ye(!1)}),[xe,a,me,ve]),Ae=_.find((e=>e.id===r.id));return(0,e.useEffect)((()=>{if(!ae&&"connected"===oe&&_.length>0){const e=setTimeout((()=>{(async()=>{const e=(0,j.po)(new Date),n=await t.current.getLastTaskResetDate();if(console.log("\ud83d\udd0d [CROSS-DEVICE] Checking for automatic daily reset:",{today:e,lastResetDate:n,needsReset:n!==e,completedTasksCount:I.size,taskAssignmentsCount:Object.keys(E).length}),n!==e&&(I.size>0||Object.keys(E).length>0)){console.log("\ud83c\udf05 [CROSS-DEVICE] NEW DAY DETECTED: Attempting synchronized daily reset");const n="daily_reset_lock_".concat(e),u=localStorage.getItem("deviceId")||"device-".concat(Date.now()),h=Date.now()+3e4;try{var s,r,i,a;if(!0===await(null===(s=(r=t.current).acquireResetLock)||void 0===s?void 0:s.call(r,n,u,h)))console.log("\ud83d\udd12 [CROSS-DEVICE] Reset lock acquired, performing reset"),(await Promise.all([se("completedTasks",[]),se("taskAssignments",{})])).every((e=>!0===e))?(await t.current.setLastTaskResetDate(e),console.log("\u2705 [CROSS-DEVICE] Daily reset completed successfully"),_e(!0),setTimeout((()=>{_e(!1)}),8e3)):console.error("\u274c [CROSS-DEVICE] AUTOMATIC RESET: Failed to save to Firebase"),await(null===(i=(a=t.current).releaseResetLock)||void 0===i?void 0:i.call(a,n,u)),console.log("\ud83d\udd13 [CROSS-DEVICE] Reset lock released");else console.log("\u23f3 [CROSS-DEVICE] Another device is handling the daily reset, skipping")}catch(c){console.error("\u274c [CROSS-DEVICE] AUTOMATIC RESET: Error during reset:",c);try{var o,l;await(null===(o=(l=t.current).releaseResetLock)||void 0===o?void 0:o.call(l,n,u))}catch(d){console.error("\u274c [CROSS-DEVICE] Failed to release lock after error:",d)}}}})()}),2e3);return()=>clearTimeout(e)}}),[ae,oe,_.length,I.size,E,se]),(0,e.useEffect)((()=>{const e=I.size,n=Object.keys(E).length,s=async()=>{if(!document.hidden&&!ae&&"connected"===oe){const s=(0,j.po)(new Date),r=await t.current.getLastTaskResetDate();console.log("\ud83d\udc41\ufe0f [CROSS-DEVICE] App became visible, checking for daily reset:",{today:s,lastResetDate:r,needsReset:r!==s}),r!==s&&(e>0||n>0)&&setTimeout((async()=>{try{(await Promise.all([se("completedTasks",[]),se("taskAssignments",{})])).every((e=>!0===e))&&(await t.current.setLastTaskResetDate(s),_e(!0),setTimeout((()=>_e(!1)),8e3))}catch(e){console.error("\u274c [CROSS-DEVICE] VISIBILITY RESET: Failed:",e)}}),1e3)}};return document.addEventListener("visibilitychange",s),()=>document.removeEventListener("visibilitychange",s)}),[ae,oe,E,I.size,se]),(0,e.useEffect)((()=>{const e=I.size,t=Object.keys(E).length;ae||"connected"!==oe||console.log("\ud83d\udcca DAILY RESET DEBUG:",{currentDate:(0,j.po)(new Date),lastResetDate:localStorage.getItem("lastTaskResetDate"),completedTasksCount:e,taskAssignmentsCount:t,isLoading:ae,connectionStatus:oe,employeeCount:_.length})}),[E,I.size,ae,oe,_.length]),(0,e.useEffect)((()=>(window.triggerDailyReset=async()=>{console.log("\ud83e\uddea MANUAL TRIGGER: Forcing daily reset from console");const e=(0,j.po)(new Date);localStorage.setItem("lastTaskResetDate",e);try{const e=await Promise.all([se("completedTasks",[]),se("taskAssignments",{})]);return console.log("\u2705 Manual trigger results:",e),e}catch(t){return console.error("\u274c Manual trigger failed:",t),!1}},()=>{delete window.triggerDailyReset})),[se]),(0,k.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[(0,k.jsxs)("div",{className:"bg-white shadow-sm border-b",children:[(0,k.jsxs)("div",{className:"px-4 py-3 flex justify-between items-center",children:[(0,k.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("h1",{className:"text-xl font-bold text-gray-800",children:"WorkVibe"}),(0,k.jsxs)("button",{onClick:()=>fe(!pe),className:"flex items-center text-sm text-gray-600 hover:text-gray-800 mt-1",children:["Hello, ",r.name,"!",(0,k.jsxs)("span",{className:"ml-2 bg-purple-100 text-purple-700 px-2 py-0.5 rounded-full text-xs font-medium",children:[(null===Ae||void 0===Ae?void 0:Ae.points)||0," pts"]}),(0,k.jsx)(l,{className:"w-4 h-4 ml-1"})]})]}),i&&(0,k.jsx)("div",{className:"px-2 py-1 bg-red-100 text-red-700 text-xs rounded-full",children:"Admin Mode"})]}),(0,k.jsxs)("div",{className:"flex items-center space-x-2",children:[i&&(0,k.jsx)("button",{onClick:()=>{b(),me("mood")},className:"p-2 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg",title:"Logout Admin",children:(0,k.jsx)(c,{className:"w-5 h-5"})}),(0,k.jsx)("button",{onClick:()=>ye(!0),className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg",title:"Admin Login",children:(0,k.jsx)(d,{className:"w-5 h-5"})})]})]}),pe&&(0,k.jsxs)("div",{className:"absolute top-16 left-4 bg-white border rounded-lg shadow-lg z-40 w-64",children:[(0,k.jsx)("div",{className:"p-3 border-b bg-gray-50",children:(0,k.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Switch Employee"})}),(0,k.jsx)("div",{className:"max-h-64 overflow-y-auto",children:_.map((e=>(0,k.jsxs)("button",{onClick:()=>(o(e),fe(!1),void me("mood")),className:"w-full px-4 py-3 text-left hover:bg-gray-50 flex items-center justify-between ".concat(r.id===e.id?"bg-blue-50 border-r-2 border-blue-500":""),children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("div",{className:"w-3 h-3 rounded-full mr-3 ".concat(1===e.mood?"bg-red-500":2===e.mood?"bg-orange-500":3===e.mood?"bg-yellow-500":4===e.mood?"bg-green-500":"bg-blue-500")}),(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:"font-medium text-gray-800",children:e.name}),(0,k.jsxs)("div",{className:"text-xs text-gray-500",children:[e.role," \u2022 ",e.points," pts"]})]})]}),r.id===e.id&&(0,k.jsx)(u,{className:"w-4 h-4 text-blue-500"})]},e.id)))})]})]}),(0,k.jsx)("div",{className:"bg-white border-b",children:(0,k.jsxs)("div",{className:"flex overflow-x-auto",children:[(0,k.jsxs)("button",{onClick:()=>me("mood"),className:"flex-shrink-0 py-3 px-4 text-center ".concat("mood"===ue?"border-b-2 border-blue-500 text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-800"),children:[(0,k.jsx)(h,{className:"w-5 h-5 mx-auto mb-1"}),(0,k.jsx)("span",{className:"text-sm",children:"Mood Tracker"})]}),(0,k.jsxs)("button",{onClick:()=>me("tasks"),className:"flex-shrink-0 py-3 px-4 text-center ".concat("tasks"===ue?"border-b-2 border-blue-500 text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-800"),children:[(0,k.jsx)(m,{className:"w-5 h-5 mx-auto mb-1"}),(0,k.jsx)("span",{className:"text-sm",children:"Cleaning Tasks"})]}),(0,k.jsxs)("button",{onClick:()=>me("prep"),className:"flex-shrink-0 py-3 px-4 text-center ".concat("prep"===ue?"border-b-2 border-green-500 text-green-600 bg-green-50":"text-gray-600 hover:text-gray-800"),children:[(0,k.jsx)(p,{className:"w-5 h-5 mx-auto mb-1"}),(0,k.jsx)("span",{className:"text-sm",children:"Prep List"})]}),(0,k.jsxs)("button",{onClick:()=>me("inventory"),className:"flex-shrink-0 py-3 px-4 text-center ".concat("inventory"===ue?"border-b-2 border-orange-500 text-orange-600 bg-orange-50":"text-gray-600 hover:text-gray-800"),children:[(0,k.jsx)(f,{className:"w-5 h-5 mx-auto mb-1"}),(0,k.jsx)("span",{className:"text-sm",children:"Restaurant Inventory"})]}),(0,k.jsxs)("button",{onClick:()=>me("store"),className:"flex-shrink-0 py-3 px-4 text-center ".concat("store"===ue?"border-b-2 border-purple-500 text-purple-600 bg-purple-50":"text-gray-600 hover:text-gray-800"),children:[(0,k.jsx)(g,{className:"w-5 h-5 mx-auto mb-1"}),(0,k.jsx)("span",{className:"text-sm",children:"Store"})]}),i&&(0,k.jsxs)("button",{onClick:()=>me("admin"),className:"flex-shrink-0 py-3 px-4 text-center ".concat("admin"===ue?"border-b-2 border-red-500 text-red-600 bg-red-50":"text-gray-600 hover:text-gray-800"),children:[(0,k.jsx)(d,{className:"w-5 h-5 mx-auto mb-1"}),(0,k.jsx)("span",{className:"text-sm",children:"Admin Panel"})]}),i&&(0,k.jsxs)("button",{onClick:()=>me("reports"),className:"flex-shrink-0 py-3 px-4 text-center ".concat("reports"===ue?"border-b-2 border-orange-500 text-orange-600 bg-orange-50":"text-gray-600 hover:text-gray-800"),children:[(0,k.jsx)(y,{className:"w-5 h-5 mx-auto mb-1"}),(0,k.jsx)("span",{className:"text-sm",children:"Daily Reports"})]})]})}),(0,k.jsxs)("div",{className:"p-4 space-y-6",children:[Ne&&(0,k.jsx)("div",{className:"fixed top-20 left-1/2 transform -translate-x-1/2 z-50 max-w-md w-full mx-4",children:(0,k.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 shadow-lg backdrop-blur-sm",children:(0,k.jsxs)("div",{className:"flex items-start",children:[(0,k.jsx)("div",{className:"flex-shrink-0",children:(0,k.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,k.jsxs)("div",{className:"ml-3 flex-1",children:[(0,k.jsx)("h3",{className:"text-sm font-medium text-blue-800",children:"\ud83c\udf05 New Day, Fresh Start!"}),(0,k.jsx)("p",{className:"mt-1 text-sm text-blue-600",children:"All cleaning tasks and assignments have been reset for today. Time to start fresh and earn those points!"})]})]})})}),i&&(0,k.jsx)("div",{className:"fixed bottom-20 right-4 z-50",children:(0,k.jsx)("button",{onClick:Te,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-full shadow-lg transition-colors text-sm font-medium",title:"Test Daily Reset - Clears both tasks AND assignments (Admin Only)",children:"\ud83e\uddea Test Reset"})}),(0,k.jsx)(Nt,{syncState:re,activeDevices:ie,className:"mb-6"}),"mood"===ue&&(0,k.jsx)(N,{currentUser:r,employees:_,userMood:le,setUserMood:de,setEmployees:Ce,setDailyData:Se}),"tasks"===ue&&(0,k.jsx)(D,{currentUser:r,tasks:C,employees:_,completedTasks:I,taskAssignments:E,dailyData:S,setCompletedTasks:Ie,setTaskAssignments:e=>{Q("function"===typeof e?e(E):e)},setDailyData:Se,setEmployees:Ce}),"prep"===ue&&(0,k.jsx)(Me,{currentUser:r,connectionStatus:oe,prepItems:A,scheduledPreps:P,prepSelections:R,setPrepItems:Ee,setScheduledPreps:e=>{$("function"===typeof e?e(P):e)},setPrepSelections:e=>{G("function"===typeof e?e(R):e)},quickSave:se}),"inventory"===ue&&(0,k.jsx)(ft,{currentUser:r,connectionStatus:oe,inventoryDailyItems:L,inventoryWeeklyItems:O,inventoryMonthlyItems:F,inventoryDatabaseItems:z,inventoryActivityLog:q,setInventoryDailyItems:X,setInventoryWeeklyItems:Z,setInventoryMonthlyItems:ee,setInventoryDatabaseItems:te,setInventoryActivityLog:ne,quickSave:se}),"store"===ue&&(0,k.jsx)(U,{currentUser:r,employees:_,storeItems:je,dailyData:S,setEmployees:Ce,setDailyData:Se,saveToFirebase:async()=>{console.log("\ud83d\udce6 Legacy saveToFirebase called - professional sync handles this automatically")}}),"admin"===ue&&i&&(0,k.jsx)(ce,{employees:_,tasks:C,customRoles:T,storeItems:je,prepItems:A,setEmployees:Ce,setTasks:e=>{B("function"===typeof e?e(C):e)},setCustomRoles:e=>{K("function"===typeof e?e(T):e)},setStoreItems:e=>{const t="function"===typeof e?e(je):e;ke(t),J(t)},setPrepItems:Ee,quickSave:se}),"reports"===ue&&i&&(0,k.jsx)(he,{selectedDate:be,setSelectedDate:we,dailyData:S,employees:_,connectionStatus:oe})]}),ge&&(0,k.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,k.jsxs)("div",{className:"bg-white rounded-xl p-6 w-80 mx-4",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,k.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,k.jsx)(x,{className:"w-5 h-5 mr-2"}),"Admin Access"]}),(0,k.jsx)("button",{onClick:()=>{ye(!1),ve("")},className:"text-gray-500 hover:text-gray-700",children:(0,k.jsx)(v,{className:"w-5 h-5"})})]}),(0,k.jsxs)("div",{className:"space-y-4",children:[(0,k.jsx)("input",{type:"password",placeholder:"Enter admin password",value:xe,onChange:e=>ve(e.target.value),onKeyPress:e=>"Enter"===e.key&&De(),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",autoFocus:!0}),(0,k.jsx)("button",{onClick:De,className:"w-full bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600 transition-colors",children:"Login"})]})]})}),(pe||ge)&&(0,k.jsx)("div",{className:"fixed inset-0 z-30",onClick:()=>{fe(!1),ge||ye(!1)}})]})},Et=e=>{let{children:t}=e;return console.log("\ud83e\uddea OfflineDetector bypassed for testing environment"),(0,k.jsx)(k.Fragment,{children:t})};const Tt=function(){return(0,k.jsx)("div",{className:"App",children:(0,k.jsx)(Et,{children:(0,k.jsx)(It,{})})})};let Dt;function At(){const e=document.getElementById("pwa-install-btn");e&&(e.style.display="none")}t.createRoot(document.getElementById("root")).render((0,k.jsx)(e.StrictMode,{children:(0,k.jsx)(Tt,{})})),"serviceWorker"in navigator&&(window.addEventListener("load",(()=>{navigator.serviceWorker.register("/sw.js").then((e=>{console.log("\u2705 PWA Service Worker registered successfully:",e.scope),e.addEventListener("updatefound",(()=>{const t=e.installing;t&&t.addEventListener("statechange",(()=>{"installed"===t.state&&navigator.serviceWorker.controller&&(console.log("\ud83d\udd04 New version of WorkVibe available!"),window.confirm("New version of WorkVibe is available! Would you like to update?")&&(t.postMessage({type:"SKIP_WAITING"}),window.location.reload()))}))}))})).catch((e=>{console.warn("\u26a0\ufe0f PWA Service Worker not available (development mode or missing sw.js):",e.message)})),navigator.serviceWorker.addEventListener("message",(e=>{e.data&&"BACKGROUND_SYNC"===e.data.type&&console.log("\ud83d\udd04 Background sync completed")}))})),navigator.serviceWorker.addEventListener("controllerchange",(()=>{console.log("\ud83d\udd04 Service Worker controller changed"),window.location.reload()}))),window.addEventListener("beforeinstallprompt",(e=>{console.log("\ud83d\udcf1 PWA install prompt triggered"),e.preventDefault(),Dt=e,function(){const e=document.getElementById("pwa-install-btn");e&&(e.style.display="block",e.onclick=async()=>{if(Dt){Dt.prompt();const{outcome:e}=await Dt.userChoice;console.log("PWA install prompt: ".concat(e)),Dt=null,At()}})}()})),window.addEventListener("appinstalled",(()=>{console.log("\ud83c\udf89 WorkVibe PWA was installed successfully!"),Dt=null,At(),window.gtag&&window.gtag("event","pwa_install",{event_category:"engagement",event_label:"WorkVibe PWA Install"})})),window.addEventListener("online",(()=>{console.log("\ud83c\udf10 Back online!")})),window.addEventListener("offline",(()=>{console.log("\ud83d\udcf5 Gone offline")})),document.addEventListener("touchstart",(e=>{e.touches.length>1&&e.preventDefault()}));let Pt=0;function Rt(){const e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))}document.addEventListener("touchend",(e=>{const t=(new Date).getTime();t-Pt<=300&&e.preventDefault(),Pt=t}),!1),Rt(),window.addEventListener("resize",Rt),window.addEventListener("orientationchange",(()=>{setTimeout(Rt,100)}))})()})();