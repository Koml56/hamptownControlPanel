/*! For license information please see main.90aaf90d.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,d=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:d,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function v(){}function x(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=x.prototype=new v;b.constructor=x,f(b,y.prototype),b.isPureReactComponent=!0;var _=Array.isArray,w=Object.prototype.hasOwnProperty,k={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var i,s={},a=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)w.call(t,i)&&!N.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:k.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var j=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function E(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===s?"."+T(l,0):s,_(a)?(i="",null!=e&&(i=e.replace(j,"$&/")+"/"),E(a,t,i,"",(function(e){return e}))):null!=a&&(S(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(j,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",_(e))for(var c=0;c<e.length;c++){var d=s+T(o=e[c],c);l+=E(o,t,i,d,a)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)l+=E(o=o.value,t,i,d=s+T(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function I(e,t,n){if(null==e)return e;var r=[],i=0;return E(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},R={transition:null},M={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:R,ReactCurrentOwner:k};function A(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:I,forEach:function(e,t,n){I(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return I(e,(function(){t++})),t},toArray:function(e){return I(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=x,t.StrictMode=s,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.act=A,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=f({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=k.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!N.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:a,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=A,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,d=e[c];if(0>s(l,n))c<i&&0>s(d,l)?(e[r]=d,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>s(d,n)))break e;e[r]=d,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,p=3,m=!1,f=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(d);null!==t;){if(null===t.callback)i(d);else{if(!(t.startTime<=e))break;i(d),t.sortIndex=t.expirationTime,n(c,t)}t=r(d)}}function _(e){if(g=!1,b(e),!f)if(null!==r(c))f=!0,R(w);else{var t=r(d);null!==t&&M(_,t.startTime-e)}}function w(e,n){f=!1,g&&(g=!1,v(S),S=-1),m=!0;var s=p;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!E());){var a=h.callback;if("function"===typeof a){h.callback=null,p=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var u=r(d);null!==u&&M(_,u.startTime-n),l=!1}return l}finally{h=null,p=s,m=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,N=!1,C=null,S=-1,j=5,T=-1;function E(){return!(t.unstable_now()-T<j)}function I(){if(null!==C){var e=t.unstable_now();T=e;var n=!0;try{n=C(!0,e)}finally{n?k():(N=!1,C=null)}}else N=!1}if("function"===typeof x)k=function(){x(I)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,D=P.port2;P.port1.onmessage=I,k=function(){D.postMessage(null)}}else k=function(){y(I,0)};function R(e){C=e,N||(N=!0,k())}function M(e,n){S=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||m||(f=!0,R(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(d,e),null===r(c)&&e===r(d)&&(g?(v(S),S=-1):g=!0,M(_,s-a))):(e.sortIndex=o,n(c,e),f||m||(f=!0,R(w))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function f(e,t,n,r,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new f(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new f(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new f(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new f(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new f(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new f(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function x(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!u.call(m,e)||!u.call(p,e)&&(h.test(e)?m[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new f(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),w=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),j=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function A(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var L,O=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var z=!1;function U(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function q(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case w:return"Portal";case C:return"Profiler";case N:return"StrictMode";case E:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case j:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:W(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return W(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(t);case 8:return t===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=V(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return O({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function G(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function J(e,t){X(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return O({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function se(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return de(e,t)}))}:de);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function fe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=fe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach((function(e){me.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ye=O({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function xe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,ke=null,Ne=null;function Ce(e){if(e=xi(e)){if("function"!==typeof we)throw Error(s(280));var t=e.stateNode;t&&(t=_i(t),we(e.stateNode,e.type,t))}}function Se(e){ke?Ne?Ne.push(e):Ne=[e]:ke=e}function je(){if(ke){var e=ke,t=Ne;if(Ne=ke=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Te(e,t){return e(t)}function Ee(){}var Ie=!1;function Pe(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return Te(e,t,n)}finally{Ie=!1,(null!==ke||null!==Ne)&&(Ee(),je())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Re=!1;if(d)try{var Me={};Object.defineProperty(Me,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch(de){Re=!1}function Ae(e,t,n,r,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var Le=!1,Oe=null,Fe=!1,ze=null,Ue={onError:function(e){Le=!0,Oe=e}};function qe(e,t,n,r,i,s,a,o,l){Le=!1,Oe=null,Ae.apply(Ue,arguments)}function We(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(We(e)!==e)throw Error(s(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=We(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return He(i),e;if(a===r)return He(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ye=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Ge=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~i;0!==o?r=ut(o):0!==(s&=a)&&(r=ut(s))}else 0!==(a=n&~i)?r=ut(a):0!==s&&(r=ut(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var xt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,wt,kt,Nt,Ct,St=!1,jt=[],Tt=null,Et=null,It=null,Pt=new Map,Dt=new Map,Rt=[],Mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function At(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Et=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Lt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=xi(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ot(e){var t=vi(e.target);if(null!==t){var n=We(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void Ct(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xi(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function zt(e,t,n){Ft(e)&&n.delete(t)}function Ut(){St=!1,null!==Tt&&Ft(Tt)&&(Tt=null),null!==Et&&Ft(Et)&&(Et=null),null!==It&&Ft(It)&&(It=null),Pt.forEach(zt),Dt.forEach(zt)}function qt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function Wt(e){function t(t){return qt(t,e)}if(0<jt.length){qt(jt[0],e);for(var n=1;n<jt.length;n++){var r=jt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&qt(Tt,e),null!==Et&&qt(Et,e),null!==It&&qt(It,e),Pt.forEach(t),Dt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Ot(n),null===n.blockedOn&&Rt.shift()}var Bt=b.ReactCurrentBatchConfig,Ht=!0;function Vt(e,t,n,r){var i=xt,s=Bt.transition;Bt.transition=null;try{xt=1,Yt(e,t,n,r)}finally{xt=i,Bt.transition=s}}function Kt(e,t,n,r){var i=xt,s=Bt.transition;Bt.transition=null;try{xt=4,Yt(e,t,n,r)}finally{xt=i,Bt.transition=s}}function Yt(e,t,n,r){if(Ht){var i=$t(e,t,n,r);if(null===i)Hr(e,t,r,Qt,n),At(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Tt=Lt(Tt,e,t,n,r,i),!0;case"dragenter":return Et=Lt(Et,e,t,n,r,i),!0;case"mouseover":return It=Lt(It,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Pt.set(s,Lt(Pt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Dt.set(s,Lt(Dt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(At(e,r),4&t&&-1<Mt.indexOf(e)){for(;null!==i;){var s=xi(i);if(null!==s&&_t(s),null===(s=$t(e,t,n,r))&&Hr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Qt=null;function $t(e,t,n,r){if(Qt=null,null!==(e=vi(e=_e(r))))if(null===(t=We(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Gt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return O(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(cn),un=O({},cn,{view:0,detail:0}),hn=sn(un),pn=O({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),mn=sn(pn),fn=sn(O({},pn,{dataTransfer:0})),gn=sn(O({},un,{relatedTarget:0})),yn=sn(O({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=O({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=sn(vn),bn=sn(O({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function Cn(){return Nn}var Sn=O({},un,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),jn=sn(Sn),Tn=sn(O({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),En=sn(O({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),In=sn(O({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=O({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=sn(Pn),Rn=[9,13,27,32],Mn=d&&"CompositionEvent"in window,An=null;d&&"documentMode"in document&&(An=document.documentMode);var Ln=d&&"TextEvent"in window&&!An,On=d&&(!Mn||An&&8<An&&11>=An),Fn=String.fromCharCode(32),zn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function Vn(e,t,n,r){Se(r),0<(t=Kr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Yn=null;function Qn(e){Fr(e,0)}function $n(e){if(Y(bi(e)))return e}function Gn(e,t){if("change"===e)return t}var Xn=!1;if(d){var Jn;if(d){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Yn=Kn=null)}function nr(e){if("value"===e.propertyName&&$n(Yn)){var t=[];Vn(t,Yn,e,_e(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Yn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Yn)}function sr(e,t){if("click"===e)return $n(t)}function ar(e,t){if("input"===e||"change"===e)return $n(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!u.call(t,i)||!or(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function ur(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ur(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ur(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=dr(n,s);var a=dr(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fr=d&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,xr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},kr={},Nr={};function Cr(e){if(kr[e])return kr[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Nr)return kr[e]=n[t];return e}d&&(Nr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Sr=Cr("animationend"),jr=Cr("animationiteration"),Tr=Cr("animationstart"),Er=Cr("transitionend"),Ir=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Ir.set(e,t),l(t,[e])}for(var Rr=0;Rr<Pr.length;Rr++){var Mr=Pr[Rr];Dr(Mr.toLowerCase(),"on"+(Mr[0].toUpperCase()+Mr.slice(1)))}Dr(Sr,"onAnimationEnd"),Dr(jr,"onAnimationIteration"),Dr(Tr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Er,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ar="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ar));function Or(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,o,l,c){if(qe.apply(this,arguments),Le){if(!Le)throw Error(s(198));var d=Oe;Le=!1,Oe=null,Fe||(Fe=!0,ze=d)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Or(i,o,c),s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Or(i,o,c),s=l}}}if(Fe)throw e=ze,Fe=!1,ze=null,e}function zr(e,t){var n=t[fi];void 0===n&&(n=t[fi]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var qr="_reactListening"+Math.random().toString(36).slice(2);function Wr(e){if(!e[qr]){e[qr]=!0,a.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Ur(t,!1,e),Ur(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[qr]||(t[qr]=!0,Ur("selectionchange",!1,t))}}function Br(e,t,n,r){switch(Gt(t)){case 1:var i=Vt;break;case 4:i=Kt;break;default:i=Yt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=vi(o)))return;if(5===(l=a.tag)||6===l){r=s=a;continue e}o=o.parentNode}}r=r.return}Pe((function(){var r=s,i=_e(n),a=[];e:{var o=Ir.get(e);if(void 0!==o){var l=dn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=jn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=En;break;case Sr:case jr:case Tr:l=yn;break;case Er:l=In;break;case"scroll":l=hn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==o?o+"Capture":null:o;d=[];for(var p,m=r;null!==m;){var f=(p=m).stateNode;if(5===p.tag&&null!==f&&(p=f,null!==h&&(null!=(f=De(m,h))&&d.push(Vr(m,f,p)))),u)break;m=m.return}0<d.length&&(o=new l(o,c,null,n,i),a.push({event:o,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[mi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(u=We(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(d=mn,f="onMouseLeave",h="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=Tn,f="onPointerLeave",h="onPointerEnter",m="pointer"),u=null==l?o:bi(l),p=null==c?o:bi(c),(o=new d(f,m+"leave",l,n,i)).target=u,o.relatedTarget=p,f=null,vi(i)===r&&((d=new d(h,m+"enter",c,n,i)).target=p,d.relatedTarget=u,f=d),u=f,l&&c)e:{for(h=c,m=0,p=d=l;p;p=Yr(p))m++;for(p=0,f=h;f;f=Yr(f))p++;for(;0<m-p;)d=Yr(d),m--;for(;0<p-m;)h=Yr(h),p--;for(;m--;){if(d===h||null!==h&&d===h.alternate)break e;d=Yr(d),h=Yr(h)}d=null}else d=null;null!==l&&Qr(a,o,l,d,!1),null!==c&&null!==u&&Qr(a,u,c,d,!0)}if("select"===(l=(o=r?bi(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Gn;else if(Hn(o))if(Xn)g=ar;else{g=ir;var y=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=sr);switch(g&&(g=g(e,r))?Vn(a,g,n,i):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?bi(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,br(a,n,i);break;case"selectionchange":if(fr)break;case"keydown":case"keyup":br(a,n,i)}var v;if(Mn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Wn?Un(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(On&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==x?"onCompositionEnd"===x&&Wn&&(v=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,Wn=!0)),0<(y=Kr(r,x)).length&&(x=new bn(x,e,null,n,i),a.push({event:x,listeners:y}),v?x.data=v:null!==(v=qn(n))&&(x.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return qn(t);case"keypress":return 32!==t.which?null:(zn=!0,Fn);case"textInput":return(e=t.data)===Fn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Mn&&Un(e,t)?(e=en(),Zt=Jt=Xt=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return On&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v))}Fr(a,t)}))}function Vr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=De(e,n))&&r.unshift(Vr(e,s,i)),null!=(s=De(e,t))&&r.push(Vr(e,s,i))),e=e.return}return r}function Yr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=De(n,s))&&a.unshift(Vr(n,l,o)):i||null!=(l=De(n,s))&&a.push(Vr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var $r=/\r\n?/g,Gr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Gr,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(oi)}:ri;function oi(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Wt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Wt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function di(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ui=Math.random().toString(36).slice(2),hi="__reactFiber$"+ui,pi="__reactProps$"+ui,mi="__reactContainer$"+ui,fi="__reactEvents$"+ui,gi="__reactListeners$"+ui,yi="__reactHandles$"+ui;function vi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=di(e);null!==e;){if(n=e[hi])return n;e=di(e)}return t}n=(e=n).parentNode}return null}function xi(e){return!(e=e[hi]||e[mi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _i(e){return e[pi]||null}var wi=[],ki=-1;function Ni(e){return{current:e}}function Ci(e){0>ki||(e.current=wi[ki],wi[ki]=null,ki--)}function Si(e,t){ki++,wi[ki]=e.current,e.current=t}var ji={},Ti=Ni(ji),Ei=Ni(!1),Ii=ji;function Pi(e,t){var n=e.type.contextTypes;if(!n)return ji;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){Ci(Ei),Ci(Ti)}function Mi(e,t,n){if(Ti.current!==ji)throw Error(s(168));Si(Ti,t),Si(Ei,n)}function Ai(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,B(e)||"Unknown",i));return O({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ji,Ii=Ti.current,Si(Ti,e),Si(Ei,Ei.current),!0}function Oi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Ai(e,t,Ii),r.__reactInternalMemoizedMergedChildContext=e,Ci(Ei),Ci(Ti),Si(Ti,e)):Ci(Ei),Si(Ei,n)}var Fi=null,zi=!1,Ui=!1;function qi(e){null===Fi?Fi=[e]:Fi.push(e)}function Wi(){if(!Ui&&null!==Fi){Ui=!0;var e=0,t=xt;try{var n=Fi;for(xt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,zi=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ye(Ze,Wi),i}finally{xt=t,Ui=!1}}return null}var Bi=[],Hi=0,Vi=null,Ki=0,Yi=[],Qi=0,$i=null,Gi=1,Xi="";function Ji(e,t){Bi[Hi++]=Ki,Bi[Hi++]=Vi,Vi=e,Ki=t}function Zi(e,t,n){Yi[Qi++]=Gi,Yi[Qi++]=Xi,Yi[Qi++]=$i,$i=e;var r=Gi;e=Xi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var s=32-at(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Gi=1<<32-at(t)+i|n<<i|r,Xi=s+e}else Gi=1<<s|n<<i|r,Xi=e}function es(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ts(e){for(;e===Vi;)Vi=Bi[--Hi],Bi[Hi]=null,Ki=Bi[--Hi],Bi[Hi]=null;for(;e===$i;)$i=Yi[--Qi],Yi[Qi]=null,Xi=Yi[--Qi],Yi[Qi]=null,Gi=Yi[--Qi],Yi[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function as(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Gi,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&os(e,t)?as(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function ds(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function us(e){if(e!==ns)return!1;if(!is)return ds(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw hs(),Error(s(418));for(;t;)as(e,t),t=ci(t.nextSibling)}if(ds(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=rs;e;)e=ci(e.nextSibling)}function ps(){rs=ns=null,is=!1}function ms(e){null===ss?ss=[e]:ss.push(e)}var fs=b.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function ys(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vs(e){return(0,e._init)(e._payload)}function xs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Oc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===k?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===D&&vs(s)===t.type)?((r=i(t,n.props)).ref=gs(e,t,n),r.return=e,r):((r=Mc(n.type,n.key,n.props,null,e.mode,r)).ref=gs(e,t,n),r.return=e,r)}function d(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function u(e,t,n,r,s){return null===t||7!==t.tag?((t=Ac(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Oc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Mc(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case w:return(t=Fc(t,e.mode,n)).return=e,t;case D:return h(e,(0,t._init)(t._payload),n)}if(te(t)||A(t))return(t=Ac(t,e.mode,n,null)).return=e,t;ys(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?c(e,t,n,r):null;case w:return n.key===i?d(e,t,n,r):null;case D:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||A(n))return null!==i?null:u(e,t,n,r,null);ys(e,n)}return null}function m(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case w:return d(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return m(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||A(r))return u(t,e=e.get(n)||null,r,i,null);ys(t,r)}return null}function f(i,s,o,l){for(var c=null,d=null,u=s,f=s=0,g=null;null!==u&&f<o.length;f++){u.index>f?(g=u,u=null):g=u.sibling;var y=p(i,u,o[f],l);if(null===y){null===u&&(u=g);break}e&&u&&null===y.alternate&&t(i,u),s=a(y,s,f),null===d?c=y:d.sibling=y,d=y,u=g}if(f===o.length)return n(i,u),is&&Ji(i,f),c;if(null===u){for(;f<o.length;f++)null!==(u=h(i,o[f],l))&&(s=a(u,s,f),null===d?c=u:d.sibling=u,d=u);return is&&Ji(i,f),c}for(u=r(i,u);f<o.length;f++)null!==(g=m(u,i,f,o[f],l))&&(e&&null!==g.alternate&&u.delete(null===g.key?f:g.key),s=a(g,s,f),null===d?c=g:d.sibling=g,d=g);return e&&u.forEach((function(e){return t(i,e)})),is&&Ji(i,f),c}function g(i,o,l,c){var d=A(l);if("function"!==typeof d)throw Error(s(150));if(null==(l=d.call(l)))throw Error(s(151));for(var u=d=null,f=o,g=o=0,y=null,v=l.next();null!==f&&!v.done;g++,v=l.next()){f.index>g?(y=f,f=null):y=f.sibling;var x=p(i,f,v.value,c);if(null===x){null===f&&(f=y);break}e&&f&&null===x.alternate&&t(i,f),o=a(x,o,g),null===u?d=x:u.sibling=x,u=x,f=y}if(v.done)return n(i,f),is&&Ji(i,g),d;if(null===f){for(;!v.done;g++,v=l.next())null!==(v=h(i,v.value,c))&&(o=a(v,o,g),null===u?d=v:u.sibling=v,u=v);return is&&Ji(i,g),d}for(f=r(i,f);!v.done;g++,v=l.next())null!==(v=m(f,i,g,v.value,c))&&(e&&null!==v.alternate&&f.delete(null===v.key?g:v.key),o=a(v,o,g),null===u?d=v:u.sibling=v,u=v);return e&&f.forEach((function(e){return t(i,e)})),is&&Ji(i,g),d}return function e(r,s,a,l){if("object"===typeof a&&null!==a&&a.type===k&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case _:e:{for(var c=a.key,d=s;null!==d;){if(d.key===c){if((c=a.type)===k){if(7===d.tag){n(r,d.sibling),(s=i(d,a.props.children)).return=r,r=s;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&vs(c)===d.type){n(r,d.sibling),(s=i(d,a.props)).ref=gs(r,d,a),s.return=r,r=s;break e}n(r,d);break}t(r,d),d=d.sibling}a.type===k?((s=Ac(a.props.children,r.mode,l,a.key)).return=r,r=s):((l=Mc(a.type,a.key,a.props,null,r.mode,l)).ref=gs(r,s,a),l.return=r,r=l)}return o(r);case w:e:{for(d=a.key;null!==s;){if(s.key===d){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(r,s.sibling),(s=i(s,a.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Fc(a,r.mode,l)).return=r,r=s}return o(r);case D:return e(r,s,(d=a._init)(a._payload),l)}if(te(a))return f(r,s,a,l);if(A(a))return g(r,s,a,l);ys(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,a)).return=r,r=s):(n(r,s),(s=Oc(a,r.mode,l)).return=r,r=s),o(r)):n(r,s)}}var bs=xs(!0),_s=xs(!1),ws=Ni(null),ks=null,Ns=null,Cs=null;function Ss(){Cs=Ns=ks=null}function js(e){var t=ws.current;Ci(ws),e._currentValue=t}function Ts(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Es(e,t){ks=e,Cs=Ns=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xo=!0),e.firstContext=null)}function Is(e){var t=e._currentValue;if(Cs!==e)if(e={context:e,memoizedValue:t,next:null},null===Ns){if(null===ks)throw Error(s(308));Ns=e,ks.dependencies={lanes:0,firstContext:e}}else Ns=Ns.next=e;return t}var Ps=null;function Ds(e){null===Ps?Ps=[e]:Ps.push(e)}function Rs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ds(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ms(e,r)}function Ms(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var As=!1;function Ls(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Os(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Tl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ms(e,n)}return null===(i=r.interleaved)?(t.next=t,Ds(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ms(e,n)}function Us(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function qs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ws(e,t,n,r){var i=e.updateQueue;As=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==a&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==s){var u=i.baseState;for(a=0,d=c=l=null,o=s;;){var h=o.lane,p=o.eventTime;if((r&h)===h){null!==d&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,f=o;switch(h=t,p=n,f.tag){case 1:if("function"===typeof(m=f.payload)){u=m.call(p,u,h);break e}u=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=f.payload)?m.call(p,u,h):m)||void 0===h)break e;u=O({},u,h);break e;case 2:As=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=p,l=u):d=d.next=p,a|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(h=o).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===d&&(l=u),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ll|=a,e.lanes=a,e.memoizedState=u}}function Bs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Hs={},Vs=Ni(Hs),Ks=Ni(Hs),Ys=Ni(Hs);function Qs(e){if(e===Hs)throw Error(s(174));return e}function $s(e,t){switch(Si(Ys,t),Si(Ks,e),Si(Vs,Hs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ci(Vs),Si(Vs,t)}function Gs(){Ci(Vs),Ci(Ks),Ci(Ys)}function Xs(e){Qs(Ys.current);var t=Qs(Vs.current),n=le(t,e.type);t!==n&&(Si(Ks,e),Si(Vs,n))}function Js(e){Ks.current===e&&(Ci(Vs),Ci(Ks))}var Zs=Ni(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ra=b.ReactCurrentDispatcher,ia=b.ReactCurrentBatchConfig,sa=0,aa=null,oa=null,la=null,ca=!1,da=!1,ua=0,ha=0;function pa(){throw Error(s(321))}function ma(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function fa(e,t,n,r,i,a){if(sa=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ra.current=null===e||null===e.memoizedState?Ja:Za,e=n(r,i),da){a=0;do{if(da=!1,ua=0,25<=a)throw Error(s(301));a+=1,la=oa=null,t.updateQueue=null,ra.current=eo,e=n(r,i)}while(da)}if(ra.current=Xa,t=null!==oa&&null!==oa.next,sa=0,la=oa=aa=null,ca=!1,t)throw Error(s(300));return e}function ga(){var e=0!==ua;return ua=0,e}function ya(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function va(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(s(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function xa(e,t){return"function"===typeof t?t(e):t}function ba(e){var t=va(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=oa,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=o=null,c=null,d=a;do{var u=d.lane;if((sa&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,aa.lanes|=u,Ll|=u}d=d.next}while(null!==d&&d!==a);null===c?o=r:c.next=l,or(r,t.memoizedState)||(xo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,aa.lanes|=a,Ll|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _a(e){var t=va(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);or(a,t.memoizedState)||(xo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function wa(){}function ka(e,t){var n=aa,r=va(),i=t(),a=!or(r.memoizedState,i);if(a&&(r.memoizedState=i,xo=!0),r=r.queue,Aa(Sa.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Ia(9,Ca.bind(null,n,r,i,t),void 0,null),null===El)throw Error(s(349));0!==(30&sa)||Na(n,t,i)}return i}function Na(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ca(e,t,n,r){t.value=n,t.getSnapshot=r,ja(t)&&Ta(e)}function Sa(e,t,n){return n((function(){ja(t)&&Ta(e)}))}function ja(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Ta(e){var t=Ms(e,1);null!==t&&nc(t,e,1,-1)}function Ea(e){var t=ya();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:e},t.queue=e,e=e.dispatch=Ya.bind(null,aa,e),[t.memoizedState,e]}function Ia(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Pa(){return va().memoizedState}function Da(e,t,n,r){var i=ya();aa.flags|=e,i.memoizedState=Ia(1|t,n,void 0,void 0===r?null:r)}function Ra(e,t,n,r){var i=va();r=void 0===r?null:r;var s=void 0;if(null!==oa){var a=oa.memoizedState;if(s=a.destroy,null!==r&&ma(r,a.deps))return void(i.memoizedState=Ia(t,n,s,r))}aa.flags|=e,i.memoizedState=Ia(1|t,n,s,r)}function Ma(e,t){return Da(8390656,8,e,t)}function Aa(e,t){return Ra(2048,8,e,t)}function La(e,t){return Ra(4,2,e,t)}function Oa(e,t){return Ra(4,4,e,t)}function Fa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function za(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ra(4,4,Fa.bind(null,t,e),n)}function Ua(){}function qa(e,t){var n=va();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wa(e,t){var n=va();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ba(e,t,n){return 0===(21&sa)?(e.baseState&&(e.baseState=!1,xo=!0),e.memoizedState=n):(or(n,t)||(n=ft(),aa.lanes|=n,Ll|=n,e.baseState=!0),t)}function Ha(e,t){var n=xt;xt=0!==n&&4>n?n:4,e(!0);var r=ia.transition;ia.transition={};try{e(!1),t()}finally{xt=n,ia.transition=r}}function Va(){return va().memoizedState}function Ka(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qa(e))$a(t,n);else if(null!==(n=Rs(e,t,n,r))){nc(n,e,r,ec()),Ga(n,t,r)}}function Ya(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qa(e))$a(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(i.next=i,Ds(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Rs(e,t,i,r))&&(nc(n,e,r,i=ec()),Ga(n,t,r))}}function Qa(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function $a(e,t){da=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ga(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Xa={readContext:Is,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},Ja={readContext:Is,useCallback:function(e,t){return ya().memoizedState=[e,void 0===t?null:t],e},useContext:Is,useEffect:Ma,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Da(4194308,4,Fa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Da(4194308,4,e,t)},useInsertionEffect:function(e,t){return Da(4,2,e,t)},useMemo:function(e,t){var n=ya();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ya();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ka.bind(null,aa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ya().memoizedState=e},useState:Ea,useDebugValue:Ua,useDeferredValue:function(e){return ya().memoizedState=e},useTransition:function(){var e=Ea(!1),t=e[0];return e=Ha.bind(null,e[1]),ya().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=aa,i=ya();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===El)throw Error(s(349));0!==(30&sa)||Na(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Ma(Sa.bind(null,r,a,e),[e]),r.flags|=2048,Ia(9,Ca.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ya(),t=El.identifierPrefix;if(is){var n=Xi;t=":"+t+"R"+(n=(Gi&~(1<<32-at(Gi)-1)).toString(32)+n),0<(n=ua++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ha++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Za={readContext:Is,useCallback:qa,useContext:Is,useEffect:Aa,useImperativeHandle:za,useInsertionEffect:La,useLayoutEffect:Oa,useMemo:Wa,useReducer:ba,useRef:Pa,useState:function(){return ba(xa)},useDebugValue:Ua,useDeferredValue:function(e){return Ba(va(),oa.memoizedState,e)},useTransition:function(){return[ba(xa)[0],va().memoizedState]},useMutableSource:wa,useSyncExternalStore:ka,useId:Va,unstable_isNewReconciler:!1},eo={readContext:Is,useCallback:qa,useContext:Is,useEffect:Aa,useImperativeHandle:za,useInsertionEffect:La,useLayoutEffect:Oa,useMemo:Wa,useReducer:_a,useRef:Pa,useState:function(){return _a(xa)},useDebugValue:Ua,useDeferredValue:function(e){var t=va();return null===oa?t.memoizedState=e:Ba(t,oa.memoizedState,e)},useTransition:function(){return[_a(xa)[0],va().memoizedState]},useMutableSource:wa,useSyncExternalStore:ka,useId:Va,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=O({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:O({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&We(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Fs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=zs(e,s,i))&&(nc(t,e,i,r),Us(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Fs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=zs(e,s,i))&&(nc(t,e,i,r),Us(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Fs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=zs(e,i,r))&&(nc(t,e,r,n),Us(t,e,r))}};function io(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function so(e,t,n){var r=!1,i=ji,s=t.contextType;return"object"===typeof s&&null!==s?s=Is(s):(i=Di(t)?Ii:Ti.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):ji),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ao(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ls(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Is(s):(s=Di(t)?Ii:Ti.current,i.context=Pi(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(no(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ro.enqueueReplaceState(i,i.state,null),Ws(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=q(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ho="function"===typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=Fs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Vl=r),uo(0,t)},n}function mo(e,t,n){(n=Fs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function fo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yo(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fs(-1,1)).tag=2,zs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var vo=b.ReactCurrentOwner,xo=!1;function bo(e,t,n,r){t.child=null===e?_s(t,null,n,r):bs(t,e.child,n,r)}function _o(e,t,n,r,i){n=n.render;var s=t.ref;return Es(t,i),r=fa(e,t,n,r,s,i),n=ga(),null===e||xo?(is&&n&&es(t),t.flags|=1,bo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ho(e,t,i))}function wo(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Dc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Mc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,ko(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Ho(e,t,i)}return t.flags|=1,(e=Rc(s,r)).ref=t.ref,e.return=t,t.child=e}function ko(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(xo=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ho(e,t,i);0!==(131072&e.flags)&&(xo=!0)}}return So(e,t,n,r,i)}function No(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Rl,Dl),Dl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Rl,Dl),Dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Si(Rl,Dl),Dl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Si(Rl,Dl),Dl|=r;return bo(e,t,i,n),t.child}function Co(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function So(e,t,n,r,i){var s=Di(n)?Ii:Ti.current;return s=Pi(t,s),Es(t,i),n=fa(e,t,n,r,s,i),r=ga(),null===e||xo?(is&&r&&es(t),t.flags|=1,bo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ho(e,t,i))}function jo(e,t,n,r,i){if(Di(n)){var s=!0;Li(t)}else s=!1;if(Es(t,i),null===t.stateNode)Bo(e,t),so(t,n,r),oo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Is(c):c=Pi(t,c=Di(n)?Ii:Ti.current);var d=n.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof a.getSnapshotBeforeUpdate;u||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&ao(t,a,r,c),As=!1;var h=t.memoizedState;a.state=h,Ws(t,r,a,i),l=t.memoizedState,o!==r||h!==l||Ei.current||As?("function"===typeof d&&(no(t,n,d,r),l=t.memoizedState),(o=As||io(t,n,o,r,h,l,c))?(u||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Os(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),a.props=c,u=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Is(l):l=Pi(t,l=Di(n)?Ii:Ti.current);var p=n.getDerivedStateFromProps;(d="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==u||h!==l)&&ao(t,a,r,l),As=!1,h=t.memoizedState,a.state=h,Ws(t,r,a,i);var m=t.memoizedState;o!==u||h!==m||Ei.current||As?("function"===typeof p&&(no(t,n,p,r),m=t.memoizedState),(c=As||io(t,n,c,r,h,m,l)||!1)?(d||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,m,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,m,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),a.props=r,a.state=m,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return To(e,t,n,r,s,i)}function To(e,t,n,r,i,s){Co(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Oi(t,n,!1),Ho(e,t,s);r=t.stateNode,vo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=bs(t,e.child,null,s),t.child=bs(t,null,o,s)):bo(e,t,o,s),t.memoizedState=r.state,i&&Oi(t,n,!0),t.child}function Eo(e){var t=e.stateNode;t.pendingContext?Mi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Mi(0,t.context,!1),$s(e,t.containerInfo)}function Io(e,t,n,r,i){return ps(),ms(i),t.flags|=256,bo(e,t,n,r),t.child}var Po,Do,Ro,Mo,Ao={dehydrated:null,treeContext:null,retryLane:0};function Lo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Oo(e,t,n){var r,i=t.pendingProps,a=Zs.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Si(Zs,1&a),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Lc(l,i,0,null),e=Ac(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Lo(n),t.memoizedState=Ao,e):Fo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,o){if(n)return 256&t.flags?(t.flags&=-257,zo(e,t,o,r=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Lc({mode:"visible",children:r.children},i,0,null),(a=Ac(a,i,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&bs(t,e.child,null,o),t.child.memoizedState=Lo(o),t.memoizedState=Ao,a);if(0===(1&t.mode))return zo(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,zo(e,t,o,r=co(a=Error(s(419)),r,void 0))}if(l=0!==(o&e.childLanes),xo||l){if(null!==(r=El)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Ms(e,i),nc(r,e,i,-1))}return fc(),zo(e,t,o,r=co(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=jc.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Yi[Qi++]=Gi,Yi[Qi++]=Xi,Yi[Qi++]=$i,Gi=e.id,Xi=e.overflow,$i=t),t=Fo(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(o){o=i.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Rc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Rc(r,o):(o=Ac(o,l,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=null===(l=e.child.memoizedState)?Lo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Ao,i}return e=(o=e.child).sibling,i=Rc(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fo(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zo(e,t,n,r){return null!==r&&ms(r),bs(t,e.child,null,n),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Uo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ts(e.return,t,n)}function qo(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Wo(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(bo(e,t,r.children,n),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Uo(e,n,t);else if(19===e.tag)Uo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),qo(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ea(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}qo(t,!0,n,null,s);break;case"together":qo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Vo(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ko(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Yo(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ko(t),null;case 1:case 17:return Di(t.type)&&Ri(),Ko(t),null;case 3:return r=t.stateNode,Gs(),Ci(Ei),Ci(Ti),na(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(us(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ac(ss),ss=null))),Do(e,t),Ko(t),null;case 5:Js(t);var i=Qs(Ys.current);if(n=t.type,null!==e&&null!=t.stateNode)Ro(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ko(t),null}if(e=Qs(Vs.current),us(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hi]=t,r[pi]=a,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(i=0;i<Ar.length;i++)zr(Ar[i],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":G(r,a),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},zr("invalid",r);break;case"textarea":ie(r,a),zr("invalid",r)}for(var l in ve(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zr("scroll",r)}switch(n){case"input":K(r),Z(r,a,!0);break;case"textarea":K(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[pi]=r,Po(e,t,!1,!1),t.stateNode=e;e:{switch(l=xe(n,r),n){case"dialog":zr("cancel",e),zr("close",e),i=r;break;case"iframe":case"object":case"embed":zr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Ar.length;i++)zr(Ar[i],e);i=r;break;case"source":zr("error",e),i=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),i=r;break;case"details":zr("toggle",e),i=r;break;case"input":G(e,r),i=$(e,r),zr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=O({},r,{value:void 0}),zr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),zr("invalid",e)}for(a in ve(n,i),c=i)if(c.hasOwnProperty(a)){var d=c[a];"style"===a?ge(e,d):"dangerouslySetInnerHTML"===a?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===a?"string"===typeof d?("textarea"!==n||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=d&&"onScroll"===a&&zr("scroll",e):null!=d&&x(e,a,d,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ko(t),null;case 6:if(e&&null!=t.stateNode)Mo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Qs(Ys.current),Qs(Vs.current),us(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(a=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Ko(t),null;case 13:if(Ci(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))hs(),ps(),t.flags|=98560,a=!1;else if(a=us(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[hi]=t}else ps(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ko(t),a=!1}else null!==ss&&(ac(ss),ss=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Ml&&(Ml=3):fc())),null!==t.updateQueue&&(t.flags|=4),Ko(t),null);case 4:return Gs(),Do(e,t),null===e&&Wr(t.stateNode.containerInfo),Ko(t),null;case 10:return js(t.type._context),Ko(t),null;case 19:if(Ci(Zs),null===(a=t.memoizedState))return Ko(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Vo(a,!1);else{if(0!==Ml||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,Vo(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==a.tail&&Xe()>Wl&&(t.flags|=128,r=!0,Vo(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ea(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Vo(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!is)return Ko(t),null}else 2*Xe()-a.renderingStartTime>Wl&&1073741824!==n&&(t.flags|=128,r=!0,Vo(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Xe(),t.sibling=null,n=Zs.current,Si(Zs,r?1&n|2:1&n),t):(Ko(t),null);case 22:case 23:return uc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Dl)&&(Ko(t),6&t.subtreeFlags&&(t.flags|=8192)):Ko(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Qo(e,t){switch(ts(t),t.tag){case 1:return Di(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Gs(),Ci(Ei),Ci(Ti),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Js(t),null;case 13:if(Ci(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ci(Zs),null;case 4:return Gs(),null;case 10:return js(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Po=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Do=function(){},Ro=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Qs(Vs.current);var s,a=null;switch(n){case"input":i=$(e,i),r=$(e,r),a=[];break;case"select":i=O({},i,{value:void 0}),r=O({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(d in ve(n,r),n=null,i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&null!=i[d])if("style"===d){var l=i[d];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in r){var c=r[d];if(l=null!=i?i[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&zr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(d,c))}n&&(a=a||[]).push("style",n);var d=a;(t.updateQueue=d)&&(t.flags|=4)}},Mo=function(e,t,n,r){n!==r&&(t.flags|=4)};var $o=!1,Go=!1,Xo="function"===typeof WeakSet?WeakSet:Set,Jo=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Nc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Nc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&el(t,n,s)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[pi],delete t[fi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var dl=null,ul=!1;function hl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(o){}switch(n.tag){case 5:Go||Zo(n,t);case 6:var r=dl,i=ul;dl=null,hl(e,t,n),ul=i,null!==(dl=r)&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Wt(e)):li(dl,n.stateNode));break;case 4:r=dl,i=ul,dl=n.stateNode.containerInfo,ul=!0,hl(e,t,n),dl=r,ul=i;break;case 0:case 11:case 14:case 15:if(!Go&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&el(n,t,a),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!Go&&(Zo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Nc(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Go=(r=Go)||null!==n.memoizedState,hl(e,t,n),Go=r):hl(e,t,n);break;default:hl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xo),t.forEach((function(t){var r=Tc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function fl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(s(160));pl(a,o,i),dl=null,ul=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(d){Nc(i,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Nc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Nc(e,e.return,g)}}break;case 1:fl(t,e),yl(e),512&r&&null!==n&&Zo(n,n.return);break;case 5:if(fl(t,e),yl(e),512&r&&null!==n&&Zo(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Nc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&X(i,a),xe(l,o);var d=xe(l,a);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];"style"===u?ge(i,h):"dangerouslySetInnerHTML"===u?ue(i,h):"children"===u?he(i,h):x(i,u,h,d)}switch(l){case"input":J(i,a);break;case"textarea":se(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var m=a.value;null!=m?ne(i,!!a.multiple,m,!1):p!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[pi]=a}catch(g){Nc(e,e.return,g)}}break;case 6:if(fl(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){Nc(e,e.return,g)}}break;case 3:if(fl(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wt(t.containerInfo)}catch(g){Nc(e,e.return,g)}break;case 4:default:fl(t,e),yl(e);break;case 13:fl(t,e),yl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(ql=Xe())),4&r&&ml(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Go=(d=Go)||u,fl(t,e),Go=d):fl(t,e),yl(e),8192&r){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Jo=e,u=e.child;null!==u;){for(h=Jo=u;null!==Jo;){switch(m=(p=Jo).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Zo(p,p.return);var f=p.stateNode;if("function"===typeof f.componentWillUnmount){r=p,n=p.return;try{t=r,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(g){Nc(r,n,g)}}break;case 5:Zo(p,p.return);break;case 22:if(null!==p.memoizedState){_l(h);continue}}null!==m?(m.return=p,Jo=m):_l(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{i=h.stateNode,d?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",o))}catch(g){Nc(e,e.return,g)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){Nc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fl(t,e),yl(e),4&r&&ml(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,ol(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,ol(e),a);break;default:throw Error(s(161))}}catch(o){Nc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Jo=e,xl(e,t,n)}function xl(e,t,n){for(var r=0!==(1&e.mode);null!==Jo;){var i=Jo,s=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||$o;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Go;o=$o;var c=Go;if($o=a,(Go=l)&&!c)for(Jo=i;null!==Jo;)l=(a=Jo).child,22===a.tag&&null!==a.memoizedState?wl(i):null!==l?(l.return=a,Jo=l):wl(i);for(;null!==s;)Jo=s,xl(s,t,n),s=s.sibling;Jo=i,$o=o,Go=c}bl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Jo=s):bl(e)}}function bl(e){for(;null!==Jo;){var t=Jo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Go||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Go)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Bs(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Bs(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Wt(h)}}}break;default:throw Error(s(163))}Go||512&t.flags&&il(t)}catch(p){Nc(t,t.return,p)}}if(t===e){Jo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Jo=n;break}Jo=t.return}}function _l(e){for(;null!==Jo;){var t=Jo;if(t===e){Jo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Jo=n;break}Jo=t.return}}function wl(e){for(;null!==Jo;){var t=Jo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Nc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Nc(t,i,l)}}var s=t.return;try{il(t)}catch(l){Nc(t,s,l)}break;case 5:var a=t.return;try{il(t)}catch(l){Nc(t,a,l)}}}catch(l){Nc(t,t.return,l)}if(t===e){Jo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Jo=o;break}Jo=t.return}}var kl,Nl=Math.ceil,Cl=b.ReactCurrentDispatcher,Sl=b.ReactCurrentOwner,jl=b.ReactCurrentBatchConfig,Tl=0,El=null,Il=null,Pl=0,Dl=0,Rl=Ni(0),Ml=0,Al=null,Ll=0,Ol=0,Fl=0,zl=null,Ul=null,ql=0,Wl=1/0,Bl=null,Hl=!1,Vl=null,Kl=null,Yl=!1,Ql=null,$l=0,Gl=0,Xl=null,Jl=-1,Zl=0;function ec(){return 0!==(6&Tl)?Xe():-1!==Jl?Jl:Jl=Xe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Tl)&&0!==Pl?Pl&-Pl:null!==fs.transition?(0===Zl&&(Zl=ft()),Zl):0!==(e=xt)?e:e=void 0===(e=window.event)?16:Gt(e.type)}function nc(e,t,n,r){if(50<Gl)throw Gl=0,Xl=null,Error(s(185));yt(e,n,r),0!==(2&Tl)&&e===El||(e===El&&(0===(2&Tl)&&(Ol|=n),4===Ml&&oc(e,Pl)),rc(e,r),1===n&&0===Tl&&0===(1&t.mode)&&(Wl=Xe()+500,zi&&Wi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=pt(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=ht(e,e===El?Pl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){zi=!0,qi(e)}(lc.bind(null,e)):qi(lc.bind(null,e)),ai((function(){0===(6&Tl)&&Wi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ec(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Jl=-1,Zl=0,0!==(6&Tl))throw Error(s(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var r=ht(e,e===El?Pl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Tl;Tl|=2;var a=mc();for(El===e&&Pl===t||(Bl=null,Wl=Xe()+500,hc(e,t));;)try{vc();break}catch(l){pc(e,l)}Ss(),Cl.current=a,Tl=i,null!==Il?t=0:(El=null,Pl=0,t=Ml)}if(0!==t){if(2===t&&(0!==(i=mt(e))&&(r=i,t=sc(e,i))),1===t)throw n=Al,hc(e,0),oc(e,r),rc(e,Xe()),n;if(6===t)oc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!or(s(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(a=mt(e))&&(r=a,t=sc(e,a))),1===t))throw n=Al,hc(e,0),oc(e,r),rc(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:_c(e,Ul,Bl);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=ql+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,Ul,Bl),t);break}_c(e,Ul,Bl);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>i&&(i=o),r&=~a}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Nl(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,Ul,Bl),r);break}_c(e,Ul,Bl);break;default:throw Error(s(329))}}}return rc(e,Xe()),e.callbackNode===n?ic.bind(null,e):null}function sc(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Ul,Ul=n,null!==t&&ac(t)),e}function ac(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function oc(e,t){for(t&=~Fl,t&=~Ol,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Tl))throw Error(s(327));wc();var t=ht(e,0);if(0===(1&t))return rc(e,Xe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=mt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Al,hc(e,0),oc(e,t),rc(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,Ul,Bl),rc(e,Xe()),null}function cc(e,t){var n=Tl;Tl|=1;try{return e(t)}finally{0===(Tl=n)&&(Wl=Xe()+500,zi&&Wi())}}function dc(e){null!==Ql&&0===Ql.tag&&0===(6&Tl)&&wc();var t=Tl;Tl|=1;var n=jl.transition,r=xt;try{if(jl.transition=null,xt=1,e)return e()}finally{xt=r,jl.transition=n,0===(6&(Tl=t))&&Wi()}}function uc(){Dl=Rl.current,Ci(Rl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Il)for(n=Il.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:Gs(),Ci(Ei),Ci(Ti),na();break;case 5:Js(r);break;case 4:Gs();break;case 13:case 19:Ci(Zs);break;case 10:js(r.type._context);break;case 22:case 23:uc()}n=n.return}if(El=e,Il=e=Rc(e.current,null),Pl=Dl=t,Ml=0,Al=null,Fl=Ol=Ll=0,Ul=zl=null,null!==Ps){for(t=0;t<Ps.length;t++)if(null!==(r=(n=Ps[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var a=s.next;s.next=i,r.next=a}n.pending=r}Ps=null}return e}function pc(e,t){for(;;){var n=Il;try{if(Ss(),ra.current=Xa,ca){for(var r=aa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ca=!1}if(sa=0,la=oa=aa=null,da=!1,ua=0,Sl.current=null,null===n||null===n.return){Ml=1,Al=t,Il=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=go(o);if(null!==m){m.flags&=-257,yo(m,o,l,0,t),1&m.mode&&fo(a,d,t),c=d;var f=(t=m).updateQueue;if(null===f){var g=new Set;g.add(c),t.updateQueue=g}else f.add(c);break e}if(0===(1&t)){fo(a,d,t),fc();break e}c=Error(s(426))}else if(is&&1&l.mode){var y=go(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),yo(y,o,l,0,t),ms(lo(c,l));break e}}a=c=lo(c,l),4!==Ml&&(Ml=2),null===zl?zl=[a]:zl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,qs(a,po(0,c,t));break e;case 1:l=c;var v=a.type,x=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Kl||!Kl.has(x)))){a.flags|=65536,t&=-t,a.lanes|=t,qs(a,mo(a,l,t));break e}}a=a.return}while(null!==a)}bc(n)}catch(b){t=b,Il===n&&null!==n&&(Il=n=n.return);continue}break}}function mc(){var e=Cl.current;return Cl.current=Xa,null===e?Xa:e}function fc(){0!==Ml&&3!==Ml&&2!==Ml||(Ml=4),null===El||0===(268435455&Ll)&&0===(268435455&Ol)||oc(El,Pl)}function gc(e,t){var n=Tl;Tl|=2;var r=mc();for(El===e&&Pl===t||(Bl=null,hc(e,t));;)try{yc();break}catch(i){pc(e,i)}if(Ss(),Tl=n,Cl.current=r,null!==Il)throw Error(s(261));return El=null,Pl=0,Ml}function yc(){for(;null!==Il;)xc(Il)}function vc(){for(;null!==Il&&!$e();)xc(Il)}function xc(e){var t=kl(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?bc(e):Il=t,Sl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Yo(n,t,Dl)))return void(Il=n)}else{if(null!==(n=Qo(n,t)))return n.flags&=32767,void(Il=n);if(null===e)return Ml=6,void(Il=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Il=t);Il=t=e}while(null!==t);0===Ml&&(Ml=5)}function _c(e,t,n){var r=xt,i=jl.transition;try{jl.transition=null,xt=1,function(e,t,n,r){do{wc()}while(null!==Ql);if(0!==(6&Tl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,a),e===El&&(Il=El=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yl||(Yl=!0,Ec(tt,(function(){return wc(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=jl.transition,jl.transition=null;var o=xt;xt=1;var l=Tl;Tl|=4,Sl.current=null,function(e,t){if(ei=Ht,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(_){n=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,p=null;t:for(;;){for(var m;h!==n||0!==i&&3!==h.nodeType||(l=o+i),h!==a||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(m=h.firstChild);)p=h,h=m;for(;;){if(h===e)break t;if(p===n&&++d===i&&(l=o),p===a&&++u===r&&(c=o),null!==(m=h.nextSibling))break;p=(h=p).parentNode}h=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Jo=t;null!==Jo;)if(e=(t=Jo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Jo=e;else for(;null!==Jo;){t=Jo;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var g=f.memoizedProps,y=f.memoizedState,v=t.stateNode,x=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(_){Nc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Jo=e;break}Jo=t.return}f=tl,tl=!1}(e,n),gl(n,e),mr(ti),Ht=!!ei,ti=ei=null,e.current=n,vl(n,e,i),Ge(),Tl=l,xt=o,jl.transition=a}else e.current=n;if(Yl&&(Yl=!1,Ql=e,$l=i),a=e.pendingLanes,0===a&&(Kl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=Vl,Vl=null,e;0!==(1&$l)&&0!==e.tag&&wc(),a=e.pendingLanes,0!==(1&a)?e===Xl?Gl++:(Gl=0,Xl=e):Gl=0,Wi()}(e,t,n,r)}finally{jl.transition=i,xt=r}return null}function wc(){if(null!==Ql){var e=bt($l),t=jl.transition,n=xt;try{if(jl.transition=null,xt=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,$l=0,0!==(6&Tl))throw Error(s(331));var i=Tl;for(Tl|=4,Jo=e.current;null!==Jo;){var a=Jo,o=a.child;if(0!==(16&Jo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Jo=d;null!==Jo;){var u=Jo;switch(u.tag){case 0:case 11:case 15:nl(8,u,a)}var h=u.child;if(null!==h)h.return=u,Jo=h;else for(;null!==Jo;){var p=(u=Jo).sibling,m=u.return;if(sl(u),u===d){Jo=null;break}if(null!==p){p.return=m,Jo=p;break}Jo=m}}}var f=a.alternate;if(null!==f){var g=f.child;if(null!==g){f.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Jo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Jo=o;else e:for(;null!==Jo;){if(0!==(2048&(a=Jo).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Jo=v;break e}Jo=a.return}}var x=e.current;for(Jo=x;null!==Jo;){var b=(o=Jo).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,Jo=b;else e:for(o=x;null!==Jo;){if(0!==(2048&(l=Jo).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(w){Nc(l,l.return,w)}if(l===o){Jo=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Jo=_;break e}Jo=l.return}}if(Tl=i,Wi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(w){}r=!0}return r}finally{xt=n,jl.transition=t}}return!1}function kc(e,t,n){e=zs(e,t=po(0,t=lo(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function Nc(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=zs(t,e=mo(t,e=lo(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,El===e&&(Pl&n)===n&&(4===Ml||3===Ml&&(130023424&Pl)===Pl&&500>Xe()-ql?hc(e,0):Fl|=n),rc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=ec();null!==(e=Ms(e,t))&&(yt(e,t,n),rc(e,n))}function jc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Tc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Sc(e,n)}function Ec(e,t){return Ye(e,t)}function Ic(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Ic(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mc(e,t,n,r,i,a){var o=2;if(r=e,"function"===typeof e)Dc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case k:return Ac(n.children,i,a,t);case N:o=8,i|=8;break;case C:return(e=Pc(12,n,t,2|i)).elementType=C,e.lanes=a,e;case E:return(e=Pc(13,n,t,i)).elementType=E,e.lanes=a,e;case I:return(e=Pc(19,n,t,i)).elementType=I,e.lanes=a,e;case R:return Lc(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:o=10;break e;case j:o=9;break e;case T:o=11;break e;case P:o=14;break e;case D:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Pc(o,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Ac(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Oc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,i,s,a,o,l){return e=new zc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ls(s),e}function qc(e){if(!e)return ji;e:{if(We(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Di(n))return Ai(e,n,t)}return t}function Wc(e,t,n,r,i,s,a,o,l){return(e=Uc(n,r,!0,e,0,s,0,o,l)).context=qc(null),n=e.current,(s=Fs(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,zs(n,s,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function Bc(e,t,n,r){var i=t.current,s=ec(),a=tc(i);return n=qc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fs(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=zs(i,t,a))&&(nc(e,i,a,s),Us(e,i,a)),a}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ei.current)xo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xo=!1,function(e,t,n){switch(t.tag){case 3:Eo(t),ps();break;case 5:Xs(t);break;case 1:Di(t.type)&&Li(t);break;case 4:$s(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(ws,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Oo(e,t,n):(Si(Zs,1&Zs.current),null!==(e=Ho(e,t,n))?e.sibling:null);Si(Zs,1&Zs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Wo(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,No(e,t,n)}return Ho(e,t,n)}(e,t,n);xo=0!==(131072&e.flags)}else xo=!1,is&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Bo(e,t),e=t.pendingProps;var i=Pi(t,Ti.current);Es(t,n),i=fa(null,t,r,e,i,n);var a=ga();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(a=!0,Li(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ls(t),i.updater=ro,t.stateNode=i,i._reactInternals=t,oo(t,r,e,n),t=To(null,t,r,!0,a,n)):(t.tag=0,is&&a&&es(t),bo(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Bo(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===P)return 14}return 2}(r),e=to(r,e),i){case 0:t=So(null,t,r,e,n);break e;case 1:t=jo(null,t,r,e,n);break e;case 11:t=_o(null,t,r,e,n);break e;case 14:t=wo(null,t,r,to(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,So(e,t,r,i=t.elementType===r?i:to(r,i),n);case 1:return r=t.type,i=t.pendingProps,jo(e,t,r,i=t.elementType===r?i:to(r,i),n);case 3:e:{if(Eo(t),null===e)throw Error(s(387));r=t.pendingProps,i=(a=t.memoizedState).element,Os(e,t),Ws(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Io(e,t,r,n,i=lo(Error(s(423)),t));break e}if(r!==i){t=Io(e,t,r,n,i=lo(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=_s(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),r===i){t=Ho(e,t,n);break e}bo(e,t,r,n)}t=t.child}return t;case 5:return Xs(t),null===e&&cs(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children,ni(r,i)?o=null:null!==a&&ni(r,a)&&(t.flags|=32),Co(e,t),bo(e,t,o,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Oo(e,t,n);case 4:return $s(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=bs(t,null,r,n):bo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_o(e,t,r,i=t.elementType===r?i:to(r,i),n);case 7:return bo(e,t,t.pendingProps,n),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,Si(ws,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===i.children&&!Ei.current){t=Ho(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Fs(-1,n&-n)).tag=2;var d=a.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ts(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ts(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}bo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Es(t,n),r=r(i=Is(i)),t.flags|=1,bo(e,t,r,n),t.child;case 14:return i=to(r=t.type,t.pendingProps),wo(e,t,r,i=to(r.type,i),n);case 15:return ko(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:to(r,i),Bo(e,t),t.tag=1,Di(r)?(e=!0,Li(t)):e=!1,Es(t,n),so(t,r,i),oo(t,r,i,n),To(null,t,r,!0,e,n);case 19:return Wo(e,t,n);case 22:return No(e,t,n)}throw Error(s(156,t.tag))};var Yc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Gc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Zc(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof i){var o=i;i=function(){var e=Hc(a);o.call(e)}}Bc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Hc(a);s.call(e)}}var a=Wc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=a,e[mi]=a.current,Wr(8===e.nodeType?e.parentNode:e),dc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var o=r;r=function(){var e=Hc(l);o.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[mi]=l.current,Wr(8===e.nodeType?e.parentNode:e),dc((function(){Bc(t,l,n,r)})),l}(n,t,e,i,r);return Hc(a)}$c.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Bc(e,t,null,null)},$c.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){Bc(null,e,null,null)})),t[mi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Ot(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,Xe()),0===(6&Tl)&&(Wl=Xe()+500,Wi()))}break;case 13:dc((function(){var t=Ms(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Kc(e,1)}},wt=function(e){if(13===e.tag){var t=Ms(e,134217728);if(null!==t)nc(t,e,134217728,ec());Kc(e,134217728)}},kt=function(e){if(13===e.tag){var t=tc(e),n=Ms(e,t);if(null!==n)nc(n,e,t,ec());Kc(e,t)}},Nt=function(){return xt},Ct=function(e,t){var n=xt;try{return xt=e,t()}finally{xt=n}},we=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(s(90));Y(r),J(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=cc,Ee=dc;var ed={usingClientEntryPoint:!1,Events:[xi,bi,_i,Se,je,cc]},td={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rd.isDisabled&&rd.supportsFiber)try{it=rd.inject(nd),st=rd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Gc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Gc(e))throw Error(s(299));var n=!1,r="",i=Yc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,i),e[mi]=t.current,Wr(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(s(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Gc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",o=Yc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Wc(t,null,e,1,null!=n?n:null,i,0,a,o),e[mi]=t.current,Wr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(s(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(s(40));return!!e._reactRootContainer&&(dc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[mi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}();var r=n(43),i=n(391);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function a(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function o(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const u=["color","size","strokeWidth","absoluteStrokeWidth","className","children"],h=(e,t)=>{const n=(0,r.forwardRef)(((n,i)=>{let{color:s="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:h="",children:p}=n,m=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(n,u);return(0,r.createElement)("svg",c(c({ref:i},d),{},{width:a,height:a,stroke:s,strokeWidth:l?24*Number(o)/Number(a):o,className:["lucide","lucide-".concat((f=e,f.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim())),h].join(" ")},m),[...t.map((e=>{let[t,n]=e;return(0,r.createElement)(t,n)})),...Array.isArray(p)?p:[p]]);var f}));return n.displayName="".concat(e),n},p=h("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),m=h("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),f=h("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),g=h("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),y=h("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),v=h("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),x=h("ChefHat",[["path",{d:"M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z",key:"z3ra2g"}],["line",{x1:"6",x2:"18",y1:"17",y2:"17",key:"12q60k"}]]),b=h("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),_=h("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),w=h("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),k=h("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),N=h("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),C={apiKey:"AIzaSyBBWLn8mFblzOqtbfaGS52aDhFWixSEn0Y",authDomain:"hamptown-panel.firebaseapp.com",databaseURL:"https://hamptown-panel-default-rtdb.firebaseio.com",projectId:"hamptown-panel",storageBucket:"hamptown-panel.firebasestorage.app",messagingSenderId:"937251959184",appId:"1:937251959184:web:b1afb3ed1eecd52fdcc315",measurementId:"G-50NK2PWM7E"},S=["\ud83d\ude2b","\ud83d\ude14","\ud83d\ude10","\ud83d\ude0a","\ud83e\udd29"],j=["Terrible","Poor","Okay","Good","Excellent"],T={high:"border-red-400",medium:"border-yellow-400",low:"border-green-400"},E=["bg-red-500","bg-orange-500","bg-yellow-500","bg-green-500","bg-blue-500"],I=e=>"".concat(e.getFullYear(),"-").concat(String(e.getMonth()+1).padStart(2,"0"),"-").concat(String(e.getDate()).padStart(2,"0")),P=e=>E[e-1]||"bg-gray-500";var D=n(579);const R=e=>{let{currentUser:t,employees:n,userMood:r,setUserMood:i,setEmployees:s,setDailyData:a}=e;const o=(e=>(e.reduce(((e,t)=>e+t.mood),0)/e.length).toFixed(1))(n),l=((e,t)=>{const n=new Date,r=I(n),i=t.find((t=>t.id===e));return!i||i.lastMoodDate!==r})(t.id,n),d=((e,t)=>{const n=t.find((t=>t.id===e));if(!n||!n.lastMoodDate)return"";const r=new Date,i=I(r);return n.lastMoodDate===i?"You can update your mood again tomorrow!":""})(t.id,n),u=e=>{const r=((e,t,n,r,i)=>{const s=new Date,a=I(s),o=n.find((e=>e.id===t));if(o&&o.lastMoodDate===a)return alert("You have already updated your mood today! Come back tomorrow \ud83d\ude0a"),!1;r((n=>n.map((n=>n.id===t?c(c({},n),{},{mood:e,lastUpdated:"Just now",lastMoodDate:a}):n))));const l=(new Date).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"});return i((n=>{const r=n[a]||{completedTasks:[],employeeMoods:[],totalTasks:22,completionRate:0},i=Array.isArray(r.employeeMoods)?r.employeeMoods:[],s={employeeId:t,mood:e,updatedAt:l};return c(c({},n),{},{[a]:c(c({},r),{},{employeeMoods:[...i.filter((e=>e.employeeId!==t)),s]})})})),!0})(e,t.id,n,s,a);r&&i(e)};return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:(0,D.jsxs)("div",{className:"text-center mb-6",children:[(0,D.jsx)("div",{className:"text-3xl font-bold text-gray-800 mb-2",children:o}),(0,D.jsx)("div",{className:"text-lg text-gray-600 mb-4",children:"Team Average Mood"}),(0,D.jsx)("div",{className:"flex justify-center space-x-2",children:[1,2,3,4,5].map((e=>(0,D.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(e<=Math.round(Number(o))?"bg-blue-500":"bg-gray-200")},e)))})]})}),(0,D.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,D.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 text-center",children:"How are you feeling today?"}),l?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("div",{className:"flex justify-between items-center mb-4",children:[1,2,3,4,5].map((e=>(0,D.jsxs)("button",{onClick:()=>u(e),className:"flex flex-col items-center p-3 rounded-xl transition-all hover:scale-105 ".concat(r===e?"bg-blue-100 scale-110":"hover:bg-gray-50"),children:[(0,D.jsx)("div",{className:"text-2xl mb-1",children:S[e-1]}),(0,D.jsx)("div",{className:"text-xs text-gray-600",children:j[e-1]})]},e)))}),(0,D.jsx)("div",{className:"text-center text-sm text-gray-500",children:"Select how you're feeling today"})]}):(0,D.jsxs)("div",{className:"text-center",children:[(0,D.jsx)("div",{className:"text-6xl mb-4",children:S[r-1]}),(0,D.jsxs)("div",{className:"text-lg font-medium text-gray-700 mb-2",children:["Today's Mood: ",j[r-1]]}),(0,D.jsx)("div",{className:"text-sm text-gray-500 mb-4",children:d}),(0,D.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,D.jsx)("div",{className:"text-sm text-blue-700",children:"\u2728 You've already shared your mood today! Your well-being matters to us."})})]})]}),(0,D.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,D.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,D.jsx)(N,{className:"w-5 h-5 mr-2"}),"Team Mood"]}),(0,D.jsx)("div",{className:"space-y-3",children:n.map((e=>(0,D.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,D.jsxs)("div",{className:"flex items-center",children:[(0,D.jsx)("div",{className:"w-3 h-3 rounded-full mr-3 ".concat(P(e.mood))}),(0,D.jsxs)("div",{children:[(0,D.jsx)("div",{className:"font-medium text-gray-800",children:e.name}),(0,D.jsxs)("div",{className:"text-xs text-gray-500",children:[e.lastUpdated,e.lastMoodDate===I(new Date)&&(0,D.jsx)("span",{className:"ml-2 px-2 py-0.5 bg-green-100 text-green-700 rounded-full text-xs",children:"Today"})]})]})]}),(0,D.jsxs)("div",{className:"flex items-center",children:[(0,D.jsx)("span",{className:"text-lg mr-2",children:S[e.mood-1]}),(0,D.jsxs)("span",{className:"text-sm text-gray-600",children:[e.mood,"/5"]})]})]},e.id)))})]})]})},M=h("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),A=(e,t,n,r,i,s)=>{const a=new Date,o=I(a),l=(new Date).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"}),d={taskId:e,employeeId:t,completedAt:l,taskName:n,date:o,pointsEarned:r};s((t=>{const n=t[o]||{completedTasks:[],employeeMoods:[],purchases:[],totalTasks:i.length,completionRate:0,totalPointsEarned:0,totalPointsSpent:0},r=[...(Array.isArray(n.completedTasks)?n.completedTasks:[]).filter((t=>t.taskId!==e)),d],s=Math.round(r.length/i.length*100),a=r.reduce(((e,t)=>e+(t.pointsEarned||0)),0);return c(c({},t),{},{[o]:c(c({},n),{},{completedTasks:r,totalTasks:i.length,completionRate:s,totalPointsEarned:a})})})),console.log("\ud83d\udcca Task completion logged (replacing any previous completion):",d)},L=(e,t,n)=>{n((n=>n.map((n=>n.id===e?c(c({},n),{},{points:n.points+t}):n))))},O=(e,t,n)=>{const r=t[e];return n.find((e=>e.id===r))},F=(e,t,n,r,i,s,a,o,l,d,u,h)=>{const p=r.has(e),m=new Set(r),f=s.find((t=>t.id===e)),g=O(e,i,a);if(f){if(p)console.log("\ud83d\udd04 Uncompleting task: ".concat(f.task)),m.delete(e),l((t=>{const n=c({},t);return delete n[e],n})),g&&(((e,t,n)=>{n((n=>n.map((n=>n.id===e?c(c({},n),{},{points:Math.max(0,n.points-t)}):n))))})(g.id,f.points,u),console.log("\ud83d\udcc9 Deducted ".concat(f.points," points from ").concat(g.name," for uncompleting task"))),((e,t,n)=>{const r=new Date,i=I(r);n((n=>{const r=n[i]||{completedTasks:[],employeeMoods:[],purchases:[],totalTasks:t.length,completionRate:0,totalPointsEarned:0,totalPointsSpent:0},s=(Array.isArray(r.completedTasks)?r.completedTasks:[]).filter((t=>t.taskId!==e)),a=Math.round(s.length/t.length*100),o=s.reduce(((e,t)=>e+(t.pointsEarned||0)),0);return c(c({},n),{},{[i]:c(c({},r),{},{completedTasks:s,totalTasks:t.length,completionRate:a,totalPointsEarned:o})})})),console.log("\ud83d\uddd1\ufe0f Task completion removed from daily data:",e)})(e,s,d);else{console.log("\u2705 Completing task: ".concat(f.task));const r=t||(null===g||void 0===g?void 0:g.id)||n;t?l((n=>c(c({},n),{},{[e]:t}))):g||l((t=>c(c({},t),{},{[e]:n}))),m.add(e),L(r,f.points,u),A(e,r,f.task,f.points,s,d),console.log("\ud83d\udcc8 Awarded ".concat(f.points," points to employee ").concat(r," for completing task"))}o(m),h&&(console.log("\ud83d\udd25 Immediate save triggered by task completion"),setTimeout((()=>{console.log("\u23f0 Executing immediate save now..."),h()}),200))}else console.error("Task not found:",e)},z=(e,t,n,r,i,s,a,o,l,d)=>{const u=i.find((t=>t.id===e)),h=O(e,r,s),p=s.find((e=>e.id===t));u&&p?n.has(e)&&(null===h||void 0===h?void 0:h.id)!==t?(console.log("\ud83d\udd04 Reassigning completed task from ".concat((null===h||void 0===h?void 0:h.name)||"unassigned"," to ").concat(p.name)),h?((e,t,n,r)=>{r((r=>r.map((r=>r.id===e?c(c({},r),{},{points:Math.max(0,r.points-n)}):r.id===t?c(c({},r),{},{points:r.points+n}):r)))),console.log("\ud83d\udcb0 Transferred ".concat(n," points from employee ").concat(e," to ").concat(t))})(h.id,t,u.points,l):L(t,u.points,l),a((n=>c(c({},n),{},{[e]:t}))),A(e,t,u.task,u.points,i,o),d&&(console.log("\ud83d\udd25 Immediate save triggered by task reassignment"),setTimeout((()=>{d()}),200))):a((n=>c(c({},n),{},{[e]:t}))):console.error("Task or new employee not found")},U=e=>{var t,n;let{currentUser:i,tasks:s,employees:a,completedTasks:o,taskAssignments:l,dailyData:d,setCompletedTasks:u,setTaskAssignments:h,setDailyData:p,setEmployees:m}=e;(0,r.useEffect)((()=>{console.log("\ud83d\udccb TaskManager - completedTasks updated:",{size:o.size,tasks:Array.from(o),timestamp:(new Date).toLocaleTimeString()})}),[o]);const f=(e,t)=>{o.has(e)?z(e,t,o,l,s,a,h,p,m):((e,t,n)=>{n((n=>c(c({},n),{},{[e]:t})))})(e,t,h)},y=a.find((e=>e.id===i.id)),x=d[I(new Date)],b=(null===x||void 0===x||null===(t=x.completedTasks)||void 0===t||null===(n=t.filter((e=>e.employeeId===i.id)))||void 0===n?void 0:n.reduce(((e,t)=>e+(t.pointsEarned||0)),0))||0;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,D.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4 text-center border border-green-200",children:[(0,D.jsx)("div",{className:"text-3xl font-bold text-green-600 mb-1",children:o.size}),(0,D.jsx)("div",{className:"text-sm font-medium text-green-700",children:"Completed"})]}),(0,D.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-4 text-center border border-orange-200",children:[(0,D.jsx)("div",{className:"text-3xl font-bold text-orange-600 mb-1",children:s.length-o.size}),(0,D.jsx)("div",{className:"text-sm font-medium text-orange-700",children:"Pending"})]}),(0,D.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4 text-center border border-purple-200",children:[(0,D.jsx)("div",{className:"text-3xl font-bold text-purple-600 mb-1",children:(null===y||void 0===y?void 0:y.points)||0}),(0,D.jsx)("div",{className:"text-sm font-medium text-purple-700",children:"Your Points"})]})]}),(0,D.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl p-4 mb-6 text-white",children:(0,D.jsxs)("div",{className:"flex items-center justify-between",children:[(0,D.jsxs)("div",{children:[(0,D.jsx)("h3",{className:"text-lg font-semibold",children:"Today's Points"}),(0,D.jsxs)("div",{className:"text-2xl font-bold",children:[b," pts earned"]})]}),(0,D.jsx)(M,{className:"w-8 h-8 opacity-80"})]})}),(0,D.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,D.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,D.jsx)(v,{className:"w-5 h-5 mr-2"}),"Cleaning Tasks"]}),(0,D.jsx)("div",{className:"space-y-4",children:s.map((e=>{const t=O(e.id,l,a),n=o.has(e.id);return(0,D.jsxs)("div",{className:"border rounded-lg p-4 ".concat((r=e.priority,T[r])," ").concat(n?"bg-green-50":"bg-white"),children:[(0,D.jsxs)("div",{className:"flex items-start justify-between",children:[(0,D.jsxs)("div",{className:"flex-1",children:[(0,D.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,D.jsx)("div",{className:"font-medium ".concat(n?"line-through text-gray-500":"text-gray-800"),children:e.task}),(0,D.jsxs)("div",{className:"flex items-center bg-purple-100 text-purple-700 px-2 py-1 rounded-full text-sm font-medium",children:[(0,D.jsx)(M,{className:"w-3 h-3 mr-1"}),e.points," pts"]})]}),(0,D.jsxs)("div",{className:"text-sm text-gray-600 mb-2",children:["\ud83d\udccd ",e.location]}),(0,D.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,D.jsxs)("div",{className:"text-xs px-2 py-1 rounded-full inline-block ".concat("high"===e.priority?"bg-red-100 text-red-700":"medium"===e.priority?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"),children:[e.priority," priority"]}),(0,D.jsxs)("div",{className:"text-xs text-gray-500",children:["\u23f1\ufe0f ",e.estimatedTime]})]})]}),(0,D.jsx)("button",{onClick:()=>{return t=e.id,void F(t,n,i.id,o,l,s,a,u,h,p,m);var t,n},className:"ml-3 p-2 rounded-full ".concat(n?"bg-green-500 text-white":"bg-gray-200 text-gray-600 hover:bg-gray-300"),children:(0,D.jsx)(g,{className:"w-4 h-4"})})]}),(0,D.jsxs)("div",{className:"mt-3",children:[t&&(0,D.jsxs)("div",{className:"flex items-center text-sm text-gray-600 mb-2",children:[(0,D.jsx)(N,{className:"w-4 h-4 mr-1"}),"Assigned to: ",(0,D.jsx)("span",{className:"font-medium ml-1",children:t.name}),n&&(0,D.jsxs)("span",{className:"ml-2 text-green-600 font-medium",children:["(+",e.points," pts earned!)"]})]}),!t&&(0,D.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:n?"Reassign to:":"Assign to:"}),(0,D.jsx)("div",{className:"flex flex-wrap gap-2",children:a.map((r=>(0,D.jsxs)("button",{onClick:()=>f(e.id,r.id),className:"text-xs px-3 py-1 rounded-full transition-colors ".concat((null===t||void 0===t?void 0:t.id)===r.id?"bg-blue-500 text-white":"bg-blue-100 text-blue-700 hover:bg-blue-200"),title:n&&(null===t||void 0===t?void 0:t.id)!==r.id?"Transfer ".concat(e.points," points from ").concat((null===t||void 0===t?void 0:t.name)||"unassigned"," to ").concat(r.name):"Assign task to ".concat(r.name),children:[r.name,(0,D.jsxs)("span",{className:"ml-1 text-purple-600 font-medium",children:["(",r.points,"pts)"]}),n&&(null===t||void 0===t?void 0:t.id)!==r.id&&(0,D.jsx)("span",{className:"ml-1",children:"\ud83d\udd04"})]},r.id)))}),n&&(0,D.jsxs)("div",{className:"mt-2 text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded",children:["\ud83d\udca1 Tip: Click another employee's name to transfer the ",e.points," points to them"]})]})]},e.id);var r}))})]})]})},q=h("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]),W=h("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),B=h("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),H=h("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),V=h("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),K=h("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),Y=(e,t)=>e.points>=t.cost&&t.available,Q=e=>{var t;let{currentUser:n,employees:i,storeItems:s,dailyData:a,setEmployees:o,setDailyData:l,saveToFirebase:d}=e;const[u,h]=(0,r.useState)("all"),[p,m]=(0,r.useState)(!1),f=i.find((e=>e.id===n.id)),g=((e,t)=>{const n=t.find((t=>t.id===e));return(null===n||void 0===n?void 0:n.points)||0})(n.id,i),y=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30;const r=[],i=new Date;for(let s=0;s<n;s++){const n=new Date(i);n.setDate(n.getDate()-s);const a=t[I(n)];if(null!==a&&void 0!==a&&a.purchases){const t=a.purchases.filter((t=>t.employeeId===e));r.push(...t)}}return r.sort(((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()))}(n.id,a),v=(e=>[...e].sort(((e,t)=>t.points-e.points)).slice(0,10))(i),x=[{id:"all",name:"All Items",icon:"\ud83d\udecd\ufe0f"},{id:"food",name:"Food & Drinks",icon:"\ud83c\udf7d\ufe0f"},{id:"break",name:"Time Off",icon:"\u23f0"},{id:"reward",name:"Rewards",icon:"\ud83c\udf81"},{id:"social",name:"Social",icon:"\ud83d\udc65"}],b="all"===u?s:s.filter((e=>e.category===u)),_=e=>{if(!f)return;const t=((e,t,n,r,i)=>{const s=n.find((t=>t.id===e));if(!s)return alert("Employee with id ".concat(e," not found")),!1;if(!Y(s,t))return alert("Insufficient points! You need ".concat(t.cost," points but only have ").concat(s.points,".")),!1;const a=new Date,o=I(a),l=(new Date).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"});r((n=>n.map((n=>n.id===e?c(c({},n),{},{points:n.points-t.cost}):n))));const d={id:Date.now(),employeeId:e,itemId:t.id,itemName:t.name,cost:t.cost,purchasedAt:l,date:o,status:"pending"};return i((e=>{const n=e[o]||{completedTasks:[],employeeMoods:[],purchases:[],totalTasks:22,completionRate:0,totalPointsEarned:0,totalPointsSpent:0},r=Array.isArray(n.purchases)?[...n.purchases,d]:[d],i=(n.totalPointsSpent||0)+t.cost;return c(c({},e),{},{[o]:c(c({},n),{},{purchases:r,totalPointsSpent:i})})})),console.log("\ud83d\uded2 Purchase logged:",d),!0})(n.id,e,i,o,l);t&&alert("\ud83c\udf89 Successfully purchased: ".concat(e.name,"! Check with your manager to redeem."))};r.useEffect((()=>{a&&Object.keys(a).length>0&&d()}),[a,d]);const w=e=>{switch(e){case"food":return(0,D.jsx)(q,{className:"w-4 h-4"});case"break":return(0,D.jsx)(W,{className:"w-4 h-4"});case"reward":return(0,D.jsx)(B,{className:"w-4 h-4"});case"social":return(0,D.jsx)(N,{className:"w-4 h-4"});default:return(0,D.jsx)(M,{className:"w-4 h-4"})}};return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl shadow-sm p-6 text-white",children:[(0,D.jsxs)("div",{className:"flex items-center justify-between",children:[(0,D.jsxs)("div",{children:[(0,D.jsx)("h2",{className:"text-2xl font-bold",children:"Your Points"}),(0,D.jsx)("div",{className:"text-4xl font-bold mt-2",children:g}),(0,D.jsx)("div",{className:"text-purple-100 text-sm",children:"Available to spend"})]}),(0,D.jsx)("div",{className:"text-6xl opacity-50",children:"\ud83d\udc8e"})]}),(0,D.jsxs)("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-purple-400",children:[(0,D.jsxs)("button",{onClick:()=>m(!p),className:"flex items-center bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition-colors",children:[(0,D.jsx)(H,{className:"w-4 h-4 mr-2"}),"Purchase History"]}),(0,D.jsxs)("div",{className:"text-right",children:[(0,D.jsx)("div",{className:"text-sm text-purple-100",children:"Your Rank"}),(0,D.jsxs)("div",{className:"font-bold",children:["#",v.findIndex((e=>e.id===n.id))+1||"Unranked"]})]})]})]}),p&&(0,D.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,D.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Recent Purchases"}),y.length>0?(0,D.jsx)("div",{className:"space-y-3",children:y.slice(0,10).map((e=>(0,D.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,D.jsxs)("div",{className:"flex items-center",children:[(0,D.jsx)("div",{className:"text-lg mr-3",children:"\ud83d\uded2"}),(0,D.jsxs)("div",{children:[(0,D.jsx)("div",{className:"font-medium text-gray-800",children:e.itemName}),(0,D.jsxs)("div",{className:"text-sm text-gray-500",children:[e.date," at ",e.purchasedAt]})]})]}),(0,D.jsxs)("div",{className:"text-right",children:[(0,D.jsxs)("div",{className:"font-bold text-purple-600",children:["-",e.cost," pts"]}),(0,D.jsx)("div",{className:"text-xs px-2 py-1 rounded-full ".concat("pending"===e.status?"bg-yellow-100 text-yellow-700":"approved"===e.status?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"),children:e.status})]})]},e.id)))}):(0,D.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No purchases yet. Start earning points by completing tasks!"})]}),(0,D.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,D.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Store Categories"}),(0,D.jsx)("div",{className:"flex flex-wrap gap-2",children:x.map((e=>(0,D.jsxs)("button",{onClick:()=>h(e.id),className:"flex items-center px-4 py-2 rounded-lg transition-colors ".concat(u===e.id?"bg-purple-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[(0,D.jsx)("span",{className:"mr-2",children:e.icon}),e.name]},e.id)))})]}),(0,D.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,D.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,D.jsx)(V,{className:"w-5 h-5 mr-2"}),"all"===u?"All Items":null===(t=x.find((e=>e.id===u)))||void 0===t?void 0:t.name]}),(0,D.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:b.map((e=>{const t=!!f&&Y(f,e);return(0,D.jsxs)("div",{className:"border rounded-lg p-4 transition-all ".concat(t?"border-green-200 hover:border-green-300 hover:shadow-md":"border-gray-200 opacity-60"),children:[(0,D.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,D.jsx)("div",{className:"text-3xl",children:e.icon}),(0,D.jsx)("div",{className:"flex items-center",children:w(e.category)})]}),(0,D.jsx)("h4",{className:"font-semibold text-gray-800 mb-2",children:e.name}),(0,D.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),(0,D.jsxs)("div",{className:"flex items-center justify-between",children:[(0,D.jsxs)("div",{className:"text-lg font-bold text-purple-600",children:[e.cost," pts"]}),(0,D.jsx)("button",{onClick:()=>_(e),disabled:!t||!e.available,className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat(t&&e.available?"bg-purple-500 text-white hover:bg-purple-600":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:e.available?t?"Purchase":"Need more points":"Unavailable"})]}),!t&&e.available&&(0,D.jsxs)("div",{className:"mt-2 text-xs text-red-500",children:["Need ",e.cost-g," more points"]})]},e.id)}))}),0===b.length&&(0,D.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No items available in this category"})]}),(0,D.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,D.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,D.jsx)(K,{className:"w-5 h-5 mr-2"}),"Points Leaderboard"]}),(0,D.jsx)("div",{className:"space-y-3",children:v.map(((e,t)=>(0,D.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg ".concat(e.id===n.id?"bg-purple-50 border border-purple-200":"bg-gray-50"),children:[(0,D.jsxs)("div",{className:"flex items-center",children:[(0,D.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold mr-3 ".concat(0===t?"bg-yellow-400 text-white":1===t?"bg-gray-400 text-white":2===t?"bg-orange-400 text-white":"bg-gray-200 text-gray-600"),children:t+1}),(0,D.jsxs)("div",{children:[(0,D.jsxs)("div",{className:"font-medium text-gray-800",children:[e.name,e.id===n.id&&(0,D.jsx)("span",{className:"ml-2 text-purple-600 text-sm",children:"(You)"})]}),(0,D.jsx)("div",{className:"text-sm text-gray-500",children:e.role})]})]}),(0,D.jsxs)("div",{className:"text-right",children:[(0,D.jsxs)("div",{className:"font-bold text-purple-600",children:[e.points," pts"]}),0===t&&(0,D.jsx)("div",{className:"text-xs text-yellow-600",children:"\ud83d\udc51 Top Performer"})]})]},e.id)))})]})]})},$=h("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),G=h("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),X=h("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),J=h("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Z=h("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),ee=h("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]),te=h("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),ne=(e,t,n,r)=>{r((r=>r.map((r=>r.id===e?c(c({},r),{},{[t]:n}):r))))},re=(e,t,n,r)=>{r((r=>r.map((r=>r.id===e?c(c({},r),{},{[t]:"priority"===t?n:"points"===t?parseInt(n)||0:n}):r))))},ie=e=>{let{employees:t,tasks:n,customRoles:i,storeItems:s,prepItems:a,setEmployees:o,setTasks:l,setCustomRoles:d,setStoreItems:u,setPrepItems:h}=e;const[p,m]=(0,r.useState)(!1),[g,y]=(0,r.useState)(!1),[_,w]=(0,r.useState)(!1),[k,C]=(0,r.useState)(""),[S,j]=(0,r.useState)("Cleaner"),[T,E]=(0,r.useState)(""),[I,R]=(0,r.useState)(null),[A,L]=(0,r.useState)(null),[O,F]=(0,r.useState)(null),[z,U]=(0,r.useState)(null),[q,B]=(0,r.useState)(null),[H,V]=(0,r.useState)(""),[K,Y]=(0,r.useState)(""),[Q,ie]=(0,r.useState)(""),[se,ae]=(0,r.useState)("food"),[oe,le]=(0,r.useState)("\ud83c\udf81"),[ce,de]=(0,r.useState)(""),[ue,he]=(0,r.useState)("majoneesit"),[pe,me]=(0,r.useState)(""),[fe,ge]=(0,r.useState)(""),[ye,ve]=(0,r.useState)(!1),[xe,be]=(0,r.useState)({ingredients:"",instructions:""}),_e=[{id:"majoneesit",name:"Majoneesit",icon:"\ud83e\udd44"},{id:"proteiinit",name:"Proteiinit",icon:"\ud83e\udd69"},{id:"kasvikset",name:"Kasvikset",icon:"\ud83e\udd57"},{id:"marinointi",name:"Marinointi & pikkel\xf6inti",icon:"\ud83e\udd52"},{id:"kastikkeet",name:"Kastikkeet",icon:"\ud83e\uddc2"},{id:"muut",name:"Muut",icon:"\ud83d\udd27"}],we=()=>{((e,t,n,r)=>{e.trim()&&!t.includes(e.trim())&&(n((t=>[...t,e.trim()])),r(""))})(T,i,d,E)},ke=(e,t,n)=>{u((r=>r.map((r=>r.id===e?c(c({},r),{},{[t]:n}):r))))},Ne=(e,t,n)=>{h((r=>r.map((r=>r.id===e?c(c({},r),{},{[t]:n}):r))))},Ce=(e,t,n)=>{h((r=>r.map((r=>r.id===e?c(c({},r),{},{recipe:r.recipe?c(c({},r.recipe),{},{[t]:n}):{ingredients:"",instructions:"",[t]:n}}):r))))},Se=(e,t,n)=>{const r=a.find((t=>t.id===e));if(null===r||void 0===r||!r.recipe)return;const i=document.getElementById("".concat(t,"-").concat(e));if(!i)return;const s=i.selectionStart,o=i.selectionEnd,l=r.recipe[t],c=l.substring(0,s),d=l.substring(s,o),u=l.substring(o);let h="";switch(n){case"bold":h=c+"**"+d+"**"+u;break;case"italic":h=c+"*"+d+"*"+u;break;case"bullet":h=c+"\n\u2022 "+u;break;case"number":h=c+"\n1. "+u;break;default:return}Ce(e,t,h)};return(0,D.jsxs)("div",{className:"space-y-6",children:[(0,D.jsxs)("div",{className:"bg-white rounded-xl shadow-sm mb-6 ".concat(p?"p-6":"p-2"),children:[(0,D.jsxs)("button",{onClick:()=>m(!p),className:"w-full flex items-center justify-between hover:text-gray-600 ".concat(p?"text-lg font-semibold text-gray-800 mb-4":"text-sm font-medium text-gray-700 py-1"),children:[(0,D.jsxs)("div",{className:"flex items-center",children:[(0,D.jsx)(f,{className:"mr-2 ".concat(p?"w-5 h-5":"w-4 h-4")}),"Role Management"]}),(0,D.jsx)("span",{className:"transition-transform ".concat(p?"text-xl rotate-180":"text-sm"),children:"\u25bc"})]}),p&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,D.jsx)("h4",{className:"font-medium text-gray-700 mb-3",children:"Add New Role"}),(0,D.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,D.jsx)("input",{type:"text",placeholder:"Role name",value:T,onChange:e=>E(e.target.value),onKeyPress:e=>"Enter"===e.key&&we(),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,D.jsx)("button",{onClick:we,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center",children:(0,D.jsx)($,{className:"w-4 h-4"})})]})]}),(0,D.jsx)("div",{className:"space-y-2",children:i.map((e=>(0,D.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,D.jsx)("span",{className:"font-medium text-gray-700",children:e}),(0,D.jsx)("button",{onClick:()=>((e,t,n)=>{const r=t.filter((t=>t.role===e));r.length>0?alert('Cannot remove role "'.concat(e,'" - ').concat(r.length," employee(s) are using it.")):window.confirm('Are you sure you want to remove the role "'.concat(e,'"?'))&&n((t=>t.filter((t=>t!==e))))})(e,t,d),className:"p-1 text-red-600 hover:text-red-800",title:"Remove role",children:(0,D.jsx)(G,{className:"w-4 h-4"})})]},e)))})]})]}),(0,D.jsxs)("div",{className:"bg-white rounded-xl shadow-sm mb-6 ".concat(g?"p-6":"p-2"),children:[(0,D.jsxs)("button",{onClick:()=>y(!g),className:"w-full flex items-center justify-between hover:text-gray-600 ".concat(g?"text-lg font-semibold text-gray-800 mb-4":"text-sm font-medium text-gray-700 py-1"),children:[(0,D.jsxs)("div",{className:"flex items-center",children:[(0,D.jsx)(b,{className:"mr-2 ".concat(g?"w-5 h-5":"w-4 h-4")}),"Store Management"]}),(0,D.jsx)("span",{className:"transition-transform ".concat(g?"text-xl rotate-180":"text-sm"),children:"\u25bc"})]}),g&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,D.jsx)("h4",{className:"font-medium text-gray-700 mb-3",children:"Add New Store Item"}),(0,D.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Name"}),(0,D.jsx)("input",{type:"text",placeholder:"e.g., Free Coffee",value:H,onChange:e=>V(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost (Points)"}),(0,D.jsx)("input",{type:"number",min:"1",placeholder:"10",value:Q,onChange:e=>ie(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,D.jsxs)("select",{value:se,onChange:e=>ae(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,D.jsx)("option",{value:"food",children:"Food & Drinks"}),(0,D.jsx)("option",{value:"break",children:"Time Off"}),(0,D.jsx)("option",{value:"reward",children:"Rewards"}),(0,D.jsx)("option",{value:"social",children:"Social"})]})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Icon"}),(0,D.jsx)("input",{type:"text",placeholder:"\ud83c\udf81",value:oe,onChange:e=>le(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,D.jsxs)("div",{className:"md:col-span-2",children:[(0,D.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,D.jsx)("input",{type:"text",placeholder:"e.g., Get a free coffee from the kitchen",value:K,onChange:e=>Y(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,D.jsx)("div",{className:"md:col-span-2",children:(0,D.jsxs)("button",{onClick:()=>{if(H.trim()&&K.trim()&&Q.trim()){const e={id:Math.max(...s.map((e=>e.id)),0)+1,name:H.trim(),description:K.trim(),cost:parseInt(Q)||10,category:se,icon:oe,available:!0};u((t=>[...t,e])),V(""),Y(""),ie(""),ae("food"),le("\ud83c\udf81")}},className:"w-full bg-purple-500 text-white py-2 px-4 rounded-lg hover:bg-purple-600 flex items-center justify-center",children:[(0,D.jsx)(X,{className:"w-4 h-4 mr-2"}),"Add Store Item"]})})]})]}),(0,D.jsxs)("div",{className:"space-y-3",children:[(0,D.jsx)("h4",{className:"font-medium text-gray-700",children:"Current Store Items"}),s.map((e=>(0,D.jsxs)("div",{className:"border rounded-lg p-4 bg-white",children:[(0,D.jsxs)("div",{className:"flex items-start justify-between",children:[(0,D.jsxs)("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Name"}),O===e.id?(0,D.jsx)("input",{type:"text",value:e.name,onChange:t=>ke(e.id,"name",t.target.value),className:"w-full px-2 py-1 border rounded text-sm"}):(0,D.jsxs)("div",{className:"font-medium text-gray-800 flex items-center",children:[(0,D.jsx)("span",{className:"text-lg mr-2",children:e.icon}),e.name]})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Cost"}),O===e.id?(0,D.jsx)("input",{type:"number",min:"1",value:e.cost,onChange:t=>ke(e.id,"cost",parseInt(t.target.value)||1),className:"w-full px-2 py-1 border rounded text-sm"}):(0,D.jsxs)("div",{className:"flex items-center",children:[(0,D.jsx)(M,{className:"w-3 h-3 text-purple-500 mr-1"}),(0,D.jsxs)("span",{className:"font-medium text-purple-600",children:[e.cost," pts"]})]})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Category"}),O===e.id?(0,D.jsxs)("select",{value:e.category,onChange:t=>ke(e.id,"category",t.target.value),className:"w-full px-2 py-1 border rounded text-sm",children:[(0,D.jsx)("option",{value:"food",children:"Food & Drinks"}),(0,D.jsx)("option",{value:"break",children:"Time Off"}),(0,D.jsx)("option",{value:"reward",children:"Rewards"}),(0,D.jsx)("option",{value:"social",children:"Social"})]}):(0,D.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("food"===e.category?"bg-orange-100 text-orange-700":"break"===e.category?"bg-blue-100 text-blue-700":"reward"===e.category?"bg-green-100 text-green-700":"bg-purple-100 text-purple-700"),children:e.category})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Status"}),(0,D.jsx)("button",{onClick:()=>ke(e.id,"available",!e.available),className:"px-2 py-1 rounded-full text-xs font-medium ".concat(e.available?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:e.available?"Available":"Unavailable"})]})]}),(0,D.jsxs)("div",{className:"flex gap-2 ml-4",children:[O===e.id?(0,D.jsx)("button",{onClick:()=>F(null),className:"p-1 text-green-600 hover:text-green-800",children:(0,D.jsx)(J,{className:"w-4 h-4"})}):(0,D.jsx)("button",{onClick:()=>F(e.id),className:"p-1 text-blue-600 hover:text-blue-800",children:(0,D.jsx)(Z,{className:"w-4 h-4"})}),(0,D.jsx)("button",{onClick:()=>{return t=e.id,void(window.confirm("Are you sure you want to remove this store item?")&&u((e=>e.filter((e=>e.id!==t)))));var t},className:"p-1 text-red-600 hover:text-red-800",children:(0,D.jsx)(G,{className:"w-4 h-4"})})]})]}),(0,D.jsxs)("div",{className:"mt-3",children:[(0,D.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Description"}),O===e.id?(0,D.jsx)("input",{type:"text",value:e.description,onChange:t=>ke(e.id,"description",t.target.value),className:"w-full px-2 py-1 border rounded text-sm"}):(0,D.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]}),O===e.id&&(0,D.jsxs)("div",{className:"mt-2",children:[(0,D.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Icon"}),(0,D.jsx)("input",{type:"text",value:e.icon,onChange:t=>ke(e.id,"icon",t.target.value),className:"w-20 px-2 py-1 border rounded text-sm",placeholder:"\ud83c\udf81"})]})]},e.id))),0===s.length&&(0,D.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No store items yet. Add your first item above!"})]})]})]}),(0,D.jsxs)("div",{className:"bg-white rounded-xl shadow-sm mb-6 ".concat(_?"p-6":"p-2"),children:[(0,D.jsxs)("button",{onClick:()=>w(!_),className:"w-full flex items-center justify-between hover:text-gray-600 ".concat(_?"text-lg font-semibold text-gray-800 mb-4":"text-sm font-medium text-gray-700 py-1"),children:[(0,D.jsxs)("div",{className:"flex items-center",children:[(0,D.jsx)(x,{className:"mr-2 ".concat(_?"w-5 h-5":"w-4 h-4")}),"Prep List Management"]}),(0,D.jsx)("span",{className:"transition-transform ".concat(_?"text-xl rotate-180":"text-sm"),children:"\u25bc"})]}),_&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,D.jsx)("h4",{className:"font-medium text-gray-700 mb-3",children:"Add New Prep Item"}),(0,D.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prep Name"}),(0,D.jsx)("input",{type:"text",placeholder:"e.g., Valkosipulimajoneesi",value:ce,onChange:e=>de(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,D.jsx)("select",{value:ue,onChange:e=>he(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500",children:_e.map((e=>(0,D.jsxs)("option",{value:e.id,children:[e.icon," ",e.name]},e.id)))})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estimated Time"}),(0,D.jsx)("input",{type:"text",placeholder:"e.g., 15 min",value:pe,onChange:e=>me(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Frequency (days)"}),(0,D.jsx)("input",{type:"number",min:"1",max:"30",placeholder:"3",value:fe,onChange:e=>ge(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"})]}),(0,D.jsx)("div",{className:"md:col-span-2",children:(0,D.jsxs)("label",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[(0,D.jsx)("input",{type:"checkbox",checked:ye,onChange:e=>ve(e.target.checked),className:"rounded border-gray-300 text-green-500 focus:ring-green-500"}),(0,D.jsx)("span",{children:"Include Recipe"})]})}),ye&&(0,D.jsxs)("div",{className:"md:col-span-2 space-y-4",children:[(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ingredients"}),(0,D.jsx)("textarea",{value:xe.ingredients,onChange:e=>be((t=>c(c({},t),{},{ingredients:e.target.value}))),placeholder:"\u2022 **1 cup** majoneesi\n\u2022 **3-4** valkosipulin kyntt\xe4",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 h-24 font-mono text-sm"})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instructions"}),(0,D.jsx)("textarea",{value:xe.instructions,onChange:e=>be((t=>c(c({},t),{},{instructions:e.target.value}))),placeholder:"1. **Sekoita**: Yhdist\xe4 majoneesi ja valkosipuli\n2. **Mausta**: Lis\xe4\xe4 sitruunamehu",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 h-24 font-mono text-sm"})]})]}),(0,D.jsx)("div",{className:"md:col-span-2",children:(0,D.jsxs)("button",{onClick:()=>{if(ce.trim()&&pe.trim()&&fe.trim()){const e={id:Math.max(...a.map((e=>e.id)),0)+1,name:ce.trim(),category:ue,estimatedTime:pe.trim(),isCustom:!0,hasRecipe:ye,frequency:parseInt(fe)||1,recipe:ye?xe:null};h((t=>[...t,e])),de(""),he("majoneesit"),me(""),ge(""),ve(!1),be({ingredients:"",instructions:""})}},className:"w-full bg-green-500 text-white py-2 px-4 rounded-lg hover:bg-green-600 flex items-center justify-center",children:[(0,D.jsx)(x,{className:"w-4 h-4 mr-2"}),"Add Prep Item"]})})]})]}),(0,D.jsxs)("div",{className:"space-y-3",children:[(0,D.jsxs)("h4",{className:"font-medium text-gray-700",children:["Current Prep Items (",a.length,")"]}),a.map((e=>{var t,n;const r=_e.find((t=>t.id===e.category));return(0,D.jsxs)("div",{className:"border rounded-lg p-4 bg-white",children:[(0,D.jsxs)("div",{className:"flex items-start justify-between",children:[(0,D.jsxs)("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Name"}),z===e.id?(0,D.jsx)("input",{type:"text",value:e.name,onChange:t=>Ne(e.id,"name",t.target.value),className:"w-full px-2 py-1 border rounded text-sm"}):(0,D.jsxs)("div",{className:"font-medium text-gray-800 flex items-center",children:[(0,D.jsx)("span",{className:"text-lg mr-2",children:null===r||void 0===r?void 0:r.icon}),e.name]})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Category"}),z===e.id?(0,D.jsx)("select",{value:e.category,onChange:t=>Ne(e.id,"category",t.target.value),className:"w-full px-2 py-1 border rounded text-sm",children:_e.map((e=>(0,D.jsx)("option",{value:e.id,children:e.name},e.id)))}):(0,D.jsx)("span",{className:"text-sm text-gray-600",children:null===r||void 0===r?void 0:r.name})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Time"}),z===e.id?(0,D.jsx)("input",{type:"text",value:e.estimatedTime,onChange:t=>Ne(e.id,"estimatedTime",t.target.value),className:"w-full px-2 py-1 border rounded text-sm"}):(0,D.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,D.jsx)(W,{className:"w-3 h-3 mr-1"}),e.estimatedTime]})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Frequency"}),z===e.id?(0,D.jsx)("input",{type:"number",min:"1",max:"30",value:e.frequency,onChange:t=>Ne(e.id,"frequency",parseInt(t.target.value)||1),className:"w-full px-2 py-1 border rounded text-sm"}):(0,D.jsxs)("span",{className:"text-sm text-gray-600",children:["Every ",e.frequency," days"]})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Recipe"}),(0,D.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,D.jsx)("button",{onClick:()=>Ne(e.id,"hasRecipe",!e.hasRecipe),className:"px-2 py-1 rounded-full text-xs font-medium ".concat(e.hasRecipe?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"),children:e.hasRecipe?"\ud83d\udcd6 Has Recipe":"No Recipe"}),e.hasRecipe&&(0,D.jsxs)("button",{onClick:()=>B(q===e.id?null:e.id),className:"px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-xs hover:bg-blue-200",children:[(0,D.jsx)(ee,{className:"w-3 h-3 inline mr-1"}),"Edit"]})]})]})]}),(0,D.jsxs)("div",{className:"flex gap-2 ml-4",children:[z===e.id?(0,D.jsx)("button",{onClick:()=>U(null),className:"p-1 text-green-600 hover:text-green-800",children:(0,D.jsx)(J,{className:"w-4 h-4"})}):(0,D.jsx)("button",{onClick:()=>U(e.id),className:"p-1 text-blue-600 hover:text-blue-800",children:(0,D.jsx)(Z,{className:"w-4 h-4"})}),(0,D.jsx)("button",{onClick:()=>{return t=e.id,void(window.confirm("Are you sure you want to remove this prep item?")&&h((e=>e.filter((e=>e.id!==t)))));var t},className:"p-1 text-red-600 hover:text-red-800",children:(0,D.jsx)(G,{className:"w-4 h-4"})})]})]}),q===e.id&&e.hasRecipe&&(0,D.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[(0,D.jsx)("h5",{className:"font-medium text-gray-700 mb-3",children:"Recipe Editor"}),(0,D.jsxs)("div",{className:"space-y-4",children:[(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ingredients"}),(0,D.jsxs)("div",{className:"mb-2 flex space-x-2",children:[(0,D.jsx)("button",{onClick:()=>Se(e.id,"ingredients","bold"),className:"px-2 py-1 bg-gray-100 rounded text-sm font-bold hover:bg-gray-200",children:"B"}),(0,D.jsx)("button",{onClick:()=>Se(e.id,"ingredients","italic"),className:"px-2 py-1 bg-gray-100 rounded text-sm italic hover:bg-gray-200",children:"I"}),(0,D.jsx)("button",{onClick:()=>Se(e.id,"ingredients","bullet"),className:"px-2 py-1 bg-gray-100 rounded text-sm hover:bg-gray-200",children:"\u2022"})]}),(0,D.jsx)("textarea",{id:"ingredients-".concat(e.id),value:(null===(t=e.recipe)||void 0===t?void 0:t.ingredients)||"",onChange:t=>Ce(e.id,"ingredients",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 h-24 font-mono text-sm",placeholder:"\u2022 **1 cup** majoneesi\n\u2022 **3-4** valkosipulin kyntt\xe4"})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instructions"}),(0,D.jsxs)("div",{className:"mb-2 flex space-x-2",children:[(0,D.jsx)("button",{onClick:()=>Se(e.id,"instructions","bold"),className:"px-2 py-1 bg-gray-100 rounded text-sm font-bold hover:bg-gray-200",children:"B"}),(0,D.jsx)("button",{onClick:()=>Se(e.id,"instructions","italic"),className:"px-2 py-1 bg-gray-100 rounded text-sm italic hover:bg-gray-200",children:"I"}),(0,D.jsx)("button",{onClick:()=>Se(e.id,"instructions","number"),className:"px-2 py-1 bg-gray-100 rounded text-sm hover:bg-gray-200",children:"1."})]}),(0,D.jsx)("textarea",{id:"instructions-".concat(e.id),value:(null===(n=e.recipe)||void 0===n?void 0:n.instructions)||"",onChange:t=>Ce(e.id,"instructions",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 h-24 font-mono text-sm",placeholder:"1. **Sekoita**: Yhdist\xe4 majoneesi ja valkosipuli\n2. **Mausta**: Lis\xe4\xe4 sitruunamehu"})]})]})]})]},e.id)})),0===a.length&&(0,D.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No prep items yet. Add your first prep item above!"})]})]})]}),(0,D.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,D.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,D.jsx)(N,{className:"w-5 h-5 mr-2"}),"Employee Management"]}),(0,D.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,D.jsx)("h4",{className:"font-medium text-gray-700 mb-3",children:"Add New Employee"}),(0,D.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,D.jsx)("input",{type:"text",placeholder:"Employee name",value:k,onChange:e=>C(e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,D.jsx)("select",{value:S,onChange:e=>j(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:i.map((e=>(0,D.jsx)("option",{value:e,children:e},e)))}),(0,D.jsx)("button",{onClick:()=>{((e,t,n,r,i,s)=>{if(e.trim()){const a={id:Math.max(...n.map((e=>e.id)))+1,name:e.trim(),mood:3,lastUpdated:"Just added",role:t,lastMoodDate:null,points:0};r((e=>[...e,a])),i(""),s("Cleaner")}})(k,S,t,o,C,j)},className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 flex items-center",children:(0,D.jsx)(te,{className:"w-4 h-4"})})]})]}),(0,D.jsx)("div",{className:"overflow-x-auto",children:(0,D.jsxs)("table",{className:"w-full border-collapse",children:[(0,D.jsx)("thead",{children:(0,D.jsxs)("tr",{className:"bg-gray-50",children:[(0,D.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Name"}),(0,D.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Role"}),(0,D.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Points"}),(0,D.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Mood"}),(0,D.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Last Updated"}),(0,D.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-center",children:"Actions"})]})}),(0,D.jsx)("tbody",{children:t.map((e=>(0,D.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,D.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:I===e.id?(0,D.jsx)("input",{type:"text",value:e.name,onChange:t=>ne(e.id,"name",t.target.value,o),className:"w-full px-2 py-1 border rounded"}):e.name}),(0,D.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:I===e.id?(0,D.jsx)("select",{value:e.role,onChange:t=>ne(e.id,"role",t.target.value,o),className:"w-full px-2 py-1 border rounded",children:i.map((e=>(0,D.jsx)("option",{value:e,children:e},e)))}):e.role}),(0,D.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:(0,D.jsxs)("div",{className:"flex items-center",children:[(0,D.jsx)(M,{className:"w-3 h-3 text-purple-500 mr-1"}),(0,D.jsx)("span",{className:"font-medium text-purple-600",children:e.points})]})}),(0,D.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:(0,D.jsxs)("div",{className:"flex items-center",children:[(0,D.jsx)("div",{className:"w-3 h-3 rounded-full mr-2 ".concat(P(e.mood))}),e.mood,"/5"]})}),(0,D.jsx)("td",{className:"border border-gray-200 px-4 py-2 text-sm text-gray-600",children:e.lastUpdated}),(0,D.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:(0,D.jsxs)("div",{className:"flex gap-2 justify-center",children:[I===e.id?(0,D.jsx)("button",{onClick:()=>R(null),className:"p-1 text-green-600 hover:text-green-800",children:(0,D.jsx)(J,{className:"w-4 h-4"})}):(0,D.jsx)("button",{onClick:()=>R(e.id),className:"p-1 text-blue-600 hover:text-blue-800",children:(0,D.jsx)(Z,{className:"w-4 h-4"})}),(0,D.jsx)("button",{onClick:()=>((e,t)=>{window.confirm("Are you sure you want to remove this employee?")&&t((t=>t.filter((t=>t.id!==e))))})(e.id,o),className:"p-1 text-red-600 hover:text-red-800",children:(0,D.jsx)(G,{className:"w-4 h-4"})})]})})]},e.id)))})]})})]}),(0,D.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,D.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,D.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,D.jsx)(v,{className:"w-5 h-5 mr-2"}),"Task Management"]}),(0,D.jsxs)("button",{onClick:()=>{((e,t,n)=>{const r={id:Math.max(...e.map((e=>e.id)))+1,task:"New Task",location:"Location",priority:"medium",estimatedTime:"30 min",points:5};t((e=>[...e,r])),n(r.id)})(n,l,L)},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center",children:[(0,D.jsx)($,{className:"w-4 h-4 mr-2"}),"Add Task"]})]}),(0,D.jsx)("div",{className:"overflow-x-auto",children:(0,D.jsxs)("table",{className:"w-full border-collapse",children:[(0,D.jsx)("thead",{children:(0,D.jsxs)("tr",{className:"bg-gray-50",children:[(0,D.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Task"}),(0,D.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Location"}),(0,D.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Priority"}),(0,D.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Points"}),(0,D.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Est. Time"}),(0,D.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-center",children:"Actions"})]})}),(0,D.jsx)("tbody",{children:n.map((e=>(0,D.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,D.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:A===e.id?(0,D.jsx)("input",{type:"text",value:e.task,onChange:t=>re(e.id,"task",t.target.value,l),className:"w-full px-2 py-1 border rounded"}):e.task}),(0,D.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:A===e.id?(0,D.jsx)("input",{type:"text",value:e.location,onChange:t=>re(e.id,"location",t.target.value,l),className:"w-full px-2 py-1 border rounded"}):e.location}),(0,D.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:A===e.id?(0,D.jsxs)("select",{value:e.priority,onChange:t=>re(e.id,"priority",t.target.value,l),className:"w-full px-2 py-1 border rounded",children:[(0,D.jsx)("option",{value:"low",children:"Low"}),(0,D.jsx)("option",{value:"medium",children:"Medium"}),(0,D.jsx)("option",{value:"high",children:"High"})]}):(0,D.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("high"===e.priority?"bg-red-100 text-red-700":"medium"===e.priority?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"),children:e.priority})}),(0,D.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:A===e.id?(0,D.jsx)("input",{type:"number",min:"1",max:"100",value:e.points,onChange:t=>re(e.id,"points",t.target.value,l),className:"w-full px-2 py-1 border rounded"}):(0,D.jsxs)("div",{className:"flex items-center",children:[(0,D.jsx)(M,{className:"w-3 h-3 text-purple-500 mr-1"}),(0,D.jsx)("span",{className:"font-medium text-purple-600",children:e.points})]})}),(0,D.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:A===e.id?(0,D.jsx)("input",{type:"text",value:e.estimatedTime,onChange:t=>re(e.id,"estimatedTime",t.target.value,l),className:"w-full px-2 py-1 border rounded"}):e.estimatedTime}),(0,D.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:(0,D.jsxs)("div",{className:"flex gap-2 justify-center",children:[A===e.id?(0,D.jsx)("button",{onClick:()=>L(null),className:"p-1 text-green-600 hover:text-green-800",children:(0,D.jsx)(J,{className:"w-4 h-4"})}):(0,D.jsx)("button",{onClick:()=>L(e.id),className:"p-1 text-blue-600 hover:text-blue-800",children:(0,D.jsx)(Z,{className:"w-4 h-4"})}),(0,D.jsx)("button",{onClick:()=>((e,t)=>{window.confirm("Are you sure you want to remove this task?")&&t((t=>t.filter((t=>t.id!==e))))})(e.id,l),className:"p-1 text-red-600 hover:text-red-800",children:(0,D.jsx)(G,{className:"w-4 h-4"})})]})})]},e.id)))})]})})]})]})},se=h("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),ae=h("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),oe=e=>{var t,n,r,i;let{selectedDate:s,setSelectedDate:a,dailyData:o,employees:l,connectionStatus:c}=e;const d=o[s];return(0,D.jsxs)("div",{className:"space-y-6",children:[(0,D.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,D.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,D.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,D.jsx)(se,{className:"w-5 h-5 mr-2"}),"Daily Reports (Firebase Storage)"]}),(0,D.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,D.jsx)("div",{className:"w-2 h-2 rounded-full ".concat("connected"===c?"bg-green-500":"bg-red-500")}),(0,D.jsx)("span",{className:"text-xs text-gray-600",children:"connected"===c?"Live Data":"Offline"}),(0,D.jsx)("input",{type:"date",value:s,onChange:e=>a(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"}),(0,D.jsxs)("button",{className:"px-3 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 flex items-center",children:[(0,D.jsx)(ae,{className:"w-4 h-4 mr-1"}),"Export"]})]})]}),d?(0,D.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,D.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[(0,D.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:(null===(t=d.completedTasks)||void 0===t?void 0:t.length)||0}),(0,D.jsx)("div",{className:"text-sm text-blue-700",children:"Tasks Completed"})]}),(0,D.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[(0,D.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[d.completionRate||0,"%"]}),(0,D.jsx)("div",{className:"text-sm text-green-700",children:"Completion Rate"})]}),(0,D.jsxs)("div",{className:"bg-orange-50 rounded-lg p-4 text-center",children:[(0,D.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:(null===(n=d.employeeMoods)||void 0===n?void 0:n.length)||0}),(0,D.jsx)("div",{className:"text-sm text-orange-700",children:"Mood Updates"})]})]}):(0,D.jsxs)("div",{className:"text-center py-8 text-gray-500",children:["No data available for ",s]})]}),(null===d||void 0===d?void 0:d.completedTasks)&&(0,D.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,D.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Task Completions"}),(0,D.jsx)("div",{className:"overflow-x-auto",children:(0,D.jsxs)("table",{className:"w-full border-collapse",children:[(0,D.jsx)("thead",{children:(0,D.jsxs)("tr",{className:"bg-gray-50",children:[(0,D.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Time"}),(0,D.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Task"}),(0,D.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Employee"}),(0,D.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Status"})]})}),(0,D.jsx)("tbody",{children:d.completedTasks.map(((e,t)=>{const n=l.find((t=>t.id===e.employeeId));return(0,D.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,D.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:e.completedAt}),(0,D.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:e.taskName}),(0,D.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:(null===n||void 0===n?void 0:n.name)||"Unknown"}),(0,D.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:(0,D.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs",children:"Completed"})})]},t)}))})]})})]}),(null===d||void 0===d?void 0:d.employeeMoods)&&(0,D.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,D.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Mood Updates"}),(0,D.jsx)("div",{className:"overflow-x-auto",children:(0,D.jsxs)("table",{className:"w-full border-collapse",children:[(0,D.jsx)("thead",{children:(0,D.jsxs)("tr",{className:"bg-gray-50",children:[(0,D.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Time"}),(0,D.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Employee"}),(0,D.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Mood"}),(0,D.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Rating"})]})}),(0,D.jsx)("tbody",{children:d.employeeMoods.map(((e,t)=>{const n=l.find((t=>t.id===e.employeeId));return(0,D.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,D.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:e.updatedAt}),(0,D.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:(null===n||void 0===n?void 0:n.name)||"Unknown"}),(0,D.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:(0,D.jsxs)("div",{className:"flex items-center",children:[(0,D.jsx)("span",{className:"text-lg mr-2",children:S[e.mood-1]}),j[e.mood-1]]})}),(0,D.jsxs)("td",{className:"border border-gray-200 px-4 py-2",children:[e.mood,"/5"]})]},t)}))})]})})]}),(0,D.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,D.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"30-Day Overview"}),(0,D.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,D.jsx)("div",{className:"text-sm font-medium text-gray-600 mb-1",children:(new Date).toLocaleDateString("en-US",{month:"long",year:"numeric"})}),(0,D.jsxs)("div",{className:"grid grid-cols-7 gap-1",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((e=>(0,D.jsx)("div",{className:"text-xs font-medium text-gray-500 text-center",children:e},e))),(()=>{const e=new Date,t=[],n=new Date(e.getFullYear(),e.getMonth(),1);for(let i=0;i<n.getDay();i++)t.push((0,D.jsx)("div",{className:"p-2"},"empty-".concat(i)));const r=new Date(e.getFullYear(),e.getMonth()+1,0).getDate();for(let i=1;i<=r;i++){const n=new Date(e.getFullYear(),e.getMonth(),i),r=I(n),l=o[r]||{},c=(null===l||void 0===l?void 0:l.completionRate)||0,d=Math.floor((e.getTime()-n.getTime())/864e5);d>=0&&d<30?t.push((0,D.jsx)("div",{className:"p-2 rounded text-xs cursor-pointer transition-colors ".concat(r===s?"bg-purple-500 text-white":c>=80?"bg-green-100 text-green-700 hover:bg-green-200":c>=50?"bg-yellow-100 text-yellow-700 hover:bg-yellow-200":c>0?"bg-red-100 text-red-700 hover:bg-red-200":"bg-gray-100 text-gray-500 hover:bg-gray-200"),onClick:()=>a(r),title:"".concat(n.toLocaleDateString("en-US",{month:"short"})," ").concat(n.getDate(),": ").concat(c,"% completion"),children:(0,D.jsxs)("div",{className:"flex items-center justify-between",children:[(0,D.jsx)("span",{className:"font-medium",children:n.getDate()}),(0,D.jsxs)("span",{children:[c,"%"]})]})},r)):t.push((0,D.jsx)("div",{className:"p-2 rounded text-xs text-gray-300",children:(0,D.jsxs)("div",{className:"flex items-center justify-between",children:[(0,D.jsx)("span",{children:n.getDate()}),(0,D.jsx)("span",{children:"-"})]})},"disabled-".concat(i)))}return t})()]})]}),(0,D.jsxs)("div",{className:"mt-4 flex justify-center space-x-4 text-xs",children:[(0,D.jsxs)("div",{className:"flex items-center",children:[(0,D.jsx)("div",{className:"w-3 h-3 bg-green-100 rounded mr-1"}),"80%+ completion"]}),(0,D.jsxs)("div",{className:"flex items-center",children:[(0,D.jsx)("div",{className:"w-3 h-3 bg-yellow-100 rounded mr-1"}),"50-79% completion"]}),(0,D.jsxs)("div",{className:"flex items-center",children:[(0,D.jsx)("div",{className:"w-3 h-3 bg-red-100 rounded mr-1"}),"Below 50%"]})]})]}),d&&(0,D.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,D.jsxs)("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:["Daily Summary - ",new Date(s).toLocaleDateString()]}),(0,D.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,D.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3 text-center",children:[(0,D.jsx)("div",{className:"text-xl font-bold text-blue-600",children:(null===(r=d.completedTasks)||void 0===r?void 0:r.length)||0}),(0,D.jsx)("div",{className:"text-sm text-blue-700",children:"Tasks Done"})]}),(0,D.jsxs)("div",{className:"bg-green-50 rounded-lg p-3 text-center",children:[(0,D.jsxs)("div",{className:"text-xl font-bold text-green-600",children:[d.completionRate||0,"%"]}),(0,D.jsx)("div",{className:"text-sm text-green-700",children:"Completion"})]}),(0,D.jsxs)("div",{className:"bg-purple-50 rounded-lg p-3 text-center",children:[(0,D.jsx)("div",{className:"text-xl font-bold text-purple-600",children:(null===(i=d.employeeMoods)||void 0===i?void 0:i.length)||0}),(0,D.jsx)("div",{className:"text-sm text-purple-700",children:"Mood Updates"})]})]}),(0,D.jsx)("div",{className:"overflow-x-auto",children:(0,D.jsxs)("table",{className:"w-full border-collapse border border-gray-200",children:[(0,D.jsx)("thead",{children:(0,D.jsxs)("tr",{className:"bg-gray-50",children:[(0,D.jsx)("th",{className:"border border-gray-200 px-3 py-2 text-left text-sm font-medium",children:"Time"}),(0,D.jsx)("th",{className:"border border-gray-200 px-3 py-2 text-left text-sm font-medium",children:"Employee"}),(0,D.jsx)("th",{className:"border border-gray-200 px-3 py-2 text-left text-sm font-medium",children:"Action"}),(0,D.jsx)("th",{className:"border border-gray-200 px-3 py-2 text-left text-sm font-medium",children:"Details"})]})}),(0,D.jsxs)("tbody",{children:[(d.completedTasks||[]).map(((e,t)=>{const n=l.find((t=>t.id===e.employeeId));return(0,D.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,D.jsx)("td",{className:"border border-gray-200 px-3 py-2 text-sm",children:e.completedAt}),(0,D.jsx)("td",{className:"border border-gray-200 px-3 py-2 text-sm font-medium",children:(null===n||void 0===n?void 0:n.name)||"Unknown"}),(0,D.jsx)("td",{className:"border border-gray-200 px-3 py-2",children:(0,D.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs",children:"\u2713 Task Completed"})}),(0,D.jsx)("td",{className:"border border-gray-200 px-3 py-2 text-sm",children:e.taskName})]},"task-".concat(t))})),(d.employeeMoods||[]).map(((e,t)=>{const n=l.find((t=>t.id===e.employeeId));return(0,D.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,D.jsx)("td",{className:"border border-gray-200 px-3 py-2 text-sm",children:e.updatedAt}),(0,D.jsx)("td",{className:"border border-gray-200 px-3 py-2 text-sm font-medium",children:(null===n||void 0===n?void 0:n.name)||"Unknown"}),(0,D.jsx)("td",{className:"border border-gray-200 px-3 py-2",children:(0,D.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-xs",children:"\ud83d\ude0a Mood Update"})}),(0,D.jsx)("td",{className:"border border-gray-200 px-3 py-2 text-sm",children:(0,D.jsxs)("div",{className:"flex items-center",children:[(0,D.jsx)("span",{className:"text-lg mr-2",children:S[e.mood-1]}),j[e.mood-1]," (",e.mood,"/5)"]})})]},"mood-".concat(t))})),(!d.completedTasks||0===d.completedTasks.length)&&(!d.employeeMoods||0===d.employeeMoods.length)&&(0,D.jsx)("tr",{children:(0,D.jsx)("td",{colSpan:4,className:"border border-gray-200 px-3 py-8 text-center text-gray-500",children:"No activity recorded for this date"})})]})]})})]})]})},le=h("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),ce=[{id:"all",name:"All Items",icon:"\ud83c\udf7d\ufe0f"},{id:"majoneesit",name:"Majoneesit",icon:"\ud83e\udd44"},{id:"proteiinit",name:"Proteiinit",icon:"\ud83e\udd69"},{id:"kasvikset",name:"Kasvikset",icon:"\ud83e\udd57"},{id:"marinointi",name:"Marinointi & pikkel\xf6inti",icon:"\ud83e\udd52"},{id:"kastikkeet",name:"Kastikkeet",icon:"\ud83e\uddc2"},{id:"muut",name:"Muut",icon:"\ud83d\udd27"}],de=[{id:"morning",name:"Morning (6-10 AM)",icon:"\ud83c\udf05"},{id:"midday",name:"Mid-day (10 AM-2 PM)",icon:"\u2600\ufe0f"},{id:"afternoon",name:"Afternoon (2-6 PM)",icon:"\ud83c\udf24\ufe0f"},{id:"evening",name:"Evening (6-10 PM)",icon:"\ud83c\udf06"}],ue=[{id:"low",name:"Low",color:"bg-green-100 text-green-700",icon:"\ud83d\udfe2"},{id:"medium",name:"Medium",color:"bg-yellow-100 text-yellow-700",icon:"\ud83d\udfe1"},{id:"high",name:"High",color:"bg-red-100 text-red-700",icon:"\ud83d\udd34"}],he=e=>{const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(r)},pe=e=>e.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/\n/g,"<br/>"),me=(e,t)=>"".concat(he(e),"-").concat(t),fe=()=>Date.now()+Math.random(),ge=h("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),ye=e=>{let{scheduledPreps:t,onToggleCompletion:n,onShowRecipe:i}=e;const[s,a]=(0,r.useState)(new Set),o=he(new Date),l=t.filter((e=>e.scheduledDate===o));r.useEffect((()=>{console.log("\ud83d\udd0d TodayView Debug Info:",{todayDateString:o,totalScheduledPreps:t.length,todayScheduledPreps:l.length,allScheduledDates:Array.from(new Set(t.map((e=>e.scheduledDate)))).sort(),sampleTodayPreps:l.slice(0,3).map((e=>({id:e.id,name:e.name,scheduledDate:e.scheduledDate,completed:e.completed})))})}),[o,t.length,l.length]);const c=l.filter((e=>e.completed)).length,d=l.length,u=e=>{var t;const r=ue.find((t=>t.id===e.priority)),o=s.has(e.id);return(0,D.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg transition-all ".concat(o?"bg-blue-50 border-blue-200":"hover:bg-gray-50"),children:[(0,D.jsxs)("div",{className:"flex items-center space-x-3 select-none",children:[(0,D.jsx)("button",{onClick:t=>{t.stopPropagation(),(async e=>{if(s.has(e))console.log("\u23f3 Completion toggle already in progress for prep:",e);else{a((t=>new Set(t).add(e)));try{console.log("\ud83d\udd04 TodayView: Toggling completion for prep:",e),await n(e),console.log("\u2705 TodayView: Completion toggle finished for prep:",e)}catch(ur){console.error("\u274c TodayView: Completion toggle failed for prep:",e,ur)}finally{a((t=>{const n=new Set(t);return n.delete(e),n}))}}})(e.id)},disabled:o,className:"w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ".concat(e.completed?"bg-green-500 border-green-500":o?"border-blue-400 bg-blue-50":"border-gray-300 hover:border-green-500"," ").concat(o?"cursor-wait":"cursor-pointer"," disabled:cursor-wait"),title:o?"Saving...":e.completed?"Mark as incomplete":"Mark as complete",children:o?(0,D.jsx)(ge,{className:"w-4 h-4 text-blue-500 animate-spin"}):e.completed?(0,D.jsx)(g,{className:"w-4 h-4 text-white"}):null}),(0,D.jsxs)("div",{className:"flex-1",children:[(0,D.jsxs)("div",{className:"font-medium flex items-center space-x-2 transition-all ".concat(e.completed?"line-through text-gray-500":"text-gray-800"),children:[(0,D.jsx)("span",{children:e.name}),e.hasRecipe&&e.recipe&&(0,D.jsx)("button",{onClick:()=>i(e.recipe,e.name),className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full hover:bg-green-200 transition-colors",children:"\ud83d\udcd6 Recipe"}),o&&(0,D.jsx)("span",{className:"text-xs text-blue-600 bg-blue-100 px-2 py-0.5 rounded-full",children:"Saving..."})]}),(0,D.jsxs)("div",{className:"text-sm text-gray-600",children:[e.estimatedTime," \u2022 ",e.category,e.timeSlot&&(0,D.jsxs)(D.Fragment,{children:[" "," \u2022 ",(null===(t=de.find((t=>t.id===e.timeSlot)))||void 0===t?void 0:t.name)||e.timeSlot]})]})]})]}),(0,D.jsx)("div",{className:"flex items-center space-x-2",children:(0,D.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat((null===r||void 0===r?void 0:r.color)||"bg-gray-100 text-gray-700"),children:(null===r||void 0===r?void 0:r.name)||"Medium"})})]},e.id)};return(0,D.jsxs)("div",{className:"space-y-6",children:[(0,D.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,D.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Today's Progress"}),(0,D.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,D.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[(0,D.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:d}),(0,D.jsx)("div",{className:"text-sm text-blue-700",children:"Total Preps"})]}),(0,D.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[(0,D.jsx)("div",{className:"text-2xl font-bold text-green-600",children:c}),(0,D.jsx)("div",{className:"text-sm text-green-700",children:"Completed"})]}),(0,D.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[(0,D.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[d>0?Math.round(c/d*100):0,"%"]}),(0,D.jsx)("div",{className:"text-sm text-purple-700",children:"Complete"})]})]}),d>0&&(0,D.jsxs)("div",{className:"mt-4",children:[(0,D.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[(0,D.jsx)("span",{children:"Progress"}),(0,D.jsxs)("span",{children:[c," of ",d," tasks"]})]}),(0,D.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,D.jsx)("div",{className:"bg-gradient-to-r from-green-400 to-green-600 h-2 rounded-full transition-all duration-500",style:{width:"".concat(d>0?c/d*100:0,"%")}})})]})]}),(0,D.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,D.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,D.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Today's Prep Tasks"}),s.size>0&&(0,D.jsxs)("div",{className:"flex items-center text-blue-600 text-sm",children:[(0,D.jsx)(ge,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving ",s.size," change",1!==s.size?"s":"","..."]})]}),0===l.length?(0,D.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,D.jsx)(x,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),(0,D.jsx)("p",{className:"text-lg mb-2",children:"No prep tasks scheduled for today"}),(0,D.jsx)("p",{className:"text-sm",children:'Use the "Plan Preps" tab to schedule tasks.'})]}):(0,D.jsxs)("div",{className:"space-y-4",children:[de.map((e=>{const t=l.filter((t=>t.timeSlot===e.id));if(0===t.length)return null;const n=t.filter((e=>e.completed)).length;return(0,D.jsxs)("div",{children:[(0,D.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,D.jsxs)("h4",{className:"font-medium text-gray-700 flex items-center",children:[(0,D.jsx)("span",{className:"mr-2",children:e.icon}),e.name]}),(0,D.jsxs)("span",{className:"text-sm text-gray-500",children:[n,"/",t.length," completed"]})]}),(0,D.jsx)("div",{className:"space-y-3",children:t.map(u)})]},e.id)})),(()=>{const e=l.filter((e=>""===e.timeSlot));if(0===e.length)return null;const t=e.filter((e=>e.completed)).length;return(0,D.jsxs)("div",{children:[(0,D.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,D.jsx)("h4",{className:"font-medium text-gray-700 flex items-center",children:"\ud83d\udd50 Anytime"}),(0,D.jsxs)("span",{className:"text-sm text-gray-500",children:[t,"/",e.length," completed"]})]}),(0,D.jsx)("div",{className:"space-y-3",children:e.map(u)})]})})()]})]}),d>0&&c===d&&(0,D.jsxs)("div",{className:"bg-gradient-to-r from-green-400 to-green-600 rounded-xl p-6 text-white text-center",children:[(0,D.jsx)("div",{className:"text-3xl mb-2",children:"\ud83c\udf89"}),(0,D.jsx)("h3",{className:"text-xl font-bold mb-1",children:"All Done!"}),(0,D.jsxs)("p",{className:"text-green-100",children:["Great job! You've completed all ",d," prep tasks for today."]})]})]})},ve=e=>{let{scheduledPreps:t,currentDate:n,setCurrentDate:i,selectedDate:s,setSelectedDate:a,setActiveView:o,onToggleCompletion:l,onShowRecipe:c}=e;const[d,u]=(0,r.useState)(null),h=()=>{const e=[];for(let t=0;t<7;t++){const r=new Date(n);r.setDate(n.getDate()+t),e.push(r)}return e};return(0,D.jsxs)("div",{className:"space-y-6",children:[(0,D.jsx)("style",{dangerouslySetInnerHTML:{__html:'\n          .priority-glow {\n            position: relative;\n            z-index: 0;\n            font-weight: 600;\n            border-radius: 0.25rem;\n            padding: 0.125rem 0.25rem;\n          }\n          .priority-glow::before {\n            content: "";\n            position: absolute;\n            top: 50%;\n            left: 50%;\n            width: 110%;\n            height: 2em;\n            transform: translate(-50%, -50%);\n            border-radius: 0.375rem;\n            filter: blur(6px);\n            z-index: -1;\n            opacity: 0.3;\n          }\n          .priority-low {\n            color: #047857;\n          }\n          .priority-low::before {\n            box-shadow: 0 0 8px 4px rgba(5, 150, 105, 0.4);\n          }\n          .priority-medium {\n            color: #92400e;\n          }\n          .priority-medium::before {\n            box-shadow: 0 0 8px 4px rgba(202, 138, 4, 0.4);\n          }\n          .priority-high {\n            color: #b91c1c;\n          }\n          .priority-high::before {\n            box-shadow: 0 0 8px 4px rgba(185, 28, 28, 0.4);\n          }\n        '}}),(0,D.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,D.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,D.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Week Overview"}),(0,D.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,D.jsx)("button",{onClick:()=>{const e=new Date(n);e.setDate(e.getDate()-7),i(e)},className:"px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm",children:"\u2190 Previous Week"}),(0,D.jsx)("button",{onClick:()=>{const e=new Date(n);e.setDate(e.getDate()+7),i(e)},className:"px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm",children:"Next Week \u2192"})]})]}),(0,D.jsx)("div",{className:"space-y-3",children:h().map(((e,n)=>{const r=t.filter((t=>t.scheduledDate===he(e))),i=r.filter((e=>e.completed)).length,h=he(e)===he(new Date),p=he(e)===he(s),m=d===he(e);return(0,D.jsxs)("div",{className:"border rounded-xl transition-all duration-500 ease-in-out overflow-hidden ".concat(m?"bg-gray-50":"bg-white hover:bg-gray-50"," ").concat(h?"ring-2 ring-blue-500":p&&!m?"ring-2 ring-purple-500":m?"ring-2 ring-green-500 shadow-lg":"hover:shadow-md"),children:[(0,D.jsxs)("div",{className:"flex items-center cursor-pointer transition-all duration-300 ".concat(m?"p-4 bg-white border-b":"p-4"),onClick:()=>{u(m?null:he(e))},children:[(0,D.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,D.jsxs)("div",{className:"text-center",children:[(0,D.jsx)("div",{className:"font-medium text-gray-800 text-sm",children:e.toLocaleDateString("en-US",{weekday:"short"})}),(0,D.jsx)("div",{className:"text-2xl font-bold ".concat(h?"text-blue-600":p&&!m?"text-purple-600":m?"text-green-600":"text-gray-600"),children:e.getDate()}),h&&(0,D.jsx)("div",{className:"text-xs text-blue-600 font-medium",children:"Today"}),p&&!h&&!m&&(0,D.jsx)("div",{className:"text-xs text-purple-600 font-medium",children:"Selected"}),m&&(0,D.jsx)("div",{className:"text-xs text-green-600 font-medium",children:"Expanded"})]}),(0,D.jsxs)("div",{className:"flex-1",children:[(0,D.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,D.jsxs)("div",{className:"text-sm text-gray-600",children:[i,"/",r.length," tasks"]}),r.length>0&&(0,D.jsx)("div",{className:"flex-1 max-w-32",children:(0,D.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,D.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(i===r.length?"bg-green-500":i>0?"bg-yellow-500":"bg-gray-300"),style:{width:"".concat(i/r.length*100,"%")}})})})]}),!m&&r.length>0&&(0,D.jsxs)("div",{className:"text-xs mt-1",children:[r.slice(0,2).map(((e,t)=>(0,D.jsxs)("span",{className:"priority-glow priority-".concat(e.priority," ").concat(t>0?"ml-1":""),children:[e.name,t<Math.min(r.length,2)-1&&", "]},e.id))),r.length>2&&(0,D.jsxs)("span",{className:"text-gray-500 ml-1",children:["+",r.length-2," more"]})]}),!m&&0===r.length&&(0,D.jsx)("div",{className:"text-xs text-gray-400 mt-1 italic",children:"No preps scheduled"})]})]}),(0,D.jsx)("div",{className:"transform transition-transform duration-300 ".concat(m?"rotate-180":"rotate-0"),children:(0,D.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,D.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),(0,D.jsx)("div",{className:"transition-all duration-500 ease-in-out overflow-hidden ".concat(m?"max-h-96 opacity-100":"max-h-0 opacity-0"),children:m&&(0,D.jsx)("div",{className:"p-4 space-y-3 overflow-y-auto max-h-80",children:0===r.length?(0,D.jsxs)("div",{className:"text-center py-8",children:[(0,D.jsx)("div",{className:"text-gray-400 text-sm",children:"No prep tasks scheduled"}),(0,D.jsx)("button",{onClick:t=>{t.stopPropagation(),a(e),o("plan")},className:"mt-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm",children:"Plan Preps for This Day"})]}):(0,D.jsxs)(D.Fragment,{children:[(()=>{const e=r.filter((e=>""===e.timeSlot)),t=de.map((e=>({slot:e,preps:r.filter((t=>t.timeSlot===e.id))}))).filter((e=>e.preps.length>0));return(0,D.jsxs)(D.Fragment,{children:[t.map((e=>{let{slot:t,preps:n}=e;return(0,D.jsxs)("div",{children:[(0,D.jsxs)("h5",{className:"font-medium text-gray-700 text-sm mb-2 flex items-center",children:[(0,D.jsx)("span",{className:"mr-2",children:t.icon}),t.name]}),(0,D.jsx)("div",{className:"space-y-2",children:n.map((e=>{const t=ue.find((t=>t.id===e.priority));return(0,D.jsx)("div",{className:"p-3 rounded-lg border-l-4 transition-colors ".concat(e.completed?"bg-green-50 border-green-500":"bg-white border-gray-300 hover:bg-gray-50"),children:(0,D.jsxs)("div",{className:"flex items-center justify-between",children:[(0,D.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,D.jsx)("button",{onClick:t=>{t.stopPropagation(),l(e.id)},className:"w-5 h-5 rounded-full border-2 flex items-center justify-center transition-colors ".concat(e.completed?"bg-green-500 border-green-500":"border-gray-300 hover:border-green-500"),children:e.completed&&(0,D.jsx)(g,{className:"w-3 h-3 text-white"})}),(0,D.jsxs)("div",{children:[(0,D.jsxs)("div",{className:"font-medium text-sm flex items-center space-x-2 priority-glow priority-".concat(e.priority," ").concat(e.completed?"line-through opacity-60":""),children:[(0,D.jsx)("span",{children:e.name}),e.hasRecipe&&(0,D.jsx)("button",{onClick:t=>{t.stopPropagation(),e.recipe&&c(e.recipe,e.name)},className:"text-xs bg-green-100 text-green-700 px-1.5 py-0.5 rounded-full hover:bg-green-200 transition-colors",children:"\ud83d\udcd6"})]}),(0,D.jsxs)("div",{className:"text-xs text-gray-500",children:[e.estimatedTime," \u2022 ",e.category]})]})]}),(0,D.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat((null===t||void 0===t?void 0:t.color)||"bg-gray-100 text-gray-700"),children:(null===t||void 0===t?void 0:t.name)||"Medium"})]})},e.id)}))})]},t.id)})),e.length>0&&(0,D.jsxs)("div",{children:[(0,D.jsx)("h5",{className:"font-medium text-gray-700 text-sm mb-2 flex items-center",children:"\ud83d\udd50 Anytime"}),(0,D.jsx)("div",{className:"space-y-2",children:e.map((e=>{const t=ue.find((t=>t.id===e.priority));return(0,D.jsx)("div",{className:"p-3 rounded-lg border-l-4 transition-colors ".concat(e.completed?"bg-green-50 border-green-500":"bg-white border-gray-300 hover:bg-gray-50"),children:(0,D.jsxs)("div",{className:"flex items-center justify-between",children:[(0,D.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,D.jsx)("button",{onClick:t=>{t.stopPropagation(),l(e.id)},className:"w-5 h-5 rounded-full border-2 flex items-center justify-center transition-colors ".concat(e.completed?"bg-green-500 border-green-500":"border-gray-300 hover:border-green-500"),children:e.completed&&(0,D.jsx)(g,{className:"w-3 h-3 text-white"})}),(0,D.jsxs)("div",{children:[(0,D.jsxs)("div",{className:"font-medium text-sm flex items-center space-x-2 priority-glow priority-".concat(e.priority," ").concat(e.completed?"line-through opacity-60":""),children:[(0,D.jsx)("span",{children:e.name}),e.hasRecipe&&(0,D.jsx)("button",{onClick:t=>{t.stopPropagation(),e.recipe&&c(e.recipe,e.name)},className:"text-xs bg-green-100 text-green-700 px-1.5 py-0.5 rounded-full hover:bg-green-200 transition-colors",children:"\ud83d\udcd6"})]}),(0,D.jsxs)("div",{className:"text-xs text-gray-500",children:[e.estimatedTime," \u2022 ",e.category]})]})]}),(0,D.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat((null===t||void 0===t?void 0:t.color)||"bg-gray-100 text-gray-700"),children:(null===t||void 0===t?void 0:t.name)||"Medium"})]})},e.id)}))})]})]})})(),(0,D.jsxs)("div",{className:"flex gap-2 pt-2 border-t",children:[(0,D.jsx)("button",{onClick:t=>{t.stopPropagation(),a(e),o("plan")},className:"flex-1 px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm",children:"Edit Preps"}),(0,D.jsx)("button",{onClick:e=>{e.stopPropagation(),u(null)},className:"px-3 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-sm",children:"Collapse"})]})]})})})]},n)}))}),(0,D.jsxs)("div",{className:"mt-6 grid grid-cols-3 gap-4",children:[(0,D.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3 text-center",children:[(0,D.jsx)("div",{className:"text-xl font-bold text-blue-600",children:h().reduce(((e,n)=>e+t.filter((e=>e.scheduledDate===he(n))).length),0)}),(0,D.jsx)("div",{className:"text-sm text-blue-700",children:"Total Tasks This Week"})]}),(0,D.jsxs)("div",{className:"bg-green-50 rounded-lg p-3 text-center",children:[(0,D.jsx)("div",{className:"text-xl font-bold text-green-600",children:h().reduce(((e,n)=>e+t.filter((e=>e.scheduledDate===he(n)&&e.completed)).length),0)}),(0,D.jsx)("div",{className:"text-sm text-green-700",children:"Completed"})]}),(0,D.jsxs)("div",{className:"bg-purple-50 rounded-lg p-3 text-center",children:[(0,D.jsxs)("div",{className:"text-xl font-bold text-purple-600",children:[(()=>{const e=h().reduce(((e,n)=>e+t.filter((e=>e.scheduledDate===he(n))).length),0),n=h().reduce(((e,n)=>e+t.filter((e=>e.scheduledDate===he(n)&&e.completed)).length),0);return e>0?Math.round(n/e*100):0})(),"%"]}),(0,D.jsx)("div",{className:"text-sm text-purple-700",children:"Week Progress"})]})]})]})]})},xe=e=>{var t,n,r;let{prep:i,isSelected:s,selection:a,showPriorityOptions:o,showTimeOptions:l,assignmentStep:c,onToggleSelection:d,onUpdateSelection:u,onShowPriorityOptions:h,onShowRecipe:p,onSave:m,context:f="main"}=e;const y="suggested"===f?"suggested-".concat(i.id):i.id;return(0,D.jsx)("div",{className:"border rounded-lg p-4 transition-colors ".concat(s?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:(0,D.jsx)("div",{className:"flex items-center justify-between",children:(0,D.jsxs)("div",{className:"flex items-center space-x-3 flex-1",children:[(0,D.jsx)("button",{onClick:()=>d(i),className:"w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ".concat(s?"bg-blue-500 border-blue-500":"border-gray-300 hover:border-blue-500"),children:s&&(0,D.jsx)(g,{className:"w-4 h-4 text-white"})}),(0,D.jsxs)("div",{className:"flex-1",children:[(0,D.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,D.jsx)("h4",{className:"font-medium ".concat(s?"text-blue-900":"text-gray-800"),children:i.name}),i.hasRecipe&&i.recipe&&(0,D.jsx)("button",{onClick:()=>p(i.recipe,i.name),className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full hover:bg-green-200 transition-colors",children:"\ud83d\udcd6 Recipe"}),(0,D.jsx)("button",{onClick:()=>m(i,a),className:"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded-full hover:bg-blue-200 transition-colors",children:"\ud83d\udcbe Save"})]}),(0,D.jsxs)("p",{className:"text-sm text-gray-600 flex items-center space-x-2",children:[(0,D.jsx)("span",{children:i.estimatedTime}),(0,D.jsx)("span",{children:"\u2022"}),(0,D.jsx)("span",{children:i.category}),(0,D.jsx)("span",{children:"\u2022"}),(0,D.jsxs)("span",{children:["Every ",i.frequency," days"]}),i.isCustom&&(0,D.jsx)("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 rounded-full text-xs",children:"Custom"})]}),(0,D.jsx)("div",{className:"mt-2",children:(0,D.jsxs)("div",{className:"relative w-2/3",children:[(0,D.jsx)("button",{onClick:()=>{h(o===y?null:y)},className:"w-full px-2 py-1 rounded text-xs transition-colors ".concat(s?(null===(t=ue.find((e=>e.id===a.priority)))||void 0===t?void 0:t.color)+" font-medium":"timeSlot"===c[i.id]?"bg-green-100 text-green-700 font-medium":"bg-blue-100 text-blue-700 hover:bg-blue-200"),children:s?"".concat(null===(n=ue.find((e=>e.id===a.priority)))||void 0===n?void 0:n.name," Priority").concat(a.timeSlot?" \u2022 ".concat(null===(r=de.find((e=>e.id===a.timeSlot)))||void 0===r?void 0:r.name):" \u2022 Anytime"):"timeSlot"===c[i.id]?"Now choose time slot":"Click to assign priority & time"}),o===y&&(0,D.jsx)("div",{className:"dropdown-container soft-dropdown absolute top-full left-0 mt-2 rounded-xl p-3 z-20 w-full min-w-64 max-w-xs",children:(0,D.jsx)("div",{className:"space-y-3",children:(0,D.jsxs)("div",{children:[(0,D.jsxs)("div",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center",children:[(0,D.jsx)("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),"Choose Priority Level"]}),(0,D.jsx)("div",{className:"space-y-2",children:ue.map((e=>(0,D.jsx)("button",{onClick:()=>u(i,"priority",e.id,f),className:"soft-button w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 hover:scale-105 active:scale-95 ".concat(e.color),children:(0,D.jsxs)("div",{className:"flex items-center justify-between",children:[(0,D.jsx)("span",{children:e.name}),(0,D.jsx)("span",{className:"text-xs opacity-70",children:e.icon})]})},e.id)))})]})})}),l===y&&(0,D.jsx)("div",{className:"dropdown-container soft-dropdown absolute top-full left-0 mt-2 rounded-xl p-3 z-20 w-full min-w-64 max-w-sm",children:(0,D.jsx)("div",{className:"space-y-3",children:(0,D.jsxs)("div",{children:[(0,D.jsxs)("div",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center",children:[(0,D.jsx)("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"Choose Time Slot"]}),(0,D.jsxs)("div",{className:"space-y-2",children:[(0,D.jsx)("button",{onClick:()=>u(i,"timeSlot","",f),className:"soft-button w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 hover:scale-105 active:scale-95 bg-gray-50 text-gray-700 hover:bg-gray-100",children:(0,D.jsxs)("div",{className:"flex items-center justify-between",children:[(0,D.jsx)("span",{children:"Anytime"}),(0,D.jsx)("span",{className:"text-xs opacity-70",children:"\ud83d\udd50"})]})}),de.map((e=>(0,D.jsx)("button",{onClick:()=>u(i,"timeSlot",e.id,f),className:"soft-button w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 hover:scale-105 active:scale-95 bg-blue-50 text-blue-700 hover:bg-blue-100",children:(0,D.jsxs)("div",{className:"flex items-center justify-between",children:[(0,D.jsx)("span",{children:e.name}),(0,D.jsx)("span",{className:"text-xs opacity-70",children:e.icon})]})},e.id)))]})]})})})]})})]})]})})})},be=e=>{let{isOpen:t,recipe:n,recipeName:r,onClose:i}=e;return t&&n?(0,D.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,D.jsxs)("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,D.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,D.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,D.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:(0,D.jsx)(x,{className:"w-5 h-5 text-green-600"})}),(0,D.jsxs)("div",{children:[(0,D.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:r}),(0,D.jsx)("p",{className:"text-sm text-gray-600",children:"Recipe Details"})]})]}),(0,D.jsx)("button",{onClick:i,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:(0,D.jsx)(w,{className:"w-5 h-5"})})]}),(0,D.jsxs)("div",{className:"p-6 space-y-6",children:[(0,D.jsxs)("div",{children:[(0,D.jsxs)("h4",{className:"text-md font-semibold text-gray-800 mb-3 flex items-center",children:[(0,D.jsx)("span",{className:"w-6 h-6 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-sm mr-2",children:"\ud83e\udd44"}),"Ingredients"]}),(0,D.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,D.jsx)("div",{className:"whitespace-pre-wrap text-gray-700",dangerouslySetInnerHTML:{__html:pe(n.ingredients)}})})]}),(0,D.jsxs)("div",{children:[(0,D.jsxs)("h4",{className:"text-md font-semibold text-gray-800 mb-3 flex items-center",children:[(0,D.jsx)("span",{className:"w-6 h-6 bg-green-100 text-green-600 rounded-full flex items-center justify-center text-sm mr-2",children:"\ud83d\udcdd"}),"Instructions"]}),(0,D.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,D.jsx)("div",{className:"whitespace-pre-wrap text-gray-700",dangerouslySetInnerHTML:{__html:pe(n.instructions)}})})]})]}),(0,D.jsx)("div",{className:"flex justify-end p-6 border-t bg-gray-50",children:(0,D.jsx)("button",{onClick:i,className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Close Recipe"})})]})}):null},_e=e=>{let{currentUser:t,connectionStatus:n,prepItems:i,scheduledPreps:s,prepSelections:a,setPrepItems:o,setScheduledPreps:l,setPrepSelections:d,quickSave:u}=e;const[h,p]=(0,r.useState)("today"),[m,f]=(0,r.useState)((()=>new Date)),[y,v]=(0,r.useState)(new Date),[b,_]=(0,r.useState)(!1),[k,C]=(0,r.useState)(""),[S,j]=(0,r.useState)("all"),[T,E]=(0,r.useState)(!1),[I,P]=(0,r.useState)(""),[R,M]=(0,r.useState)(!1),[A,L]=(0,r.useState)({ingredients:"",instructions:""}),[O,F]=(0,r.useState)(!1),[z,U]=(0,r.useState)(null),[q,W]=(0,r.useState)(""),[B,H]=(0,r.useState)(null),[V,K]=(0,r.useState)(null),[Y,Q]=(0,r.useState)({}),[G,X]=(0,r.useState)(!0),[J,Z]=(0,r.useState)(0),[ee,te]=(0,r.useState)(!1),[ne,re]=(0,r.useState)(!1),[ie,ae]=(0,r.useState)(!1);(0,r.useEffect)((()=>{const e=()=>{var e,t,n;const r=document.querySelector(".bg-red-100.text-red-700"),i=r&&(null===(e=r.textContent)||void 0===e?void 0:e.includes("Admin Mode")),s=document.querySelector(".bg-white.border-b"),a=s&&((null===(t=s.textContent)||void 0===t?void 0:t.includes("Admin Panel"))||(null===(n=s.textContent)||void 0===n?void 0:n.includes("Daily Reports"))),o=document.querySelector('[title="Logout Admin"]'),l=i||a||!!o;ae(l),l!==ie&&console.log("\ud83d\udd27 Admin mode detected:",{hasAdminBadge:!!i,hasAdminTabs:!!a,hasLogoutButton:!!o,isAdmin:l})};e();const t=setInterval(e,500);return()=>clearInterval(t)}),[ie]),(0,r.useEffect)((()=>{if(0===i.length){const e=[{id:1,name:"Valkosipulimajoneesi",category:"majoneesit",estimatedTime:"15 min",isCustom:!1,hasRecipe:!0,frequency:3,recipe:{ingredients:"\u2022 **1 cup** majoneesi\n\u2022 **3-4** valkosipulin kyntt\xe4, hienoksi hakattuna\n\u2022 **1 rkl** sitruunamehua\n\u2022 **Suolaa** ja **mustapippuria** maun mukaan",instructions:"1. **Sekoita**: Yhdist\xe4 majoneesi ja hienonnettu valkosipuli\n2. **Mausta**: Lis\xe4\xe4 sitruunamehu, suola ja pippuri\n3. **Anna maustua**: Anna seisoa j\xe4\xe4kaapissa v\xe4hint\xe4\xe4n 30 minuuttia\n4. **Tarkista maku**: S\xe4\xe4d\xe4 mausteita tarpeen mukaan"}},{id:2,name:"Chilimajoneesi",category:"majoneesit",estimatedTime:"10 min",isCustom:!1,hasRecipe:!0,frequency:4,recipe:{ingredients:"\u2022 **1 cup** majoneesi\n\u2022 **2-3 rkl** sriracha-kastiketta\n\u2022 **1 tl** hunajaa\n\u2022 **1 tl** limemehua",instructions:"1. **Yhdist\xe4**: Sekoita majoneesi ja sriracha-kastike\n2. **Makeutus**: Lis\xe4\xe4 hunaja ja limemehu\n3. **Sekoita hyvin**: Varmista tasainen sekoitus\n4. **Maista ja s\xe4\xe4d\xe4**: Lis\xe4\xe4 chilimakua tai hunajaa tarpeen mukaan"}},{id:3,name:"Kev\xe4tsipulimajoneesi",category:"majoneesit",estimatedTime:"10 min",isCustom:!1,hasRecipe:!1,frequency:3,recipe:null},{id:4,name:"Bad Santa -majoneesi",category:"majoneesit",estimatedTime:"15 min",isCustom:!1,hasRecipe:!1,frequency:5,recipe:null},{id:5,name:"Manse-majoneesi",category:"majoneesit",estimatedTime:"12 min",isCustom:!1,hasRecipe:!1,frequency:4,recipe:null},{id:6,name:"Marinoitu kana",category:"proteiinit",estimatedTime:"30 min",isCustom:!1,hasRecipe:!0,frequency:2,recipe:{ingredients:"\u2022 **4** kananfileet\xe4\n\u2022 **1/4 cup** oliivi\xf6ljy\xe4\n\u2022 **2 rkl** sitruunamehua\n\u2022 **3** valkosipulin kyntt\xe4, murskattuna\n\u2022 **1 tl** kuivattuja yrttej\xe4\n\u2022 **Suolaa** ja **pippuria**",instructions:"1. **Valmista marinade**: Sekoita \xf6ljy, sitruunamehu, valkosipuli ja yrtit\n2. **Mausta kana**: Hiero kanaan suolaa ja pippuria\n3. **Marinoi**: Laita kana marinadiin 2-4 tunniksi\n4. **Huoneenl\xe4mp\xf6**: Anna tulla huoneenl\xe4mp\xf6\xf6n ennen kypsennyst\xe4"}},{id:7,name:"Lihapullat",category:"proteiinit",estimatedTime:"45 min",isCustom:!1,hasRecipe:!0,frequency:3,recipe:{ingredients:"\u2022 **500g** jauhelihaa\n\u2022 **1** sipuli, hienoksi hakattuna\n\u2022 **1** muna\n\u2022 **1/2 cup** korppujauhoja\n\u2022 **Suolaa**, **pippuria**, **mausteet**",instructions:"1. **Sekoita**: Yhdist\xe4 kaikki ainekset kulhossa\n2. **Muotoile**: Tee tasakokoisia palloja\n3. **Kypsenn\xe4**: Paista pannulla tai uunissa\n4. **Valmista**: Kypsyys 65\xb0C sis\xe4l\xe4mp\xf6tila"}},{id:8,name:"Tuoreet tomaatit (leikattu)",category:"kasvikset",estimatedTime:"15 min",isCustom:!1,hasRecipe:!1,frequency:1,recipe:null},{id:9,name:"Kev\xe4tsipuli",category:"kasvikset",estimatedTime:"10 min",isCustom:!1,hasRecipe:!1,frequency:2,recipe:null},{id:10,name:"Marinoitu punasipuli",category:"marinointi",estimatedTime:"20 min",isCustom:!1,hasRecipe:!0,frequency:4,recipe:{ingredients:"\u2022 **2** punasipulia, ohuksi viipaloiduna\n\u2022 **1/2 cup** valkoviinietikkaa\n\u2022 **2 rkl** sokeria\n\u2022 **1 tl** suolaa\n\u2022 **1** laakerinlehti",instructions:"1. **Liuota**: Sekoita etikka, sokeri ja suola\n2. **Sipulit**: Laita viipaloidut sipulit kulhoon\n3. **Kaada liuos**: Kaada kuuma liuos sipulien p\xe4\xe4lle\n4. **Anna marinoitua**: V\xe4hint\xe4\xe4n 30 minuuttia ennen k\xe4ytt\xf6\xe4"}},{id:11,name:"Pikkel\xf6ity punasipuli",category:"marinointi",estimatedTime:"25 min",isCustom:!1,hasRecipe:!1,frequency:5,recipe:null},{id:12,name:"Pikkel\xf6ity tomaatti",category:"marinointi",estimatedTime:"20 min",isCustom:!1,hasRecipe:!1,frequency:4,recipe:null},{id:13,name:"Pikkel\xf6ity kurkku",category:"marinointi",estimatedTime:"20 min",isCustom:!1,hasRecipe:!1,frequency:4,recipe:null},{id:14,name:"Paholaisen hillo",category:"marinointi",estimatedTime:"30 min",isCustom:!1,hasRecipe:!1,frequency:7,recipe:null},{id:15,name:"Hapan omena -hillo",category:"marinointi",estimatedTime:"35 min",isCustom:!1,hasRecipe:!1,frequency:7,recipe:null},{id:16,name:"Marinoitu punakaali",category:"marinointi",estimatedTime:"25 min",isCustom:!1,hasRecipe:!1,frequency:5,recipe:null},{id:17,name:"Konjakki-sinappi",category:"kastikkeet",estimatedTime:"15 min",isCustom:!1,hasRecipe:!0,frequency:6,recipe:{ingredients:"\u2022 **1/2 cup** dijon-sinappia\n\u2022 **3 rkl** konjakkia\n\u2022 **1 rkl** hunajaa\n\u2022 **1 tl** valkosipulijauhetta",instructions:"1. **Sekoita**: Yhdist\xe4 sinappi ja konjakki\n2. **Makeutus**: Lis\xe4\xe4 hunaja ja valkosipulijauhe\n3. **Sekoita hyvin**: Varmista tasainen sekoitus\n4. **Anna vet\xe4yty\xe4**: S\xe4ilyt\xe4 j\xe4\xe4kaapissa k\xe4ytt\xf6\xf6n asti"}},{id:18,name:"BBQ-hunaja-sinappi",category:"kastikkeet",estimatedTime:"12 min",isCustom:!1,hasRecipe:!1,frequency:5,recipe:null},{id:19,name:"T\xe4yt\xe4 kylm\xe4vitriini",category:"muut",estimatedTime:"20 min",isCustom:!1,hasRecipe:!1,frequency:1,recipe:null},{id:20,name:"Vaihda \xf6ljy",category:"muut",estimatedTime:"15 min",isCustom:!1,hasRecipe:!1,frequency:7,recipe:null},{id:21,name:"Asiakasjuomakaappi kuntoon",category:"muut",estimatedTime:"25 min",isCustom:!1,hasRecipe:!1,frequency:2,recipe:null},{id:22,name:"Alkoholijuomakaappi kuntoon",category:"muut",estimatedTime:"20 min",isCustom:!1,hasRecipe:!1,frequency:3,recipe:null},{id:23,name:"Keit\xe4 smash-perunat",category:"muut",estimatedTime:"45 min",isCustom:!1,hasRecipe:!0,frequency:2,recipe:{ingredients:"\u2022 **1kg** pieni\xe4 perunoita\n\u2022 **Suolaa** keitinveteen\n\u2022 **Oliivi\xf6ljy\xe4**\n\u2022 **Rosmariinia**\n\u2022 **Merisuolaa**\n\u2022 **Mustapippuria**",instructions:"1. **Keit\xe4**: Keit\xe4 perunat kuoressa suolavedess\xe4 kypsiksi\n2. **Valuta**: Anna valua ja j\xe4\xe4hty\xe4 hieman\n3. **Smash**: Litist\xe4 perunat haarukalla kevyesti\n4. **Paista**: Paista uunissa 200\xb0C \xf6ljyss\xe4 ja mausteissa kultaisiksi"}}];o((()=>e)),u("prepItems",e)}}),[i.length,o,u]),(0,r.useEffect)((()=>{if(s.length>0&&!ee){console.log("\ud83d\udd04 Auto-saving scheduledPreps due to state change");const e=setTimeout((()=>{u("scheduledPreps",s).then((()=>{console.log("\u2705 ScheduledPreps auto-save completed")})).catch((e=>{console.error("\u274c ScheduledPreps auto-save failed:",e)}))}),300);return()=>clearTimeout(e)}}),[s,u,ee]),(0,r.useEffect)((()=>{const e=localStorage.getItem("lastPrepMoveCheck"),t=he(new Date);e!==t&&((()=>{const e=new Date,t=new Date(e);t.setDate(t.getDate()-1);const n=he(e),r=he(t),i=s.filter((e=>e.scheduledDate===r&&!e.completed));if(i.length>0){console.log("\ud83d\udd04 Moving ".concat(i.length," incomplete preps from ").concat(r," to ").concat(n)),Z(i.length),setTimeout((()=>Z(0)),8e3);const t=i.map((e=>c(c({},e),{},{id:fe(),scheduledDate:n})));l((e=>[...e.filter((e=>!(e.scheduledDate===r&&!e.completed))),...t]));const s={};i.forEach((t=>{const n=me(e,t.prepId);s[n]={priority:t.priority,timeSlot:t.timeSlot,selected:!0}})),d((e=>c(c({},e),s)))}})(),localStorage.setItem("lastPrepMoveCheck",t))}),[s,d,l]);const oe=async e=>{if(console.log("\ud83d\udd04 Toggling prep completion for ID:",e),ee)console.log("\u23f3 Save in progress, skipping...");else{te(!0),re(!0);try{const t=s.find((t=>t.id===e));if(!t)return void console.error("\u274c Prep item not found:",e);const n=!t.completed;console.log("\ud83d\udccb ".concat(t.name,": ").concat(t.completed?"COMPLETED":"PENDING"," \u2192 ").concat(n?"COMPLETED":"PENDING")),console.log("\ud83d\udee1\ufe0f SYNC PAUSED during save operation");const r=s.map((t=>t.id===e?c(c({},t),{},{completed:n}):t)),i=he(new Date),a=r.filter((e=>e.scheduledDate===i)),o=a.filter((e=>e.completed));console.log("\ud83d\udce4 About to save scheduledPreps:",{totalCount:r.length,todayCount:a.length,todayCompletedCount:o.length,updatedItem:{id:e,name:t.name,completed:n,scheduledDate:t.scheduledDate}}),l((()=>r)),console.log("\ud83d\udd25 Saving prep completion to Firebase...");await u("scheduledPreps",r)?(console.log("\u2705 Prep completion saved successfully"),setTimeout((async()=>{re(!1),console.log("\ud83d\udd04 SYNC RESUMED after save completion");try{const t=await fetch("https://hamptown-panel-default-rtdb.firebaseio.com/scheduledPreps.json"),r=await t.json();if(r){const t=r.filter((e=>e.scheduledDate===i)),s=t.filter((e=>!0===e.completed)),a=r.find((t=>t.id===e));console.log("\ud83d\udd0d Firebase verification after save:",{firebaseTotalCount:r.length,firebaseTodayCount:t.length,firebaseTodayCompleted:s.length,firebaseUpdatedItem:a?{id:a.id,name:a.name,completed:a.completed,scheduledDate:a.scheduledDate}:"NOT FOUND"}),a&&a.completed===n?console.log("\u2705 Save verification passed"):console.error("\u274c SAVE VERIFICATION FAILED! Item not found or completion status mismatch")}else console.error("\u274c No data found in Firebase during verification")}catch(ur){console.warn("\u26a0\ufe0f Failed to verify save:",ur)}}),3e3)):(console.error("\u274c Failed to save prep completion to Firebase"),l((()=>s)),re(!1))}catch(ur){console.error("\u274c Error toggling prep completion:",ur),l((()=>s)),re(!1)}finally{te(!1)}}},de=e=>{var t;const n=me(m,e.id);return(null===(t=a[n])||void 0===t?void 0:t.selected)||!1},ue=e=>{const t=me(m,e.id);return a[t]||{priority:"medium",timeSlot:"",selected:!1}},pe=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"main";const i=me(m,e.id),o=a[i]||{priority:"medium",timeSlot:"",selected:!1};if("priority"===t){d((e=>c(c({},e),{},{[i]:c(c({},e[i]),{},{priority:n,selected:o.selected})}))),Q((t=>c(c({},t),{},{[e.id]:"timeSlot"}))),H(null);const t="suggested"===r?"suggested-".concat(e.id):e.id;K(t)}else if("timeSlot"===t){const t={priority:o.priority,timeSlot:n,selected:!0};d((e=>c(c({},e),{},{[i]:t})));if(s.find((t=>t.prepId===e.id&&t.scheduledDate===he(m))))l((r=>r.map((r=>r.prepId===e.id&&r.scheduledDate===he(m)?c(c({},r),{},{priority:t.priority,timeSlot:n}):r))));else{const r={id:fe(),prepId:e.id,name:e.name,category:e.category,estimatedTime:e.estimatedTime,isCustom:e.isCustom,hasRecipe:e.hasRecipe,recipe:e.recipe,scheduledDate:he(m),priority:t.priority,timeSlot:n,completed:!1,assignedTo:null,notes:""};l((e=>[...e,r]))}Q((t=>c(c({},t),{},{[e.id]:null}))),H(null),K(null)}};(0,r.useEffect)((()=>{const e=e=>{e.target.closest(".dropdown-container")||(H(null),K(null),Q({}))};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);const ge=(e,t)=>{U(e),W(t),F(!0)},_e=e=>{var t;const n=me(m,e.id);if(null===(t=a[n])||void 0===t?void 0:t.selected)d((e=>{const t=c({},e);return delete t[n],t})),l((t=>t.filter((t=>!(t.prepId===e.id&&t.scheduledDate===he(m))))));else{const t=s.find((t=>t.prepId===e.id&&t.scheduledDate===he(m)));if(t)d((e=>c(c({},e),{},{[n]:{priority:t.priority,timeSlot:t.timeSlot,selected:!0}})));else{const t={priority:"medium",timeSlot:"",selected:!0};d((e=>c(c({},e),{},{[n]:t})));const r={id:fe(),prepId:e.id,name:e.name,category:e.category,estimatedTime:e.estimatedTime,isCustom:e.isCustom,hasRecipe:e.hasRecipe,recipe:e.recipe,scheduledDate:he(m),priority:"medium",timeSlot:"",completed:!1,assignedTo:null,notes:""};l((e=>[...e,r]))}}},we=i.filter((e=>{const t="all"===S||e.category===S,n=""===I||e.name.toLowerCase().includes(I.toLowerCase())||e.category.toLowerCase().includes(I.toLowerCase());return t&&n}));return(0,D.jsxs)("div",{className:"space-y-6",children:[(0,D.jsx)("style",{dangerouslySetInnerHTML:{__html:'\n.priority-glow {\n  position: relative;\n  z-index: 0;\n  font-weight: 600;\n  border-radius: 0.25rem;\n  padding: 0.125rem 0.25rem;\n}\n.priority-glow::before {\n  content: "";\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 110%;\n  height: 2em;\n  transform: translate(-50%, -50%);\n  border-radius: 0.375rem;\n  filter: blur(6px);\n  z-index: -1;\n  opacity: 0.3;\n}\n.priority-low {\n  color: #047857;\n}\n.priority-low::before {\n  box-shadow: 0 0 8px 4px rgba(5, 150, 105, 0.4);\n}\n.priority-medium {\n  color: #92400e;\n}\n.priority-medium::before {\n  box-shadow: 0 0 8px 4px rgba(202, 138, 4, 0.4);\n}\n.priority-high {\n  color: #b91c1c;\n}\n.priority-high::before {\n  box-shadow: 0 0 8px 4px rgba(185, 28, 28, 0.4);\n}\n\n.soft-dropdown {\n  backdrop-filter: blur(16px);\n  background: rgba(255, 255, 255, 0.95);\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.15),\n              0 0 0 1px rgba(255, 255, 255, 0.05),\n              inset 0 1px 0 rgba(255, 255, 255, 0.1);\n}\n\n.soft-button {\n  backdrop-filter: blur(8px);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05),\n              inset 0 1px 0 rgba(255, 255, 255, 0.1);\n}\n\n.soft-button:hover {\n  backdrop-filter: blur(12px);\n  box-shadow: 0 8px 15px -3px rgba(0, 0, 0, 0.1),\n              inset 0 1px 0 rgba(255, 255, 255, 0.2);\n}\n'}}),(0,D.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,D.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,D.jsxs)("div",{className:"flex items-center",children:[(0,D.jsx)(x,{className:"w-8 h-8 text-blue-600 mr-3"}),(0,D.jsxs)("div",{children:[(0,D.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Prep List Manager"}),(0,D.jsx)("p",{className:"text-gray-600",children:"Plan and track kitchen preparation tasks"})]})]}),(0,D.jsx)("div",{className:"flex items-center space-x-2"})]}),(0,D.jsxs)("div",{className:"flex space-x-2",children:[(0,D.jsxs)("button",{onClick:()=>p("today"),className:"flex items-center px-4 py-2 rounded-lg transition-colors ".concat("today"===h?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[(0,D.jsx)(g,{className:"w-4 h-4 mr-2"}),"Today's Preps"]}),(0,D.jsxs)("button",{onClick:()=>p("plan"),className:"flex items-center px-4 py-2 rounded-lg transition-colors ".concat("plan"===h?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[(0,D.jsx)(se,{className:"w-4 h-4 mr-2"}),"Plan Preps"]}),(0,D.jsxs)("button",{onClick:()=>p("week"),className:"flex items-center px-4 py-2 rounded-lg transition-colors ".concat("week"===h?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[(0,D.jsx)(N,{className:"w-4 h-4 mr-2"}),"Week View"]})]})]}),J>0&&(0,D.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 mb-6",children:(0,D.jsxs)("div",{className:"flex items-center",children:[(0,D.jsx)("div",{className:"flex-shrink-0",children:(0,D.jsx)("svg",{className:"w-5 h-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,D.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),(0,D.jsxs)("div",{className:"ml-3 flex-1",children:[(0,D.jsx)("h3",{className:"text-sm font-medium text-blue-800",children:"\ud83d\udcc5 Prep items moved to today"}),(0,D.jsxs)("div",{className:"mt-1 text-sm text-blue-600",children:[J," incomplete prep",J>1?"s":""," from yesterday ",J>1?"have":"has"," been automatically moved to today's schedule."]})]}),(0,D.jsx)("div",{className:"flex-shrink-0",children:(0,D.jsx)("button",{onClick:()=>Z(0),className:"text-blue-400 hover:text-blue-600",children:(0,D.jsx)(w,{className:"w-5 h-5"})})})]})}),"today"===h&&(0,D.jsxs)(D.Fragment,{children:[!!ie&&(0,D.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[(0,D.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,D.jsxs)("h4",{className:"font-medium text-blue-800",children:["\ud83d\udd0d Debug Info ",ie?"(Admin Mode Active)":"(Development Mode)"]}),(0,D.jsxs)("div",{className:"flex gap-2",children:[!1,(0,D.jsx)("button",{onClick:async()=>{console.log("\ud83d\udd04 Manual Firebase check triggered");try{const e=await fetch("https://hamptown-panel-default-rtdb.firebaseio.com/scheduledPreps.json"),t=await e.json(),n=he(new Date),r=t?t.filter((e=>e.scheduledDate===n)):[];console.log("\ud83d\udd0d Manual Firebase check result:",{firebaseHasData:!!t,firebaseTotalCount:t?t.length:0,firebaseTodayCount:r.length,firebaseTodayCompleted:r.filter((e=>!0===e.completed)).length,localTodayCount:s.filter((e=>e.scheduledDate===n)).length,firebaseSample:r.slice(0,3)}),alert("Firebase Check:\nTotal: ".concat(t?t.length:0,"\nToday: ").concat(r.length,"\nCompleted: ").concat(r.filter((e=>!0===e.completed)).length))}catch(ur){console.error("\u274c Manual Firebase check failed:",ur),alert("Firebase check failed - see console")}},className:"px-3 py-1 bg-blue-500 text-white rounded text-xs hover:bg-blue-600",children:"Check Firebase"}),(0,D.jsx)("button",{onClick:()=>{console.log("\ud83d\udd04 Manual reload triggered"),window.location.reload()},className:"px-3 py-1 bg-green-500 text-white rounded text-xs hover:bg-green-600",children:"Force Reload"})]})]}),(0,D.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,D.jsxs)("div",{children:[(0,D.jsx)("div",{className:"font-medium text-blue-700",children:"Today's Date"}),(0,D.jsx)("div",{className:"text-blue-600",children:he(new Date)})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("div",{className:"font-medium text-blue-700",children:"Total Scheduled"}),(0,D.jsx)("div",{className:"text-blue-600",children:s.length})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("div",{className:"font-medium text-blue-700",children:"Today's Preps"}),(0,D.jsx)("div",{className:"text-blue-600",children:s.filter((e=>e.scheduledDate===he(new Date))).length})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("div",{className:"font-medium text-blue-700",children:"Connection"}),(0,D.jsx)("div",{className:"connected"===n?"text-green-600":"text-red-600",children:n})]})]}),(0,D.jsxs)("div",{className:"mt-3",children:[(0,D.jsx)("div",{className:"font-medium text-blue-700 mb-1",children:"All Scheduled Dates:"}),(0,D.jsx)("div",{className:"text-blue-600 text-xs",children:Array.from(new Set(s.map((e=>e.scheduledDate)))).sort().join(", ")||"None"})]}),s.length>0&&(0,D.jsxs)("div",{className:"mt-2",children:[(0,D.jsx)("div",{className:"font-medium text-blue-700 mb-1",children:"Sample Preps:"}),(0,D.jsx)("div",{className:"text-blue-600 text-xs",children:s.slice(0,3).map((e=>"".concat(e.name," (").concat(e.scheduledDate,")").concat(e.completed?" \u2705":" \u23f3"))).join(" | ")})]})]}),(0,D.jsx)(ye,{scheduledPreps:s,onToggleCompletion:oe,onShowRecipe:ge})]}),"plan"===h&&(0,D.jsxs)("div",{className:"space-y-6",children:[(0,D.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,D.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Select Date to Plan"}),(0,D.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,D.jsx)("input",{type:"date",value:he(m),onChange:e=>f(new Date(e.target.value)),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,D.jsxs)("div",{className:"text-gray-600",children:["Planning for: ",(0,D.jsx)("strong",{children:(ke=m,ke.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}))})]})]})]}),(0,D.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,D.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,D.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Choose Prep Items"}),(0,D.jsxs)("button",{onClick:()=>E(!T),className:"flex items-center px-4 py-2 rounded-lg transition-colors ".concat(T?"bg-blue-500 text-white":"bg-gray-100 hover:bg-gray-200"),children:[(0,D.jsx)(le,{className:"w-4 h-4 mr-2"}),"Search"]})]}),T&&(0,D.jsx)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:(0,D.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,D.jsx)(le,{className:"w-5 h-5 text-gray-400"}),(0,D.jsx)("input",{type:"text",placeholder:"Search prep items...",value:I,onChange:e=>P(e.target.value),className:"flex-1 px-3 py-2 border-0 bg-transparent focus:outline-none",autoFocus:!0}),I&&(0,D.jsx)("button",{onClick:()=>P(""),className:"p-1 text-gray-400 hover:text-gray-600",children:(0,D.jsx)(w,{className:"w-4 h-4"})})]})}),(0,D.jsx)("div",{className:"flex flex-wrap gap-2 mb-6",children:ce.map((e=>(0,D.jsxs)("button",{onClick:()=>j(e.id),className:"flex items-center px-4 py-2 rounded-lg transition-colors ".concat(S===e.id?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[(0,D.jsx)("span",{className:"mr-2",children:e.icon}),e.name]},e.id)))}),(0,D.jsx)("div",{className:"space-y-3",children:we.map((e=>(0,D.jsx)(xe,{prep:e,isSelected:de(e),selection:ue(e),showPriorityOptions:B,showTimeOptions:V,assignmentStep:Y,onToggleSelection:_e,onUpdateSelection:pe,onShowPriorityOptions:H,onShowRecipe:ge,onSave:(e,t)=>{console.log("Save clicked for prep:",e,t)},context:"main"},e.id)))}),(0,D.jsx)("div",{className:"mt-6 pt-6 border-t",children:b?(0,D.jsxs)("div",{className:"border rounded-lg p-4 bg-gray-50",children:[(0,D.jsx)("h4",{className:"font-medium text-gray-800 mb-4",children:"Add Custom Prep"}),(0,D.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prep Name"}),(0,D.jsx)("input",{type:"text",value:k,onChange:e=>C(e.target.value),placeholder:"e.g., Prep special sauce",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,D.jsx)("select",{value:"all"===S?"majoneesit":S,onChange:e=>j(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:ce.slice(1).map((e=>(0,D.jsx)("option",{value:e.id,children:e.name},e.id)))})]})]}),(0,D.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,D.jsx)("button",{onClick:()=>{if(!k.trim())return;const e={id:Date.now(),name:k.trim(),category:"all"===S?"majoneesit":S,estimatedTime:"20 min",isCustom:!0,hasRecipe:R,frequency:2,recipe:R?{ingredients:A.ingredients,instructions:A.instructions}:null};o((t=>[...t,e])),C(""),_(!1),M(!1),L({ingredients:"",instructions:""}),j("majoneesit"),_e(e)},className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors",children:"Add Prep"}),(0,D.jsx)("button",{onClick:()=>{_(!1),C(""),M(!1),L({ingredients:"",instructions:""}),j("majoneesit")},className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"})]})]}):(0,D.jsxs)("button",{onClick:()=>_(!0),className:"flex items-center px-4 py-2 border border-dashed border-gray-300 rounded-lg hover:border-blue-500 hover:text-blue-500 transition-colors",children:[(0,D.jsx)($,{className:"w-4 h-4 mr-2"}),"Add Custom Prep Item"]})})]})]}),"week"===h&&(0,D.jsx)(ve,{scheduledPreps:s,currentDate:y,setCurrentDate:v,selectedDate:m,setSelectedDate:f,setActiveView:p,onToggleCompletion:oe,onShowRecipe:ge}),(0,D.jsx)(be,{isOpen:O,recipe:z,recipeName:q,onClose:()=>F(!1)})]});var ke},we=h("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),ke=h("Tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]),Ne=h("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),Ce=h("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Se=h("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),je=h("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),Te=h("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),Ee=h("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Ie=h("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Pe=e=>{let{isLoading:t,lastSync:n,connectionStatus:i,loadFromFirebase:s,activeDevices:a=[],syncEvents:o=[],deviceCount:l=1,isMultiDeviceEnabled:d=!0,toggleMultiDeviceSync:u=()=>{},refreshFromAllDevices:h=()=>{}}=e;const[p,m]=(0,r.useState)(!1),[f,g]=(0,r.useState)(!1),[y,v]=(0,r.useState)(null),[x,b]=(0,r.useState)({x:"right",y:window.innerHeight-100}),[_,w]=(0,r.useState)(!1),[k,C]=(0,r.useState)({x:0,y:0}),[S,j]=(0,r.useState)({x:0,y:0,startY:0,startSide:"right"}),T=(0,r.useRef)(null);(0,r.useEffect)((()=>{const e=()=>{b((e=>c(c({},e),{},{y:Math.min(e.y,window.innerHeight-100)})))};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),(0,r.useEffect)((()=>{if(o.length>0){const e=o.filter((e=>Date.now()-e.timestamp<3e3));if(e.length>0){const t=e[0];v(t),m(!0);const n=setTimeout((()=>{m(!1),v(null)}),2e3);return()=>clearTimeout(n)}}}),[o]);const E=e=>{const t=Date.now()-e;return t<6e4?"Just now":t<36e5?"".concat(Math.floor(t/6e4),"m ago"):t<864e5?"".concat(Math.floor(t/36e5),"h ago"):"".concat(Math.floor(t/864e5),"d ago")};(0,r.useEffect)((()=>{const e=e=>{if(!_)return;const t=e.clientX-S.x,n=e.clientY-S.y,r=Math.max(16,Math.min(window.innerWidth-56,("left"===S.startSide?16:window.innerWidth-56)+t)),i=Math.max(24,Math.min(window.innerHeight-64,S.startY+n));C({x:r,y:i})},t=e=>{if(!_)return;e.preventDefault();const t=e.touches[0],n=t.clientX-S.x,r=t.clientY-S.y,i=Math.max(16,Math.min(window.innerWidth-56,("left"===S.startSide?16:window.innerWidth-56)+n)),s=Math.max(24,Math.min(window.innerHeight-64,S.startY+r));C({x:i,y:s})},n=e=>{if(!_)return;const t=e.clientX-S.x,n=e.clientY-S.y,r=("left"===S.startSide?16:window.innerWidth-56)+t>window.innerWidth/2?"right":"left",i=Math.max(24,Math.min(window.innerHeight-64,S.startY+n));b({x:r,y:i}),w(!1)},r=e=>{if(!_)return;const t=e.changedTouches[0],n=t.clientX-S.x,r=t.clientY-S.y,i=("left"===S.startSide?16:window.innerWidth-56)+n>window.innerWidth/2?"right":"left",s=Math.max(24,Math.min(window.innerHeight-64,S.startY+r));b({x:i,y:s}),w(!1)};return _&&(document.addEventListener("mousemove",e),document.addEventListener("mouseup",n),document.addEventListener("touchmove",t,{passive:!1}),document.addEventListener("touchend",r)),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",n),document.removeEventListener("touchmove",t),document.removeEventListener("touchend",r)}}),[_,S]);const I=t?{icon:(0,D.jsx)(Ce,{className:"w-3 h-3 animate-spin"}),text:y?"Syncing ".concat(y.field||"data"):"Syncing",bgColor:"bg-blue-500/90",pulseColor:"bg-blue-400"}:"connected"===i&&n?{icon:p?(0,D.jsx)(Ce,{className:"w-3 h-3 animate-spin"}):l>1?(0,D.jsx)(N,{className:"w-3 h-3"}):(0,D.jsx)(Se,{className:"w-3 h-3"}),text:p?y?"Syncing ".concat(y.field||"data"):"Syncing":l>1?"".concat(l," devices"):"Synced",bgColor:"bg-emerald-500/90",pulseColor:"bg-emerald-400"}:"error"===i?{icon:(0,D.jsx)(je,{className:"w-3 h-3"}),text:"Offline",bgColor:"bg-red-500/90",pulseColor:"bg-red-400"}:{icon:(0,D.jsx)(Te,{className:"w-3 h-3"}),text:"Connecting",bgColor:"bg-amber-500/90",pulseColor:"bg-amber-400"},P=(()=>{const e=window.innerHeight,t=window.innerWidth,n=x.y+450+8>e-20;let r="0px";"left"===x.x?(r="".concat(48,"px"),384>t&&(r="-".concat(272,"px"))):(r="-".concat(328,"px"),328>t-64&&(r="".concat(48,"px")));let i="0px";return i=n?"-".concat(458,"px"):"".concat(48,"px"),{translateX:r,translateY:i,isAbove:n}})();return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("div",{ref:T,className:"\n          fixed z-50 transition-all duration-300 ease-out\n          ".concat(_?"transition-none":"","\n          ").concat(_?"scale-110 cursor-grabbing":"cursor-grab hover:scale-105","\n        "),style:{left:_?"".concat(k.x,"px"):"left"===x.x?"16px":void 0,right:_?void 0:"right"===x.x?"16px":void 0,top:"".concat(_?k.y:x.y,"px")},onMouseDown:e=>{var t;e.preventDefault(),w(!0);const n=null===(t=T.current)||void 0===t?void 0:t.getBoundingClientRect();n&&(C({x:n.left,y:n.top}),j({x:e.clientX,y:e.clientY,startY:x.y,startSide:x.x}))},onTouchStart:e=>{var t;e.preventDefault(),w(!0);const n=e.touches[0],r=null===(t=T.current)||void 0===t?void 0:t.getBoundingClientRect();r&&(C({x:r.left,y:r.top}),j({x:n.clientX,y:n.clientY,startY:x.y,startSide:x.x}))},children:[(0,D.jsxs)("div",{className:"relative",children:[(0,D.jsx)("div",{className:"absolute inset-0 rounded-full bg-black/10 blur-md scale-110"}),(0,D.jsxs)("div",{className:"\n              relative w-10 h-10 rounded-full transform transition-all duration-300\n              ".concat(p?"animate-pulse":"","\n            "),onClick:e=>{_||(e.stopPropagation(),"error"===i?s():g(!f))},title:"".concat(I.text).concat(n?" - Last sync: ".concat(n):""),children:[(0,D.jsx)("div",{className:"\n              absolute inset-0 rounded-full backdrop-blur-xl ".concat(I.bgColor,"\n              border border-white/40 shadow-lg\n            ")}),(0,D.jsx)("div",{className:"absolute inset-0.5 rounded-full bg-gradient-to-tr from-white/25 to-transparent"}),(0,D.jsx)("div",{className:"relative flex items-center justify-center w-full h-full text-white",children:I.icon}),"connected"===i&&l>1&&(0,D.jsx)("div",{className:"absolute -top-1 -right-1 w-4 h-4 rounded-full backdrop-blur-xl bg-blue-500/95  border border-white/60 shadow-md flex items-center justify-center text-xs font-bold text-white",children:l}),p&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("div",{className:"absolute inset-0 rounded-full animate-ping",children:(0,D.jsx)("div",{className:"w-full h-full rounded-full ".concat(I.pulseColor,"/50 border border-current")})}),(0,D.jsx)("div",{className:"absolute inset-0 rounded-full animate-ping",style:{animationDelay:"150ms"},children:(0,D.jsx)("div",{className:"w-full h-full rounded-full ".concat(I.pulseColor,"/30 border border-current scale-125")})})]})]})]}),f&&!_&&(0,D.jsxs)("div",{className:"absolute z-40 w-80",style:{transform:"translate(".concat(P.translateX,", ").concat(P.translateY,")"),transformOrigin:P.isAbove?"bottom center":"top center"},children:[(0,D.jsx)("div",{className:"absolute w-0.5 bg-gradient-to-b from-blue-500/30 to-purple-500/30 ".concat(P.isAbove?"bottom-0 h-2 translate-y-full":"top-0 h-2 -translate-y-full"),style:{left:"left"===x.x?"-9px":"calc(100% + 8px)"}}),(0,D.jsxs)("div",{className:"relative bg-white/95 backdrop-blur-xl rounded-xl shadow-xl border border-white/50 overflow-hidden",children:[(0,D.jsx)("div",{className:"bg-gradient-to-r from-emerald-500/15 to-blue-500/15 px-4 py-3 border-b border-white/30",children:(0,D.jsxs)("div",{className:"flex items-center justify-between",children:[(0,D.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,D.jsx)("div",{className:"w-6 h-6 rounded-full bg-gradient-to-br from-emerald-500 to-blue-500 flex items-center justify-center",children:(0,D.jsx)(N,{className:"w-3 h-3 text-white"})}),(0,D.jsxs)("div",{children:[(0,D.jsx)("span",{className:"text-sm font-semibold text-gray-800",children:"Multi-Device Sync"}),(0,D.jsxs)("div",{className:"text-xs text-gray-600",children:[l," device",1!==l?"s":""," connected"]})]})]}),(0,D.jsx)("button",{onClick:e=>{e.stopPropagation(),g(!1)},className:"w-6 h-6 rounded-full bg-white/30 backdrop-blur-sm border border-white/40  text-gray-600 hover:text-gray-800 hover:bg-white/50 transition-all duration-200 flex items-center justify-center text-xs",children:"\u2715"})]})}),(0,D.jsxs)("div",{className:"p-4 space-y-4 max-h-80 overflow-y-auto",children:[(0,D.jsxs)("div",{className:"bg-white/50 backdrop-blur-sm rounded-lg p-3 border border-white/30",children:[(0,D.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,D.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Real-time Sync"}),(0,D.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,D.jsx)("div",{className:"w-2 h-2 rounded-full ".concat("connected"===i?"bg-green-500":"bg-red-500")}),(0,D.jsx)("span",{className:"text-xs font-medium ".concat("connected"===i?"text-green-600":"text-red-600"),children:"connected"===i?"Active":"Offline"})]})]}),(0,D.jsx)("div",{className:"text-xs text-gray-600",children:"connected"===i?"All changes sync automatically across devices":"connecting"===i?"Connecting to sync service...":"Connection failed - working offline"}),n&&(0,D.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Last sync: ",n]})]}),(0,D.jsxs)("div",{className:"bg-white/30 backdrop-blur-sm rounded-lg p-3 border border-white/30",children:[(0,D.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,D.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Connected Devices (",a.length,")"]}),(0,D.jsx)("button",{onClick:e=>{e.stopPropagation(),h()},className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full hover:bg-blue-200 transition-colors",children:"Refresh"})]}),a.length>0?(0,D.jsx)("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:a.map(((e,t)=>{return(0,D.jsxs)("div",{className:"flex items-center justify-between p-2 bg-white/40 rounded-lg",children:[(0,D.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,D.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(e.isActive?"bg-green-500":"bg-gray-400")}),(0,D.jsx)("div",{className:"text-blue-600",children:(n=e,"mobile"===n.platform?(0,D.jsx)(we,{className:"w-3 h-3"}):"tablet"===n.platform?(0,D.jsx)(ke,{className:"w-3 h-3"}):(0,D.jsx)(Ne,{className:"w-3 h-3"}))}),(0,D.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,D.jsx)("div",{className:"text-xs font-medium text-gray-700 truncate",children:e.name}),(0,D.jsxs)("div",{className:"text-xs text-gray-500 truncate",children:[e.user," \u2022 ",e.browserInfo]})]})]}),(0,D.jsx)("div",{className:"text-xs text-gray-500 whitespace-nowrap",children:E(e.lastSeen)})]},e.id);var n}))}):(0,D.jsx)("div",{className:"text-center py-4 text-xs text-gray-500",children:"No other devices connected"})]}),o.length>0&&(0,D.jsxs)("div",{className:"bg-white/30 backdrop-blur-sm rounded-lg p-3 border border-white/30",children:[(0,D.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Recent Activity"}),(0,D.jsx)("div",{className:"space-y-1 max-h-24 overflow-y-auto",children:o.slice(0,5).map(((e,t)=>(0,D.jsxs)("div",{className:"text-xs text-gray-600 flex items-center justify-between",children:[(0,D.jsxs)("div",{className:"flex items-center space-x-2 min-w-0 flex-1",children:[(0,D.jsx)("div",{className:"w-1.5 h-1.5 rounded-full flex-shrink-0 ".concat("data_update"===e.type?"bg-blue-500":"device_join"===e.type?"bg-green-500":"device_leave"===e.type?"bg-red-500":"bg-purple-500")}),(0,D.jsx)("span",{className:"truncate",children:e.description||"".concat(e.field||"Data"," ").concat("data_update"===e.type?"updated":e.type.replace("_"," "))})]}),(0,D.jsx)("span",{className:"text-gray-400 whitespace-nowrap ml-2",children:E(e.timestamp)})]},t)))})]}),(0,D.jsxs)("div",{className:"flex gap-2",children:[(0,D.jsx)("button",{onClick:e=>{e.stopPropagation(),"error"===i?s():h()},className:"flex-1 py-2 px-3 bg-gradient-to-r from-emerald-500 to-blue-500  text-white rounded-lg hover:from-emerald-600 hover:to-blue-600  transition-all duration-300 text-xs font-semibold shadow-md transform hover:scale-105",children:"error"===i?"Reconnect":"Refresh All"}),(0,D.jsx)("button",{onClick:e=>{e.stopPropagation(),u()},className:"py-2 px-3 bg-white/20 backdrop-blur-sm border border-white/30  text-gray-700 rounded-lg hover:bg-white/30  transition-all duration-300 text-xs font-semibold",title:d?"Disable sync":"Enable sync",children:d?(0,D.jsx)(Ee,{className:"w-3 h-3"}):(0,D.jsx)(Ie,{className:"w-3 h-3"})})]})]})]})]})]}),f&&(0,D.jsx)("div",{className:"fixed inset-0 z-30",onClick:()=>g(!1)})]})},De=()=>{const e=Array.from({length:30},((e,t)=>{const n=new Date;return n.setDate(n.getDate()-t),I(n)})),t={};return e.forEach((e=>{t[e]={completedTasks:[],employeeMoods:[],purchases:[],totalTasks:22,completionRate:0,totalPointsEarned:0,totalPointsSpent:0}})),t};class Re{constructor(){this.baseUrl=C.databaseURL,this.saveQueue=new Set,this.isCurrentlySaving=!1}async quickSave(e,t){console.log("\ud83d\udd25 QuickSave: ".concat(e)),console.log("\ud83d\udd0d Saving ".concat(e," to Firebase:"),this.getDataSummary(e,t));try{const n=await fetch("".concat(this.baseUrl,"/").concat(e,".json"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error("Firebase save failed: ".concat(n.status," ").concat(n.statusText));console.log("\ud83d\udd12 Critical save - waiting for confirmation: ".concat(e));const r=await fetch("".concat(this.baseUrl,"/").concat(e,".json")),i=await r.json();return console.log("\ud83d\udd0d Verified data in Firebase after save:",this.getDataSummary(e,i)),console.log("\u2705 Critical QuickSave completed: ".concat(e)),!0}catch(ur){return console.error("\u274c QuickSave failed for ".concat(e,":"),ur),!1}}async batchSave(e,t){if(this.isCurrentlySaving)return console.log("\u23f3 Save already in progress, queueing fields:",e),e.forEach((e=>this.saveQueue.add(e))),!0;this.isCurrentlySaving=!0,console.log("\ud83d\udd04 Batch syncing fields:",e);try{const n=e.map((async e=>{const n=this.getFieldData(e,t);return this.quickSave(e,n)})),r=(await Promise.all(n)).every((e=>!0===e));if(r){if(console.log("\u2705 Batch sync completed"),this.saveQueue.size>0){const e=Array.from(this.saveQueue);this.saveQueue.clear(),console.log("\ud83d\udce4 Processing sync queue:",e),setTimeout((()=>{this.batchSave(e,t)}),100)}}else console.error("\u274c Some batch saves failed");return r}catch(ur){return console.error("\u274c Batch save failed:",ur),!1}finally{this.isCurrentlySaving=!1}}getFieldData(e,t){switch(e){case"employees":return t.employees;case"tasks":return t.tasks;case"dailyData":return t.dailyData;case"completedTasks":return Array.from(t.completedTasks);case"taskAssignments":return t.taskAssignments;case"customRoles":return t.customRoles;case"prepItems":return t.prepItems;case"scheduledPreps":return t.scheduledPreps;case"prepSelections":return t.prepSelections;case"storeItems":return t.storeItems;default:return console.warn("Unknown field: ".concat(e)),null}}getDataSummary(e,t){var n,r,i;switch(e){case"employees":return{totalCount:(null===t||void 0===t?void 0:t.length)||0,sampleEmployee:(null===t||void 0===t||null===(n=t[0])||void 0===n?void 0:n.name)||"none"};case"tasks":return{totalCount:(null===t||void 0===t?void 0:t.length)||0,sampleTask:(null===t||void 0===t||null===(r=t[0])||void 0===r?void 0:r.task)||"none"};case"dailyData":return{totalDates:Object.keys(t||{}).length,latestDate:Object.keys(t||{}).sort().pop()||"none"};case"completedTasks":return{completedCount:Array.isArray(t)?t.length:(null===t||void 0===t?void 0:t.size)||0};case"taskAssignments":return{totalAssignments:Object.keys(t||{}).length};case"customRoles":return{rolesCount:(null===t||void 0===t?void 0:t.length)||0,roles:t||[]};case"prepItems":return{totalCount:(null===t||void 0===t?void 0:t.length)||0,samplePrep:(null===t||void 0===t||null===(i=t[0])||void 0===i?void 0:i.name)||"none"};case"scheduledPreps":const e=(new Date).toISOString().split("T")[0],s=(t||[]).filter((t=>t.scheduledDate===e));return{totalCount:(t||[]).length,todayCount:s.length,todayCompletedCount:s.filter((e=>e.completed)).length,sampleTodayPreps:s.slice(0,3).map((e=>({id:e.id,name:e.name,completed:e.completed,scheduledDate:e.scheduledDate})))};case"prepSelections":return{totalSelections:Object.keys(t||{}).length,sampleKeys:Object.keys(t||{}).slice(0,3)};case"storeItems":return{totalCount:(null===t||void 0===t?void 0:t.length)||0,availableCount:(t||[]).filter((e=>e.available)).length};default:return t}}async loadData(){console.log("\ud83d\udd25 Loading data from Firebase...");try{const[e,t,n,r,i,s,a,o,l,d]=await Promise.all([fetch("".concat(this.baseUrl,"/employees.json")),fetch("".concat(this.baseUrl,"/tasks.json")),fetch("".concat(this.baseUrl,"/dailyData.json")),fetch("".concat(this.baseUrl,"/completedTasks.json")),fetch("".concat(this.baseUrl,"/taskAssignments.json")),fetch("".concat(this.baseUrl,"/customRoles.json")),fetch("".concat(this.baseUrl,"/prepItems.json")),fetch("".concat(this.baseUrl,"/scheduledPreps.json")),fetch("".concat(this.baseUrl,"/prepSelections.json")),fetch("".concat(this.baseUrl,"/storeItems.json"))]),u=await e.json(),h=await t.json(),p=await n.json(),m=await r.json(),f=await i.json(),g=await s.json(),y=await a.json(),v=await o.json(),x=await l.json(),b=await d.json(),_=u?u.map((e=>c(c({},e),{},{points:void 0!==e.points?e.points:0}))):[{id:1,name:"Luka",mood:3,lastUpdated:"Not updated",role:"Cleaner",lastMoodDate:null,points:0},{id:2,name:"Safi",mood:3,lastUpdated:"Not updated",role:"Cleaner",lastMoodDate:null,points:0},{id:3,name:"Ehsan",mood:3,lastUpdated:"Not updated",role:"Cleaner",lastMoodDate:null,points:0},{id:4,name:"Oleksii",mood:3,lastUpdated:"Not updated",role:"Manager",lastMoodDate:null,points:0}],w=h?h.map((e=>c(c({},e),{},{points:void 0!==e.points?e.points:this.getDefaultTaskPoints(e.priority)}))):[{id:1,task:"Water all plants",location:"Dining Area",priority:"medium",estimatedTime:"10 min",points:5},{id:2,task:"Refill toilet paper",location:"Restroom",priority:"high",estimatedTime:"5 min",points:8},{id:3,task:"Sweep the floor",location:"Kitchen",priority:"high",estimatedTime:"15 min",points:10},{id:4,task:"Wipe refrigerator surfaces",location:"Kitchen",priority:"medium",estimatedTime:"10 min",points:7},{id:5,task:"Light glass wipe",location:"Kitchen (kylm\xe4vitrini)",priority:"low",estimatedTime:"5 min",points:3},{id:6,task:"Refill takeaway & snack boxes",location:"Kitchen",priority:"medium",estimatedTime:"10 min",points:6},{id:7,task:"Stock napkins",location:"Kitchen",priority:"medium",estimatedTime:"5 min",points:4},{id:8,task:"Wipe and disinfect tables",location:"Dining Area",priority:"high",estimatedTime:"20 min",points:12},{id:9,task:"Clean table legs",location:"Dining Area",priority:"low",estimatedTime:"15 min",points:8},{id:10,task:"Vacuum the floor",location:"Dining Area",priority:"high",estimatedTime:"20 min",points:15},{id:11,task:"Clean sink and mirror",location:"Restroom",priority:"high",estimatedTime:"10 min",points:9},{id:12,task:"Clean inside the toilet",location:"Restroom",priority:"high",estimatedTime:"15 min",points:12},{id:13,task:"Replace towel roll",location:"Restroom",priority:"medium",estimatedTime:"5 min",points:4},{id:14,task:"Final disinfection (POS, Foodora, Wolt)",location:"POS / Front",priority:"high",estimatedTime:"10 min",points:10},{id:15,task:"Sweep the floor",location:"Kitchen (Floor)",priority:"high",estimatedTime:"15 min",points:10},{id:16,task:"Mop the floor (every 2 days)",location:"Kitchen (Floor)",priority:"high",estimatedTime:"20 min",points:15},{id:17,task:"Full grill cleaning",location:"Kitchen",priority:"high",estimatedTime:"45 min",points:25},{id:18,task:"Sanitize all surfaces",location:"Kitchen",priority:"high",estimatedTime:"25 min",points:18},{id:19,task:"Wipe dishwasher surface",location:"Apu-Kitchen",priority:"medium",estimatedTime:"10 min",points:6},{id:20,task:"Replace hood filter (every 3 days)",location:"Kitchen",priority:"medium",estimatedTime:"15 min",points:8},{id:21,task:"Cover all food containers",location:"Storage",priority:"high",estimatedTime:"10 min",points:7},{id:22,task:"Organize containers",location:"Apu-Kitchen",priority:"low",estimatedTime:"15 min",points:5}],k=p?this.migrateDailyData(p):De();return console.log("\u2705 Firebase: Data loaded and migrated successfully"),console.log("\ud83d\udc65 Employees with points:",_),v&&console.log("\ud83d\udccb Loaded scheduledPreps:",this.getDataSummary("scheduledPreps",v)),{employees:_,tasks:w,dailyData:k,completedTasks:new Set(m||[]),taskAssignments:f||{},customRoles:g||["Cleaner","Manager","Supervisor"],prepItems:y||[],scheduledPreps:v||[],prepSelections:x||{},storeItems:b||[]}}catch(ur){throw console.error("\u274c Firebase connection failed:",ur),ur}}getDefaultTaskPoints(e){switch(e){case"high":return 10;case"medium":default:return 5;case"low":return 3}}migrateDailyData(e){const t={};return Object.keys(e).forEach((n=>{const r=e[n];t[n]={completedTasks:r.completedTasks||[],employeeMoods:r.employeeMoods||[],purchases:r.purchases||[],totalTasks:r.totalTasks||22,completionRate:r.completionRate||0,totalPointsEarned:r.totalPointsEarned||0,totalPointsSpent:r.totalPointsSpent||0}})),t}async saveData(e){console.log("\ud83d\udd25 Saving all data to Firebase...");if(!await this.batchSave(["employees","tasks","dailyData","completedTasks","taskAssignments","customRoles","prepItems","scheduledPreps","prepSelections","storeItems"],e))throw console.error("\u274c Firebase: Some data failed to save"),new Error("Firebase save failed");console.log("\u2705 Firebase: All data saved successfully")}async saveImmediate(e,t,n){console.log("\ud83d\udd25 Immediate save triggered by ".concat(e," change"));const r=await this.quickSave(e,t);return r&&n&&"scheduledPreps"!==e&&setTimeout((()=>{console.log("\ud83d\udd04 Background sync of related fields");const t=this.getRelatedFields(e);t.length>0&&this.batchSave(t,n)}),1e3),r}getRelatedFields(e){switch(e){case"completedTasks":return["employees","dailyData","taskAssignments"];case"employees":return["dailyData"];case"taskAssignments":return["completedTasks"];case"scheduledPreps":return["prepSelections"];default:return[]}}}const Me=!1,Ae=!1,Le="${JSCORE_VERSION}",Oe=function(e,t){if(!e)throw Fe(t)},Fe=function(e){return new Error("Firebase Database ("+Le+") INTERNAL ASSERT FAILED: "+e)},ze=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ue={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,d=(3&t)<<4|a>>4;let u=(15&a)<<2|l>>6,h=63&l;o||(h=64,s||(u=64)),r.push(n[c],n[d],n[u],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ze(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==a||null==o)throw new qe;const l=t<<2|s>>4;if(r.push(l),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class qe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const We=function(e){const t=ze(e);return Ue.encodeByteArray(t,!0)},Be=function(e){return We(e).replace(/\./g,"")},He=function(e){try{return Ue.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Ve(e){return Ke(void 0,e)}function Ke(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Ke(e[n],t[n]));return e}const Ye=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Qe=()=>{try{return Ye()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/hamptownControlPanel",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&He(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},$e=e=>{const t=(e=>{var t,n;return null===(n=null===(t=Qe())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Ge=()=>{var e;return null===(e=Qe())||void 0===e?void 0:e.config};class Xe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Je(e){return e.endsWith(".cloudworkstations.dev")}const Ze={};let et=!1;function tt(e,t){if("undefined"===typeof window||"undefined"===typeof document||!Je(window.location.host)||Ze[e]===t||Ze[e]||et)return;function n(e){return"__firebase__banner__".concat(e)}Ze[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(Ze))Ze[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{et=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),d=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(d,c),t.append(d,a,l,n),document.body.appendChild(t)}i?(a.innerText="Preview backend disconnected.",d.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(d.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function nt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function rt(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nt())}function it(){return!0===Me||!0===Ae}class st extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,st.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,at.prototype.create)}}class at{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(ot,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new st(n,s,t)}}const ot=/\{\$([^}]+)}/g;function lt(e){return JSON.parse(e)}function ct(e){return JSON.stringify(e)}const dt=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=lt(He(s[0])||""),n=lt(He(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(s){}return{header:t,claims:n,data:r,signature:i}};function ut(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ht(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function pt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function mt(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function ft(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(gt(n)&&gt(s)){if(!ft(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function gt(e){return null!==e&&"object"===typeof e}class yt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let d=0;d<16;d++)n[d]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let d=0;d<16;d++)n[d]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let d=16;d<80;d++){const e=n[d-3]^n[d-8]^n[d-14]^n[d-16];n[d]=4294967295&(e<<1|e>>>31)}let r,i,s=this.chain_[0],a=this.chain_[1],o=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let d=0;d<80;d++){d<40?d<20?(r=l^a&(o^l),i=1518500249):(r=a^o^l,i=1859775393):d<60?(r=a&o|l&(a|o),i=2400959708):(r=a^o^l,i=3395469782);const e=(s<<5|s>>>27)+r+c+i+n[d]&4294967295;c=l,l=o,o=4294967295&(a<<30|a>>>2),a=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}function vt(e,t){return"".concat(e," failed: ").concat(t," argument ")}const xt=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function bt(e){return e&&e._delegate?e._delegate:e}class _t{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const wt="[DEFAULT]";class kt{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Xe;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:wt})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===wt?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt;return this.component?this.component.multipleInstances?e:wt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Nt{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new kt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Ct=[];var St;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(St||(St={}));const jt={debug:St.DEBUG,verbose:St.VERBOSE,info:St.INFO,warn:St.WARN,error:St.ERROR,silent:St.SILENT},Tt=St.INFO,Et={[St.DEBUG]:"log",[St.VERBOSE]:"log",[St.INFO]:"info",[St.WARN]:"warn",[St.ERROR]:"error"},It=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Et[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class Pt{constructor(e){this.name=e,this._logLevel=Tt,this._logHandler=It,this._userLogHandler=null,Ct.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in St))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?jt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,St.DEBUG,...t),this._logHandler(this,St.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,St.VERBOSE,...t),this._logHandler(this,St.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,St.INFO,...t),this._logHandler(this,St.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,St.WARN,...t),this._logHandler(this,St.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,St.ERROR,...t),this._logHandler(this,St.ERROR,...t)}}let Dt,Rt;const Mt=new WeakMap,At=new WeakMap,Lt=new WeakMap,Ot=new WeakMap,Ft=new WeakMap;let zt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return At.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Lt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Wt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Ut(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Rt||(Rt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Bt(this),n),Wt(Mt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Wt(e.apply(Bt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Bt(this),t,...r);return Lt.set(s,t.sort?t.sort():[t]),Wt(s)}}function qt(e){return"function"===typeof e?Ut(e):(e instanceof IDBTransaction&&function(e){if(At.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));At.set(e,t)}(e),t=e,(Dt||(Dt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,zt):e);var t}function Wt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Wt(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Mt.set(t,e)})).catch((()=>{})),Ft.set(t,e),t}(e);if(Ot.has(e))return Ot.get(e);const t=qt(e);return t!==e&&(Ot.set(e,t),Ft.set(t,e)),t}const Bt=e=>Ft.get(e);const Ht=["get","getKey","getAll","getAllKeys","count"],Vt=["put","add","delete","clear"],Kt=new Map;function Yt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Kt.get(t))return Kt.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Vt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Ht.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),i&&t.done]))[0]};return Kt.set(t,s),s}zt=(e=>c(c({},e),{},{get:(t,n,r)=>Yt(t,n)||e.get(t,n,r),has:(t,n)=>!!Yt(t,n)||e.has(t,n)}))(zt);class Qt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const $t="@firebase/app",Gt="0.13.1",Xt=new Pt("@firebase/app"),Jt="@firebase/app-compat",Zt="@firebase/analytics-compat",en="@firebase/analytics",tn="@firebase/app-check-compat",nn="@firebase/app-check",rn="@firebase/auth",sn="@firebase/auth-compat",an="@firebase/database",on="@firebase/data-connect",ln="@firebase/database-compat",cn="@firebase/functions",dn="@firebase/functions-compat",un="@firebase/installations",hn="@firebase/installations-compat",pn="@firebase/messaging",mn="@firebase/messaging-compat",fn="@firebase/performance",gn="@firebase/performance-compat",yn="@firebase/remote-config",vn="@firebase/remote-config-compat",xn="@firebase/storage",bn="@firebase/storage-compat",_n="@firebase/firestore",wn="@firebase/ai",kn="@firebase/firestore-compat",Nn="firebase",Cn="[DEFAULT]",Sn={[$t]:"fire-core",[Jt]:"fire-core-compat",[en]:"fire-analytics",[Zt]:"fire-analytics-compat",[nn]:"fire-app-check",[tn]:"fire-app-check-compat",[rn]:"fire-auth",[sn]:"fire-auth-compat",[an]:"fire-rtdb",[on]:"fire-data-connect",[ln]:"fire-rtdb-compat",[cn]:"fire-fn",[dn]:"fire-fn-compat",[un]:"fire-iid",[hn]:"fire-iid-compat",[pn]:"fire-fcm",[mn]:"fire-fcm-compat",[fn]:"fire-perf",[gn]:"fire-perf-compat",[yn]:"fire-rc",[vn]:"fire-rc-compat",[xn]:"fire-gcs",[bn]:"fire-gcs-compat",[_n]:"fire-fst",[kn]:"fire-fst-compat",[wn]:"fire-vertex","fire-js":"fire-js",[Nn]:"fire-js-all"},jn=new Map,Tn=new Map,En=new Map;function In(e,t){try{e.container.addComponent(t)}catch(n){Xt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Pn(e){const t=e.name;if(En.has(t))return Xt.debug("There were multiple attempts to register component ".concat(t,".")),!1;En.set(t,e);for(const n of jn.values())In(n,e);for(const n of Tn.values())In(n,e);return!0}function Dn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const Rn=new at("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Mn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new _t("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rn.create("app-deleted",{appName:this._name})}}function An(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Cn,automaticDataCollectionEnabled:!0},t),i=r.name;if("string"!==typeof i||!i)throw Rn.create("bad-app-name",{appName:String(i)});if(n||(n=Ge()),!n)throw Rn.create("no-options");const s=jn.get(i);if(s){if(ft(n,s.options)&&ft(r,s.config))return s;throw Rn.create("duplicate-app",{appName:i})}const a=new Nt(i);for(const l of En.values())a.addComponent(l);const o=new Mn(n,r,a);return jn.set(i,o),o}function Ln(e,t,n){var r;let i=null!==(r=Sn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Xt.warn(e.join(" "))}Pn(new _t("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}const On="firebase-heartbeat-store";let Fn=null;function zn(){return Fn||(Fn=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=Wt(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(Wt(a.result),e.oldVersion,e.newVersion,Wt(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),o.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(On)}catch(n){console.warn(n)}}}).catch((e=>{throw Rn.create("idb-open",{originalErrorMessage:e.message})}))),Fn}async function Un(e,t){try{const n=(await zn()).transaction(On,"readwrite"),r=n.objectStore(On);await r.put(t,qn(e)),await n.done}catch(n){if(n instanceof st)Xt.warn(n.message);else{const e=Rn.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});Xt.warn(e.message)}}}function qn(e){return"".concat(e.name,"!").concat(e.options.appId)}class Wn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Hn(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Bn();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Xt.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Bn(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Vn(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Vn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Be(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Xt.warn(t),""}}}function Bn(){return(new Date).toISOString().substring(0,10)}class Hn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"===typeof indexedDB}catch(e){return!1}}()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(ur){t(ur)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await zn()).transaction(On),n=await t.objectStore(On).get(qn(e));return await t.done,n}catch(t){if(t instanceof st)Xt.warn(t.message);else{const e=Rn.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});Xt.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Un(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Un(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Vn(e){return Be(JSON.stringify({version:2,heartbeats:e})).length}var Kn;Kn="",Pn(new _t("platform-logger",(e=>new Qt(e)),"PRIVATE")),Pn(new _t("heartbeat",(e=>new Wn(e)),"PRIVATE")),Ln($t,Gt,Kn),Ln($t,Gt,"esm2017"),Ln("fire-js","");const Yn="@firebase/database",Qn="1.0.19";let $n="";function Gn(e){$n=e}class Xn{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ct(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:lt(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Jn{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return ut(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Zn=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Xn(t)}}catch(t){}return new Jn},er=Zn("localStorage"),tr=Zn("sessionStorage"),nr=new Pt("@firebase/database"),rr=function(){let e=1;return function(){return e++}}(),ir=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,Oe(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new yt;n.update(t);const r=n.digest();return Ue.encodeByteArray(r)},sr=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=sr.apply(null,n):e+="object"===typeof n?ct(n):n,e+=" "}return e};let ar=null,or=!0;const lr=function(e,t){Oe(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(nr.logLevel=St.VERBOSE,ar=nr.log.bind(nr),t&&tr.set("logging_enabled",!0)):"function"===typeof e?ar=e:(ar=null,tr.remove("logging_enabled"))},cr=function(){if(!0===or&&(or=!1,null===ar&&!0===tr.get("logging_enabled")&&lr(!0)),ar){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=sr.apply(null,t);ar(r)}},dr=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];cr(e,...n)}},ur=function(){const e="FIREBASE INTERNAL ERROR: "+sr(...arguments);nr.error(e)},hr=function(){const e="FIREBASE FATAL ERROR: ".concat(sr(...arguments));throw nr.error(e),new Error(e)},pr=function(){const e="FIREBASE WARNING: "+sr(...arguments);nr.warn(e)},mr=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},fr="[MIN_NAME]",gr="[MAX_NAME]",yr=function(e,t){if(e===t)return 0;if(e===fr||t===gr)return-1;if(t===fr||e===gr)return 1;{const n=Cr(e),r=Cr(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},vr=function(e,t){return e===t?0:e<t?-1:1},xr=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+ct(t))},br=function(e){if("object"!==typeof e||null===e)return ct(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=ct(t[r]),n+=":",n+=br(e[t[r]]);return n+="}",n},_r=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function wr(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const kr=function(e){Oe(!mr(e),"Invalid JSON number");const t=1023;let n,r,i,s,a;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(s=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=s+t,i=Math.round(e*Math.pow(2,52-s)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const o=[];for(a=52;a;a-=1)o.push(i%2?1:0),i=Math.floor(i/2);for(a=11;a;a-=1)o.push(r%2?1:0),r=Math.floor(r/2);o.push(n?1:0),o.reverse();const l=o.join("");let c="";for(a=0;a<64;a+=8){let e=parseInt(l.substr(a,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const Nr=new RegExp("^-?(0*)\\d{1,10}$"),Cr=function(e){if(Nr.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Sr=function(e){try{e()}catch(t){setTimeout((()=>{const e=t.stack||"";throw pr("Exception was thrown by user callback.",e),t}),Math.floor(0))}},jr=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class Tr{constructor(e,t){var n;this.appCheckProvider=t,this.appName=e.name,null!==(n=e)&&void 0!==n&&void 0!==n.settings&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){pr('Provided AppCheck credentials for the app named "'.concat(this.appName,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}class Er{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(cr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',pr(e)}}class Ir{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Ir.OWNER="owner";const Pr="5",Dr=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Rr="ac",Mr="websocket",Ar="long_polling";class Lr{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=o,this.emulatorOptions=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=er.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&er.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}function Or(e,t,n){let r;if(Oe("string"===typeof t,"typeof type must == string"),Oe("object"===typeof n,"typeof params must == object"),t===Mr)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Ar)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return wr(n,((e,t)=>{i.push(e+"="+t)})),r+i.join("&")}class Fr{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;ut(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Ve(this.counters_)}}const zr={},Ur={};function qr(e){const t=e.toString();return zr[t]||(zr[t]=new Fr),zr[t]}class Wr{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&Sr((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const Br="start";class Hr{constructor(e,t,n,r,i,s,a){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=dr(e),this.stats_=qr(t),this.urlFn=e=>(this.appCheckToken&&(e[Rr]=this.appCheckToken),Or(t,Ar,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Wr(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(it()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new Vr((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s,a,o,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===Br)n.id=s,n.password=a;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,(()=>{n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[Br]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=Pr,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[Rr]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&Dr.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Hr.forceAllow_=!0}static forceDisallow(){Hr.forceDisallow_=!0}static isAvailable(){return!it()&&(!!Hr.forceAllow_||!Hr.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=ct(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=We(t),r=_r(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(it())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=ct(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Vr{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,it())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=rr(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Vr.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(i){cr("frame writing exception"),i.stack&&cr(i.stack),cr(i)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||cr("No IE domain setting required")}catch(t){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){it()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{cr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(n){}}),Math.floor(1))}}let Kr=null;"undefined"!==typeof MozWebSocket?Kr=MozWebSocket:"undefined"!==typeof WebSocket&&(Kr=WebSocket);class Yr{constructor(e,t,n,r,i,s,a){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=dr(this.connId),this.stats_=qr(t),this.connURL=Yr.connectionURL_(t,s,a,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const s={};return s.v=Pr,!it()&&"undefined"!==typeof location&&location.hostname&&Dr.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),r&&(s[Rr]=r),i&&(s.p=i),Or(e,Mr,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,er.set("previous_websocket_failure",!0);try{let e;if(it()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":"Firebase/".concat(Pr,"/").concat($n,"/").concat(process.platform,"/").concat(t),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"/hamptownControlPanel",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new Kr(this.connURL,[],e)}catch(n){this.log_("Error instantiating WebSocket.");const e=n.message||n.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){Yr.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Kr&&!Yr.forceDisallow_}static previouslyFailed(){return er.isInMemoryStorage||!0===er.get("previous_websocket_failure")}markConnectionHealthy(){er.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=lt(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Oe(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=ct(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=_r(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Yr.responsesRequiredToBeHealthy=2,Yr.healthyTimeout=3e4;class Qr{static get ALL_TRANSPORTS(){return[Hr,Yr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=Yr&&Yr.isAvailable();let n=t&&!Yr.previouslyFailed();if(e.webSocketOnly&&(t||pr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[Yr];else{const e=this.transports_=[];for(const t of Qr.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);Qr.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Qr.globalTransportInitialized_=!1;class $r{constructor(e,t,n,r,i,s,a,o,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=o,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=dr("c:"+this.id+":"),this.transportManager_=new Qr(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=jr((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=xr("t",e),n=xr("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=xr("t",e),n=xr("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=xr("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?ur("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ur("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Pr!==n&&pr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),jr((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):jr((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(er.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Gr{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class Xr{constructor(e){this.allowedEvents_=e,this.listeners_={},Oe(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){Oe(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class Jr extends Xr{static getInstance(){return new Jr}constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||rt()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}getInitialEvent(e){return Oe("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Zr{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function ei(){return new Zr("")}function ti(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function ni(e){return e.pieces_.length-e.pieceNum_}function ri(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new Zr(e.pieces_,t)}function ii(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function si(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function ai(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Zr(t,0)}function oi(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Zr)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new Zr(n,0)}function li(e){return e.pieceNum_>=e.pieces_.length}function ci(e,t){const n=ti(e),r=ti(t);if(null===n)return t;if(n===r)return ci(ri(e),ri(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function di(e,t){if(ni(e)!==ni(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function ui(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(ni(e)>ni(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class hi{constructor(e,t){this.errorPrefix_=t,this.parts_=si(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=xt(this.parts_[n]);pi(this)}}function pi(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+mi(e))}function mi(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class fi extends Xr{static getInstance(){return new fi}constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}getInitialEvent(e){return Oe("visible"===e,"Unknown event type: "+e),[this.visible_]}}const gi=1e3;class yi extends Gr{constructor(e,t,n,r,i,s,a,o){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=a,this.authOverride_=o,this.id=yi.nextPersistentConnectionId_++,this.log_=dr("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=gi,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,o&&!it())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");fi.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&Jr.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(ct(i)),Oe(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new Xe,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Oe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Oe(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const s=i.d,a=i.s;yi.warnOnListenWarnings_(s,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==a&&this.removeListen_(n,r),e.onComplete&&e.onComplete(a,s))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&ut(e,"w")){const n=ht(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();pr("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(e," at ")+"".concat(n," to your security rules for better performance."))}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=dt(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=dt(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Oe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const s={p:t,d:n};void 0!==i&&(s.h=i),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ct(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):ur("Unrecognized action received from server: "+ct(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Oe(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=gi,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=gi,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=gi),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=Math.max(0,(new Date).getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+yi.nextConnectionId_++,i=this.lastSessionId;let s=!1,a=null;const o=function(){a?a.close():(s=!0,n())},l=function(e){Oe(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(e)};this.realtime_={close:o,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[o,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);s?cr("getToken() completed but was canceled"):(cr("getToken() completed. Creating connection."),this.authToken_=o&&o.accessToken,this.appCheckToken_=l&&l.token,a=new $r(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{pr(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(ur){this.log_("Failed to get token: "+ur),s||(this.repoInfo_.nodeAdmin&&pr(ur),o())}}}interrupt(e){cr("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){cr("Resuming connection for reason: "+e),delete this.interruptReasons_[e],pt(this.interruptReasons_)&&(this.reconnectDelay_=gi,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>br(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new Zr(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){cr("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){cr("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";it()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+$n.replace(/\./g,"-")]=1,rt()?e["framework.cordova"]=1:"object"===typeof navigator&&"ReactNative"===navigator.product&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Jr.getInstance().currentlyOnline();return pt(this.interruptReasons_)&&e}}yi.nextPersistentConnectionId_=0,yi.nextConnectionId_=0;class vi{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new vi(e,t)}}class xi{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new vi(fr,e),r=new vi(fr,t);return 0!==this.compare(n,r)}minPost(){return vi.MIN}}let bi;class _i extends xi{static get __EMPTY_NODE(){return bi}static set __EMPTY_NODE(e){bi=e}compare(e,t){return yr(e.name,t.name)}isDefinedOn(e){throw Fe("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return vi.MIN}maxPost(){return new vi(gr,bi)}makePost(e,t){return Oe("string"===typeof e,"KeyIndex indexValue must always be a string."),new vi(e,bi)}toString(){return".key"}}const wi=new _i;class ki{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ni{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Ni.RED,this.left=null!=r?r:Ci.EMPTY_NODE,this.right=null!=i?i:Ci.EMPTY_NODE}copy(e,t,n,r,i){return new Ni(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ci.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Ci.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ni.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ni.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ni.RED=!0,Ni.BLACK=!1;class Ci{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ci.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new Ci(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ni.BLACK,null,null))}remove(e){return new Ci(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ni.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ki(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new ki(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new ki(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new ki(this.root_,null,this.comparator_,!0,e)}}function Si(e,t){return yr(e.name,t.name)}function ji(e,t){return yr(e,t)}let Ti;Ci.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new Ni(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Ei=function(e){return"number"===typeof e?"number:"+kr(e):"string:"+e},Ii=function(e){if(e.isLeafNode()){const t=e.val();Oe("string"===typeof t||"number"===typeof t||"object"===typeof t&&ut(t,".sv"),"Priority must be a string or number.")}else Oe(e===Ti||e.isEmpty(),"priority of unexpected type.");Oe(e===Ti||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Pi,Di,Ri;class Mi{static set __childrenNodeConstructor(e){Pi=e}static get __childrenNodeConstructor(){return Pi}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mi.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Oe(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Ii(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Mi(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:Mi.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return li(e)?this:".priority"===ti(e)?this.priorityNode_:Mi.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:Mi.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=ti(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(Oe(".priority"!==n||1===ni(e),".priority must be the last token in a path"),this.updateImmediateChild(n,Mi.__childrenNodeConstructor.EMPTY_NODE.updateChild(ri(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Ei(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?kr(this.value_):this.value_,this.lazyHash_=ir(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Mi.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Mi.__childrenNodeConstructor?-1:(Oe(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=Mi.VALUE_TYPE_ORDER.indexOf(t),i=Mi.VALUE_TYPE_ORDER.indexOf(n);return Oe(r>=0,"Unknown leaf type: "+t),Oe(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}Mi.VALUE_TYPE_ORDER=["object","boolean","number","string"];const Ai=new class extends xi{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?yr(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return vi.MIN}maxPost(){return new vi(gr,new Mi("[PRIORITY-POST]",Ri))}makePost(e,t){const n=Di(e);return new vi(t,new Mi("[PRIORITY-POST]",n))}toString(){return".priority"}},Li=Math.log(2);class Oi{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/Li,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Fi=function(e,t,n,r){e.sort(t);const i=function(t,r){const s=r-t;let a,o;if(0===s)return null;if(1===s)return a=e[t],o=n?n(a):a,new Ni(o,a.node,Ni.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=i(t,l),d=i(l+1,r);return a=e[l],o=n?n(a):a,new Ni(o,a.node,Ni.BLACK,c,d)}},s=function(t){let r=null,s=null,a=e.length;const o=function(t,r){const s=a-t,o=a;a-=t;const c=i(s+1,o),d=e[s],u=n?n(d):d;l(new Ni(u,d.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(s=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?o(r,Ni.BLACK):(o(r,Ni.BLACK),o(r,Ni.RED))}return s}(new Oi(e.length));return new Ci(r||t,s)};let zi;const Ui={};class qi{static get Default(){return Oe(Ui&&Ai,"ChildrenNode.ts has not been loaded"),zi=zi||new qi({".priority":Ui},{".priority":Ai}),zi}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=ht(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ci?t:null}hasIndex(e){return ut(this.indexSet_,e.toString())}addIndex(e,t){Oe(e!==wi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(vi.Wrap);let s,a=i.getNext();for(;a;)r=r||e.isDefinedOn(a.node),n.push(a),a=i.getNext();s=r?Fi(n,e.getCompare()):Ui;const o=e.toString(),l=Object.assign({},this.indexSet_);l[o]=e;const c=Object.assign({},this.indexes_);return c[o]=s,new qi(c,l)}addToIndexes(e,t){const n=mt(this.indexes_,((n,r)=>{const i=ht(this.indexSet_,r);if(Oe(i,"Missing index implementation for "+r),n===Ui){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(vi.Wrap);let s=r.getNext();for(;s;)s.name!==e.name&&n.push(s),s=r.getNext();return n.push(e),Fi(n,i.getCompare())}return Ui}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new vi(e.name,r))),i.insert(e,e.node)}}));return new qi(n,this.indexSet_)}removeFromIndexes(e,t){const n=mt(this.indexes_,(n=>{if(n===Ui)return n;{const r=t.get(e.name);return r?n.remove(new vi(e.name,r)):n}}));return new qi(n,this.indexSet_)}}let Wi;class Bi{static get EMPTY_NODE(){return Wi||(Wi=new Bi(new Ci(ji),null,qi.Default))}constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Ii(this.priorityNode_),this.children_.isEmpty()&&Oe(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Wi}updatePriority(e){return this.children_.isEmpty()?this:new Bi(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?Wi:t}}getChild(e){const t=ti(e);return null===t?this:this.getImmediateChild(t).getChild(ri(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(Oe(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new vi(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const s=r.isEmpty()?Wi:this.priorityNode_;return new Bi(r,s,i)}}updateChild(e,t){const n=ti(e);if(null===n)return t;{Oe(".priority"!==ti(e)||1===ni(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(ri(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(Ai,((s,a)=>{t[s]=a.val(e),n++,i&&Bi.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Ei(this.getPriority().val())+":"),this.forEachChild(Ai,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":ir(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new vi(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new vi(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new vi(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,vi.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,vi.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Hi?-1:0}withIndex(e){if(e===wi||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Bi(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===wi||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(Ai),n=t.getIterator(Ai);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===wi?null:this.indexMap_.get(e.toString())}}Bi.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const Hi=new class extends Bi{constructor(){super(new Ci(ji),Bi.EMPTY_NODE,qi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Bi.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(vi,{MIN:{value:new vi(fr,Bi.EMPTY_NODE)},MAX:{value:new vi(gr,Hi)}}),_i.__EMPTY_NODE=Bi.EMPTY_NODE,Mi.__childrenNodeConstructor=Bi,Ti=Hi,function(e){Ri=e}(Hi);function Vi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return Bi.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Oe(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new Mi(e,Vi(t))}if(e instanceof Array){let n=Bi.EMPTY_NODE;return wr(e,((t,r)=>{if(ut(e,t)&&"."!==t.substring(0,1)){const e=Vi(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(Vi(t))}{const n=[];let r=!1;if(wr(e,((e,t)=>{if("."!==e.substring(0,1)){const i=Vi(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new vi(e,i)))}})),0===n.length)return Bi.EMPTY_NODE;const i=Fi(n,Si,(e=>e.name),ji);if(r){const e=Fi(n,Ai.getCompare());return new Bi(i,Vi(t),new qi({".priority":e},{".priority":Ai}))}return new Bi(i,Vi(t),qi.Default)}}!function(e){Di=e}(Vi);class Ki extends xi{constructor(e){super(),this.indexPath_=e,Oe(!li(e)&&".priority"!==ti(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?yr(e.name,t.name):i}makePost(e,t){const n=Vi(e),r=Bi.EMPTY_NODE.updateChild(this.indexPath_,n);return new vi(t,r)}maxPost(){const e=Bi.EMPTY_NODE.updateChild(this.indexPath_,Hi);return new vi(gr,e)}toString(){return si(this.indexPath_,0).join("/")}}const Yi=new class extends xi{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?yr(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return vi.MIN}maxPost(){return vi.MAX}makePost(e,t){const n=Vi(e);return new vi(t,n)}toString(){return".value"}};function Qi(e){return{type:"value",snapshotNode:e}}function $i(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Gi(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Xi(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class Ji{constructor(e){this.index_=e}updateChild(e,t,n,r,i,s){Oe(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(Gi(t,a)):Oe(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange($i(t,n)):s.trackChildChange(Xi(t,n,a))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Ai,((e,r)=>{t.hasChild(e)||n.trackChildChange(Gi(e,r))})),t.isLeafNode()||t.forEachChild(Ai,((t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Xi(t,r,i))}else n.trackChildChange($i(t,r))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Bi.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Zi{constructor(e){this.indexedFilter_=new Ji(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Zi.getStartPost_(e),this.endPost_=Zi.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,s){return this.matches(new vi(t,n))||(n=Bi.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=Bi.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(Bi.EMPTY_NODE);const i=this;return t.forEachChild(Ai,((e,t)=>{i.matches(new vi(e,t))||(r=r.updateImmediateChild(e,Bi.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class es{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new Zi(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,s){return this.rangedFilter_.matches(new vi(t,n))||(n=Bi.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,s):this.fullLimitUpdateChild_(e,t,n,i,s)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=Bi.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=Bi.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority(Bi.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,Bi.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const a=e;Oe(a.numChildren()===this.limit_,"");const o=new vi(t,n),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),c=this.rangedFilter_.matches(o);if(a.hasChild(t)){const e=a.getImmediateChild(t);let d=r.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=d&&(d.name===t||a.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);const u=null==d?1:s(d,o);if(c&&!n.isEmpty()&&u>=0)return null!=i&&i.trackChildChange(Xi(t,n,e)),a.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(Gi(t,e));const n=a.updateImmediateChild(t,Bi.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange($i(d.name,d.node)),n.updateImmediateChild(d.name,d.node)):n}}return n.isEmpty()?e:c&&s(l,o)>=0?(null!=i&&(i.trackChildChange(Gi(l.name,l.node)),i.trackChildChange($i(t,n))),a.updateImmediateChild(t,n).updateImmediateChild(l.name,Bi.EMPTY_NODE)):e}}class ts{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ai}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Oe(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Oe(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:fr}hasEnd(){return this.endSet_}getIndexEndValue(){return Oe(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Oe(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:gr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Oe(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ai}copy(){const e=new ts;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function ns(e){const t={};if(e.isDefault())return t;let n;if(e.index_===Ai?n="$priority":e.index_===Yi?n="$value":e.index_===wi?n="$key":(Oe(e.index_ instanceof Ki,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=ct(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=ct(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+ct(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=ct(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+ct(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function rs(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Ai&&(t.i=e.index_.toString()),t}class is extends Gr{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(Oe(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=dr("p:rest:"),this.listens_={}}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const s=is.getListenId_(e,n),a={};this.listens_[s]=a;const o=ns(e._queryParams);this.restRequest_(i+".json",o,((e,t)=>{let o=t;if(404===e&&(o=null,e=null),null===e&&this.onDataUpdate_(i,o,!1,n),ht(this.listens_,s)===a){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=is.getListenId_(e,t);delete this.listens_[n]}get(e){const t=ns(e._queryParams),n=e._path.toString(),r=new Xe;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((r=>{let[i,s]=r;i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+function(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}(t);this.log_("Sending REST request for "+a);const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(n&&4===o.readyState){this.log_("REST Response for "+a+" received. status:",o.status,"response:",o.responseText);let t=null;if(o.status>=200&&o.status<300){try{t=lt(o.responseText)}catch(e){pr("Failed to parse JSON response for "+a+": "+o.responseText)}n(null,t)}else 401!==o.status&&404!==o.status&&pr("Got unsuccessful REST response for "+a+" Status: "+o.status),n(o.status);n=null}},o.open("GET",a,!0),o.send()}))}}class ss{constructor(){this.rootNode_=Bi.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function as(){return{value:null,children:new Map}}function os(e,t,n){if(li(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=ti(t);e.children.has(r)||e.children.set(r,as());os(e.children.get(r),t=ri(t),n)}}function ls(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{ls(r,new Zr(t.toString()+"/"+e),n)}))}class cs{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&wr(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class ds{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new cs(e);const n=1e4+2e4*Math.random();jr(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;wr(e,((e,r)=>{r>0&&ut(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),jr(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var us;function hs(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(us||(us={}));class ps{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=us.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(li(this.path)){if(null!=this.affectedTree.value)return Oe(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Zr(e));return new ps(ei(),t,this.revert)}}return Oe(ti(this.path)===e,"operationForChild called for unrelated child."),new ps(ri(this.path),this.affectedTree,this.revert)}}class ms{constructor(e,t){this.source=e,this.path=t,this.type=us.LISTEN_COMPLETE}operationForChild(e){return li(this.path)?new ms(this.source,ei()):new ms(this.source,ri(this.path))}}class fs{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=us.OVERWRITE}operationForChild(e){return li(this.path)?new fs(this.source,ei(),this.snap.getImmediateChild(e)):new fs(this.source,ri(this.path),this.snap)}}class gs{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=us.MERGE}operationForChild(e){if(li(this.path)){const t=this.children.subtree(new Zr(e));return t.isEmpty()?null:t.value?new fs(this.source,ei(),t.value):new gs(this.source,ei(),t)}return Oe(ti(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new gs(this.source,ri(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ys{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(li(e))return this.isFullyInitialized()&&!this.filtered_;const t=ti(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class vs{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function xs(e,t,n,r,i,s){const a=r.filter((e=>e.type===n));a.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw Fe("Should only compare child_ events.");const r=new vi(t.childName,t.snapshotNode),i=new vi(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n))),a.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function bs(e,t){return{eventCache:e,serverCache:t}}function _s(e,t,n,r){return bs(new ys(t,n,r),e.serverCache)}function ws(e,t,n,r){return bs(e.eventCache,new ys(t,n,r))}function ks(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Ns(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let Cs;class Ss{static fromObject(e){let t=new Ss(null);return wr(e,((e,n)=>{t=t.set(new Zr(e),n)})),t}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(Cs||(Cs=new Ci(vr)),Cs);this.value=e,this.children=t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:ei(),value:this.value};if(li(e))return null;{const n=ti(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(ri(e),t);if(null!=i){return{path:oi(new Zr(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(li(e))return this;{const t=ti(e),n=this.children.get(t);return null!==n?n.subtree(ri(e)):new Ss(null)}}set(e,t){if(li(e))return new Ss(t,this.children);{const n=ti(e),r=(this.children.get(n)||new Ss(null)).set(ri(e),t),i=this.children.insert(n,r);return new Ss(this.value,i)}}remove(e){if(li(e))return this.children.isEmpty()?new Ss(null):new Ss(null,this.children);{const t=ti(e),n=this.children.get(t);if(n){const r=n.remove(ri(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new Ss(null):new Ss(this.value,i)}return this}}get(e){if(li(e))return this.value;{const t=ti(e),n=this.children.get(t);return n?n.get(ri(e)):null}}setTree(e,t){if(li(e))return t;{const n=ti(e),r=(this.children.get(n)||new Ss(null)).setTree(ri(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new Ss(this.value,i)}}fold(e){return this.fold_(ei(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(oi(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,ei(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(li(e))return null;{const r=ti(e),i=this.children.get(r);return i?i.findOnPath_(ri(e),oi(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,ei(),t)}foreachOnPath_(e,t,n){if(li(e))return this;{this.value&&n(t,this.value);const r=ti(e),i=this.children.get(r);return i?i.foreachOnPath_(ri(e),oi(t,r),n):new Ss(null)}}foreach(e){this.foreach_(ei(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(oi(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class js{constructor(e){this.writeTree_=e}static empty(){return new js(new Ss(null))}}function Ts(e,t,n){if(li(t))return new js(new Ss(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let s=r.value;const a=ci(i,t);return s=s.updateChild(a,n),new js(e.writeTree_.set(i,s))}{const r=new Ss(n),i=e.writeTree_.setTree(t,r);return new js(i)}}}function Es(e,t,n){let r=e;return wr(n,((e,n)=>{r=Ts(r,oi(t,e),n)})),r}function Is(e,t){if(li(t))return js.empty();{const n=e.writeTree_.setTree(t,new Ss(null));return new js(n)}}function Ps(e,t){return null!=Ds(e,t)}function Ds(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(ci(n.path,t)):null}function Rs(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Ai,((e,n)=>{t.push(new vi(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new vi(e,n.value))})),t}function Ms(e,t){if(li(t))return e;{const n=Ds(e,t);return new js(null!=n?new Ss(n):e.writeTree_.subtree(t))}}function As(e){return e.writeTree_.isEmpty()}function Ls(e,t){return Os(ei(),e.writeTree_,t)}function Os(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?(Oe(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Os(oi(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(oi(e,".priority"),r)),n}}function Fs(e,t){return Xs(t,e)}function zs(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));Oe(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,a=e.allWrites.length-1;for(;i&&a>=0;){const t=e.allWrites[a];t.visible&&(a>=n&&Us(t,r.path)?i=!1:ui(r.path,t.path)&&(s=!0)),a--}if(i){if(s)return function(e){e.visibleWrites=Ws(e.allWrites,qs,ei()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=Is(e.visibleWrites,r.path);else{wr(r.children,(t=>{e.visibleWrites=Is(e.visibleWrites,oi(r.path,t))}))}return!0}return!1}function Us(e,t){if(e.snap)return ui(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&ui(oi(e.path,n),t))return!0;return!1}function qs(e){return e.visible}function Ws(e,t,n){let r=js.empty();for(let i=0;i<e.length;++i){const s=e[i];if(t(s)){const e=s.path;let t;if(s.snap)ui(n,e)?(t=ci(n,e),r=Ts(r,t,s.snap)):ui(e,n)&&(t=ci(e,n),r=Ts(r,ei(),s.snap.getChild(t)));else{if(!s.children)throw Fe("WriteRecord should have .snap or .children");if(ui(n,e))t=ci(n,e),r=Es(r,t,s.children);else if(ui(e,n))if(t=ci(e,n),li(t))r=Es(r,ei(),s.children);else{const e=ht(s.children,ti(t));if(e){const n=e.getChild(ri(t));r=Ts(r,ei(),n)}}}}}return r}function Bs(e,t,n,r,i){if(r||i){const s=Ms(e.visibleWrites,t);if(!i&&As(s))return n;if(i||null!=n||Ps(s,ei())){const s=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(ui(e.path,t)||ui(t,e.path))};return Ls(Ws(e.allWrites,s,t),n||Bi.EMPTY_NODE)}return null}{const r=Ds(e.visibleWrites,t);if(null!=r)return r;{const r=Ms(e.visibleWrites,t);if(As(r))return n;if(null!=n||Ps(r,ei())){return Ls(r,n||Bi.EMPTY_NODE)}return null}}}function Hs(e,t,n,r){return Bs(e.writeTree,e.treePath,t,n,r)}function Vs(e,t){return function(e,t,n){let r=Bi.EMPTY_NODE;const i=Ds(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Ai,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=Ms(e.visibleWrites,t);return n.forEachChild(Ai,((e,t)=>{const n=Ls(Ms(i,new Zr(e)),t);r=r.updateImmediateChild(e,n)})),Rs(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return Rs(Ms(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function Ks(e,t,n,r){return function(e,t,n,r,i){Oe(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=oi(t,n);if(Ps(e.visibleWrites,s))return null;{const t=Ms(e.visibleWrites,s);return As(t)?i.getChild(n):Ls(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function Ys(e,t){return function(e,t){return Ds(e.visibleWrites,t)}(e.writeTree,oi(e.treePath,t))}function Qs(e,t,n,r,i,s){return function(e,t,n,r,i,s,a){let o;const l=Ms(e.visibleWrites,t),c=Ds(l,ei());if(null!=c)o=c;else{if(null==n)return[];o=Ls(l,n)}if(o=o.withIndex(a),o.isEmpty()||o.isLeafNode())return[];{const e=[],t=a.getCompare(),n=s?o.getReverseIteratorFrom(r,a):o.getIteratorFrom(r,a);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,s)}function $s(e,t,n){return function(e,t,n,r){const i=oi(t,n),s=Ds(e.visibleWrites,i);if(null!=s)return s;if(r.isCompleteForChild(n))return Ls(Ms(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function Gs(e,t){return Xs(oi(e.treePath,t),e.writeTree)}function Xs(e,t){return{treePath:e,writeTree:t}}class Js{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;Oe("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Oe(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Xi(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Gi(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,$i(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Fe("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Xi(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const Zs=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class ea{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new ys(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return $s(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ns(this.viewCache_),i=Qs(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function ta(e,t,n,r,i){const s=new Js;let a,o;if(n.type===us.OVERWRITE){const l=n;l.source.fromUser?a=ia(e,t,l.path,l.snap,r,i,s):(Oe(l.source.fromServer,"Unknown source."),o=l.source.tagged||t.serverCache.isFiltered()&&!li(l.path),a=ra(e,t,l.path,l.snap,r,i,o,s))}else if(n.type===us.MERGE){const l=n;l.source.fromUser?a=function(e,t,n,r,i,s,a){let o=t;return r.foreach(((r,l)=>{const c=oi(n,r);sa(t,ti(c))&&(o=ia(e,o,c,l,i,s,a))})),r.foreach(((r,l)=>{const c=oi(n,r);sa(t,ti(c))||(o=ia(e,o,c,l,i,s,a))})),o}(e,t,l.path,l.children,r,i,s):(Oe(l.source.fromServer,"Unknown source."),o=l.source.tagged||t.serverCache.isFiltered(),a=oa(e,t,l.path,l.children,r,i,o,s))}else if(n.type===us.ACK_USER_WRITE){const o=n;a=o.revert?function(e,t,n,r,i,s){let a;if(null!=Ys(r,n))return t;{const o=new ea(r,t,i),l=t.eventCache.getNode();let c;if(li(n)||".priority"===ti(n)){let n;if(t.serverCache.isFullyInitialized())n=Hs(r,Ns(t));else{const e=t.serverCache.getNode();Oe(e instanceof Bi,"serverChildren would be complete if leaf node"),n=Vs(r,e)}c=e.filter.updateFullNode(l,n,s)}else{const i=ti(n);let d=$s(r,i,t.serverCache);null==d&&t.serverCache.isCompleteForChild(i)&&(d=l.getImmediateChild(i)),c=null!=d?e.filter.updateChild(l,i,d,ri(n),o,s):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,Bi.EMPTY_NODE,ri(n),o,s):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(a=Hs(r,Ns(t)),a.isLeafNode()&&(c=e.filter.updateFullNode(c,a,s)))}return a=t.serverCache.isFullyInitialized()||null!=Ys(r,ei()),_s(t,c,a,e.filter.filtersNodes())}}(e,t,o.path,r,i,s):function(e,t,n,r,i,s,a){if(null!=Ys(i,n))return t;const o=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(li(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return ra(e,t,n,l.getNode().getChild(n),i,s,o,a);if(li(n)){let r=new Ss(null);return l.getNode().forEachChild(wi,((e,t)=>{r=r.set(new Zr(e),t)})),oa(e,t,n,r,i,s,o,a)}return t}{let c=new Ss(null);return r.foreach(((e,t)=>{const r=oi(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))})),oa(e,t,n,c,i,s,o,a)}}(e,t,o.path,o.affectedTree,r,i,s)}else{if(n.type!==us.LISTEN_COMPLETE)throw Fe("Unknown operation type: "+n.type);a=function(e,t,n,r,i){const s=t.serverCache,a=ws(t,s.getNode(),s.isFullyInitialized()||li(n),s.isFiltered());return na(e,a,n,r,Zs,i)}(e,t,n.path,r,s)}const l=s.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=ks(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(Qi(ks(t)))}}(t,a,l),{viewCache:a,changes:l}}function na(e,t,n,r,i,s){const a=t.eventCache;if(null!=Ys(r,n))return t;{let o,l;if(li(n))if(Oe(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=Ns(t),i=Vs(r,n instanceof Bi?n:Bi.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),i,s)}else{const n=Hs(r,Ns(t));o=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const c=ti(n);if(".priority"===c){Oe(1===ni(n),"Can't have a priority with additional path components");const i=a.getNode();l=t.serverCache.getNode();const s=Ks(r,n,i,l);o=null!=s?e.filter.updatePriority(i,s):a.getNode()}else{const d=ri(n);let u;if(a.isCompleteForChild(c)){l=t.serverCache.getNode();const e=Ks(r,n,a.getNode(),l);u=null!=e?a.getNode().getImmediateChild(c).updateChild(d,e):a.getNode().getImmediateChild(c)}else u=$s(r,c,t.serverCache);o=null!=u?e.filter.updateChild(a.getNode(),c,u,d,i,s):a.getNode()}}return _s(t,o,a.isFullyInitialized()||li(n),e.filter.filtersNodes())}}function ra(e,t,n,r,i,s,a,o){const l=t.serverCache;let c;const d=a?e.filter:e.filter.getIndexedFilter();if(li(n))c=d.updateFullNode(l.getNode(),r,null);else if(d.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=d.updateFullNode(l.getNode(),e,null)}else{const e=ti(n);if(!l.isCompleteForPath(n)&&ni(n)>1)return t;const i=ri(n),s=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?d.updatePriority(l.getNode(),s):d.updateChild(l.getNode(),e,s,i,Zs,null)}const u=ws(t,c,l.isFullyInitialized()||li(n),d.filtersNodes());return na(e,u,n,i,new ea(i,u,s),o)}function ia(e,t,n,r,i,s,a){const o=t.eventCache;let l,c;const d=new ea(i,t,s);if(li(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,a),l=_s(t,c,!0,e.filter.filtersNodes());else{const i=ti(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=_s(t,c,o.isFullyInitialized(),o.isFiltered());else{const s=ri(n),c=o.getNode().getImmediateChild(i);let u;if(li(s))u=r;else{const e=d.getCompleteChild(i);u=null!=e?".priority"===ii(s)&&e.getChild(ai(s)).isEmpty()?e:e.updateChild(s,r):Bi.EMPTY_NODE}if(c.equals(u))l=t;else{l=_s(t,e.filter.updateChild(o.getNode(),i,u,s,d,a),o.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function sa(e,t){return e.eventCache.isCompleteForChild(t)}function aa(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function oa(e,t,n,r,i,s,a,o){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=li(n)?r:new Ss(null).setTree(n,r);const d=t.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(d.hasChild(n)){const l=aa(0,t.serverCache.getNode().getImmediateChild(n),r);c=ra(e,c,new Zr(n),l,i,s,a,o)}})),l.children.inorderTraversal(((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!d.hasChild(n)&&!l){const l=aa(0,t.serverCache.getNode().getImmediateChild(n),r);c=ra(e,c,new Zr(n),l,i,s,a,o)}})),c}class la{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new Ji(n.getIndex()),i=(s=n).loadsAllData()?new Ji(s.getIndex()):s.hasLimit()?new es(s):new Zi(s);var s;this.processor_=function(e){return{filter:e}}(i);const a=t.serverCache,o=t.eventCache,l=r.updateFullNode(Bi.EMPTY_NODE,a.getNode(),null),c=i.updateFullNode(Bi.EMPTY_NODE,o.getNode(),null),d=new ys(l,a.isFullyInitialized(),r.filtersNodes()),u=new ys(c,o.isFullyInitialized(),i.filtersNodes());this.viewCache_=bs(u,d),this.eventGenerator_=new vs(this.query_)}get query(){return this.query_}}function ca(e,t){const n=Ns(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!li(t)&&!n.getImmediateChild(ti(t)).isEmpty())?n.getChild(t):null}function da(e){return 0===e.eventRegistrations_.length}function ua(e,t,n){const r=[];if(n){Oe(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function ha(e,t,n,r){t.type===us.MERGE&&null!==t.source.queryId&&(Oe(Ns(e.viewCache_),"We should always have a full cache before handling merges"),Oe(ks(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,s=ta(e.processor_,i,t,n,r);var a,o;return a=e.processor_,o=s.viewCache,Oe(o.eventCache.getNode().isIndexed(a.filter.getIndex()),"Event snap not indexed"),Oe(o.serverCache.getNode().isIndexed(a.filter.getIndex()),"Server snap not indexed"),Oe(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,pa(e,s.changes,s.viewCache.eventCache.getNode(),null)}function pa(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],s=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),xs(e,i,"child_removed",t,r,n),xs(e,i,"child_added",t,r,n),xs(e,i,"child_moved",s,r,n),xs(e,i,"child_changed",t,r,n),xs(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let ma,fa;class ga{constructor(){this.views=new Map}}function ya(e,t,n,r){const i=t.source.queryId;if(null!==i){const s=e.views.get(i);return Oe(null!=s,"SyncTree gave us an op for an invalid query."),ha(s,t,n,r)}{let i=[];for(const s of e.views.values())i=i.concat(ha(s,t,n,r));return i}}function va(e,t,n,r,i){const s=t._queryIdentifier,a=e.views.get(s);if(!a){let e=Hs(n,i?r:null),s=!1;e?s=!0:r instanceof Bi?(e=Vs(n,r),s=!1):(e=Bi.EMPTY_NODE,s=!1);const a=bs(new ys(e,s,!1),new ys(r,i,!1));return new la(t,a)}return a}function xa(e,t,n,r,i,s){const a=va(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,a),function(e,t){e.eventRegistrations_.push(t)}(a,n),function(e,t){const n=e.viewCache_.eventCache,r=[];n.getNode().isLeafNode()||n.getNode().forEachChild(Ai,((e,t)=>{r.push($i(e,t))}));return n.isFullyInitialized()&&r.push(Qi(n.getNode())),pa(e,r,n.getNode(),t)}(a,n)}function ba(e,t,n,r){const i=t._queryIdentifier,s=[];let a=[];const o=Ca(e);if("default"===i)for(const[l,c]of e.views.entries())a=a.concat(ua(c,n,r)),da(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const t=e.views.get(i);t&&(a=a.concat(ua(t,n,r)),da(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||s.push(t.query)))}return o&&!Ca(e)&&s.push(new(Oe(ma,"Reference.ts has not been loaded"),ma)(t._repo,t._path)),{removed:s,events:a}}function _a(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function wa(e,t){let n=null;for(const r of e.views.values())n=n||ca(r,t);return n}function ka(e,t){if(t._queryParams.loadsAllData())return Sa(e);{const n=t._queryIdentifier;return e.views.get(n)}}function Na(e,t){return null!=ka(e,t)}function Ca(e){return null!=Sa(e)}function Sa(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let ja=1;class Ta{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ss(null),this.pendingWriteTree_={visibleWrites:js.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Ea(e,t,n,r,i){return function(e,t,n,r,i){Oe(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Ts(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?La(e,new fs({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Ia(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(zs(e.pendingWriteTree_,t)){let t=new Ss(null);return null!=r.snap?t=t.set(ei(),!0):wr(r.children,(e=>{t=t.set(new Zr(e),!0)})),La(e,new ps(r.path,t,n))}return[]}function Pa(e,t,n){return La(e,new fs({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Da(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=t._path,a=e.syncPointTree_.get(s);let o=[];if(a&&("default"===t._queryIdentifier||Na(a,t))){const l=ba(a,t,n,r);0===a.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(s));const c=l.removed;if(o=l.events,!i){const n=-1!==c.findIndex((e=>e._queryParams.loadsAllData())),i=e.syncPointTree_.findOnPath(s,((e,t)=>Ca(t)));if(n&&!i){const t=e.syncPointTree_.subtree(s);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&Ca(t)){return[Sa(t)]}{let e=[];return t&&(e=_a(t)),wr(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,s=za(e,r);e.listenProvider_.startListening(Va(i),Ua(e,i),s.hashFn,s.onComplete)}}}if(!i&&c.length>0&&!r)if(n){const n=null;e.listenProvider_.stopListening(Va(t),n)}else c.forEach((t=>{const n=e.queryToTagMap.get(qa(t));e.listenProvider_.stopListening(Va(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=qa(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return o}function Ra(e,t,n,r){const i=Wa(e,r);if(null!=i){const r=Ba(i),s=r.path,a=r.queryId,o=ci(s,t);return Ha(e,s,new fs(hs(a),o,n))}return[]}function Ma(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=t._path;let s=null,a=!1;e.syncPointTree_.foreachOnPath(i,((e,t)=>{const n=ci(e,i);s=s||wa(t,n),a=a||Ca(t)}));let o,l=e.syncPointTree_.get(i);if(l?(a=a||Ca(l),s=s||wa(l,ei())):(l=new ga,e.syncPointTree_=e.syncPointTree_.set(i,l)),null!=s)o=!0;else{o=!1,s=Bi.EMPTY_NODE;e.syncPointTree_.subtree(i).foreachChild(((e,t)=>{const n=wa(t,ei());n&&(s=s.updateImmediateChild(e,n))}))}const c=Na(l,t);if(!c&&!t._queryParams.loadsAllData()){const n=qa(t);Oe(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=ja++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let d=xa(l,t,n,Fs(e.pendingWriteTree_,i),s,o);if(!c&&!a&&!r){const n=ka(l,t);d=d.concat(function(e,t,n){const r=t._path,i=Ua(e,t),s=za(e,n),a=e.listenProvider_.startListening(Va(t),i,s.hashFn,s.onComplete),o=e.syncPointTree_.subtree(r);if(i)Oe(!Ca(o.value),"If we're adding a query, it shouldn't be shadowed");else{const t=o.fold(((e,t,n)=>{if(!li(e)&&t&&Ca(t))return[Sa(t).query];{let e=[];return t&&(e=e.concat(_a(t).map((e=>e.query)))),wr(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(Va(r),Ua(e,r))}}return a}(e,t,n))}return d}function Aa(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=wa(n,ci(e,t));if(r)return r}));return Bs(r,t,i,n,!0)}function La(e,t){return Oa(t,e.syncPointTree_,null,Fs(e.pendingWriteTree_,ei()))}function Oa(e,t,n,r){if(li(e.path))return Fa(e,t,n,r);{const i=t.get(ei());null==n&&null!=i&&(n=wa(i,ei()));let s=[];const a=ti(e.path),o=e.operationForChild(a),l=t.children.get(a);if(l&&o){const e=n?n.getImmediateChild(a):null,t=Gs(r,a);s=s.concat(Oa(o,l,e,t))}return i&&(s=s.concat(ya(i,e,r,n))),s}}function Fa(e,t,n,r){const i=t.get(ei());null==n&&null!=i&&(n=wa(i,ei()));let s=[];return t.children.inorderTraversal(((t,i)=>{const a=n?n.getImmediateChild(t):null,o=Gs(r,t),l=e.operationForChild(t);l&&(s=s.concat(Fa(l,i,a,o)))})),i&&(s=s.concat(ya(i,e,r,n))),s}function za(e,t){const n=t.query,r=Ua(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||Bi.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=Wa(e,n);if(r){const n=Ba(r),i=n.path,s=n.queryId,a=ci(i,t);return Ha(e,i,new ms(hs(s),a))}return[]}(e,n._path,r):function(e,t){return La(e,new ms({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return Da(e,n,null,r)}}}}function Ua(e,t){const n=qa(t);return e.queryToTagMap.get(n)}function qa(e){return e._path.toString()+"$"+e._queryIdentifier}function Wa(e,t){return e.tagToQueryMap.get(t)}function Ba(e){const t=e.indexOf("$");return Oe(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Zr(e.substr(0,t))}}function Ha(e,t,n){const r=e.syncPointTree_.get(t);Oe(r,"Missing sync point for query tag that we're tracking");return ya(r,n,Fs(e.pendingWriteTree_,t),null)}function Va(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Oe(fa,"Reference.ts has not been loaded"),fa)(e._repo,e._path):e}class Ka{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Ka(t)}node(){return this.node_}}class Ya{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=oi(this.path_,e);return new Ya(this.syncTree_,t)}node(){return Aa(this.syncTree_,this.path_)}}const Qa=function(e,t,n){return e&&"object"===typeof e?(Oe(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?$a(e[".sv"],t,n):"object"===typeof e[".sv"]?Ga(e[".sv"],t):void Oe(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},$a=function(e,t,n){if("timestamp"===e)return n.timestamp;Oe(!1,"Unexpected server value: "+e)},Ga=function(e,t,n){e.hasOwnProperty("increment")||Oe(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&Oe(!1,"Unexpected increment value: "+r);const i=t.node();if(Oe(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!==typeof s?r:s+r},Xa=function(e,t,n,r){return Za(t,new Ya(n,e),r)},Ja=function(e,t,n){return Za(e,new Ka(t),n)};function Za(e,t,n){const r=e.getPriority().val(),i=Qa(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const r=e,s=Qa(r.getValue(),t,n);return s!==r.getValue()||i!==r.getPriority().val()?new Mi(s,Vi(i)):e}{const r=e;return s=r,i!==r.getPriority().val()&&(s=s.updatePriority(new Mi(i))),r.forEachChild(Ai,((e,r)=>{const i=Za(r,t.getImmediateChild(e),n);i!==r&&(s=s.updateImmediateChild(e,i))})),s}}class eo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function to(e,t){let n=t instanceof Zr?t:new Zr(t),r=e,i=ti(n);for(;null!==i;){const e=ht(r.node.children,i)||{children:{},childCount:0};r=new eo(i,r,e),n=ri(n),i=ti(n)}return r}function no(e){return e.node.value}function ro(e,t){e.node.value=t,lo(e)}function io(e){return e.node.childCount>0}function so(e,t){wr(e.node.children,((n,r)=>{t(new eo(n,e,r))}))}function ao(e,t,n,r){n&&!r&&t(e),so(e,(e=>{ao(e,t,!0,r)})),n&&r&&t(e)}function oo(e){return new Zr(null===e.parent?e.name:oo(e.parent)+"/"+e.name)}function lo(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===no(e)&&!io(e)}(n),i=ut(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,lo(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,lo(e))}(e.parent,e.name,e)}const co=/[\[\].#$\/\u0000-\u001F\u007F]/,uo=/[\[\].#$\u0000-\u001F\u007F]/,ho=10485760,po=function(e){return"string"===typeof e&&0!==e.length&&!co.test(e)},mo=function(e){return"string"===typeof e&&0!==e.length&&!uo.test(e)},fo=function(e,t,n){const r=n instanceof Zr?new hi(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+mi(r));if("function"===typeof t)throw new Error(e+"contains a function "+mi(r)+" with contents = "+t.toString());if(mr(t))throw new Error(e+"contains "+t.toString()+" "+mi(r));if("string"===typeof t&&t.length>ho/3&&xt(t)>ho)throw new Error(e+"contains a string greater than "+ho+" utf8 bytes "+mi(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if(wr(t,((t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!po(t)))throw new Error(e+" contains an invalid key ("+t+") "+mi(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=xt(t),pi(e)}(r,t),fo(e,s,r),function(e){const t=e.parts_.pop();e.byteLength_-=xt(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+mi(r)+" in addition to actual children.")}},go=function(e,t,n,r){if((!r||void 0!==n)&&!mo(n))throw new Error(vt(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},yo=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!po(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),mo(e)}(n))throw new Error(vt(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class vo{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function xo(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();null===n||di(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function bo(e,t,n){xo(e,n),wo(e,(e=>di(e,t)))}function _o(e,t,n){xo(e,n),wo(e,(e=>ui(e,t)||ui(t,e)))}function wo(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(ko(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function ko(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();ar&&cr("event: "+n.toString()),Sr(r)}}}const No="repo_interrupt";class Co{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new vo,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=as(),this.transactionQueueTree_=new eo,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function So(e,t,n){if(e.stats_=qr(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new is(e.repoInfo_,((t,n,r,i)=>{Eo(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>Io(e,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ct(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new yi(e.repoInfo_,t,((t,n,r,i)=>{Eo(e,t,n,r,i)}),(t=>{Io(e,t)}),(t=>{!function(e,t){wr(t,((t,n)=>{Po(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return Ur[n]||(Ur[n]=t()),Ur[n]}(e.repoInfo_,(()=>new ds(e.stats_,e.server_))),e.infoData_=new ss,e.infoSyncTree_=new Ta({startListening:(t,n,r,i)=>{let s=[];const a=e.infoData_.getNode(t._path);return a.isEmpty()||(s=Pa(e.infoSyncTree_,t._path,a),setTimeout((()=>{i("ok")}),0)),s},stopListening:()=>{}}),Po(e,"connected",!1),e.serverSyncTree_=new Ta({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const s=i(n,r);_o(e.eventQueue_,t._path,s)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function jo(e){const t=e.infoData_.getNode(new Zr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function To(e){return(t=(t={timestamp:jo(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function Eo(e,t,n,r,i){e.dataUpdateCount++;const s=new Zr(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let a=[];if(i)if(r){const t=mt(n,(e=>Vi(e)));a=function(e,t,n,r){const i=Wa(e,r);if(i){const r=Ba(i),s=r.path,a=r.queryId,o=ci(s,t),l=Ss.fromObject(n);return Ha(e,s,new gs(hs(a),o,l))}return[]}(e.serverSyncTree_,s,t,i)}else{const t=Vi(n);a=Ra(e.serverSyncTree_,s,t,i)}else if(r){const t=mt(n,(e=>Vi(e)));a=function(e,t,n){const r=Ss.fromObject(n);return La(e,new gs({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,s,t)}else{const t=Vi(n);a=Pa(e.serverSyncTree_,s,t)}let o=s;a.length>0&&(o=Fo(e,s)),_o(e.eventQueue_,o,a)}function Io(e,t){Po(e,"connected",t),!1===t&&function(e){Ao(e,"onDisconnectEvents");const t=To(e),n=as();ls(e.onDisconnect_,ei(),((r,i)=>{const s=Xa(r,i,e.serverSyncTree_,t);os(n,r,s)}));let r=[];ls(n,ei(),((t,n)=>{r=r.concat(Pa(e.serverSyncTree_,t,n));const i=Bo(e,t);Fo(e,i)})),e.onDisconnect_=as(),_o(e.eventQueue_,ei(),r)}(e)}function Po(e,t,n){const r=new Zr("/.info/"+t),i=Vi(n);e.infoData_.updateSnapshot(r,i);const s=Pa(e.infoSyncTree_,r,i);_o(e.eventQueue_,r,s)}function Do(e){return e.nextWriteId_++}function Ro(e,t,n){let r;r=".info"===ti(t._path)?Da(e.infoSyncTree_,t,n):Da(e.serverSyncTree_,t,n),bo(e.eventQueue_,t._path,r)}function Mo(e){e.persistentConnection_&&e.persistentConnection_.interrupt(No)}function Ao(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];cr(t,...r)}function Lo(e,t,n){return Aa(e.serverSyncTree_,t,n)||Bi.EMPTY_NODE}function Oo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||Wo(e,t),no(t)){const n=Uo(e,t);Oe(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),i=Lo(e,t,r);let s=i;const a=i.hash();for(let c=0;c<n.length;c++){const e=n[c];Oe(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=ci(t,e.path);s=s.updateChild(r,e.currentOutputSnapshotRaw)}const o=s.val(!0),l=t;e.server_.put(l.toString(),o,(r=>{Ao(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(Ia(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();Wo(e,to(e.transactionQueueTree_,t)),Oo(e,e.transactionQueueTree_),_o(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)Sr(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{pr("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}Fo(e,t)}}),a)}(e,oo(t),n)}else io(t)&&so(t,(t=>{Oo(e,t)}))}function Fo(e,t){const n=zo(e,t),r=oo(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const s=t.filter((e=>0===e.status)),a=s.map((e=>e.currentWriteId));for(let l=0;l<t.length;l++){const s=t[l],c=ci(n,s.path);let d,u=!1;if(Oe(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)u=!0,d=s.abortReason,i=i.concat(Ia(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)u=!0,d="maxretry",i=i.concat(Ia(e.serverSyncTree_,s.currentWriteId,!0));else{const n=Lo(e,s.path,a);s.currentInputSnapshot=n;const r=t[l].update(n.val());if(void 0!==r){fo("transaction failed: Data returned ",r,s.path);let t=Vi(r);"object"===typeof r&&null!=r&&ut(r,".priority")||(t=t.updatePriority(n.getPriority()));const o=s.currentWriteId,l=To(e),c=Ja(t,n,l);s.currentOutputSnapshotRaw=t,s.currentOutputSnapshotResolved=c,s.currentWriteId=Do(e),a.splice(a.indexOf(o),1),i=i.concat(Ea(e.serverSyncTree_,s.path,c,s.currentWriteId,s.applyLocally)),i=i.concat(Ia(e.serverSyncTree_,o,!0))}else u=!0,d="nodata",i=i.concat(Ia(e.serverSyncTree_,s.currentWriteId,!0))}_o(e.eventQueue_,n,i),i=[],u&&(t[l].status=2,o=t[l].unwatcher,setTimeout(o,Math.floor(0)),t[l].onComplete&&("nodata"===d?r.push((()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot))):r.push((()=>t[l].onComplete(new Error(d),!1,null)))))}var o;Wo(e,e.transactionQueueTree_);for(let l=0;l<r.length;l++)Sr(r[l]);Oo(e,e.transactionQueueTree_)}(e,Uo(e,n),r),r}function zo(e,t){let n,r=e.transactionQueueTree_;for(n=ti(t);null!==n&&void 0===no(r);)r=to(r,n),n=ti(t=ri(t));return r}function Uo(e,t){const n=[];return qo(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function qo(e,t,n){const r=no(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);so(t,(t=>{qo(e,t,n)}))}function Wo(e,t){const n=no(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,ro(t,n.length>0?n:void 0)}so(t,(t=>{Wo(e,t)}))}function Bo(e,t){const n=oo(zo(e,t)),r=to(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{Ho(e,t)})),Ho(e,r),ao(r,(t=>{Ho(e,t)})),n}function Ho(e,t){const n=no(t);if(n){const r=[];let i=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(Oe(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(Oe(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(Ia(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?ro(t,void 0):n.length=s+1,_o(e.eventQueue_,oo(t),i);for(let e=0;e<r.length;e++)Sr(r[e])}}const Vo=function(e,t){const n=Ko(e),r=n.namespace;"firebase.com"===n.domain&&hr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||hr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&pr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Lr(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new Zr(n.pathString)}},Ko=function(e){let t="",n="",r="",i="",s="",a=!0,o="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(o=e.substring(0,c-1),e=e.substring(c+2));let d=e.indexOf("/");-1===d&&(d=e.length);let u=e.indexOf("?");-1===u&&(u=e.length),t=e.substring(0,Math.min(d,u)),d<u&&(i=function(e){let t="";const n=e.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let e=n[i];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(r){}t+="/"+e}return t}(e.substring(d,u)));const h=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):pr("Invalid query segment '".concat(n,"' in query '").concat(e,"'"))}return t}(e.substring(Math.min(e.length,u)));c=t.indexOf(":"),c>=0?(a="https"===o||"wss"===o,l=parseInt(t.substring(c+1),10)):c=t.length;const p=t.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=r}"ns"in h&&(s=h.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:a,scheme:o,pathString:i,namespace:s}},Yo="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){let e=0;const t=[]}();class Qo{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ct(this.snapshot.exportVal())}}class $o{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Go{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Oe(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Xo{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return li(this._path)?null:ii(this._path)}get ref(){return new Jo(this._repo,this._path)}get _queryIdentifier(){const e=rs(this._queryParams),t=br(e);return"{}"===t?"default":t}get _queryObject(){return rs(this._queryParams)}isEqual(e){if(!((e=bt(e))instanceof Xo))return!1;const t=this._repo===e._repo,n=di(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class Jo extends Xo{constructor(e,t){super(e,t,new ts,!1)}get parent(){const e=ai(this._path);return null===e?null:new Jo(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Zo{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Zr(e),n=tl(this.ref,e);return new Zo(this._node.getChild(t),n,Ai)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,((t,n)=>e(new Zo(n,tl(this.ref,t),Ai))))}hasChild(e){const t=new Zr(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function el(e,t){return(e=bt(e))._checkNotDeleted("ref"),void 0!==t?tl(e._root,t):e._root}function tl(e,t){var n,r,i,s;return null===ti((e=bt(e))._path)?(n="child",r="path",s=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),go(n,r,i,s)):go("child","path",t,!1),new Jo(e._repo,oi(e._path,t))}class nl{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new Qo("value",this,new Zo(e.snapshotNode,new Jo(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new $o(this,e,t):null}matches(e){return e instanceof nl&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class rl{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new $o(this,e,t):null}createEvent(e,t){Oe(null!=e.childName,"Child events should have a childName.");const n=tl(new Jo(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new Qo(e.type,this,new Zo(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof rl&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function il(e,t,n,r,i){let s;if("object"===typeof r&&(s=void 0,i=r),"function"===typeof r&&(s=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{Ro(e._repo,e,o),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const a=new Go(n,s||void 0),o="value"===t?new nl(a):new rl(t,a);return function(e,t,n){let r;r=".info"===ti(t._path)?Ma(e.infoSyncTree_,t,n):Ma(e.serverSyncTree_,t,n),bo(e.eventQueue_,t._path,r)}(e._repo,e,o),()=>Ro(e._repo,e,o)}function sl(e,t,n,r){return il(e,"value",t,n,r)}function al(e,t,n){let r=null;const i=n?new Go(n):null;"value"===t?r=new nl(i):t&&(r=new rl(t,i)),Ro(e._repo,e,r)}!function(e){Oe(!ma,"__referenceConstructor has already been defined"),ma=e}(Jo),function(e){Oe(!fa,"__referenceConstructor has already been defined"),fa=e}(Jo);const ol={};let ll=!1;function cl(e,t,n,r,i){let s=r||e.options.databaseURL;void 0===s&&(e.options.projectId||hr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),cr("Using default host for project ",e.options.projectId),s="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));let a,o,l=Vo(s,i),c=l.repoInfo;"undefined"!==typeof process&&(o={NODE_ENV:"production",PUBLIC_URL:"/hamptownControlPanel",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),o?(a=!0,s="http://".concat(o,"?ns=").concat(c.namespace),l=Vo(s,i),c=l.repoInfo):a=!l.repoInfo.secure;const d=i&&a?new Ir(Ir.OWNER):new Er(e.name,e.options,t);yo("Invalid Firebase Database URL",l),li(l.path)||hr("Database URL must point to the root of a Firebase Database (not including a child path).");const u=function(e,t,n,r){let i=ol[t.name];i||(i={},ol[t.name]=i);let s=i[e.toURLString()];s&&hr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return s=new Co(e,ll,n,r),i[e.toURLString()]=s,s}(c,e,d,new Tr(e,n));return new dl(u,e)}class dl{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(So(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Jo(this._repo,ei())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=ol[t];n&&n[e.key]===e||hr("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),Mo(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&hr("Cannot call "+e+" on a deleted database.")}}function ul(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cn;const t=jn.get(e);if(!t&&e===Cn&&Ge())return An();if(!t)throw Rn.create("no-app",{appName:e});return t}(),t=arguments.length>1?arguments[1]:void 0;const n=Dn(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=$e("database");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=bt(e),e._checkNotDeleted("useEmulator");const i="".concat(t,":").concat(n),s=e._repoInternal;if(e._instanceStarted){if(i===e._repoInternal.repoInfo_.host&&ft(r,s.repoInfo_.emulatorOptions))return;hr("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let a;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&hr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Ir(Ir.OWNER);else if(r.mockUserToken){const t="string"===typeof r.mockUserToken?r.mockUserToken:function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Be(JSON.stringify({alg:"none",type:"JWT"})),Be(JSON.stringify(s)),""].join(".")}(r.mockUserToken,e.app.options.projectId);a=new Ir(t)}Je(t)&&(!async function(e){(await fetch(e,{credentials:"include"})).ok}(t),tt("Database",!0));!function(e,t,n,r){const i=t.lastIndexOf(":"),s=Je(t.substring(0,i));e.repoInfo_=new Lr(t,s,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(e.authTokenProvider_=r)}(s,i,r,a)}(n,...e)}return n}yi.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},yi.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){Gn("11.9.0"),Pn(new _t("database",((e,t)=>{let{instanceIdentifier:n}=t;return cl(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Ln(Yn,Qn,e),Ln(Yn,Qn,"esm2017")}();Ln("firebase","11.9.1","app");const hl=e=>e&&Array.isArray(e)?e.map((e=>({id:e.id||Date.now()+Math.random(),prepId:e.prepId||0,name:e.name||"Unknown Prep",category:e.category||"muut",estimatedTime:e.estimatedTime||"30 min",isCustom:e.isCustom||!1,hasRecipe:e.hasRecipe||!1,recipe:e.recipe||null,scheduledDate:e.scheduledDate||I(new Date),priority:e.priority||"medium",timeSlot:e.timeSlot||"",completed:"boolean"===typeof e.completed&&e.completed,assignedTo:e.assignedTo||null,notes:e.notes||""}))):[],pl=()=>{const[e,t]=(0,r.useState)(!1),[n,i]=(0,r.useState)(null),[s,a]=(0,r.useState)("connecting"),[o,l]=(0,r.useState)([]),[d,u]=(0,r.useState)([]),[h,p]=(0,r.useState)({}),[m,f]=(0,r.useState)(new Set),[g,y]=(0,r.useState)({}),[v,x]=(0,r.useState)(["Cleaner","Manager","Supervisor"]),[b,_]=(0,r.useState)([]),[w,k]=(0,r.useState)([]),[N,S]=(0,r.useState)({}),[j,T]=(0,r.useState)([]),E=new Re,P=(0,r.useRef)(null),D=(0,r.useRef)(""),R=(0,r.useRef)(!1),M=(0,r.useRef)(!1),A=(0,r.useCallback)((async(e,t)=>{console.log("\ud83d\udd25 QuickSave: ".concat(e));try{const n="https://hamptown-panel-default-rtdb.firebaseio.com";let r=t instanceof Set?Array.from(t):t;if("scheduledPreps"===e){const e=I(new Date),t=r.filter((t=>t.scheduledDate===e)),n=t.filter((e=>!0===e.completed));console.log("\ud83d\udd0d Saving scheduledPreps to Firebase:",{totalCount:r.length,todayCount:t.length,todayCompletedCount:n.length,completionPercentage:t.length>0?Math.round(n.length/t.length*100):0,sampleTodayPreps:t.slice(0,3).map((e=>({id:e.id,name:e.name,completed:e.completed,scheduledDate:e.scheduledDate})))}),r=r.map((e=>c(c({},e),{},{completed:Boolean(e.completed)})))}if(["scheduledPreps","completedTasks","taskAssignments","dailyData"].includes(e)){console.log("\ud83d\udd12 Critical save - waiting for confirmation:",e);const t=await fetch("".concat(n,"/").concat(e,".json"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!t.ok)throw new Error("Critical save failed: ".concat(t.status));i((new Date).toLocaleTimeString()),a("connected"),console.log("\u2705 Critical QuickSave completed:",e),"scheduledPreps"===e&&setTimeout((async()=>{try{const t=await fetch("".concat(n,"/").concat(e,".json")),i=await t.json();if(i){const e=I(new Date),t=i.filter((t=>t.scheduledDate===e)),n=t.filter((e=>!0===e.completed));console.log("\ud83d\udd0d Verified scheduledPreps in Firebase after save:",{totalCount:i.length,todayCount:t.length,todayCompletedCount:n.length,completionPercentage:t.length>0?Math.round(n.length/t.length*100):0});const s=r.filter((t=>t.scheduledDate===e&&!0===t.completed)).length;n.length!==s?console.warn("\u26a0\ufe0f Completion count mismatch after save!",{sent:s,verified:n.length}):console.log("\u2705 Completion status successfully verified")}else console.warn("\u26a0\ufe0f No data returned from verification")}catch(ur){console.warn("\u26a0\ufe0f Failed to verify save:",ur)}}),500)}else fetch("".concat(n,"/").concat(e,".json"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((t=>{if(!t.ok)throw new Error("Save failed: ".concat(t.status));i((new Date).toLocaleTimeString()),a("connected"),console.log("\u2705 QuickSave completed:",e)})).catch((e=>{console.warn("\u26a0\ufe0f QuickSave failed (non-blocking):",e),a("error")}));return!0}catch(ur){return console.error("\u274c QuickSave error:",ur),a("error"),!1}}),[]),L=((0,r.useCallback)((async()=>{}),[]),(0,r.useCallback)((async()=>{}),[o,d,h,m,g,v,b,w,N,j])),O=(0,r.useCallback)((async()=>{if(M.current||"error"===s)return void console.log("\u23ed\ufe0f Skipping save (already saving or offline)");const e=JSON.stringify({employees:o.length,tasks:d.length,dailyDataKeys:Object.keys(h).length,completedTasksSize:m.size,taskAssignmentsKeys:Object.keys(g).length,customRolesLength:v.length,prepItemsLength:b.length,scheduledPrepsLength:w.length,prepSelectionsKeys:Object.keys(N).length,storeItemsLength:j.length});if(e!==D.current){M.current=!0,console.log("\ud83d\udcbe Saving data (non-blocking)...");try{await E.saveData({employees:o,tasks:d,dailyData:h,completedTasks:m,taskAssignments:g,customRoles:v,prepItems:b,scheduledPreps:w,prepSelections:N,storeItems:j}),i((new Date).toLocaleTimeString()),D.current=e,a("connected")}catch(ur){console.error("\u274c Save failed:",ur),a("error")}finally{M.current=!1}}}),[o,d,h,m,g,v,b,w,N,j,s,L]),F=(0,r.useCallback)((()=>{P.current&&clearTimeout(P.current),P.current=setTimeout((()=>{O()}),2e3)}),[O]),z=(0,r.useCallback)((async()=>{if(!e){t(!0),a("connecting");try{console.log("\ud83d\udce1 Loading data (fast mode)...");const e=E.loadData(),t=new Promise(((e,t)=>setTimeout((()=>t(new Error("Load timeout"))),1e4))),n=await Promise.race([e,t]),r=(e=>e&&Array.isArray(e)?e.map((e=>({id:e.id||0,name:e.name||"Unknown",mood:e.mood||3,lastUpdated:e.lastUpdated||"Not updated",role:e.role||"Cleaner",lastMoodDate:e.lastMoodDate||null,points:"number"===typeof e.points?e.points:0}))):[{id:1,name:"Luka",mood:3,lastUpdated:"Not updated",role:"Cleaner",lastMoodDate:null,points:0},{id:2,name:"Safi",mood:3,lastUpdated:"Not updated",role:"Cleaner",lastMoodDate:null,points:0},{id:3,name:"Ehsan",mood:3,lastUpdated:"Not updated",role:"Cleaner",lastMoodDate:null,points:0},{id:4,name:"Oleksii",mood:3,lastUpdated:"Not updated",role:"Manager",lastMoodDate:null,points:0}])(n.employees),s=(e=>e&&Array.isArray(e)?e.map((e=>({id:e.id||0,task:e.task||"Unknown Task",location:e.location||"Unknown Location",priority:e.priority||"medium",estimatedTime:e.estimatedTime||"30 min",points:"number"===typeof e.points?e.points:5}))):[{id:1,task:"Water all plants",location:"Dining Area",priority:"medium",estimatedTime:"10 min",points:5},{id:2,task:"Refill toilet paper",location:"Restroom",priority:"high",estimatedTime:"5 min",points:8},{id:3,task:"Sweep the floor",location:"Kitchen",priority:"high",estimatedTime:"15 min",points:10},{id:4,task:"Wipe refrigerator surfaces",location:"Kitchen",priority:"medium",estimatedTime:"10 min",points:7},{id:5,task:"Light glass wipe",location:"Kitchen (kylm\xe4vitrini)",priority:"low",estimatedTime:"5 min",points:3},{id:6,task:"Refill takeaway & snack boxes",location:"Kitchen",priority:"medium",estimatedTime:"10 min",points:6},{id:7,task:"Stock napkins",location:"Kitchen",priority:"medium",estimatedTime:"5 min",points:4},{id:8,task:"Wipe and disinfect tables",location:"Dining Area",priority:"high",estimatedTime:"20 min",points:12},{id:9,task:"Clean table legs",location:"Dining Area",priority:"low",estimatedTime:"15 min",points:8},{id:10,task:"Vacuum the floor",location:"Dining Area",priority:"high",estimatedTime:"20 min",points:15},{id:11,task:"Clean sink and mirror",location:"Restroom",priority:"high",estimatedTime:"10 min",points:9},{id:12,task:"Clean inside the toilet",location:"Restroom",priority:"high",estimatedTime:"15 min",points:12},{id:13,task:"Replace towel roll",location:"Restroom",priority:"medium",estimatedTime:"5 min",points:4},{id:14,task:"Final disinfection (POS, Foodora, Wolt)",location:"POS / Front",priority:"high",estimatedTime:"10 min",points:10},{id:15,task:"Sweep the floor",location:"Kitchen (Floor)",priority:"high",estimatedTime:"15 min",points:10},{id:16,task:"Mop the floor (every 2 days)",location:"Kitchen (Floor)",priority:"high",estimatedTime:"20 min",points:15},{id:17,task:"Full grill cleaning",location:"Kitchen",priority:"high",estimatedTime:"45 min",points:25},{id:18,task:"Sanitize all surfaces",location:"Kitchen",priority:"high",estimatedTime:"25 min",points:18},{id:19,task:"Wipe dishwasher surface",location:"Apu-Kitchen",priority:"medium",estimatedTime:"10 min",points:6},{id:20,task:"Replace hood filter (every 3 days)",location:"Kitchen",priority:"medium",estimatedTime:"15 min",points:8},{id:21,task:"Cover all food containers",location:"Storage",priority:"high",estimatedTime:"10 min",points:7},{id:22,task:"Organize containers",location:"Apu-Kitchen",priority:"low",estimatedTime:"15 min",points:5}])(n.tasks),o=hl(n.scheduledPreps||[]);console.log("\ud83d\udd0d Loading scheduledPreps from Firebase:",{count:o.length,todayPreps:o.filter((e=>e.scheduledDate===I(new Date))).length,todayCompleted:o.filter((e=>e.scheduledDate===I(new Date)&&!0===e.completed)).length,sampleData:o.slice(0,5).map((e=>({id:e.id,name:e.name,completed:e.completed,scheduledDate:e.scheduledDate}))),rawDataSample:n.scheduledPreps?n.scheduledPreps.slice(0,3):"No raw data"}),l(r),u(s),p(n.dailyData),f(new Set(n.completedTasks)),y(n.taskAssignments),x(n.customRoles),_(n.prepItems||[]),k(o),S(n.prepSelections||{}),T(n.storeItems||[{id:1,name:"Free Coffee",description:"Get a free coffee from the kitchen",cost:10,category:"food",icon:"\u2615",available:!0},{id:2,name:"Free Lunch",description:"Get a free meal from the restaurant",cost:50,category:"food",icon:"\ud83c\udf7d\ufe0f",available:!0},{id:3,name:"Free Meal for Friend",description:"Bring a friend for a free meal",cost:80,category:"social",icon:"\ud83d\udc65",available:!0},{id:4,name:"30min Break Extension",description:"Extend your break by 30 minutes",cost:25,category:"break",icon:"\u23f0",available:!0},{id:5,name:"Early Leave (1 hour)",description:"Leave work 1 hour early",cost:60,category:"break",icon:"\ud83d\udeaa",available:!0},{id:6,name:"Free Snack",description:"Get any snack from the kitchen",cost:15,category:"food",icon:"\ud83c\udf7f",available:!0},{id:7,name:"Choose Next Week Schedule",description:"Pick your preferred shifts next week",cost:100,category:"reward",icon:"\ud83d\udcc5",available:!0},{id:8,name:"Team Building Activity",description:"Organize a fun team activity",cost:150,category:"social",icon:"\ud83c\udf89",available:!0},{id:9,name:"Free Dessert",description:"Get any dessert from the menu",cost:20,category:"food",icon:"\ud83c\udf70",available:!0},{id:10,name:"Reserved Parking Spot",description:"Get the best parking spot for a week",cost:40,category:"reward",icon:"\ud83d\ude97",available:!0}]);const c=I(new Date),d=o.filter((e=>e.scheduledDate===c)),h=d.filter((e=>!0===e.completed));console.log("\u2705 Set scheduledPreps state:",{count:o.length,todayCount:d.length,todayCompletedCount:h.length,completionPercentage:d.length>0?Math.round(h.length/d.length*100):0}),a("connected"),i((new Date).toLocaleTimeString()),D.current=JSON.stringify({loaded:!0}),R.current=!0,console.log("\u2705 Data loaded successfully")}catch(ur){console.error("\u274c Load failed:",ur),a("error"),R.current||(console.log("\u26a0\ufe0f Setting defaults due to load failure - sync disabled until manual load succeeds"),l([{id:1,name:"Luka",mood:3,lastUpdated:"Not updated",role:"Cleaner",lastMoodDate:null,points:0},{id:2,name:"Safi",mood:3,lastUpdated:"Not updated",role:"Cleaner",lastMoodDate:null,points:0},{id:3,name:"Ehsan",mood:3,lastUpdated:"Not updated",role:"Cleaner",lastMoodDate:null,points:0},{id:4,name:"Oleksii",mood:3,lastUpdated:"Not updated",role:"Manager",lastMoodDate:null,points:0}]),u([{id:1,task:"Water all plants",location:"Dining Area",priority:"medium",estimatedTime:"10 min",points:5},{id:2,task:"Refill toilet paper",location:"Restroom",priority:"high",estimatedTime:"5 min",points:8},{id:3,task:"Sweep the floor",location:"Kitchen",priority:"high",estimatedTime:"15 min",points:10},{id:4,task:"Wipe refrigerator surfaces",location:"Kitchen",priority:"medium",estimatedTime:"10 min",points:7},{id:5,task:"Light glass wipe",location:"Kitchen (kylm\xe4vitrini)",priority:"low",estimatedTime:"5 min",points:3},{id:6,task:"Refill takeaway & snack boxes",location:"Kitchen",priority:"medium",estimatedTime:"10 min",points:6},{id:7,task:"Stock napkins",location:"Kitchen",priority:"medium",estimatedTime:"5 min",points:4},{id:8,task:"Wipe and disinfect tables",location:"Dining Area",priority:"high",estimatedTime:"20 min",points:12},{id:9,task:"Clean table legs",location:"Dining Area",priority:"low",estimatedTime:"15 min",points:8},{id:10,task:"Vacuum the floor",location:"Dining Area",priority:"high",estimatedTime:"20 min",points:15},{id:11,task:"Clean sink and mirror",location:"Restroom",priority:"high",estimatedTime:"10 min",points:9},{id:12,task:"Clean inside the toilet",location:"Restroom",priority:"high",estimatedTime:"15 min",points:12},{id:13,task:"Replace towel roll",location:"Restroom",priority:"medium",estimatedTime:"5 min",points:4},{id:14,task:"Final disinfection (POS, Foodora, Wolt)",location:"POS / Front",priority:"high",estimatedTime:"10 min",points:10},{id:15,task:"Sweep the floor",location:"Kitchen (Floor)",priority:"high",estimatedTime:"15 min",points:10},{id:16,task:"Mop the floor (every 2 days)",location:"Kitchen (Floor)",priority:"high",estimatedTime:"20 min",points:15},{id:17,task:"Full grill cleaning",location:"Kitchen",priority:"high",estimatedTime:"45 min",points:25},{id:18,task:"Sanitize all surfaces",location:"Kitchen",priority:"high",estimatedTime:"25 min",points:18},{id:19,task:"Wipe dishwasher surface",location:"Apu-Kitchen",priority:"medium",estimatedTime:"10 min",points:6},{id:20,task:"Replace hood filter (every 3 days)",location:"Kitchen",priority:"medium",estimatedTime:"15 min",points:8},{id:21,task:"Cover all food containers",location:"Storage",priority:"high",estimatedTime:"10 min",points:7},{id:22,task:"Organize containers",location:"Apu-Kitchen",priority:"low",estimatedTime:"15 min",points:5}]),p(De()),_([]),k([]),S({}),T([{id:1,name:"Free Coffee",description:"Get a free coffee from the kitchen",cost:10,category:"food",icon:"\u2615",available:!0},{id:2,name:"Free Lunch",description:"Get a free meal from the restaurant",cost:50,category:"food",icon:"\ud83c\udf7d\ufe0f",available:!0},{id:3,name:"Free Meal for Friend",description:"Bring a friend for a free meal",cost:80,category:"social",icon:"\ud83d\udc65",available:!0},{id:4,name:"30min Break Extension",description:"Extend your break by 30 minutes",cost:25,category:"break",icon:"\u23f0",available:!0},{id:5,name:"Early Leave (1 hour)",description:"Leave work 1 hour early",cost:60,category:"break",icon:"\ud83d\udeaa",available:!0},{id:6,name:"Free Snack",description:"Get any snack from the kitchen",cost:15,category:"food",icon:"\ud83c\udf7f",available:!0},{id:7,name:"Choose Next Week Schedule",description:"Pick your preferred shifts next week",cost:100,category:"reward",icon:"\ud83d\udcc5",available:!0},{id:8,name:"Team Building Activity",description:"Organize a fun team activity",cost:150,category:"social",icon:"\ud83c\udf89",available:!0},{id:9,name:"Free Dessert",description:"Get any dessert from the menu",cost:20,category:"food",icon:"\ud83c\udf70",available:!0},{id:10,name:"Reserved Parking Spot",description:"Get the best parking spot for a week",cost:40,category:"reward",icon:"\ud83d\ude97",available:!0}]))}finally{t(!1)}}}),[e]);(0,r.useEffect)((()=>{if(R.current&&!M.current){const e=setTimeout((()=>{F()}),1e3);return()=>clearTimeout(e)}}),[o,d,h,m,g,v,w]),(0,r.useEffect)((()=>{if(R.current){const e=setTimeout((()=>{F()}),3e3);return()=>clearTimeout(e)}}),[b,N,j]);const U=(0,r.useRef)(null),q=(0,r.useRef)(null);return U.current||(U.current=An(C),q.current=ul(U.current)),(0,r.useEffect)((()=>{const e=q.current;if(!e)return;const t=el(e,"employees"),n=e=>{const t=e.val()||[];l(Array.isArray(t)?t:Object.values(t))};sl(t,n);const r=el(e,"tasks"),i=e=>{const t=e.val()||[];u(Array.isArray(t)?t:Object.values(t))};sl(r,i);const s=el(e,"dailyData"),a=e=>{p(e.val()||{})};sl(s,a);const o=el(e,"completedTasks"),c=e=>{f(new Set(e.val()||[]))};sl(o,c);const d=el(e,"taskAssignments"),h=e=>{y(e.val()||{})};sl(d,h);const m=el(e,"customRoles"),g=e=>{x(Array.isArray(e.val())?e.val():[])};sl(m,g);const v=el(e,"prepItems"),b=e=>{const t=e.val()||[];_(Array.isArray(t)?t:Object.values(t))};sl(v,b);const w=el(e,"scheduledPreps"),N=e=>{const t=e.val()||[],n=hl(Array.isArray(t)?t:Object.values(t));k(n)};sl(w,N);const C=el(e,"prepSelections"),j=e=>{S(e.val()||{})};sl(C,j);const E=el(e,"storeItems"),I=e=>{const t=e.val()||[];T(Array.isArray(t)?t:Object.values(t))};return sl(E,I),()=>{al(t,"value",n),al(r,"value",i),al(s,"value",a),al(o,"value",c),al(d,"value",h),al(m,"value",g),al(v,"value",b),al(w,"value",N),al(C,"value",j),al(E,"value",I)}}),[]),{isLoading:e,lastSync:n,connectionStatus:s,employees:o,tasks:d,dailyData:h,completedTasks:m,taskAssignments:g,customRoles:v,prepItems:b,scheduledPreps:w,prepSelections:N,storeItems:j,setEmployees:l,setTasks:u,setDailyData:p,setCompletedTasks:f,setTaskAssignments:y,setCustomRoles:x,setPrepItems:_,setScheduledPreps:k,setPrepSelections:S,setStoreItems:T,loadFromFirebase:z,saveToFirebase:F,quickSave:A}},ml=()=>{const{isLoading:e,lastSync:t,connectionStatus:n,employees:i,tasks:s,dailyData:a,completedTasks:o,taskAssignments:l,customRoles:c,prepItems:d,scheduledPreps:u,prepSelections:h,storeItems:N,setEmployees:C,setTasks:S,setDailyData:j,setCompletedTasks:T,setTaskAssignments:E,setCustomRoles:P,setPrepItems:M,setScheduledPreps:A,setPrepSelections:L,setStoreItems:O,loadFromFirebase:F,saveToFirebase:z,quickSave:q}=pl(),{currentUser:W,isAdmin:B,setIsAdmin:H,switchUser:V,logoutAdmin:K}=(()=>{const[e,t]=(0,r.useState)({id:1,name:"Luka"}),[n,i]=(0,r.useState)(!1),s=(0,r.useCallback)((e=>{t({id:e.id,name:e.name}),localStorage.setItem("currentUserName",e.name)}),[]),a=(0,r.useCallback)((()=>{i(!1)}),[]);return(0,r.useEffect)((()=>{e.name&&localStorage.setItem("currentUserName",e.name)}),[e.name]),{currentUser:e,isAdmin:n,setCurrentUser:t,setIsAdmin:i,switchUser:s,logoutAdmin:a}})(),[Y,$]=(0,r.useState)(3),[G,X]=(0,r.useState)("mood"),[J,Z]=(0,r.useState)(!1),[ee,te]=(0,r.useState)(!1),[ne,re]=(0,r.useState)(""),[se,ae]=(0,r.useState)(I(new Date)),[le,ce]=(0,r.useState)([{id:1,name:"Free Coffee",description:"Get a free coffee from the kitchen",cost:10,category:"food",icon:"\u2615",available:!0},{id:2,name:"Free Lunch",description:"Get a free meal from the restaurant",cost:50,category:"food",icon:"\ud83c\udf7d\ufe0f",available:!0},{id:3,name:"Free Meal for Friend",description:"Bring a friend for a free meal",cost:80,category:"social",icon:"\ud83d\udc65",available:!0},{id:4,name:"30min Break Extension",description:"Extend your break by 30 minutes",cost:25,category:"break",icon:"\u23f0",available:!0},{id:5,name:"Early Leave (1 hour)",description:"Leave work 1 hour early",cost:60,category:"break",icon:"\ud83d\udeaa",available:!0},{id:6,name:"Free Snack",description:"Get any snack from the kitchen",cost:15,category:"food",icon:"\ud83c\udf7f",available:!0},{id:7,name:"Choose Next Week Schedule",description:"Pick your preferred shifts next week",cost:100,category:"reward",icon:"\ud83d\udcc5",available:!0},{id:8,name:"Team Building Activity",description:"Organize a fun team activity",cost:150,category:"social",icon:"\ud83c\udf89",available:!0},{id:9,name:"Free Dessert",description:"Get any dessert from the menu",cost:20,category:"food",icon:"\ud83c\udf70",available:!0},{id:10,name:"Reserved Parking Spot",description:"Get the best parking spot for a week",cost:40,category:"reward",icon:"\ud83d\ude97",available:!0}]),[de,ue]=(0,r.useState)(!1);(0,r.useEffect)((()=>{let e=!0;return(async()=>{e&&0===i.length&&(console.log("\ud83d\ude80 Initializing app..."),await F())})(),()=>{e=!1}}),[]),(0,r.useEffect)((()=>{const t=setInterval((()=>{"connected"!==n||e||z()}),3e5);return()=>clearInterval(t)}),[n,e,z]),(0,r.useEffect)((()=>{const t=()=>{const e=localStorage.getItem("lastDailyResetNotification"),t=localStorage.getItem("lastTaskResetDate"),n=I(new Date);console.log("\ud83d\udd0d Checking notification:",{lastNotificationDate:e,lastResetDate:t,today:n,completedTasksSize:o.size,taskAssignmentsCount:Object.keys(l).length,shouldShow:t===n&&e!==n&&0===o.size&&0===Object.keys(l).length}),t===n&&e!==n&&0===o.size&&0===Object.keys(l).length&&(console.log("\ud83d\udce2 Showing daily reset notification"),ue(!0),localStorage.setItem("lastDailyResetNotification",n),setTimeout((()=>{ue(!1)}),8e3))};if(!e&&"connected"===n){const e=setTimeout(t,2e3);return()=>clearTimeout(e)}}),[o.size,l,e,n]),(0,r.useEffect)((()=>{const e=i.find((e=>e.id===W.id));e&&$(e.mood)}),[W.id,i]),(0,r.useEffect)((()=>{N&&N.length>0&&ce(N)}),[N]);const he=(0,r.useCallback)((()=>{"connected"===n&&z()}),[n,z]),pe=(0,r.useCallback)((e=>{C(e),he()}),[C,he]),me=(0,r.useCallback)((e=>{S(e),he()}),[S,he]),fe=(0,r.useCallback)((e=>{j(e),he()}),[j,he]),ge=(0,r.useCallback)((e=>{T(e),he()}),[T,he]),ye=(0,r.useCallback)((e=>{E(e),he()}),[E,he]),ve=(0,r.useCallback)((e=>{P(e),he()}),[P,he]),xe=(0,r.useCallback)((e=>{const t="function"===typeof e?e(le):e;ce(t),O((()=>t)),he()}),[le,O,he]),be=(0,r.useCallback)((()=>{if(!B)return;console.log("\ud83e\uddea MANUAL RESET: Triggered by admin"),console.log("\ud83d\udccb Before manual reset:",{completedTasksCount:o.size,taskAssignmentsCount:Object.keys(l).length,taskAssignments:l});const e=I(new Date);localStorage.removeItem("resetInProgress"),localStorage.removeItem("lastDailyResetNotification"),localStorage.removeItem("resetCheckedToday"),T(new Set),E((()=>({}))),localStorage.setItem("lastTaskResetDate",e),console.log("\u2705 MANUAL RESET: Cleared both completed tasks AND task assignments"),console.log("\ud83d\udccb After manual reset: { completedTasks: Set(0), taskAssignments: {} }"),ue(!0),setTimeout((()=>{ue(!1)}),8e3),setTimeout((()=>{Promise.all([q("completedTasks",[]),q("taskAssignments",{})]).then((()=>{console.log("\u2705 MANUAL RESET: Both completedTasks=[] and taskAssignments={} saved to Firebase")})).catch((e=>{console.error("\u274c MANUAL RESET: Failed to save to Firebase:",e)}))}),500)}),[B,T,E,q,o,l]),we=()=>{const e=((e,t,n,r)=>"6969"===e?(t(!0),n("admin"),r(""),!0):(alert("Invalid password!"),!1))(ne,H,X,re);e&&te(!1)},ke=i.find((e=>e.id===W.id));return(0,D.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[(0,D.jsxs)("div",{className:"bg-white shadow-sm border-b",children:[(0,D.jsxs)("div",{className:"px-4 py-3 flex justify-between items-center",children:[(0,D.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,D.jsxs)("div",{children:[(0,D.jsx)("h1",{className:"text-xl font-bold text-gray-800",children:"WorkVibe"}),(0,D.jsxs)("button",{onClick:()=>Z(!J),className:"flex items-center text-sm text-gray-600 hover:text-gray-800 mt-1",children:["Hello, ",W.name,"!",(0,D.jsxs)("span",{className:"ml-2 bg-purple-100 text-purple-700 px-2 py-0.5 rounded-full text-xs font-medium",children:[(null===ke||void 0===ke?void 0:ke.points)||0," pts"]}),(0,D.jsx)(p,{className:"w-4 h-4 ml-1"})]})]}),B&&(0,D.jsx)("div",{className:"px-2 py-1 bg-red-100 text-red-700 text-xs rounded-full",children:"Admin Mode"})]}),(0,D.jsxs)("div",{className:"flex items-center space-x-2",children:[B&&(0,D.jsx)("button",{onClick:()=>{K(),X("mood")},className:"p-2 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg",title:"Logout Admin",children:(0,D.jsx)(m,{className:"w-5 h-5"})}),(0,D.jsx)("button",{onClick:()=>te(!0),className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg",title:"Admin Login",children:(0,D.jsx)(f,{className:"w-5 h-5"})})]})]}),J&&(0,D.jsxs)("div",{className:"absolute top-16 left-4 bg-white border rounded-lg shadow-lg z-40 w-64",children:[(0,D.jsx)("div",{className:"p-3 border-b bg-gray-50",children:(0,D.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Switch Employee"})}),(0,D.jsx)("div",{className:"max-h-64 overflow-y-auto",children:i.map((e=>(0,D.jsxs)("button",{onClick:()=>(V(e),Z(!1),void X("mood")),className:"w-full px-4 py-3 text-left hover:bg-gray-50 flex items-center justify-between ".concat(W.id===e.id?"bg-blue-50 border-r-2 border-blue-500":""),children:[(0,D.jsxs)("div",{className:"flex items-center",children:[(0,D.jsx)("div",{className:"w-3 h-3 rounded-full mr-3 ".concat(1===e.mood?"bg-red-500":2===e.mood?"bg-orange-500":3===e.mood?"bg-yellow-500":4===e.mood?"bg-green-500":"bg-blue-500")}),(0,D.jsxs)("div",{children:[(0,D.jsx)("div",{className:"font-medium text-gray-800",children:e.name}),(0,D.jsxs)("div",{className:"text-xs text-gray-500",children:[e.role," \u2022 ",e.points," pts"]})]})]}),W.id===e.id&&(0,D.jsx)(g,{className:"w-4 h-4 text-blue-500"})]},e.id)))})]})]}),(0,D.jsx)("div",{className:"bg-white border-b",children:(0,D.jsxs)("div",{className:"flex overflow-x-auto",children:[(0,D.jsxs)("button",{onClick:()=>X("mood"),className:"flex-shrink-0 py-3 px-4 text-center ".concat("mood"===G?"border-b-2 border-blue-500 text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-800"),children:[(0,D.jsx)(y,{className:"w-5 h-5 mx-auto mb-1"}),(0,D.jsx)("span",{className:"text-sm",children:"Mood Tracker"})]}),(0,D.jsxs)("button",{onClick:()=>X("tasks"),className:"flex-shrink-0 py-3 px-4 text-center ".concat("tasks"===G?"border-b-2 border-blue-500 text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-800"),children:[(0,D.jsx)(v,{className:"w-5 h-5 mx-auto mb-1"}),(0,D.jsx)("span",{className:"text-sm",children:"Cleaning Tasks"})]}),(0,D.jsxs)("button",{onClick:()=>X("prep"),className:"flex-shrink-0 py-3 px-4 text-center ".concat("prep"===G?"border-b-2 border-green-500 text-green-600 bg-green-50":"text-gray-600 hover:text-gray-800"),children:[(0,D.jsx)(x,{className:"w-5 h-5 mx-auto mb-1"}),(0,D.jsx)("span",{className:"text-sm",children:"Prep List"})]}),(0,D.jsxs)("button",{onClick:()=>X("store"),className:"flex-shrink-0 py-3 px-4 text-center ".concat("store"===G?"border-b-2 border-purple-500 text-purple-600 bg-purple-50":"text-gray-600 hover:text-gray-800"),children:[(0,D.jsx)(b,{className:"w-5 h-5 mx-auto mb-1"}),(0,D.jsx)("span",{className:"text-sm",children:"Store"})]}),B&&(0,D.jsxs)("button",{onClick:()=>X("admin"),className:"flex-shrink-0 py-3 px-4 text-center ".concat("admin"===G?"border-b-2 border-red-500 text-red-600 bg-red-50":"text-gray-600 hover:text-gray-800"),children:[(0,D.jsx)(f,{className:"w-5 h-5 mx-auto mb-1"}),(0,D.jsx)("span",{className:"text-sm",children:"Admin Panel"})]}),B&&(0,D.jsxs)("button",{onClick:()=>X("reports"),className:"flex-shrink-0 py-3 px-4 text-center ".concat("reports"===G?"border-b-2 border-orange-500 text-orange-600 bg-orange-50":"text-gray-600 hover:text-gray-800"),children:[(0,D.jsx)(_,{className:"w-5 h-5 mx-auto mb-1"}),(0,D.jsx)("span",{className:"text-sm",children:"Daily Reports"})]})]})}),(0,D.jsxs)("div",{className:"p-4 space-y-6",children:[de&&(0,D.jsx)("div",{className:"fixed top-20 left-1/2 transform -translate-x-1/2 z-50 max-w-md w-full mx-4",children:(0,D.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 shadow-lg backdrop-blur-sm",children:(0,D.jsxs)("div",{className:"flex items-start",children:[(0,D.jsx)("div",{className:"flex-shrink-0",children:(0,D.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,D.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,D.jsxs)("div",{className:"ml-3 flex-1",children:[(0,D.jsx)("h3",{className:"text-sm font-medium text-blue-800",children:"\ud83c\udf05 New Day, Fresh Start!"}),(0,D.jsx)("p",{className:"mt-1 text-sm text-blue-600",children:"All cleaning tasks and assignments have been reset for today. Time to start fresh and earn those points!"})]}),(0,D.jsx)("div",{className:"flex-shrink-0 ml-3",children:(0,D.jsxs)("button",{onClick:()=>ue(!1),className:"text-blue-400 hover:text-blue-600",children:[(0,D.jsx)("span",{className:"sr-only",children:"Close"}),(0,D.jsx)(w,{className:"w-5 h-5"})]})})]})})}),B&&(0,D.jsx)("div",{className:"fixed bottom-20 right-4 z-50",children:(0,D.jsx)("button",{onClick:be,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-full shadow-lg transition-colors text-sm font-medium",title:"Test Daily Reset - Clears both tasks AND assignments (Admin Only)",children:"\ud83e\uddea Test Reset"})}),(0,D.jsx)(Pe,{isLoading:e,lastSync:t,connectionStatus:n,loadFromFirebase:F}),"mood"===G&&(0,D.jsx)(R,{currentUser:W,employees:i,userMood:Y,setUserMood:$,setEmployees:pe,setDailyData:fe}),"tasks"===G&&(0,D.jsx)(U,{currentUser:W,tasks:s,employees:i,completedTasks:o,taskAssignments:l,dailyData:a,setCompletedTasks:ge,setTaskAssignments:ye,setDailyData:fe,setEmployees:pe}),"prep"===G&&(0,D.jsx)(_e,{currentUser:W,connectionStatus:n,prepItems:d,scheduledPreps:u,prepSelections:h,setPrepItems:M,setScheduledPreps:A,setPrepSelections:L,quickSave:q}),"store"===G&&(0,D.jsx)(Q,{currentUser:W,employees:i,storeItems:le,dailyData:a,setEmployees:pe,setDailyData:fe,saveToFirebase:z}),"admin"===G&&B&&(0,D.jsx)(ie,{employees:i,tasks:s,customRoles:c,storeItems:le,prepItems:d,setEmployees:pe,setTasks:me,setCustomRoles:ve,setStoreItems:xe,setPrepItems:M}),"reports"===G&&B&&(0,D.jsx)(oe,{selectedDate:se,setSelectedDate:ae,dailyData:a,employees:i,connectionStatus:n})]}),ee&&(0,D.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,D.jsxs)("div",{className:"bg-white rounded-xl p-6 w-80 mx-4",children:[(0,D.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,D.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,D.jsx)(k,{className:"w-5 h-5 mr-2"}),"Admin Access"]}),(0,D.jsx)("button",{onClick:()=>{te(!1),re("")},className:"text-gray-500 hover:text-gray-700",children:(0,D.jsx)(w,{className:"w-5 h-5"})})]}),(0,D.jsxs)("div",{className:"space-y-4",children:[(0,D.jsx)("input",{type:"password",placeholder:"Enter admin password",value:ne,onChange:e=>re(e.target.value),onKeyPress:e=>"Enter"===e.key&&we(),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",autoFocus:!0}),(0,D.jsx)("button",{onClick:we,className:"w-full bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600 transition-colors",children:"Login"})]})]})}),(J||ee)&&(0,D.jsx)("div",{className:"fixed inset-0 z-30",onClick:()=>{Z(!1),ee||te(!1)}})]})},fl=h("Cable",[["path",{d:"M4 9a2 2 0 0 1-2-2V5h6v2a2 2 0 0 1-2 2Z",key:"1s6oa5"}],["path",{d:"M3 5V3",key:"1k5hjh"}],["path",{d:"M7 5V3",key:"1t1388"}],["path",{d:"M19 15V6.5a3.5 3.5 0 0 0-7 0v11a3.5 3.5 0 0 1-7 0V9",key:"1ytv72"}],["path",{d:"M17 21v-2",key:"ds4u3f"}],["path",{d:"M21 21v-2",key:"eo0ou"}],["path",{d:"M22 19h-6v-2a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2Z",key:"sdz6o8"}]]),gl=h("Router",[["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",key:"w68u3i"}],["path",{d:"M6.01 18H6",key:"19vcac"}],["path",{d:"M10.01 18H10",key:"uamcmx"}],["path",{d:"M15 10v4",key:"qjz1xs"}],["path",{d:"M17.84 7.17a4 4 0 0 0-5.66 0",key:"1rif40"}],["path",{d:"M20.66 4.34a8 8 0 0 0-11.31 0",key:"6a5xfq"}]]),yl=e=>{let{children:t}=e;const[n,i]=(0,r.useState)(navigator.onLine),[s,a]=(0,r.useState)(!1),[o,l]=(0,r.useState)(0);(0,r.useEffect)((()=>{const e=()=>{console.log("\ud83c\udf10 Connection restored"),i(!0),l(0)},t=()=>{console.log("\ud83d\udcf4 Connection lost"),i(!1)},r=async()=>{try{const e=["https://www.google.com/favicon.ico","https://httpbin.org/get","https://jsonplaceholder.typicode.com/posts/1"].map((e=>fetch(e,{method:"HEAD",cache:"no-cache",mode:"no-cors"}).then((()=>!0)).catch((()=>!1)))),t=(await Promise.all(e)).some((e=>e));t!==n&&i(t)}catch(ur){console.warn("Connectivity test failed:",ur),i(!1)}};r(),window.addEventListener("online",e),window.addEventListener("offline",t);const s=setInterval((()=>{n||r()}),5e3);return()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t),clearInterval(s)}}),[n]);return n?(0,D.jsx)(D.Fragment,{children:t}):(0,D.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 flex items-center justify-center p-4",children:[(0,D.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,D.jsx)("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-blue-500/10 rounded-full blur-3xl animate-pulse"}),(0,D.jsx)("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-purple-500/10 rounded-full blur-3xl animate-pulse delay-1000"}),(0,D.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-indigo-500/5 rounded-full blur-3xl animate-pulse delay-500"})]}),(0,D.jsxs)("div",{className:"relative z-10 max-w-lg w-full text-center",children:[(0,D.jsxs)("div",{className:"mb-8 relative",children:[(0,D.jsx)("div",{className:"inline-flex items-center justify-center w-32 h-32 bg-slate-800/50 backdrop-blur-sm rounded-full border border-slate-700/50 shadow-2xl",children:(0,D.jsx)(je,{className:"w-16 h-16 text-red-400 animate-pulse"})}),(0,D.jsx)("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-red-500 rounded-full flex items-center justify-center animate-bounce",children:(0,D.jsx)("span",{className:"text-white text-xs font-bold",children:"!"})})]}),(0,D.jsxs)("div",{className:"mb-6",children:[(0,D.jsx)("div",{className:"text-6xl mb-4 animate-bounce",children:"\ud83d\ude1e"}),(0,D.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"No Internet Connection"}),(0,D.jsx)("p",{className:"text-slate-300 text-lg",children:"Oops! Looks like you're not connected to the internet"})]}),(0,D.jsxs)("div",{className:"bg-slate-800/30 backdrop-blur-sm rounded-2xl p-6 mb-8 border border-slate-700/30",children:[(0,D.jsxs)("h3",{className:"text-white font-semibold mb-4 flex items-center justify-center",children:[(0,D.jsx)(fl,{className:"w-5 h-5 mr-2 text-blue-400"}),"Please check your connection:"]}),(0,D.jsxs)("div",{className:"space-y-3 text-left",children:[(0,D.jsxs)("div",{className:"flex items-center text-slate-300",children:[(0,D.jsx)(gl,{className:"w-4 h-4 mr-3 text-orange-400"}),(0,D.jsx)("span",{children:"Make sure your router is powered on"})]}),(0,D.jsxs)("div",{className:"flex items-center text-slate-300",children:[(0,D.jsx)(fl,{className:"w-4 h-4 mr-3 text-green-400"}),(0,D.jsx)("span",{children:"Check ethernet cable connections"})]}),(0,D.jsxs)("div",{className:"flex items-center text-slate-300",children:[(0,D.jsx)(Se,{className:"w-4 h-4 mr-3 text-blue-400"}),(0,D.jsx)("span",{children:"Verify your internet service is active"})]}),(0,D.jsxs)("div",{className:"flex items-center text-slate-300",children:[(0,D.jsx)(Te,{className:"w-4 h-4 mr-3 text-purple-400"}),(0,D.jsx)("span",{children:"Try connecting to WiFi if available"})]})]})]}),(0,D.jsxs)("div",{className:"space-y-4",children:[(0,D.jsx)("button",{onClick:async()=>{a(!0),l((e=>e+1));try{if(!(await fetch("https://hamptown-panel-default-rtdb.firebaseio.com/.json",{method:"HEAD",cache:"no-cache"})).ok)throw new Error("Firebase unreachable");i(!0),l(0)}catch(ur){console.warn("Retry failed:",ur)}finally{a(!1)}},disabled:s,className:"\n              w-full py-4 px-6 rounded-xl font-semibold text-white\n              transition-all duration-300 transform hover:scale-105\n              ".concat(s?"bg-slate-600 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 shadow-lg hover:shadow-xl","\n            "),children:(0,D.jsx)("div",{className:"flex items-center justify-center",children:s?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(Ce,{className:"w-5 h-5 mr-2 animate-spin"}),"Checking Connection..."]}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(Ce,{className:"w-5 h-5 mr-2"}),"Try Again"]})})}),o>0&&(0,D.jsxs)("p",{className:"text-slate-400 text-sm",children:["Retry attempts: ",o," \u2022 Auto-checking every 5 seconds..."]})]}),(0,D.jsxs)("div",{className:"mt-8 text-slate-400 text-sm",children:[(0,D.jsx)("p",{children:"\ud83c\udf1f Don't worry, we'll keep trying to reconnect!"}),(0,D.jsx)("p",{className:"mt-1",children:"Your work data is safe and waiting for you \ud83d\udcbe"})]}),(0,D.jsxs)("div",{className:"mt-6 flex justify-center space-x-4",children:[(0,D.jsxs)("div",{className:"flex items-center text-xs text-slate-500",children:[(0,D.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full mr-2 animate-pulse"}),"Network: Disconnected"]}),(0,D.jsxs)("div",{className:"flex items-center text-xs text-slate-500",children:[(0,D.jsx)("div",{className:"w-2 h-2 bg-orange-500 rounded-full mr-2 animate-pulse"}),"Firebase: Unreachable"]})]})]}),(0,D.jsx)("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[...Array(12)].map(((e,t)=>(0,D.jsx)("div",{className:"absolute w-1 h-1 bg-white/20 rounded-full animate-pulse",style:{left:"".concat(100*Math.random(),"%"),top:"".concat(100*Math.random(),"%"),animationDelay:"".concat(3*Math.random(),"s")}},t)))})]})};const vl=function(){return(0,D.jsx)("div",{className:"App",children:(0,D.jsx)(yl,{children:(0,D.jsx)(ml,{})})})};let xl;function bl(){const e=document.getElementById("pwa-install-btn");e&&(e.style.display="none")}i.createRoot(document.getElementById("root")).render((0,D.jsx)(r.StrictMode,{children:(0,D.jsx)(vl,{})})),"serviceWorker"in navigator&&(window.addEventListener("load",(()=>{navigator.serviceWorker.register("/sw.js").then((e=>{console.log("\u2705 PWA Service Worker registered successfully:",e.scope),e.addEventListener("updatefound",(()=>{const t=e.installing;t&&t.addEventListener("statechange",(()=>{"installed"===t.state&&navigator.serviceWorker.controller&&(console.log("\ud83d\udd04 New version of WorkVibe available!"),window.confirm("New version of WorkVibe is available! Would you like to update?")&&(t.postMessage({type:"SKIP_WAITING"}),window.location.reload()))}))}))})).catch((e=>{console.warn("\u26a0\ufe0f PWA Service Worker not available (development mode or missing sw.js):",e.message)})),navigator.serviceWorker.addEventListener("message",(e=>{e.data&&"BACKGROUND_SYNC"===e.data.type&&console.log("\ud83d\udd04 Background sync completed")}))})),navigator.serviceWorker.addEventListener("controllerchange",(()=>{console.log("\ud83d\udd04 Service Worker controller changed"),window.location.reload()}))),window.addEventListener("beforeinstallprompt",(e=>{console.log("\ud83d\udcf1 PWA install prompt triggered"),e.preventDefault(),xl=e,function(){const e=document.getElementById("pwa-install-btn");e&&(e.style.display="block",e.onclick=async()=>{if(xl){xl.prompt();const{outcome:e}=await xl.userChoice;console.log("PWA install prompt: ".concat(e)),xl=null,bl()}})}()})),window.addEventListener("appinstalled",(()=>{console.log("\ud83c\udf89 WorkVibe PWA was installed successfully!"),xl=null,bl(),window.gtag&&window.gtag("event","pwa_install",{event_category:"engagement",event_label:"WorkVibe PWA Install"})})),window.addEventListener("online",(()=>{console.log("\ud83c\udf10 Back online!")})),window.addEventListener("offline",(()=>{console.log("\ud83d\udcf5 Gone offline")})),document.addEventListener("touchstart",(e=>{e.touches.length>1&&e.preventDefault()}));let _l=0;function wl(){const e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))}document.addEventListener("touchend",(e=>{const t=(new Date).getTime();t-_l<=300&&e.preventDefault(),_l=t}),!1),wl(),window.addEventListener("resize",wl),window.addEventListener("orientationchange",(()=>{setTimeout(wl,100)}))})();
//# sourceMappingURL=main.90aaf90d.js.map