/*! For license information please see main.3f8b8ff8.js.LICENSE.txt */
(()=>{var e={43:(e,t,n)=>{"use strict";e.exports=n(202)},95:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},105:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},141:(e,t,n)=>{var r=n(143),s=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(s,""):e}},143:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},153:(e,t,n)=>{"use strict";var r=n(43),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,d=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:s,type:e,key:c,ref:d,props:i,_owner:o.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},171:(e,t,n)=>{var r=n(812),s=Object.prototype,i=s.hasOwnProperty,a=s.toString,o=r?r.toStringTag:void 0;e.exports=function(e){var t=i.call(e,o),n=e[o];try{e[o]=void 0;var r=!0}catch(l){}var s=a.call(e);return r&&(t?e[o]=n:delete e[o]),s}},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function x(){}function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=y.prototype;var b=v.prototype=new x;b.constructor=v,f(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,k={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function j(e,t,r){var s,i={},a=null,o=null;if(null!=t)for(s in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)_.call(t,s)&&!N.hasOwnProperty(s)&&(i[s]=t[s]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===i[s]&&(i[s]=l[s]);return{$$typeof:n,type:e,key:a,ref:o,props:i,_owner:k.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var S=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function E(e,t,s,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===i?"."+T(l,0):i,w(a)?(s="",null!=e&&(s=e.replace(S,"$&/")+"/"),E(a,t,s,"",(function(e){return e}))):null!=a&&(C(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,s+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(S,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",w(e))for(var c=0;c<e.length;c++){var d=i+T(o=e[c],c);l+=E(o,t,s,d,a)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)l+=E(o=o.value,t,s,d=i+T(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function I(e,t,n){if(null==e)return e;var r=[],s=0;return E(e,r,"","",(function(e){return t.call(n,e,s++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},M={transition:null},R={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:M,ReactCurrentOwner:k};function A(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:I,forEach:function(e,t,n){I(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return I(e,(function(){t++})),t},toArray:function(e){return I(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=s,t.Profiler=a,t.PureComponent=v,t.StrictMode=i,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=A,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=f({},e.props),i=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=k.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!N.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:n,type:e.type,key:i,ref:a,props:s,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=j,t.createFactory=function(e){var t=j.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},t.unstable_act=A,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,d=e[c];if(0>i(l,n))c<s&&0>i(d,l)?(e[r]=d,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>i(d,n)))break e;e[r]=d,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,p=3,m=!1,f=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,x="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(d);null!==t;){if(null===t.callback)s(d);else{if(!(t.startTime<=e))break;s(d),t.sortIndex=t.expirationTime,n(c,t)}t=r(d)}}function w(e){if(g=!1,b(e),!f)if(null!==r(c))f=!0,M(_);else{var t=r(d);null!==t&&R(w,t.startTime-e)}}function _(e,n){f=!1,g&&(g=!1,x(C),C=-1),m=!0;var i=p;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!E());){var a=h.callback;if("function"===typeof a){h.callback=null,p=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&s(c),b(n)}else s(c);h=r(c)}if(null!==h)var l=!0;else{var u=r(d);null!==u&&R(w,u.startTime-n),l=!1}return l}finally{h=null,p=i,m=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,N=!1,j=null,C=-1,S=5,T=-1;function E(){return!(t.unstable_now()-T<S)}function I(){if(null!==j){var e=t.unstable_now();T=e;var n=!0;try{n=j(!0,e)}finally{n?k():(N=!1,j=null)}}else N=!1}if("function"===typeof v)k=function(){v(I)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,D=P.port2;P.port1.onmessage=I,k=function(){D.postMessage(null)}}else k=function(){y(I,0)};function M(e){j=e,N||(N=!0,k())}function R(e,n){C=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||m||(f=!0,M(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,s,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:s,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(e.sortIndex=i,n(d,e),null===r(c)&&e===r(d)&&(g?(x(C),C=-1):g=!0,R(w,i-a))):(e.sortIndex=o,n(c,e),f||m||(f=!0,M(_))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},552:(e,t,n)=>{var r=n(105),s="object"==typeof self&&self&&self.Object===Object&&self,i=r||s||Function("return this")();e.exports=i},569:(e,t,n)=>{var r=n(686),s=n(757),i=n(801),a=Math.max,o=Math.min;e.exports=function(e,t,n){var l,c,d,u,h,p,m=0,f=!1,g=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function x(t){var n=l,r=c;return l=c=void 0,m=t,u=e.apply(r,n)}function v(e){var n=e-p;return void 0===p||n>=t||n<0||g&&e-m>=d}function b(){var e=s();if(v(e))return w(e);h=setTimeout(b,function(e){var n=t-(e-p);return g?o(n,d-(e-m)):n}(e))}function w(e){return h=void 0,y&&l?x(e):(l=c=void 0,u)}function _(){var e=s(),n=v(e);if(l=arguments,c=this,p=e,n){if(void 0===h)return function(e){return m=e,h=setTimeout(b,t),f?x(e):u}(p);if(g)return clearTimeout(h),h=setTimeout(b,t),x(p)}return void 0===h&&(h=setTimeout(b,t)),u}return t=i(t)||0,r(n)&&(f=!!n.leading,d=(g="maxWait"in n)?a(i(n.maxWait)||0,t):d,y="trailing"in n?!!n.trailing:y),_.cancel=function(){void 0!==h&&clearTimeout(h),m=0,l=p=c=h=void 0},_.flush=function(){return void 0===h?u:w(s())},_}},579:(e,t,n)=>{"use strict";e.exports=n(153)},686:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},730:(e,t,n)=>{"use strict";var r=n(43),s=n(853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function f(e,t,n,r,s,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new f(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new f(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new f(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new f(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new f(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new f(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function x(e){return e[1].toUpperCase()}function v(e,t,n,r){var s=g.hasOwnProperty(t)?g[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!u.call(m,e)||!u.call(p,e)&&(h.test(e)?m[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,x);g[t]=new f(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,x);g[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,x);g[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),S=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var M=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function A(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var L,O=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var z=!1;function U(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var s=c.stack.split("\n"),i=r.stack.split("\n"),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(1!==a||1!==o)do{if(a--,0>--o||s[a]!==i[o]){var l="\n"+s[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function q(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case _:return"Portal";case j:return"Profiler";case N:return"StrictMode";case E:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case S:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:W(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return W(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(t);case 8:return t===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=V(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return O({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function G(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function Z(e,t){X(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return O({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ie(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return de(e,t)}))}:de);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function fe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=fe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(pe).forEach((function(e){me.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ye=O({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xe(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,ke=null,Ne=null;function je(e){if(e=vs(e)){if("function"!==typeof _e)throw Error(i(280));var t=e.stateNode;t&&(t=ws(t),_e(e.stateNode,e.type,t))}}function Ce(e){ke?Ne?Ne.push(e):Ne=[e]:ke=e}function Se(){if(ke){var e=ke,t=Ne;if(Ne=ke=null,je(e),t)for(e=0;e<t.length;e++)je(t[e])}}function Te(e,t){return e(t)}function Ee(){}var Ie=!1;function Pe(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return Te(e,t,n)}finally{Ie=!1,(null!==ke||null!==Ne)&&(Ee(),Se())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=ws(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Me=!1;if(d)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Me=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(de){Me=!1}function Ae(e,t,n,r,s,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var Le=!1,Oe=null,Fe=!1,ze=null,Ue={onError:function(e){Le=!0,Oe=e}};function qe(e,t,n,r,s,i,a,o,l){Le=!1,Oe=null,Ae.apply(Ue,arguments)}function We(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(We(e)!==e)throw Error(i(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=We(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(r=s.return)){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return He(s),e;if(a===r)return He(s),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ye=s.unstable_scheduleCallback,Qe=s.unstable_cancelCallback,$e=s.unstable_shouldYield,Ge=s.unstable_requestPaint,Xe=s.unstable_now,Ze=s.unstable_getCurrentPriorityLevel,Je=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,nt=s.unstable_LowPriority,rt=s.unstable_IdlePriority,st=null,it=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~s;0!==o?r=ut(o):0!==(i&=a)&&(r=ut(i))}else 0!==(a=n&~s)?r=ut(a):0!==i&&(r=ut(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(i=t&-t)||16===s&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-at(t)),r|=e[n],t&=~s;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function xt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var vt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,kt,Nt,jt,Ct=!1,St=[],Tt=null,Et=null,It=null,Pt=new Map,Dt=new Map,Mt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function At(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Et=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Lt(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=vs(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Ot(e){var t=xs(e.target);if(null!==t){var n=We(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void jt(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=vs(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function zt(e,t,n){Ft(e)&&n.delete(t)}function Ut(){Ct=!1,null!==Tt&&Ft(Tt)&&(Tt=null),null!==Et&&Ft(Et)&&(Et=null),null!==It&&Ft(It)&&(It=null),Pt.forEach(zt),Dt.forEach(zt)}function qt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Ut)))}function Wt(e){function t(t){return qt(t,e)}if(0<St.length){qt(St[0],e);for(var n=1;n<St.length;n++){var r=St[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&qt(Tt,e),null!==Et&&qt(Et,e),null!==It&&qt(It,e),Pt.forEach(t),Dt.forEach(t),n=0;n<Mt.length;n++)(r=Mt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Mt.length&&null===(n=Mt[0]).blockedOn;)Ot(n),null===n.blockedOn&&Mt.shift()}var Bt=b.ReactCurrentBatchConfig,Ht=!0;function Vt(e,t,n,r){var s=vt,i=Bt.transition;Bt.transition=null;try{vt=1,Yt(e,t,n,r)}finally{vt=s,Bt.transition=i}}function Kt(e,t,n,r){var s=vt,i=Bt.transition;Bt.transition=null;try{vt=4,Yt(e,t,n,r)}finally{vt=s,Bt.transition=i}}function Yt(e,t,n,r){if(Ht){var s=$t(e,t,n,r);if(null===s)Hr(e,t,r,Qt,n),At(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return Tt=Lt(Tt,e,t,n,r,s),!0;case"dragenter":return Et=Lt(Et,e,t,n,r,s),!0;case"mouseover":return It=Lt(It,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Pt.set(i,Lt(Pt.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Dt.set(i,Lt(Dt.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(At(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==s;){var i=vs(s);if(null!==i&&wt(i),null===(i=$t(e,t,n,r))&&Hr(e,t,r,Qt,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Qt=null;function $t(e,t,n,r){if(Qt=null,null!==(e=xs(e=we(r))))if(null===(t=We(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Gt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Zt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Zt,r=n.length,s="value"in Xt?Xt.value:Xt.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===s[i-t];t++);return Jt=s.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,s,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return O(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(cn),un=O({},cn,{view:0,detail:0}),hn=sn(un),pn=O({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),mn=sn(pn),fn=sn(O({},pn,{dataTransfer:0})),gn=sn(O({},un,{relatedTarget:0})),yn=sn(O({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),xn=O({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vn=sn(xn),bn=sn(O({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function jn(){return Nn}var Cn=O({},un,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sn=sn(Cn),Tn=sn(O({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),En=sn(O({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jn})),In=sn(O({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=O({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=sn(Pn),Mn=[9,13,27,32],Rn=d&&"CompositionEvent"in window,An=null;d&&"documentMode"in document&&(An=document.documentMode);var Ln=d&&"TextEvent"in window&&!An,On=d&&(!Rn||An&&8<An&&11>=An),Fn=String.fromCharCode(32),zn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function Vn(e,t,n,r){Ce(r),0<(t=Kr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Yn=null;function Qn(e){Fr(e,0)}function $n(e){if(Y(bs(e)))return e}function Gn(e,t){if("change"===e)return t}var Xn=!1;if(d){var Zn;if(d){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}Zn=Jn}else Zn=!1;Xn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Yn=Kn=null)}function nr(e){if("value"===e.propertyName&&$n(Yn)){var t=[];Vn(t,Yn,e,we(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Yn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Yn)}function ir(e,t){if("click"===e)return $n(t)}function ar(e,t){if("input"===e||"change"===e)return $n(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!u.call(t,s)||!or(e[s],t[s]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function ur(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ur(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ur(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=void 0===r.end?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=dr(n,i);var a=dr(n,r);s&&a&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fr=d&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,xr=null,vr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vr||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},xr&&lr(xr,r)||(xr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},kr={},Nr={};function jr(e){if(kr[e])return kr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Nr)return kr[e]=n[t];return e}d&&(Nr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Cr=jr("animationend"),Sr=jr("animationiteration"),Tr=jr("animationstart"),Er=jr("transitionend"),Ir=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Ir.set(e,t),l(t,[e])}for(var Mr=0;Mr<Pr.length;Mr++){var Rr=Pr[Mr];Dr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Dr(Cr,"onAnimationEnd"),Dr(Sr,"onAnimationIteration"),Dr(Tr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Er,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ar="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ar));function Or(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,s,a,o,l,c){if(qe.apply(this,arguments),Le){if(!Le)throw Error(i(198));var d=Oe;Le=!1,Oe=null,Fe||(Fe=!0,ze=d)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;Or(s,o,c),i=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;Or(s,o,c),i=l}}}if(Fe)throw e=ze,Fe=!1,ze=null,e}function zr(e,t){var n=t[fs];void 0===n&&(n=t[fs]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var qr="_reactListening"+Math.random().toString(36).slice(2);function Wr(e){if(!e[qr]){e[qr]=!0,a.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Ur(t,!1,e),Ur(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[qr]||(t[qr]=!0,Ur("selectionchange",!1,t))}}function Br(e,t,n,r){switch(Gt(t)){case 1:var s=Vt;break;case 4:s=Kt;break;default:s=Yt}n=s.bind(null,t,n,e),s=void 0,!Me||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;a=a.return}for(;null!==o;){if(null===(a=xs(o)))return;if(5===(l=a.tag)||6===l){r=i=a;continue e}o=o.parentNode}}r=r.return}Pe((function(){var r=i,s=we(n),a=[];e:{var o=Ir.get(e);if(void 0!==o){var l=dn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Sn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=En;break;case Cr:case Sr:case Tr:l=yn;break;case Er:l=In;break;case"scroll":l=hn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==o?o+"Capture":null:o;d=[];for(var p,m=r;null!==m;){var f=(p=m).stateNode;if(5===p.tag&&null!==f&&(p=f,null!==h&&(null!=(f=De(m,h))&&d.push(Vr(m,f,p)))),u)break;m=m.return}0<d.length&&(o=new l(o,c,null,n,s),a.push({event:o,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!xs(c)&&!c[ms])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?xs(c):null)&&(c!==(u=We(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(d=mn,f="onMouseLeave",h="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=Tn,f="onPointerLeave",h="onPointerEnter",m="pointer"),u=null==l?o:bs(l),p=null==c?o:bs(c),(o=new d(f,m+"leave",l,n,s)).target=u,o.relatedTarget=p,f=null,xs(s)===r&&((d=new d(h,m+"enter",c,n,s)).target=p,d.relatedTarget=u,f=d),u=f,l&&c)e:{for(h=c,m=0,p=d=l;p;p=Yr(p))m++;for(p=0,f=h;f;f=Yr(f))p++;for(;0<m-p;)d=Yr(d),m--;for(;0<p-m;)h=Yr(h),p--;for(;m--;){if(d===h||null!==h&&d===h.alternate)break e;d=Yr(d),h=Yr(h)}d=null}else d=null;null!==l&&Qr(a,o,l,d,!1),null!==c&&null!==u&&Qr(a,u,c,d,!0)}if("select"===(l=(o=r?bs(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Gn;else if(Hn(o))if(Xn)g=ar;else{g=sr;var y=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ir);switch(g&&(g=g(e,r))?Vn(a,g,n,s):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?bs(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,xr=null);break;case"focusout":xr=yr=gr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,br(a,n,s);break;case"selectionchange":if(fr)break;case"keydown":case"keyup":br(a,n,s)}var x;if(Rn)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Wn?Un(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(On&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==v?"onCompositionEnd"===v&&Wn&&(x=en()):(Zt="value"in(Xt=s)?Xt.value:Xt.textContent,Wn=!0)),0<(y=Kr(r,v)).length&&(v=new bn(v,e,null,n,s),a.push({event:v,listeners:y}),x?v.data=x:null!==(x=qn(n))&&(v.data=x))),(x=Ln?function(e,t){switch(e){case"compositionend":return qn(t);case"keypress":return 32!==t.which?null:(zn=!0,Fn);case"textInput":return(e=t.data)===Fn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Rn&&Un(e,t)?(e=en(),Jt=Zt=Xt=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return On&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(s=new bn("onBeforeInput","beforeinput",null,n,s),a.push({event:s,listeners:r}),s.data=x))}Fr(a,t)}))}function Vr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;5===s.tag&&null!==i&&(s=i,null!=(i=De(e,n))&&r.unshift(Vr(e,i,s)),null!=(i=De(e,t))&&r.push(Vr(e,i,s))),e=e.return}return r}function Yr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,s){for(var i=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,s?null!=(l=De(n,i))&&a.unshift(Vr(n,l,o)):s||null!=(l=De(n,i))&&a.push(Vr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var $r=/\r\n?/g,Gr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Gr,"")}function Zr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(i(425))}function Jr(){}var es=null,ts=null;function ns(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rs="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,is="function"===typeof Promise?Promise:void 0,as="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof is?function(e){return is.resolve(null).then(e).catch(os)}:rs;function os(e){setTimeout((function(){throw e}))}function ls(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void Wt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);Wt(t)}function cs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ds(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var us=Math.random().toString(36).slice(2),hs="__reactFiber$"+us,ps="__reactProps$"+us,ms="__reactContainer$"+us,fs="__reactEvents$"+us,gs="__reactListeners$"+us,ys="__reactHandles$"+us;function xs(e){var t=e[hs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ms]||n[hs]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ds(e);null!==e;){if(n=e[hs])return n;e=ds(e)}return t}n=(e=n).parentNode}return null}function vs(e){return!(e=e[hs]||e[ms])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bs(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function ws(e){return e[ps]||null}var _s=[],ks=-1;function Ns(e){return{current:e}}function js(e){0>ks||(e.current=_s[ks],_s[ks]=null,ks--)}function Cs(e,t){ks++,_s[ks]=e.current,e.current=t}var Ss={},Ts=Ns(Ss),Es=Ns(!1),Is=Ss;function Ps(e,t){var n=e.type.contextTypes;if(!n)return Ss;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,i={};for(s in n)i[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ds(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ms(){js(Es),js(Ts)}function Rs(e,t,n){if(Ts.current!==Ss)throw Error(i(168));Cs(Ts,t),Cs(Es,n)}function As(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in t))throw Error(i(108,B(e)||"Unknown",s));return O({},n,r)}function Ls(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ss,Is=Ts.current,Cs(Ts,e),Cs(Es,Es.current),!0}function Os(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=As(e,t,Is),r.__reactInternalMemoizedMergedChildContext=e,js(Es),js(Ts),Cs(Ts,e)):js(Es),Cs(Es,n)}var Fs=null,zs=!1,Us=!1;function qs(e){null===Fs?Fs=[e]:Fs.push(e)}function Ws(){if(!Us&&null!==Fs){Us=!0;var e=0,t=vt;try{var n=Fs;for(vt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fs=null,zs=!1}catch(s){throw null!==Fs&&(Fs=Fs.slice(e+1)),Ye(Je,Ws),s}finally{vt=t,Us=!1}}return null}var Bs=[],Hs=0,Vs=null,Ks=0,Ys=[],Qs=0,$s=null,Gs=1,Xs="";function Zs(e,t){Bs[Hs++]=Ks,Bs[Hs++]=Vs,Vs=e,Ks=t}function Js(e,t,n){Ys[Qs++]=Gs,Ys[Qs++]=Xs,Ys[Qs++]=$s,$s=e;var r=Gs;e=Xs;var s=32-at(r)-1;r&=~(1<<s),n+=1;var i=32-at(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Gs=1<<32-at(t)+s|n<<s|r,Xs=i+e}else Gs=1<<i|n<<s|r,Xs=e}function ei(e){null!==e.return&&(Zs(e,1),Js(e,1,0))}function ti(e){for(;e===Vs;)Vs=Bs[--Hs],Bs[Hs]=null,Ks=Bs[--Hs],Bs[Hs]=null;for(;e===$s;)$s=Ys[--Qs],Ys[Qs]=null,Xs=Ys[--Qs],Ys[Qs]=null,Gs=Ys[--Qs],Ys[Qs]=null}var ni=null,ri=null,si=!1,ii=null;function ai(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,ri=cs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,ri=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$s?{id:Gs,overflow:Xs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ni=e,ri=null,!0);default:return!1}}function li(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ci(e){if(si){var t=ri;if(t){var n=t;if(!oi(e,t)){if(li(e))throw Error(i(418));t=cs(n.nextSibling);var r=ni;t&&oi(e,t)?ai(r,n):(e.flags=-4097&e.flags|2,si=!1,ni=e)}}else{if(li(e))throw Error(i(418));e.flags=-4097&e.flags|2,si=!1,ni=e}}}function di(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function ui(e){if(e!==ni)return!1;if(!si)return di(e),si=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ns(e.type,e.memoizedProps)),t&&(t=ri)){if(li(e))throw hi(),Error(i(418));for(;t;)ai(e,t),t=cs(t.nextSibling)}if(di(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ri=cs(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ri=null}}else ri=ni?cs(e.stateNode.nextSibling):null;return!0}function hi(){for(var e=ri;e;)e=cs(e.nextSibling)}function pi(){ri=ni=null,si=!1}function mi(e){null===ii?ii=[e]:ii.push(e)}var fi=b.ReactCurrentBatchConfig;function gi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var s=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=s.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function yi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xi(e){return(0,e._init)(e._payload)}function vi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Mc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Oc(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===k?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===D&&xi(i)===t.type)?((r=s(t,n.props)).ref=gi(e,t,n),r.return=e,r):((r=Rc(n.type,n.key,n.props,null,e.mode,r)).ref=gi(e,t,n),r.return=e,r)}function d(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function u(e,t,n,r,i){return null===t||7!==t.tag?((t=Ac(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Oc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=gi(e,null,t),n.return=e,n;case _:return(t=Fc(t,e.mode,n)).return=e,t;case D:return h(e,(0,t._init)(t._payload),n)}if(te(t)||A(t))return(t=Ac(t,e.mode,n,null)).return=e,t;yi(e,t)}return null}function p(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===s?c(e,t,n,r):null;case _:return n.key===s?d(e,t,n,r):null;case D:return p(e,t,(s=n._init)(n._payload),r)}if(te(n)||A(n))return null!==s?null:u(e,t,n,r,null);yi(e,n)}return null}function m(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case _:return d(t,e=e.get(null===r.key?n:r.key)||null,r,s);case D:return m(e,t,n,(0,r._init)(r._payload),s)}if(te(r)||A(r))return u(t,e=e.get(n)||null,r,s,null);yi(t,r)}return null}function f(s,i,o,l){for(var c=null,d=null,u=i,f=i=0,g=null;null!==u&&f<o.length;f++){u.index>f?(g=u,u=null):g=u.sibling;var y=p(s,u,o[f],l);if(null===y){null===u&&(u=g);break}e&&u&&null===y.alternate&&t(s,u),i=a(y,i,f),null===d?c=y:d.sibling=y,d=y,u=g}if(f===o.length)return n(s,u),si&&Zs(s,f),c;if(null===u){for(;f<o.length;f++)null!==(u=h(s,o[f],l))&&(i=a(u,i,f),null===d?c=u:d.sibling=u,d=u);return si&&Zs(s,f),c}for(u=r(s,u);f<o.length;f++)null!==(g=m(u,s,f,o[f],l))&&(e&&null!==g.alternate&&u.delete(null===g.key?f:g.key),i=a(g,i,f),null===d?c=g:d.sibling=g,d=g);return e&&u.forEach((function(e){return t(s,e)})),si&&Zs(s,f),c}function g(s,o,l,c){var d=A(l);if("function"!==typeof d)throw Error(i(150));if(null==(l=d.call(l)))throw Error(i(151));for(var u=d=null,f=o,g=o=0,y=null,x=l.next();null!==f&&!x.done;g++,x=l.next()){f.index>g?(y=f,f=null):y=f.sibling;var v=p(s,f,x.value,c);if(null===v){null===f&&(f=y);break}e&&f&&null===v.alternate&&t(s,f),o=a(v,o,g),null===u?d=v:u.sibling=v,u=v,f=y}if(x.done)return n(s,f),si&&Zs(s,g),d;if(null===f){for(;!x.done;g++,x=l.next())null!==(x=h(s,x.value,c))&&(o=a(x,o,g),null===u?d=x:u.sibling=x,u=x);return si&&Zs(s,g),d}for(f=r(s,f);!x.done;g++,x=l.next())null!==(x=m(f,s,g,x.value,c))&&(e&&null!==x.alternate&&f.delete(null===x.key?g:x.key),o=a(x,o,g),null===u?d=x:u.sibling=x,u=x);return e&&f.forEach((function(e){return t(s,e)})),si&&Zs(s,g),d}return function e(r,i,a,l){if("object"===typeof a&&null!==a&&a.type===k&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,d=i;null!==d;){if(d.key===c){if((c=a.type)===k){if(7===d.tag){n(r,d.sibling),(i=s(d,a.props.children)).return=r,r=i;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&xi(c)===d.type){n(r,d.sibling),(i=s(d,a.props)).ref=gi(r,d,a),i.return=r,r=i;break e}n(r,d);break}t(r,d),d=d.sibling}a.type===k?((i=Ac(a.props.children,r.mode,l,a.key)).return=r,r=i):((l=Rc(a.type,a.key,a.props,null,r.mode,l)).ref=gi(r,i,a),l.return=r,r=l)}return o(r);case _:e:{for(d=a.key;null!==i;){if(i.key===d){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=s(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Fc(a,r.mode,l)).return=r,r=i}return o(r);case D:return e(r,i,(d=a._init)(a._payload),l)}if(te(a))return f(r,i,a,l);if(A(a))return g(r,i,a,l);yi(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=s(i,a)).return=r,r=i):(n(r,i),(i=Oc(a,r.mode,l)).return=r,r=i),o(r)):n(r,i)}}var bi=vi(!0),wi=vi(!1),_i=Ns(null),ki=null,Ni=null,ji=null;function Ci(){ji=Ni=ki=null}function Si(e){var t=_i.current;js(_i),e._currentValue=t}function Ti(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ei(e,t){ki=e,ji=Ni=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(vo=!0),e.firstContext=null)}function Ii(e){var t=e._currentValue;if(ji!==e)if(e={context:e,memoizedValue:t,next:null},null===Ni){if(null===ki)throw Error(i(308));Ni=e,ki.dependencies={lanes:0,firstContext:e}}else Ni=Ni.next=e;return t}var Pi=null;function Di(e){null===Pi?Pi=[e]:Pi.push(e)}function Mi(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,Di(t)):(n.next=s.next,s.next=n),t.interleaved=n,Ri(e,r)}function Ri(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ai=!1;function Li(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Tl)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Ri(e,n)}return null===(s=r.interleaved)?(t.next=t,Di(r)):(t.next=s.next,s.next=t),r.interleaved=t,Ri(e,n)}function Ui(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,xt(e,n)}}function qi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?s=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Wi(e,t,n,r){var s=e.updateQueue;Ai=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==a&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==i){var u=s.baseState;for(a=0,d=c=l=null,o=i;;){var h=o.lane,p=o.eventTime;if((r&h)===h){null!==d&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,f=o;switch(h=t,p=n,f.tag){case 1:if("function"===typeof(m=f.payload)){u=m.call(p,u,h);break e}u=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=f.payload)?m.call(p,u,h):m)||void 0===h)break e;u=O({},u,h);break e;case 2:Ai=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=p,l=u):d=d.next=p,a|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(h=o).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}if(null===d&&(l=u),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,null!==(t=s.shared.interleaved)){s=t;do{a|=s.lane,s=s.next}while(s!==t)}else null===i&&(s.shared.lanes=0);Ll|=a,e.lanes=a,e.memoizedState=u}}function Bi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!==typeof s)throw Error(i(191,s));s.call(r)}}}var Hi={},Vi=Ns(Hi),Ki=Ns(Hi),Yi=Ns(Hi);function Qi(e){if(e===Hi)throw Error(i(174));return e}function $i(e,t){switch(Cs(Yi,t),Cs(Ki,e),Cs(Vi,Hi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}js(Vi),Cs(Vi,t)}function Gi(){js(Vi),js(Ki),js(Yi)}function Xi(e){Qi(Yi.current);var t=Qi(Vi.current),n=le(t,e.type);t!==n&&(Cs(Ki,e),Cs(Vi,n))}function Zi(e){Ki.current===e&&(js(Vi),js(Ki))}var Ji=Ns(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ra=b.ReactCurrentDispatcher,sa=b.ReactCurrentBatchConfig,ia=0,aa=null,oa=null,la=null,ca=!1,da=!1,ua=0,ha=0;function pa(){throw Error(i(321))}function ma(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function fa(e,t,n,r,s,a){if(ia=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ra.current=null===e||null===e.memoizedState?Za:Ja,e=n(r,s),da){a=0;do{if(da=!1,ua=0,25<=a)throw Error(i(301));a+=1,la=oa=null,t.updateQueue=null,ra.current=eo,e=n(r,s)}while(da)}if(ra.current=Xa,t=null!==oa&&null!==oa.next,ia=0,la=oa=aa=null,ca=!1,t)throw Error(i(300));return e}function ga(){var e=0!==ua;return ua=0,e}function ya(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function xa(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(i(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function va(e,t){return"function"===typeof t?t(e):t}function ba(e){var t=xa(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=oa,s=r.baseQueue,a=n.pending;if(null!==a){if(null!==s){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(null!==s){a=s.next,r=r.baseState;var l=o=null,c=null,d=a;do{var u=d.lane;if((ia&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,aa.lanes|=u,Ll|=u}d=d.next}while(null!==d&&d!==a);null===c?o=r:c.next=l,or(r,t.memoizedState)||(vo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){s=e;do{a=s.lane,aa.lanes|=a,Ll|=a,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wa(e){var t=xa(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{a=e(a,o.action),o=o.next}while(o!==s);or(a,t.memoizedState)||(vo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function _a(){}function ka(e,t){var n=aa,r=xa(),s=t(),a=!or(r.memoizedState,s);if(a&&(r.memoizedState=s,vo=!0),r=r.queue,Aa(Ca.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Ia(9,ja.bind(null,n,r,s,t),void 0,null),null===El)throw Error(i(349));0!==(30&ia)||Na(n,t,s)}return s}function Na(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ja(e,t,n,r){t.value=n,t.getSnapshot=r,Sa(t)&&Ta(e)}function Ca(e,t,n){return n((function(){Sa(t)&&Ta(e)}))}function Sa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Ta(e){var t=Ri(e,1);null!==t&&nc(t,e,1,-1)}function Ea(e){var t=ya();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:e},t.queue=e,e=e.dispatch=Ya.bind(null,aa,e),[t.memoizedState,e]}function Ia(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Pa(){return xa().memoizedState}function Da(e,t,n,r){var s=ya();aa.flags|=e,s.memoizedState=Ia(1|t,n,void 0,void 0===r?null:r)}function Ma(e,t,n,r){var s=xa();r=void 0===r?null:r;var i=void 0;if(null!==oa){var a=oa.memoizedState;if(i=a.destroy,null!==r&&ma(r,a.deps))return void(s.memoizedState=Ia(t,n,i,r))}aa.flags|=e,s.memoizedState=Ia(1|t,n,i,r)}function Ra(e,t){return Da(8390656,8,e,t)}function Aa(e,t){return Ma(2048,8,e,t)}function La(e,t){return Ma(4,2,e,t)}function Oa(e,t){return Ma(4,4,e,t)}function Fa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function za(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ma(4,4,Fa.bind(null,t,e),n)}function Ua(){}function qa(e,t){var n=xa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wa(e,t){var n=xa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ba(e,t,n){return 0===(21&ia)?(e.baseState&&(e.baseState=!1,vo=!0),e.memoizedState=n):(or(n,t)||(n=ft(),aa.lanes|=n,Ll|=n,e.baseState=!0),t)}function Ha(e,t){var n=vt;vt=0!==n&&4>n?n:4,e(!0);var r=sa.transition;sa.transition={};try{e(!1),t()}finally{vt=n,sa.transition=r}}function Va(){return xa().memoizedState}function Ka(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qa(e))$a(t,n);else if(null!==(n=Mi(e,t,n,r))){nc(n,e,r,ec()),Ga(n,t,r)}}function Ya(e,t,n){var r=tc(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qa(e))$a(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(s.next=s,Di(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(c){}null!==(n=Mi(e,t,s,r))&&(nc(n,e,r,s=ec()),Ga(n,t,r))}}function Qa(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function $a(e,t){da=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ga(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,xt(e,n)}}var Xa={readContext:Ii,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},Za={readContext:Ii,useCallback:function(e,t){return ya().memoizedState=[e,void 0===t?null:t],e},useContext:Ii,useEffect:Ra,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Da(4194308,4,Fa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Da(4194308,4,e,t)},useInsertionEffect:function(e,t){return Da(4,2,e,t)},useMemo:function(e,t){var n=ya();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ya();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ka.bind(null,aa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ya().memoizedState=e},useState:Ea,useDebugValue:Ua,useDeferredValue:function(e){return ya().memoizedState=e},useTransition:function(){var e=Ea(!1),t=e[0];return e=Ha.bind(null,e[1]),ya().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=aa,s=ya();if(si){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===El)throw Error(i(349));0!==(30&ia)||Na(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,Ra(Ca.bind(null,r,a,e),[e]),r.flags|=2048,Ia(9,ja.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ya(),t=El.identifierPrefix;if(si){var n=Xs;t=":"+t+"R"+(n=(Gs&~(1<<32-at(Gs)-1)).toString(32)+n),0<(n=ua++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ha++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Ja={readContext:Ii,useCallback:qa,useContext:Ii,useEffect:Aa,useImperativeHandle:za,useInsertionEffect:La,useLayoutEffect:Oa,useMemo:Wa,useReducer:ba,useRef:Pa,useState:function(){return ba(va)},useDebugValue:Ua,useDeferredValue:function(e){return Ba(xa(),oa.memoizedState,e)},useTransition:function(){return[ba(va)[0],xa().memoizedState]},useMutableSource:_a,useSyncExternalStore:ka,useId:Va,unstable_isNewReconciler:!1},eo={readContext:Ii,useCallback:qa,useContext:Ii,useEffect:Aa,useImperativeHandle:za,useInsertionEffect:La,useLayoutEffect:Oa,useMemo:Wa,useReducer:wa,useRef:Pa,useState:function(){return wa(va)},useDebugValue:Ua,useDeferredValue:function(e){var t=xa();return null===oa?t.memoizedState=e:Ba(t,oa.memoizedState,e)},useTransition:function(){return[wa(va)[0],xa().memoizedState]},useMutableSource:_a,useSyncExternalStore:ka,useId:Va,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=O({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:O({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&We(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),s=tc(e),i=Fi(r,s);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=zi(e,i,s))&&(nc(t,e,s,r),Ui(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),s=tc(e),i=Fi(r,s);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=zi(e,i,s))&&(nc(t,e,s,r),Ui(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),s=Fi(n,r);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=zi(e,s,r))&&(nc(t,e,r,n),Ui(t,e,r))}};function so(e,t,n,r,s,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(s,i))}function io(e,t,n){var r=!1,s=Ss,i=t.contextType;return"object"===typeof i&&null!==i?i=Ii(i):(s=Ds(t)?Is:Ts.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ps(e,s):Ss),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function ao(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Li(e);var i=t.contextType;"object"===typeof i&&null!==i?s.context=Ii(i):(i=Ds(t)?Is:Ts.current,s.context=Ps(e,i)),s.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(no(e,t,i,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&ro.enqueueReplaceState(s,s.state,null),Wi(e,n,s,r),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=q(r),r=r.return}while(r);var s=n}catch(i){s="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:s,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ho="function"===typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=Fi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Vl=r),uo(0,t)},n}function mo(e,t,n){(n=Fi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){uo(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function fo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=jc.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yo(e,t,n,r,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fi(-1,1)).tag=2,zi(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var xo=b.ReactCurrentOwner,vo=!1;function bo(e,t,n,r){t.child=null===e?wi(t,null,n,r):bi(t,e.child,n,r)}function wo(e,t,n,r,s){n=n.render;var i=t.ref;return Ei(t,s),r=fa(e,t,n,r,i,s),n=ga(),null===e||vo?(si&&n&&ei(t),t.flags|=1,bo(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ho(e,t,s))}function _o(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||Dc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,ko(e,t,i,r,s))}if(i=e.child,0===(e.lanes&s)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Ho(e,t,s)}return t.flags|=1,(e=Mc(i,r)).ref=t.ref,e.return=t,t.child=e}function ko(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(lr(i,r)&&e.ref===t.ref){if(vo=!1,t.pendingProps=r=i,0===(e.lanes&s))return t.lanes=e.lanes,Ho(e,t,s);0!==(131072&e.flags)&&(vo=!0)}}return Co(e,t,n,r,s)}function No(e,t,n){var r=t.pendingProps,s=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cs(Ml,Dl),Dl|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Cs(Ml,Dl),Dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Cs(Ml,Dl),Dl|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Cs(Ml,Dl),Dl|=r;return bo(e,t,s,n),t.child}function jo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Co(e,t,n,r,s){var i=Ds(n)?Is:Ts.current;return i=Ps(t,i),Ei(t,s),n=fa(e,t,n,r,i,s),r=ga(),null===e||vo?(si&&r&&ei(t),t.flags|=1,bo(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ho(e,t,s))}function So(e,t,n,r,s){if(Ds(n)){var i=!0;Ls(t)}else i=!1;if(Ei(t,s),null===t.stateNode)Bo(e,t),io(t,n,r),oo(t,n,r,s),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ii(c):c=Ps(t,c=Ds(n)?Is:Ts.current);var d=n.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof a.getSnapshotBeforeUpdate;u||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&ao(t,a,r,c),Ai=!1;var h=t.memoizedState;a.state=h,Wi(t,r,a,s),l=t.memoizedState,o!==r||h!==l||Es.current||Ai?("function"===typeof d&&(no(t,n,d,r),l=t.memoizedState),(o=Ai||so(t,n,o,r,h,l,c))?(u||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Oi(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),a.props=c,u=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ii(l):l=Ps(t,l=Ds(n)?Is:Ts.current);var p=n.getDerivedStateFromProps;(d="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==u||h!==l)&&ao(t,a,r,l),Ai=!1,h=t.memoizedState,a.state=h,Wi(t,r,a,s);var m=t.memoizedState;o!==u||h!==m||Es.current||Ai?("function"===typeof p&&(no(t,n,p,r),m=t.memoizedState),(c=Ai||so(t,n,c,r,h,m,l)||!1)?(d||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,m,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,m,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),a.props=r,a.state=m,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return To(e,t,n,r,i,s)}function To(e,t,n,r,s,i){jo(e,t);var a=0!==(128&t.flags);if(!r&&!a)return s&&Os(t,n,!1),Ho(e,t,i);r=t.stateNode,xo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=bi(t,e.child,null,i),t.child=bi(t,null,o,i)):bo(e,t,o,i),t.memoizedState=r.state,s&&Os(t,n,!0),t.child}function Eo(e){var t=e.stateNode;t.pendingContext?Rs(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Rs(0,t.context,!1),$i(e,t.containerInfo)}function Io(e,t,n,r,s){return pi(),mi(s),t.flags|=256,bo(e,t,n,r),t.child}var Po,Do,Mo,Ro,Ao={dehydrated:null,treeContext:null,retryLane:0};function Lo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Oo(e,t,n){var r,s=t.pendingProps,a=Ji.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Cs(Ji,1&a),null===e)return ci(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Lc(l,s,0,null),e=Ac(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Lo(n),t.memoizedState=Ao,e):Fo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,s,a,o){if(n)return 256&t.flags?(t.flags&=-257,zo(e,t,o,r=co(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=Lc({mode:"visible",children:r.children},s,0,null),(a=Ac(a,s,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&bi(t,e.child,null,o),t.child.memoizedState=Lo(o),t.memoizedState=Ao,a);if(0===(1&t.mode))return zo(e,t,o,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var l=r.dgst;return r=l,zo(e,t,o,r=co(a=Error(i(419)),r,void 0))}if(l=0!==(o&e.childLanes),vo||l){if(null!==(r=El)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|o))?0:s)&&s!==a.retryLane&&(a.retryLane=s,Ri(e,s),nc(r,e,s,-1))}return fc(),zo(e,t,o,r=co(Error(i(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Sc.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,ri=cs(s.nextSibling),ni=t,si=!0,ii=null,null!==e&&(Ys[Qs++]=Gs,Ys[Qs++]=Xs,Ys[Qs++]=$s,Gs=e.id,Xs=e.overflow,$s=t),t=Fo(t,r.children),t.flags|=4096,t)}(e,t,l,s,r,a,n);if(o){o=s.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==a?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=Mc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Mc(r,o):(o=Ac(o,l,n,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=null===(l=e.child.memoizedState)?Lo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Ao,s}return e=(o=e.child).sibling,s=Mc(o,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Fo(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zo(e,t,n,r){return null!==r&&mi(r),bi(t,e.child,null,n),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Uo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ti(e.return,t,n)}function qo(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Wo(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(bo(e,t,r.children,n),0!==(2&(r=Ji.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Uo(e,n,t);else if(19===e.tag)Uo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Cs(Ji,r),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),qo(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ea(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}qo(t,!0,n,null,i);break;case"together":qo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Mc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Mc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Vo(e,t){if(!si)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ko(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Yo(e,t,n){var r=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ko(t),null;case 1:case 17:return Ds(t.type)&&Ms(),Ko(t),null;case 3:return r=t.stateNode,Gi(),js(Es),js(Ts),na(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ui(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(ac(ii),ii=null))),Do(e,t),Ko(t),null;case 5:Zi(t);var s=Qi(Yi.current);if(n=t.type,null!==e&&null!=t.stateNode)Mo(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Ko(t),null}if(e=Qi(Vi.current),ui(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hs]=t,r[ps]=a,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(s=0;s<Ar.length;s++)zr(Ar[s],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":G(r,a),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},zr("invalid",r);break;case"textarea":se(r,a),zr("invalid",r)}for(var l in xe(n,a),s=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Zr(r.textContent,c,e),s=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Zr(r.textContent,c,e),s=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zr("scroll",r)}switch(n){case"input":K(r),J(r,a,!0);break;case"textarea":K(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Jr)}r=s,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hs]=t,e[ps]=r,Po(e,t,!1,!1),t.stateNode=e;e:{switch(l=ve(n,r),n){case"dialog":zr("cancel",e),zr("close",e),s=r;break;case"iframe":case"object":case"embed":zr("load",e),s=r;break;case"video":case"audio":for(s=0;s<Ar.length;s++)zr(Ar[s],e);s=r;break;case"source":zr("error",e),s=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),s=r;break;case"details":zr("toggle",e),s=r;break;case"input":G(e,r),s=$(e,r),zr("invalid",e);break;case"option":default:s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=O({},r,{value:void 0}),zr("invalid",e);break;case"textarea":se(e,r),s=re(e,r),zr("invalid",e)}for(a in xe(n,s),c=s)if(c.hasOwnProperty(a)){var d=c[a];"style"===a?ge(e,d):"dangerouslySetInnerHTML"===a?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===a?"string"===typeof d?("textarea"!==n||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=d&&"onScroll"===a&&zr("scroll",e):null!=d&&v(e,a,d,l))}switch(n){case"input":K(e),J(e,r,!1);break;case"textarea":K(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ko(t),null;case 6:if(e&&null!=t.stateNode)Ro(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Qi(Yi.current),Qi(Vi.current),ui(t)){if(r=t.stateNode,n=t.memoizedProps,r[hs]=t,(a=r.nodeValue!==n)&&null!==(e=ni))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hs]=t,t.stateNode=r}return Ko(t),null;case 13:if(js(Ji),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(si&&null!==ri&&0!==(1&t.mode)&&0===(128&t.flags))hi(),pi(),t.flags|=98560,a=!1;else if(a=ui(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[hs]=t}else pi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ko(t),a=!1}else null!==ii&&(ac(ii),ii=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Ji.current)?0===Rl&&(Rl=3):fc())),null!==t.updateQueue&&(t.flags|=4),Ko(t),null);case 4:return Gi(),Do(e,t),null===e&&Wr(t.stateNode.containerInfo),Ko(t),null;case 10:return Si(t.type._context),Ko(t),null;case 19:if(js(Ji),null===(a=t.memoizedState))return Ko(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Vo(a,!1);else{if(0!==Rl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,Vo(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Cs(Ji,1&Ji.current|2),t.child}e=e.sibling}null!==a.tail&&Xe()>Wl&&(t.flags|=128,r=!0,Vo(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ea(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Vo(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!si)return Ko(t),null}else 2*Xe()-a.renderingStartTime>Wl&&1073741824!==n&&(t.flags|=128,r=!0,Vo(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Xe(),t.sibling=null,n=Ji.current,Cs(Ji,r?1&n|2:1&n),t):(Ko(t),null);case 22:case 23:return uc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Dl)&&(Ko(t),6&t.subtreeFlags&&(t.flags|=8192)):Ko(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Qo(e,t){switch(ti(t),t.tag){case 1:return Ds(t.type)&&Ms(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Gi(),js(Es),js(Ts),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zi(t),null;case 13:if(js(Ji),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));pi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return js(Ji),null;case 4:return Gi(),null;case 10:return Si(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Po=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Do=function(){},Mo=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Qi(Vi.current);var i,a=null;switch(n){case"input":s=$(e,s),r=$(e,r),a=[];break;case"select":s=O({},s,{value:void 0}),r=O({},r,{value:void 0}),a=[];break;case"textarea":s=re(e,s),r=re(e,r),a=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(d in xe(n,r),n=null,s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&null!=s[d])if("style"===d){var l=s[d];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in r){var c=r[d];if(l=null!=s?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&zr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(d,c))}n&&(a=a||[]).push("style",n);var d=a;(t.updateQueue=d)&&(t.flags|=4)}},Ro=function(e,t,n,r){n!==r&&(t.flags|=4)};var $o=!1,Go=!1,Xo="function"===typeof WeakSet?WeakSet:Set,Zo=null;function Jo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Nc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Nc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,void 0!==i&&el(t,n,i)}s=s.next}while(s!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hs],delete t[ps],delete t[fs],delete t[gs],delete t[ys])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var dl=null,ul=!1;function hl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(st,n)}catch(o){}switch(n.tag){case 5:Go||Jo(n,t);case 6:var r=dl,s=ul;dl=null,hl(e,t,n),ul=s,null!==(dl=r)&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?ls(e.parentNode,n):1===e.nodeType&&ls(e,n),Wt(e)):ls(dl,n.stateNode));break;case 4:r=dl,s=ul,dl=n.stateNode.containerInfo,ul=!0,hl(e,t,n),dl=r,ul=s;break;case 0:case 11:case 14:case 15:if(!Go&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&el(n,t,a),s=s.next}while(s!==r)}hl(e,t,n);break;case 1:if(!Go&&(Jo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Nc(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Go=(r=Go)||null!==n.memoizedState,hl(e,t,n),Go=r):hl(e,t,n);break;default:hl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xo),t.forEach((function(t){var r=Tc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function fl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(i(160));pl(a,o,s),dl=null,ul=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(d){Nc(s,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Nc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Nc(e,e.return,g)}}break;case 1:fl(t,e),yl(e),512&r&&null!==n&&Jo(n,n.return);break;case 5:if(fl(t,e),yl(e),512&r&&null!==n&&Jo(n,n.return),32&e.flags){var s=e.stateNode;try{he(s,"")}catch(g){Nc(e,e.return,g)}}if(4&r&&null!=(s=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&X(s,a),ve(l,o);var d=ve(l,a);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];"style"===u?ge(s,h):"dangerouslySetInnerHTML"===u?ue(s,h):"children"===u?he(s,h):v(s,u,h,d)}switch(l){case"input":Z(s,a);break;case"textarea":ie(s,a);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var m=a.value;null!=m?ne(s,!!a.multiple,m,!1):p!==!!a.multiple&&(null!=a.defaultValue?ne(s,!!a.multiple,a.defaultValue,!0):ne(s,!!a.multiple,a.multiple?[]:"",!1))}s[ps]=a}catch(g){Nc(e,e.return,g)}}break;case 6:if(fl(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(i(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(g){Nc(e,e.return,g)}}break;case 3:if(fl(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wt(t.containerInfo)}catch(g){Nc(e,e.return,g)}break;case 4:default:fl(t,e),yl(e);break;case 13:fl(t,e),yl(e),8192&(s=e.child).flags&&(a=null!==s.memoizedState,s.stateNode.isHidden=a,!a||null!==s.alternate&&null!==s.alternate.memoizedState||(ql=Xe())),4&r&&ml(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Go=(d=Go)||u,fl(t,e),Go=d):fl(t,e),yl(e),8192&r){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Zo=e,u=e.child;null!==u;){for(h=Zo=u;null!==Zo;){switch(m=(p=Zo).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Jo(p,p.return);var f=p.stateNode;if("function"===typeof f.componentWillUnmount){r=p,n=p.return;try{t=r,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(g){Nc(r,n,g)}}break;case 5:Jo(p,p.return);break;case 22:if(null!==p.memoizedState){wl(h);continue}}null!==m?(m.return=p,Zo=m):wl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{s=h.stateNode,d?"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",o))}catch(g){Nc(e,e.return,g)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){Nc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fl(t,e),yl(e),4&r&&ml(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(he(s,""),r.flags&=-33),cl(e,ol(e),s);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,ol(e),a);break;default:throw Error(i(161))}}catch(o){Nc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function xl(e,t,n){Zo=e,vl(e,t,n)}function vl(e,t,n){for(var r=0!==(1&e.mode);null!==Zo;){var s=Zo,i=s.child;if(22===s.tag&&r){var a=null!==s.memoizedState||$o;if(!a){var o=s.alternate,l=null!==o&&null!==o.memoizedState||Go;o=$o;var c=Go;if($o=a,(Go=l)&&!c)for(Zo=s;null!==Zo;)l=(a=Zo).child,22===a.tag&&null!==a.memoizedState?_l(s):null!==l?(l.return=a,Zo=l):_l(s);for(;null!==i;)Zo=i,vl(i,t,n),i=i.sibling;Zo=s,$o=o,Go=c}bl(e)}else 0!==(8772&s.subtreeFlags)&&null!==i?(i.return=s,Zo=i):bl(e)}}function bl(e){for(;null!==Zo;){var t=Zo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Go||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Go)if(null===n)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Bi(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Bi(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Wt(h)}}}break;default:throw Error(i(163))}Go||512&t.flags&&sl(t)}catch(p){Nc(t,t.return,p)}}if(t===e){Zo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zo=n;break}Zo=t.return}}function wl(e){for(;null!==Zo;){var t=Zo;if(t===e){Zo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zo=n;break}Zo=t.return}}function _l(e){for(;null!==Zo;){var t=Zo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Nc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(l){Nc(t,s,l)}}var i=t.return;try{sl(t)}catch(l){Nc(t,i,l)}break;case 5:var a=t.return;try{sl(t)}catch(l){Nc(t,a,l)}}}catch(l){Nc(t,t.return,l)}if(t===e){Zo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Zo=o;break}Zo=t.return}}var kl,Nl=Math.ceil,jl=b.ReactCurrentDispatcher,Cl=b.ReactCurrentOwner,Sl=b.ReactCurrentBatchConfig,Tl=0,El=null,Il=null,Pl=0,Dl=0,Ml=Ns(0),Rl=0,Al=null,Ll=0,Ol=0,Fl=0,zl=null,Ul=null,ql=0,Wl=1/0,Bl=null,Hl=!1,Vl=null,Kl=null,Yl=!1,Ql=null,$l=0,Gl=0,Xl=null,Zl=-1,Jl=0;function ec(){return 0!==(6&Tl)?Xe():-1!==Zl?Zl:Zl=Xe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Tl)&&0!==Pl?Pl&-Pl:null!==fi.transition?(0===Jl&&(Jl=ft()),Jl):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Gt(e.type)}function nc(e,t,n,r){if(50<Gl)throw Gl=0,Xl=null,Error(i(185));yt(e,n,r),0!==(2&Tl)&&e===El||(e===El&&(0===(2&Tl)&&(Ol|=n),4===Rl&&oc(e,Pl)),rc(e,r),1===n&&0===Tl&&0===(1&t.mode)&&(Wl=Xe()+500,zs&&Ws()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-at(i),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&r)||(s[a]=pt(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}(e,t);var r=ht(e,e===El?Pl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){zs=!0,qs(e)}(lc.bind(null,e)):qs(lc.bind(null,e)),as((function(){0===(6&Tl)&&Ws()})),n=null;else{switch(bt(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ec(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Zl=-1,Jl=0,0!==(6&Tl))throw Error(i(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===El?Pl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var s=Tl;Tl|=2;var a=mc();for(El===e&&Pl===t||(Bl=null,Wl=Xe()+500,hc(e,t));;)try{xc();break}catch(l){pc(e,l)}Ci(),jl.current=a,Tl=s,null!==Il?t=0:(El=null,Pl=0,t=Rl)}if(0!==t){if(2===t&&(0!==(s=mt(e))&&(r=s,t=ic(e,s))),1===t)throw n=Al,hc(e,0),oc(e,r),rc(e,Xe()),n;if(6===t)oc(e,r);else{if(s=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!or(i(),s))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=gc(e,r))&&(0!==(a=mt(e))&&(r=a,t=ic(e,a))),1===t))throw n=Al,hc(e,0),oc(e,r),rc(e,Xe()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:wc(e,Ul,Bl);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=ql+500-Xe())){if(0!==ht(e,0))break;if(((s=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=rs(wc.bind(null,e,Ul,Bl),t);break}wc(e,Ul,Bl);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>s&&(s=o),r&=~a}if(r=s,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Nl(r/1960))-r)){e.timeoutHandle=rs(wc.bind(null,e,Ul,Bl),r);break}wc(e,Ul,Bl);break;default:throw Error(i(329))}}}return rc(e,Xe()),e.callbackNode===n?sc.bind(null,e):null}function ic(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Ul,Ul=n,null!==t&&ac(t)),e}function ac(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function oc(e,t){for(t&=~Fl,t&=~Ol,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Tl))throw Error(i(327));_c();var t=ht(e,0);if(0===(1&t))return rc(e,Xe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=mt(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Al,hc(e,0),oc(e,t),rc(e,Xe()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Ul,Bl),rc(e,Xe()),null}function cc(e,t){var n=Tl;Tl|=1;try{return e(t)}finally{0===(Tl=n)&&(Wl=Xe()+500,zs&&Ws())}}function dc(e){null!==Ql&&0===Ql.tag&&0===(6&Tl)&&_c();var t=Tl;Tl|=1;var n=Sl.transition,r=vt;try{if(Sl.transition=null,vt=1,e)return e()}finally{vt=r,Sl.transition=n,0===(6&(Tl=t))&&Ws()}}function uc(){Dl=Ml.current,js(Ml)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ss(n)),null!==Il)for(n=Il.return;null!==n;){var r=n;switch(ti(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ms();break;case 3:Gi(),js(Es),js(Ts),na();break;case 5:Zi(r);break;case 4:Gi();break;case 13:case 19:js(Ji);break;case 10:Si(r.type._context);break;case 22:case 23:uc()}n=n.return}if(El=e,Il=e=Mc(e.current,null),Pl=Dl=t,Rl=0,Al=null,Fl=Ol=Ll=0,Ul=zl=null,null!==Pi){for(t=0;t<Pi.length;t++)if(null!==(r=(n=Pi[t]).interleaved)){n.interleaved=null;var s=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=s,r.next=a}n.pending=r}Pi=null}return e}function pc(e,t){for(;;){var n=Il;try{if(Ci(),ra.current=Xa,ca){for(var r=aa.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}ca=!1}if(ia=0,la=oa=aa=null,da=!1,ua=0,Cl.current=null,null===n||null===n.return){Rl=1,Al=t,Il=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=go(o);if(null!==m){m.flags&=-257,yo(m,o,l,0,t),1&m.mode&&fo(a,d,t),c=d;var f=(t=m).updateQueue;if(null===f){var g=new Set;g.add(c),t.updateQueue=g}else f.add(c);break e}if(0===(1&t)){fo(a,d,t),fc();break e}c=Error(i(426))}else if(si&&1&l.mode){var y=go(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),yo(y,o,l,0,t),mi(lo(c,l));break e}}a=c=lo(c,l),4!==Rl&&(Rl=2),null===zl?zl=[a]:zl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,qi(a,po(0,c,t));break e;case 1:l=c;var x=a.type,v=a.stateNode;if(0===(128&a.flags)&&("function"===typeof x.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===Kl||!Kl.has(v)))){a.flags|=65536,t&=-t,a.lanes|=t,qi(a,mo(a,l,t));break e}}a=a.return}while(null!==a)}bc(n)}catch(b){t=b,Il===n&&null!==n&&(Il=n=n.return);continue}break}}function mc(){var e=jl.current;return jl.current=Xa,null===e?Xa:e}function fc(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===El||0===(268435455&Ll)&&0===(268435455&Ol)||oc(El,Pl)}function gc(e,t){var n=Tl;Tl|=2;var r=mc();for(El===e&&Pl===t||(Bl=null,hc(e,t));;)try{yc();break}catch(s){pc(e,s)}if(Ci(),Tl=n,jl.current=r,null!==Il)throw Error(i(261));return El=null,Pl=0,Rl}function yc(){for(;null!==Il;)vc(Il)}function xc(){for(;null!==Il&&!$e();)vc(Il)}function vc(e){var t=kl(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?bc(e):Il=t,Cl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Yo(n,t,Dl)))return void(Il=n)}else{if(null!==(n=Qo(n,t)))return n.flags&=32767,void(Il=n);if(null===e)return Rl=6,void(Il=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Il=t);Il=t=e}while(null!==t);0===Rl&&(Rl=5)}function wc(e,t,n){var r=vt,s=Sl.transition;try{Sl.transition=null,vt=1,function(e,t,n,r){do{_c()}while(null!==Ql);if(0!==(6&Tl))throw Error(i(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-at(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}(e,a),e===El&&(Il=El=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yl||(Yl=!0,Ec(tt,(function(){return _c(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Sl.transition,Sl.transition=null;var o=vt;vt=1;var l=Tl;Tl|=4,Cl.current=null,function(e,t){if(es=Ht,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,p=null;t:for(;;){for(var m;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==a||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(m=h.firstChild);)p=h,h=m;for(;;){if(h===e)break t;if(p===n&&++d===s&&(l=o),p===a&&++u===r&&(c=o),null!==(m=h.nextSibling))break;p=(h=p).parentNode}h=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ts={focusedElem:e,selectionRange:n},Ht=!1,Zo=t;null!==Zo;)if(e=(t=Zo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zo=e;else for(;null!==Zo;){t=Zo;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var g=f.memoizedProps,y=f.memoizedState,x=t.stateNode,v=x.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),y);x.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(i(163))}}catch(w){Nc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zo=e;break}Zo=t.return}f=tl,tl=!1}(e,n),gl(n,e),mr(ts),Ht=!!es,ts=es=null,e.current=n,xl(n,e,s),Ge(),Tl=l,vt=o,Sl.transition=a}else e.current=n;if(Yl&&(Yl=!1,Ql=e,$l=s),a=e.pendingLanes,0===a&&(Kl=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Hl)throw Hl=!1,e=Vl,Vl=null,e;0!==(1&$l)&&0!==e.tag&&_c(),a=e.pendingLanes,0!==(1&a)?e===Xl?Gl++:(Gl=0,Xl=e):Gl=0,Ws()}(e,t,n,r)}finally{Sl.transition=s,vt=r}return null}function _c(){if(null!==Ql){var e=bt($l),t=Sl.transition,n=vt;try{if(Sl.transition=null,vt=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,$l=0,0!==(6&Tl))throw Error(i(331));var s=Tl;for(Tl|=4,Zo=e.current;null!==Zo;){var a=Zo,o=a.child;if(0!==(16&Zo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Zo=d;null!==Zo;){var u=Zo;switch(u.tag){case 0:case 11:case 15:nl(8,u,a)}var h=u.child;if(null!==h)h.return=u,Zo=h;else for(;null!==Zo;){var p=(u=Zo).sibling,m=u.return;if(il(u),u===d){Zo=null;break}if(null!==p){p.return=m,Zo=p;break}Zo=m}}}var f=a.alternate;if(null!==f){var g=f.child;if(null!==g){f.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Zo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Zo=o;else e:for(;null!==Zo;){if(0!==(2048&(a=Zo).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var x=a.sibling;if(null!==x){x.return=a.return,Zo=x;break e}Zo=a.return}}var v=e.current;for(Zo=v;null!==Zo;){var b=(o=Zo).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,Zo=b;else e:for(o=v;null!==Zo;){if(0!==(2048&(l=Zo).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(_){Nc(l,l.return,_)}if(l===o){Zo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Zo=w;break e}Zo=l.return}}if(Tl=s,Ws(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(st,e)}catch(_){}r=!0}return r}finally{vt=n,Sl.transition=t}}return!1}function kc(e,t,n){e=zi(e,t=po(0,t=lo(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function Nc(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=zi(t,e=mo(t,e=lo(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function jc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,El===e&&(Pl&n)===n&&(4===Rl||3===Rl&&(130023424&Pl)===Pl&&500>Xe()-ql?hc(e,0):Fl|=n),rc(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=ec();null!==(e=Ri(e,t))&&(yt(e,t,n),rc(e,n))}function Sc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Tc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Cc(e,n)}function Ec(e,t){return Ye(e,t)}function Ic(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Ic(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Mc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,r,s,a){var o=2;if(r=e,"function"===typeof e)Dc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case k:return Ac(n.children,s,a,t);case N:o=8,s|=8;break;case j:return(e=Pc(12,n,t,2|s)).elementType=j,e.lanes=a,e;case E:return(e=Pc(13,n,t,s)).elementType=E,e.lanes=a,e;case I:return(e=Pc(19,n,t,s)).elementType=I,e.lanes=a,e;case M:return Lc(n,s,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:o=10;break e;case S:o=9;break e;case T:o=11;break e;case P:o=14;break e;case D:o=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Pc(o,n,t,s)).elementType=e,t.type=r,t.lanes=a,t}function Ac(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=M,e.lanes=n,e.stateNode={isHidden:!1},e}function Oc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,s,i,a,o,l){return e=new zc(e,t,n,o,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Pc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Li(i),e}function qc(e){if(!e)return Ss;e:{if(We(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ds(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Ds(n))return As(e,n,t)}return t}function Wc(e,t,n,r,s,i,a,o,l){return(e=Uc(n,r,!0,e,0,i,0,o,l)).context=qc(null),n=e.current,(i=Fi(r=ec(),s=tc(n))).callback=void 0!==t&&null!==t?t:null,zi(n,i,s),e.current.lanes=s,yt(e,s,r),rc(e,r),e}function Bc(e,t,n,r){var s=t.current,i=ec(),a=tc(s);return n=qc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fi(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=zi(s,t,a))&&(nc(e,s,a,i),Ui(e,s,a)),a}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Es.current)vo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return vo=!1,function(e,t,n){switch(t.tag){case 3:Eo(t),pi();break;case 5:Xi(t);break;case 1:Ds(t.type)&&Ls(t);break;case 4:$i(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Cs(_i,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Cs(Ji,1&Ji.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Oo(e,t,n):(Cs(Ji,1&Ji.current),null!==(e=Ho(e,t,n))?e.sibling:null);Cs(Ji,1&Ji.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Wo(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Cs(Ji,Ji.current),r)break;return null;case 22:case 23:return t.lanes=0,No(e,t,n)}return Ho(e,t,n)}(e,t,n);vo=0!==(131072&e.flags)}else vo=!1,si&&0!==(1048576&t.flags)&&Js(t,Ks,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Bo(e,t),e=t.pendingProps;var s=Ps(t,Ts.current);Ei(t,n),s=fa(null,t,r,e,s,n);var a=ga();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ds(r)?(a=!0,Ls(t)):a=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Li(t),s.updater=ro,t.stateNode=s,s._reactInternals=t,oo(t,r,e,n),t=To(null,t,r,!0,a,n)):(t.tag=0,si&&a&&ei(t),bo(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Bo(e,t),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===P)return 14}return 2}(r),e=to(r,e),s){case 0:t=Co(null,t,r,e,n);break e;case 1:t=So(null,t,r,e,n);break e;case 11:t=wo(null,t,r,e,n);break e;case 14:t=_o(null,t,r,to(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,Co(e,t,r,s=t.elementType===r?s:to(r,s),n);case 1:return r=t.type,s=t.pendingProps,So(e,t,r,s=t.elementType===r?s:to(r,s),n);case 3:e:{if(Eo(t),null===e)throw Error(i(387));r=t.pendingProps,s=(a=t.memoizedState).element,Oi(e,t),Wi(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Io(e,t,r,n,s=lo(Error(i(423)),t));break e}if(r!==s){t=Io(e,t,r,n,s=lo(Error(i(424)),t));break e}for(ri=cs(t.stateNode.containerInfo.firstChild),ni=t,si=!0,ii=null,n=wi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pi(),r===s){t=Ho(e,t,n);break e}bo(e,t,r,n)}t=t.child}return t;case 5:return Xi(t),null===e&&ci(t),r=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,o=s.children,ns(r,s)?o=null:null!==a&&ns(r,a)&&(t.flags|=32),jo(e,t),bo(e,t,o,n),t.child;case 6:return null===e&&ci(t),null;case 13:return Oo(e,t,n);case 4:return $i(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=bi(t,null,r,n):bo(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,wo(e,t,r,s=t.elementType===r?s:to(r,s),n);case 7:return bo(e,t,t.pendingProps,n),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,Cs(_i,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===s.children&&!Es.current){t=Ho(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Fi(-1,n&-n)).tag=2;var d=a.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ti(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(i(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ti(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}bo(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Ei(t,n),r=r(s=Ii(s)),t.flags|=1,bo(e,t,r,n),t.child;case 14:return s=to(r=t.type,t.pendingProps),_o(e,t,r,s=to(r.type,s),n);case 15:return ko(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:to(r,s),Bo(e,t),t.tag=1,Ds(r)?(e=!0,Ls(t)):e=!1,Ei(t,n),io(t,r,s),oo(t,r,s,n),To(null,t,r,!0,e,n);case 19:return Wo(e,t,n);case 22:return No(e,t,n)}throw Error(i(156,t.tag))};var Yc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Gc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function Jc(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof s){var o=s;s=function(){var e=Hc(a);o.call(e)}}Bc(t,a,e,s)}else a=function(e,t,n,r,s){if(s){if("function"===typeof r){var i=r;r=function(){var e=Hc(a);i.call(e)}}var a=Wc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=a,e[ms]=a.current,Wr(8===e.nodeType?e.parentNode:e),dc(),a}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof r){var o=r;r=function(){var e=Hc(l);o.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[ms]=l.current,Wr(8===e.nodeType?e.parentNode:e),dc((function(){Bc(t,l,n,r)})),l}(n,t,e,s,r);return Hc(a)}$c.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Bc(e,t,null,null)},$c.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){Bc(null,e,null,null)})),t[ms]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Mt.length&&0!==t&&t<Mt[n].priority;n++);Mt.splice(n,0,e),0===n&&Ot(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(xt(t,1|n),rc(t,Xe()),0===(6&Tl)&&(Wl=Xe()+500,Ws()))}break;case 13:dc((function(){var t=Ri(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Kc(e,1)}},_t=function(e){if(13===e.tag){var t=Ri(e,134217728);if(null!==t)nc(t,e,134217728,ec());Kc(e,134217728)}},kt=function(e){if(13===e.tag){var t=tc(e),n=Ri(e,t);if(null!==n)nc(n,e,t,ec());Kc(e,t)}},Nt=function(){return vt},jt=function(e,t){var n=vt;try{return vt=e,t()}finally{vt=n}},_e=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=ws(r);if(!s)throw Error(i(90));Y(r),Z(r,s)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=cc,Ee=dc;var ed={usingClientEntryPoint:!1,Events:[vs,bs,ws,Ce,Se,cc]},td={findFiberByHostInstance:xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rd.isDisabled&&rd.supportsFiber)try{st=rd.inject(nd),it=rd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Gc(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Gc(e))throw Error(i(299));var n=!1,r="",s=Yc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,s),e[ms]=t.current,Wr(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(i(200));return Jc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Gc(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,s=!1,a="",o=Yc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Wc(t,null,e,1,null!=n?n:null,s,0,a,o),e[ms]=t.current,Wr(e),r)for(e=0;e<r.length;e++)s=(s=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new $c(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(i(200));return Jc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(i(40));return!!e._reactRootContainer&&(dc((function(){Jc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ms]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Jc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},757:(e,t,n)=>{var r=n(552);e.exports=function(){return r.Date.now()}},761:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},801:(e,t,n)=>{var r=n(141),s=n(686),i=n(841),a=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(s(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=s(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=o.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):a.test(e)?NaN:+e}},812:(e,t,n)=>{var r=n(552).Symbol;e.exports=r},841:(e,t,n)=>{var r=n(913),s=n(761);e.exports=function(e){return"symbol"==typeof e||s(e)&&"[object Symbol]"==r(e)}},853:(e,t,n)=>{"use strict";e.exports=n(234)},913:(e,t,n)=>{var r=n(812),s=n(171),i=n(95),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?s(e):i(e)}},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(43),t=n(391);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function s(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=r(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function i(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const d=["color","size","strokeWidth","absoluteStrokeWidth","className","children"],u=(t,n)=>{const r=(0,e.forwardRef)(((r,s)=>{let{color:i="currentColor",size:a=24,strokeWidth:u=2,absoluteStrokeWidth:h,className:p="",children:m}=r,f=l(r,d);return(0,e.createElement)("svg",o(o({ref:s},c),{},{width:a,height:a,stroke:i,strokeWidth:h?24*Number(u)/Number(a):u,className:["lucide","lucide-".concat((g=t,g.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim())),p].join(" ")},f),[...n.map((t=>{let[n,r]=t;return(0,e.createElement)(n,r)})),...Array.isArray(m)?m:[m]]);var g}));return r.displayName="".concat(t),r},h=u("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),p=u("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),m=u("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),f=u("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),g=u("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),y=u("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),x=u("ChefHat",[["path",{d:"M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z",key:"z3ra2g"}],["line",{x1:"6",x2:"18",y1:"17",y2:"17",key:"12q60k"}]]),v=u("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),b=u("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),w=u("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),_=u("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),k=u("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),N={apiKey:"AIzaSyBBWLn8mFblzOqtbfaGS52aDhFWixSEn0Y",authDomain:"hamptown-panel.firebaseapp.com",databaseURL:"https://hamptown-panel-default-rtdb.firebaseio.com",projectId:"hamptown-panel",storageBucket:"hamptown-panel.firebasestorage.app",messagingSenderId:"937251959184",appId:"1:937251959184:web:b1afb3ed1eecd52fdcc315",measurementId:"G-50NK2PWM7E"},j=["\ud83d\ude2b","\ud83d\ude14","\ud83d\ude10","\ud83d\ude0a","\ud83e\udd29"],C=["Terrible","Poor","Okay","Good","Excellent"],S={high:"border-red-400",medium:"border-yellow-400",low:"border-green-400"},T=["bg-red-500","bg-orange-500","bg-yellow-500","bg-green-500","bg-blue-500"],E=e=>"".concat(e.getFullYear(),"-").concat(String(e.getMonth()+1).padStart(2,"0"),"-").concat(String(e.getDate()).padStart(2,"0")),I=e=>T[e-1]||"bg-gray-500";var P=n(579);const D=e=>{let{currentUser:t,employees:n,userMood:r,setUserMood:s,setEmployees:i,setDailyData:a}=e;const l=(e=>(e.reduce(((e,t)=>e+t.mood),0)/e.length).toFixed(1))(n),c=((e,t)=>{const n=new Date,r=E(n),s=t.find((t=>t.id===e));return!s||s.lastMoodDate!==r})(t.id,n),d=((e,t)=>{const n=t.find((t=>t.id===e));if(!n||!n.lastMoodDate)return"";const r=new Date,s=E(r);return n.lastMoodDate===s?"You can update your mood again tomorrow!":""})(t.id,n),u=e=>{const r=((e,t,n,r,s)=>{const i=new Date,a=E(i),l=n.find((e=>e.id===t));if(l&&l.lastMoodDate===a)return alert("You have already updated your mood today! Come back tomorrow \ud83d\ude0a"),!1;r((n=>n.map((n=>n.id===t?o(o({},n),{},{mood:e,lastUpdated:"Just now",lastMoodDate:a}):n))));const c=(new Date).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"});return s((n=>{const r=n[a]||{completedTasks:[],employeeMoods:[],totalTasks:22,completionRate:0},s=Array.isArray(r.employeeMoods)?r.employeeMoods:[],i={employeeId:t,mood:e,updatedAt:c};return o(o({},n),{},{[a]:o(o({},r),{},{employeeMoods:[...s.filter((e=>e.employeeId!==t)),i]})})})),!0})(e,t.id,n,i,a);r&&s(e)};return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:(0,P.jsxs)("div",{className:"text-center mb-6",children:[(0,P.jsx)("div",{className:"text-3xl font-bold text-gray-800 mb-2",children:l}),(0,P.jsx)("div",{className:"text-lg text-gray-600 mb-4",children:"Team Average Mood"}),(0,P.jsx)("div",{className:"flex justify-center space-x-2",children:[1,2,3,4,5].map((e=>(0,P.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(e<=Math.round(Number(l))?"bg-blue-500":"bg-gray-200")},e)))})]})}),(0,P.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,P.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 text-center",children:"How are you feeling today?"}),c?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("div",{className:"flex justify-between items-center mb-4",children:[1,2,3,4,5].map((e=>(0,P.jsxs)("button",{onClick:()=>u(e),className:"flex flex-col items-center p-3 rounded-xl transition-all hover:scale-105 ".concat(r===e?"bg-blue-100 scale-110":"hover:bg-gray-50"),children:[(0,P.jsx)("div",{className:"text-2xl mb-1",children:j[e-1]}),(0,P.jsx)("div",{className:"text-xs text-gray-600",children:C[e-1]})]},e)))}),(0,P.jsx)("div",{className:"text-center text-sm text-gray-500",children:"Select how you're feeling today"})]}):(0,P.jsxs)("div",{className:"text-center",children:[(0,P.jsx)("div",{className:"text-6xl mb-4",children:j[r-1]}),(0,P.jsxs)("div",{className:"text-lg font-medium text-gray-700 mb-2",children:["Today's Mood: ",C[r-1]]}),(0,P.jsx)("div",{className:"text-sm text-gray-500 mb-4",children:d}),(0,P.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,P.jsx)("div",{className:"text-sm text-blue-700",children:"\u2728 You've already shared your mood today! Your well-being matters to us."})})]})]}),(0,P.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,P.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,P.jsx)(k,{className:"w-5 h-5 mr-2"}),"Team Mood"]}),(0,P.jsx)("div",{className:"space-y-3",children:n.map((e=>(0,P.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,P.jsxs)("div",{className:"flex items-center",children:[(0,P.jsx)("div",{className:"w-3 h-3 rounded-full mr-3 ".concat(I(e.mood))}),(0,P.jsxs)("div",{children:[(0,P.jsx)("div",{className:"font-medium text-gray-800",children:e.name}),(0,P.jsxs)("div",{className:"text-xs text-gray-500",children:[e.lastUpdated,e.lastMoodDate===E(new Date)&&(0,P.jsx)("span",{className:"ml-2 px-2 py-0.5 bg-green-100 text-green-700 rounded-full text-xs",children:"Today"})]})]})]}),(0,P.jsxs)("div",{className:"flex items-center",children:[(0,P.jsx)("span",{className:"text-lg mr-2",children:j[e.mood-1]}),(0,P.jsxs)("span",{className:"text-sm text-gray-600",children:[e.mood,"/5"]})]})]},e.id)))})]})]})},M=u("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),R=(e,t,n,r,s,i)=>{const a=new Date,l=E(a),c=(new Date).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"}),d={taskId:e,employeeId:t,completedAt:c,taskName:n,date:l,pointsEarned:r};i((t=>{const n=t[l]||{completedTasks:[],employeeMoods:[],purchases:[],totalTasks:s.length,completionRate:0,totalPointsEarned:0,totalPointsSpent:0},r=[...(Array.isArray(n.completedTasks)?n.completedTasks:[]).filter((t=>t.taskId!==e)),d],i=Math.round(r.length/s.length*100),a=r.reduce(((e,t)=>e+(t.pointsEarned||0)),0);return o(o({},t),{},{[l]:o(o({},n),{},{completedTasks:r,totalTasks:s.length,completionRate:i,totalPointsEarned:a})})})),console.log("\ud83d\udcca Task completion logged (replacing any previous completion):",d)},A=(e,t,n)=>{n((n=>n.map((n=>n.id===e?o(o({},n),{},{points:n.points+t}):n))))},L=(e,t,n)=>{const r=t[e];return n.find((e=>e.id===r))},O=(e,t,n,r,s,i,a,l,c,d,u,h)=>{const p=r.has(e),m=new Set(r),f=i.find((t=>t.id===e)),g=L(e,s,a);if(f){if(p)console.log("\ud83d\udd04 Uncompleting task: ".concat(f.task)),m.delete(e),c((t=>{const n=o({},t);return delete n[e],n})),g&&(((e,t,n)=>{n((n=>n.map((n=>n.id===e?o(o({},n),{},{points:Math.max(0,n.points-t)}):n))))})(g.id,f.points,u),console.log("\ud83d\udcc9 Deducted ".concat(f.points," points from ").concat(g.name," for uncompleting task"))),((e,t,n)=>{const r=new Date,s=E(r);n((n=>{const r=n[s]||{completedTasks:[],employeeMoods:[],purchases:[],totalTasks:t.length,completionRate:0,totalPointsEarned:0,totalPointsSpent:0},i=(Array.isArray(r.completedTasks)?r.completedTasks:[]).filter((t=>t.taskId!==e)),a=Math.round(i.length/t.length*100),l=i.reduce(((e,t)=>e+(t.pointsEarned||0)),0);return o(o({},n),{},{[s]:o(o({},r),{},{completedTasks:i,totalTasks:t.length,completionRate:a,totalPointsEarned:l})})})),console.log("\ud83d\uddd1\ufe0f Task completion removed from daily data:",e)})(e,i,d);else{console.log("\u2705 Completing task: ".concat(f.task));const r=t||(null===g||void 0===g?void 0:g.id)||n;t?c((n=>o(o({},n),{},{[e]:t}))):g||c((t=>o(o({},t),{},{[e]:n}))),m.add(e),A(r,f.points,u),R(e,r,f.task,f.points,i,d),console.log("\ud83d\udcc8 Awarded ".concat(f.points," points to employee ").concat(r," for completing task"))}l(m),h&&(console.log("\ud83d\udd25 Immediate save triggered by task completion"),setTimeout((()=>{console.log("\u23f0 Executing immediate save now..."),h()}),200))}else console.error("Task not found:",e)},F=(e,t,n,r,s,i,a,l,c,d)=>{const u=s.find((t=>t.id===e)),h=L(e,r,i),p=i.find((e=>e.id===t));u&&p?n.has(e)&&(null===h||void 0===h?void 0:h.id)!==t?(console.log("\ud83d\udd04 Reassigning completed task from ".concat((null===h||void 0===h?void 0:h.name)||"unassigned"," to ").concat(p.name)),h?((e,t,n,r)=>{r((r=>r.map((r=>r.id===e?o(o({},r),{},{points:Math.max(0,r.points-n)}):r.id===t?o(o({},r),{},{points:r.points+n}):r)))),console.log("\ud83d\udcb0 Transferred ".concat(n," points from employee ").concat(e," to ").concat(t))})(h.id,t,u.points,c):A(t,u.points,c),a((n=>o(o({},n),{},{[e]:t}))),R(e,t,u.task,u.points,s,l),d&&(console.log("\ud83d\udd25 Immediate save triggered by task reassignment"),setTimeout((()=>{d()}),200))):a((n=>o(o({},n),{},{[e]:t}))):console.error("Task or new employee not found")},z=t=>{var n,r;let{currentUser:s,tasks:i,employees:a,completedTasks:l,taskAssignments:c,dailyData:d,setCompletedTasks:u,setTaskAssignments:h,setDailyData:p,setEmployees:m}=t;(0,e.useEffect)((()=>{console.log("\ud83d\udccb TaskManager - completedTasks updated:",{size:l.size,tasks:Array.from(l),timestamp:(new Date).toLocaleTimeString()})}),[l]);const g=(e,t)=>{l.has(e)?F(e,t,l,c,i,a,h,p,m):((e,t,n)=>{n((n=>o(o({},n),{},{[e]:t})))})(e,t,h)},x=a.find((e=>e.id===s.id)),v=d[E(new Date)],b=(null===v||void 0===v||null===(n=v.completedTasks)||void 0===n||null===(r=n.filter((e=>e.employeeId===s.id)))||void 0===r?void 0:r.reduce(((e,t)=>e+(t.pointsEarned||0)),0))||0;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,P.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4 text-center border border-green-200",children:[(0,P.jsx)("div",{className:"text-3xl font-bold text-green-600 mb-1",children:l.size}),(0,P.jsx)("div",{className:"text-sm font-medium text-green-700",children:"Completed"})]}),(0,P.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-4 text-center border border-orange-200",children:[(0,P.jsx)("div",{className:"text-3xl font-bold text-orange-600 mb-1",children:i.length-l.size}),(0,P.jsx)("div",{className:"text-sm font-medium text-orange-700",children:"Pending"})]}),(0,P.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4 text-center border border-purple-200",children:[(0,P.jsx)("div",{className:"text-3xl font-bold text-purple-600 mb-1",children:(null===x||void 0===x?void 0:x.points)||0}),(0,P.jsx)("div",{className:"text-sm font-medium text-purple-700",children:"Your Points"})]})]}),(0,P.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl p-4 mb-6 text-white",children:(0,P.jsxs)("div",{className:"flex items-center justify-between",children:[(0,P.jsxs)("div",{children:[(0,P.jsx)("h3",{className:"text-lg font-semibold",children:"Today's Points"}),(0,P.jsxs)("div",{className:"text-2xl font-bold",children:[b," pts earned"]})]}),(0,P.jsx)(M,{className:"w-8 h-8 opacity-80"})]})}),(0,P.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,P.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,P.jsx)(y,{className:"w-5 h-5 mr-2"}),"Cleaning Tasks"]}),(0,P.jsx)("div",{className:"space-y-4",children:i.map((e=>{const t=L(e.id,c,a),n=l.has(e.id);return(0,P.jsxs)("div",{className:"border rounded-lg p-4 ".concat((r=e.priority,S[r])," ").concat(n?"bg-green-50":"bg-white"),children:[(0,P.jsxs)("div",{className:"flex items-start justify-between",children:[(0,P.jsxs)("div",{className:"flex-1",children:[(0,P.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,P.jsx)("div",{className:"font-medium ".concat(n?"line-through text-gray-500":"text-gray-800"),children:e.task}),(0,P.jsxs)("div",{className:"flex items-center bg-purple-100 text-purple-700 px-2 py-1 rounded-full text-sm font-medium",children:[(0,P.jsx)(M,{className:"w-3 h-3 mr-1"}),e.points," pts"]})]}),(0,P.jsxs)("div",{className:"text-sm text-gray-600 mb-2",children:["\ud83d\udccd ",e.location]}),(0,P.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,P.jsxs)("div",{className:"text-xs px-2 py-1 rounded-full inline-block ".concat("high"===e.priority?"bg-red-100 text-red-700":"medium"===e.priority?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"),children:[e.priority," priority"]}),(0,P.jsxs)("div",{className:"text-xs text-gray-500",children:["\u23f1\ufe0f ",e.estimatedTime]})]})]}),(0,P.jsx)("button",{onClick:()=>{return t=e.id,void O(t,n,s.id,l,c,i,a,u,h,p,m);var t,n},className:"ml-3 p-2 rounded-full ".concat(n?"bg-green-500 text-white":"bg-gray-200 text-gray-600 hover:bg-gray-300"),children:(0,P.jsx)(f,{className:"w-4 h-4"})})]}),(0,P.jsxs)("div",{className:"mt-3",children:[t&&(0,P.jsxs)("div",{className:"flex items-center text-sm text-gray-600 mb-2",children:[(0,P.jsx)(k,{className:"w-4 h-4 mr-1"}),"Assigned to: ",(0,P.jsx)("span",{className:"font-medium ml-1",children:t.name}),n&&(0,P.jsxs)("span",{className:"ml-2 text-green-600 font-medium",children:["(+",e.points," pts earned!)"]})]}),!t&&(0,P.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:n?"Reassign to:":"Assign to:"}),(0,P.jsx)("div",{className:"flex flex-wrap gap-2",children:a.map((r=>(0,P.jsxs)("button",{onClick:()=>g(e.id,r.id),className:"text-xs px-3 py-1 rounded-full transition-colors ".concat((null===t||void 0===t?void 0:t.id)===r.id?"bg-blue-500 text-white":"bg-blue-100 text-blue-700 hover:bg-blue-200"),title:n&&(null===t||void 0===t?void 0:t.id)!==r.id?"Transfer ".concat(e.points," points from ").concat((null===t||void 0===t?void 0:t.name)||"unassigned"," to ").concat(r.name):"Assign task to ".concat(r.name),children:[r.name,(0,P.jsxs)("span",{className:"ml-1 text-purple-600 font-medium",children:["(",r.points,"pts)"]}),n&&(null===t||void 0===t?void 0:t.id)!==r.id&&(0,P.jsx)("span",{className:"ml-1",children:"\ud83d\udd04"})]},r.id)))}),n&&(0,P.jsxs)("div",{className:"mt-2 text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded",children:["\ud83d\udca1 Tip: Click another employee's name to transfer the ",e.points," points to them"]})]})]},e.id);var r}))})]})]})},U=u("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]),q=u("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),W=u("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),B=u("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),H=u("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),V=u("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),K=(e,t)=>e.points>=t.cost&&t.available,Y=t=>{var n;let{currentUser:r,employees:s,storeItems:i,dailyData:a,setEmployees:l,setDailyData:c,saveToFirebase:d}=t;const[u,h]=(0,e.useState)("all"),[p,m]=(0,e.useState)(!1),f=s.find((e=>e.id===r.id)),g=((e,t)=>{const n=t.find((t=>t.id===e));return(null===n||void 0===n?void 0:n.points)||0})(r.id,s),y=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30;const r=[],s=new Date;for(let i=0;i<n;i++){const n=new Date(s);n.setDate(n.getDate()-i);const a=t[E(n)];if(null!==a&&void 0!==a&&a.purchases){const t=a.purchases.filter((t=>t.employeeId===e));r.push(...t)}}return r.sort(((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()))}(r.id,a),x=(e=>[...e].sort(((e,t)=>t.points-e.points)).slice(0,10))(s),v=[{id:"all",name:"All Items",icon:"\ud83d\udecd\ufe0f"},{id:"food",name:"Food & Drinks",icon:"\ud83c\udf7d\ufe0f"},{id:"break",name:"Time Off",icon:"\u23f0"},{id:"reward",name:"Rewards",icon:"\ud83c\udf81"},{id:"social",name:"Social",icon:"\ud83d\udc65"}],b="all"===u?i:i.filter((e=>e.category===u)),w=e=>{if(!f)return;const t=((e,t,n,r,s)=>{const i=n.find((t=>t.id===e));if(!i)return alert("Employee with id ".concat(e," not found")),!1;if(!K(i,t))return alert("Insufficient points! You need ".concat(t.cost," points but only have ").concat(i.points,".")),!1;const a=new Date,l=E(a),c=(new Date).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"});r((n=>n.map((n=>n.id===e?o(o({},n),{},{points:n.points-t.cost}):n))));const d={id:Date.now(),employeeId:e,itemId:t.id,itemName:t.name,cost:t.cost,purchasedAt:c,date:l,status:"pending"};return s((e=>{const n=e[l]||{completedTasks:[],employeeMoods:[],purchases:[],totalTasks:22,completionRate:0,totalPointsEarned:0,totalPointsSpent:0},r=Array.isArray(n.purchases)?[...n.purchases,d]:[d],s=(n.totalPointsSpent||0)+t.cost;return o(o({},e),{},{[l]:o(o({},n),{},{purchases:r,totalPointsSpent:s})})})),console.log("\ud83d\uded2 Purchase logged:",d),!0})(r.id,e,s,l,c);t&&alert("\ud83c\udf89 Successfully purchased: ".concat(e.name,"! Check with your manager to redeem."))};e.useEffect((()=>{a&&Object.keys(a).length>0&&d()}),[a,d]);const _=e=>{switch(e){case"food":return(0,P.jsx)(U,{className:"w-4 h-4"});case"break":return(0,P.jsx)(q,{className:"w-4 h-4"});case"reward":return(0,P.jsx)(W,{className:"w-4 h-4"});case"social":return(0,P.jsx)(k,{className:"w-4 h-4"});default:return(0,P.jsx)(M,{className:"w-4 h-4"})}};return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl shadow-sm p-6 text-white",children:[(0,P.jsxs)("div",{className:"flex items-center justify-between",children:[(0,P.jsxs)("div",{children:[(0,P.jsx)("h2",{className:"text-2xl font-bold",children:"Your Points"}),(0,P.jsx)("div",{className:"text-4xl font-bold mt-2",children:g}),(0,P.jsx)("div",{className:"text-purple-100 text-sm",children:"Available to spend"})]}),(0,P.jsx)("div",{className:"text-6xl opacity-50",children:"\ud83d\udc8e"})]}),(0,P.jsxs)("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-purple-400",children:[(0,P.jsxs)("button",{onClick:()=>m(!p),className:"flex items-center bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition-colors",children:[(0,P.jsx)(B,{className:"w-4 h-4 mr-2"}),"Purchase History"]}),(0,P.jsxs)("div",{className:"text-right",children:[(0,P.jsx)("div",{className:"text-sm text-purple-100",children:"Your Rank"}),(0,P.jsxs)("div",{className:"font-bold",children:["#",x.findIndex((e=>e.id===r.id))+1||"Unranked"]})]})]})]}),p&&(0,P.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,P.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Recent Purchases"}),y.length>0?(0,P.jsx)("div",{className:"space-y-3",children:y.slice(0,10).map((e=>(0,P.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,P.jsxs)("div",{className:"flex items-center",children:[(0,P.jsx)("div",{className:"text-lg mr-3",children:"\ud83d\uded2"}),(0,P.jsxs)("div",{children:[(0,P.jsx)("div",{className:"font-medium text-gray-800",children:e.itemName}),(0,P.jsxs)("div",{className:"text-sm text-gray-500",children:[e.date," at ",e.purchasedAt]})]})]}),(0,P.jsxs)("div",{className:"text-right",children:[(0,P.jsxs)("div",{className:"font-bold text-purple-600",children:["-",e.cost," pts"]}),(0,P.jsx)("div",{className:"text-xs px-2 py-1 rounded-full ".concat("pending"===e.status?"bg-yellow-100 text-yellow-700":"approved"===e.status?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"),children:e.status})]})]},e.id)))}):(0,P.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No purchases yet. Start earning points by completing tasks!"})]}),(0,P.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,P.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Store Categories"}),(0,P.jsx)("div",{className:"flex flex-wrap gap-2",children:v.map((e=>(0,P.jsxs)("button",{onClick:()=>h(e.id),className:"flex items-center px-4 py-2 rounded-lg transition-colors ".concat(u===e.id?"bg-purple-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[(0,P.jsx)("span",{className:"mr-2",children:e.icon}),e.name]},e.id)))})]}),(0,P.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,P.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,P.jsx)(H,{className:"w-5 h-5 mr-2"}),"all"===u?"All Items":null===(n=v.find((e=>e.id===u)))||void 0===n?void 0:n.name]}),(0,P.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:b.map((e=>{const t=!!f&&K(f,e);return(0,P.jsxs)("div",{className:"border rounded-lg p-4 transition-all ".concat(t?"border-green-200 hover:border-green-300 hover:shadow-md":"border-gray-200 opacity-60"),children:[(0,P.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,P.jsx)("div",{className:"text-3xl",children:e.icon}),(0,P.jsx)("div",{className:"flex items-center",children:_(e.category)})]}),(0,P.jsx)("h4",{className:"font-semibold text-gray-800 mb-2",children:e.name}),(0,P.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),(0,P.jsxs)("div",{className:"flex items-center justify-between",children:[(0,P.jsxs)("div",{className:"text-lg font-bold text-purple-600",children:[e.cost," pts"]}),(0,P.jsx)("button",{onClick:()=>w(e),disabled:!t||!e.available,className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat(t&&e.available?"bg-purple-500 text-white hover:bg-purple-600":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:e.available?t?"Purchase":"Need more points":"Unavailable"})]}),!t&&e.available&&(0,P.jsxs)("div",{className:"mt-2 text-xs text-red-500",children:["Need ",e.cost-g," more points"]})]},e.id)}))}),0===b.length&&(0,P.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No items available in this category"})]}),(0,P.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,P.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,P.jsx)(V,{className:"w-5 h-5 mr-2"}),"Points Leaderboard"]}),(0,P.jsx)("div",{className:"space-y-3",children:x.map(((e,t)=>(0,P.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg ".concat(e.id===r.id?"bg-purple-50 border border-purple-200":"bg-gray-50"),children:[(0,P.jsxs)("div",{className:"flex items-center",children:[(0,P.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold mr-3 ".concat(0===t?"bg-yellow-400 text-white":1===t?"bg-gray-400 text-white":2===t?"bg-orange-400 text-white":"bg-gray-200 text-gray-600"),children:t+1}),(0,P.jsxs)("div",{children:[(0,P.jsxs)("div",{className:"font-medium text-gray-800",children:[e.name,e.id===r.id&&(0,P.jsx)("span",{className:"ml-2 text-purple-600 text-sm",children:"(You)"})]}),(0,P.jsx)("div",{className:"text-sm text-gray-500",children:e.role})]})]}),(0,P.jsxs)("div",{className:"text-right",children:[(0,P.jsxs)("div",{className:"font-bold text-purple-600",children:[e.points," pts"]}),0===t&&(0,P.jsx)("div",{className:"text-xs text-yellow-600",children:"\ud83d\udc51 Top Performer"})]})]},e.id)))})]})]})},Q=u("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),$=u("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),G=u("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),X=u("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Z=u("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),J=u("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]),ee=u("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);class te{constructor(e){this.clock={},e&&(this.clock=o({},e))}increment(e){this.clock[e]||(this.clock[e]=0),this.clock[e]++}update(e){for(const[t,n]of Object.entries(e))(!this.clock[t]||this.clock[t]<n)&&(this.clock[t]=n)}compare(e){let t=!1,n=!1;const r=new Set([...Object.keys(this.clock),...Object.keys(e)]);for(const s of r){const r=this.clock[s]||0,i=e[s]||0;r<i&&(t=!0),r>i&&(n=!0)}return t&&!n?"before":!t&&n?"after":t||n?"concurrent":"after"}merge(e){const t=o({},this.clock);for(const[n,r]of Object.entries(e))t[n]=Math.max(t[n]||0,r);return t}getClock(){return o({},this.clock)}}class ne{constructor(e,t){this.deviceId=void 0,this.vectorClock=void 0,this.deviceId=e,this.vectorClock=new te(t)}createOperation(e,t,n){this.vectorClock.increment(this.deviceId);return{id:"".concat(this.deviceId,"-").concat(Date.now(),"-").concat(Math.random().toString(36).slice(2,8)),type:e,payload:t,timestamp:Date.now(),deviceId:this.deviceId,vectorClock:this.vectorClock.getClock(),targetField:n,version:this.vectorClock.getClock()[this.deviceId]||0}}applyOperation(e,t){if("tasks"===e.targetField)switch(e.type){case"ADD_TASK":return o(o({},t),{},{tasks:[...t.tasks,e.payload]});case"COMPLETE_TASK":return o(o({},t),{},{tasks:t.tasks.map((t=>t.id===e.payload.id?o(o({},t),{},{completed:!0}):t))});case"DELETE_ITEM":return o(o({},t),{},{tasks:t.tasks.filter((t=>t.id!==e.payload.id))});default:return t}if("employees"===e.targetField)switch(e.type){case"UPDATE_EMPLOYEE":return o(o({},t),{},{employees:t.employees.map((t=>t.id===e.payload.id?o(o({},t),e.payload):t))});case"DELETE_ITEM":return o(o({},t),{},{employees:t.employees.filter((t=>t.id!==e.payload.id))});default:return t}return t}resolveConflicts(e){const t=new Map;for(const n of e){const e="".concat(n.targetField,":").concat(n.payload.id||n.id);if(t.has(e)){const r=t.get(e),s=new te(r.vectorClock).compare(n.vectorClock);("before"===s||"concurrent"===s&&n.timestamp>r.timestamp)&&t.set(e,n)}else t.set(e,n)}return Array.from(t.values())}rollbackOperations(e,t){let n=o({},t);for(const r of e)if("tasks"===r.targetField)switch(r.type){case"ADD_TASK":n.tasks=n.tasks.filter((e=>e.id!==r.payload.id));break;case"COMPLETE_TASK":n.tasks=n.tasks.map((e=>e.id===r.payload.id?o(o({},e),{},{completed:!1}):e));break;case"DELETE_ITEM":n.tasks=[...n.tasks,r.payload]}return n}}const re=new ne((()=>{let e=localStorage.getItem("deviceId");return e||(e="dev-"+Math.random().toString(36).slice(2,10),localStorage.setItem("deviceId",e)),e})()),se=new class{constructor(){this.queue=[],this.db=null,this.dbName="SyncOfflineQueue",this.storeName="operations",this._lastLogTime=null,this.initDB()}initDB(){const e=indexedDB.open(this.dbName,1);e.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains(this.storeName)||t.createObjectStore(this.storeName,{keyPath:"id"})},e.onsuccess=()=>{this.db=e.result,this.loadQueueFromDB()},e.onerror=()=>{console.error("OfflineQueue: Failed to open IndexedDB")}}loadQueueFromDB(){if(!this.db)return;const e=this.db.transaction(this.storeName,"readonly").objectStore(this.storeName).getAll();e.onsuccess=()=>{this.queue=e.result||[]}}enqueue(e){this.queue.push(e),this.saveOperationToDB(e)}saveOperationToDB(e){if(!this.db)return;this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).put(e)}saveQueueToDB(){if(!this.db)return;const e=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName);e.clear().onsuccess=()=>{for(const t of this.queue)e.put(t)}}compactOperationLog(){const e=new Map;for(const t of this.queue){const n="".concat(t.targetField,":").concat(t.payload.id||t.id);e.set(n,t)}this.queue=Array.from(e.values()),this.saveQueueToDB()}cleanExpiredOperations(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6048e5;const t=Date.now();this.queue=this.queue.filter((n=>t-n.timestamp<e)),this.saveQueueToDB()}async processQueue(e){this.compactOperationLog(),this.cleanExpiredOperations();const t=this.queue.filter((e=>"COMPLETE_TASK"===e.type)),n=this.queue.filter((e=>"ADD_TASK"===e.type||"UPDATE_EMPLOYEE"===e.type)),r=this.queue.filter((e=>"DELETE_ITEM"===e.type));for(const s of t)await e(s),this.removeOperationFromDB(s.id);n.length&&await Promise.all(n.map((async t=>{await e(t),this.removeOperationFromDB(t.id)}))),r.forEach(((t,n)=>{setTimeout((async()=>{await e(t),this.removeOperationFromDB(t.id)}),1e3*n)})),this.loadQueueFromDB()}removeAppliedOperations(e){this.queue=this.queue.filter((t=>!e.includes(t.id))),this.saveQueueToDB()}removeOperationFromDB(e){if(!this.db)return;this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).delete(e),this.queue=this.queue.filter((t=>t.id!==e))}prioritizeOperations(){return[...this.queue.filter((e=>"COMPLETE_TASK"===e.type)),...this.queue.filter((e=>"ADD_TASK"===e.type||"UPDATE_EMPLOYEE"===e.type)),...this.queue.filter((e=>"DELETE_ITEM"===e.type))]}resolveQueueConflicts(){}logThrottled(e){(!this._lastLogTime||Date.now()-this._lastLogTime>2e3)&&(console.log("[OfflineQueue]",e),this._lastLogTime=Date.now())}monitorPerformance(e,t){const n=performance.now();t();const r=performance.now()-n;r>100&&this.logThrottled("\u26a0\ufe0f ".concat(e," took ").concat(Math.round(r),"ms"))}};function ie(e,t){return re.applyOperation(t,{tasks:e}).tasks}const ae=new ne((()=>{let e=localStorage.getItem("deviceId");return e||(e="dev-"+Math.random().toString(36).slice(2,10),localStorage.setItem("deviceId",e)),e})());function oe(e,t){return ae.applyOperation(t,{employees:e}).employees}new ne((()=>{let e=localStorage.getItem("deviceId");return e||(e="dev-"+Math.random().toString(36).slice(2,10),localStorage.setItem("deviceId",e)),e})());const le=new ne((()=>{let e=localStorage.getItem("deviceId");return e||(e="dev-"+Math.random().toString(36).slice(2,10),localStorage.setItem("deviceId",e)),e})());function ce(e,t){return le.applyOperation(t,{storeItems:e}).storeItems}new ne((()=>{let e=localStorage.getItem("deviceId");return e||(e="dev-"+Math.random().toString(36).slice(2,10),localStorage.setItem("deviceId",e)),e})());new ne((()=>{let e=localStorage.getItem("deviceId");return e||(e="dev-"+Math.random().toString(36).slice(2,10),localStorage.setItem("deviceId",e)),e})());const de=(e,t,n,r,s,i)=>{if(e.trim()){const o={id:Math.max(...n.map((e=>e.id)),0)+1,name:e.trim(),mood:3,lastUpdated:"Just added",role:t,lastMoodDate:null,points:0},l=(a=o,ae.createOperation("UPDATE_EMPLOYEE",a,"employees"));r((e=>oe(e,l))),s(""),i("Cleaner")}var a},ue=(e,t)=>{window.confirm("Are you sure you want to remove this employee?")&&t((t=>{const n=function(e,t){const n=e.find((e=>e.id===t));if(!n)throw new Error("Employee not found");return ae.createOperation("DELETE_ITEM",n,"employees")}(t,e);return oe(t,n)}))},he=(e,t,n,r)=>{r((r=>{const s=function(e,t,n,r){const s=e.find((e=>e.id===t));if(!s)throw new Error("Employee not found");const i=o(o({},s),{},{[n]:r});return ae.createOperation("UPDATE_EMPLOYEE",i,"employees")}(r,e,t,n);return oe(r,s)}))},pe=(e,t,n,r)=>{r((r=>{const s=function(e,t,n,r){const s=e.find((e=>e.id===t));if(!s)throw new Error("Task not found");const i=o(o({},s),{},{[n]:r});return re.createOperation("ADD_TASK",i,"tasks")}(r,e,t,n);return ie(r,s)}))},me=(e,t)=>{window.confirm("Are you sure you want to remove this task?")&&t((t=>{const n=function(e,t){const n=e.find((e=>e.id===t));if(!n)throw new Error("Task not found");return re.createOperation("DELETE_ITEM",n,"tasks")}(t,e);return ie(t,n)}))};var fe=n(569),ge=n.n(fe);const ye=t=>{let{employees:n,tasks:r,customRoles:i,storeItems:a,prepItems:c,setEmployees:d,setTasks:u,setCustomRoles:h,setStoreItems:p,setPrepItems:f}=t;const[g,b]=(0,e.useState)(!1),[w,_]=(0,e.useState)(!1),[N,j]=(0,e.useState)(!1),[C,S]=(0,e.useState)(""),[T,E]=(0,e.useState)("Cleaner"),[D,R]=(0,e.useState)(""),[A,L]=(0,e.useState)(null),[O,F]=(0,e.useState)(null),[z,U]=(0,e.useState)(null),[W,B]=(0,e.useState)(null),[H,V]=(0,e.useState)(null),[K,Y]=(0,e.useState)(""),[te,ne]=(0,e.useState)(""),[re,ie]=(0,e.useState)(""),[ae,oe]=(0,e.useState)("food"),[fe,ye]=(0,e.useState)("\ud83c\udf81"),[xe,ve]=(0,e.useState)(""),[be,we]=(0,e.useState)("majoneesit"),[_e,ke]=(0,e.useState)(""),[Ne,je]=(0,e.useState)(""),[Ce,Se]=(0,e.useState)(!1),[Te,Ee]=(0,e.useState)({ingredients:"",instructions:""}),Ie=[{id:"majoneesit",name:"Majoneesit",icon:"\ud83e\udd44"},{id:"proteiinit",name:"Proteiinit",icon:"\ud83e\udd69"},{id:"kasvikset",name:"Kasvikset",icon:"\ud83e\udd57"},{id:"marinointi",name:"Marinointi & pikkel\xf6inti",icon:"\ud83e\udd52"},{id:"kastikkeet",name:"Kastikkeet",icon:"\ud83e\uddc2"},{id:"muut",name:"Muut",icon:"\ud83d\udd27"}],[Pe,De]=(0,e.useState)([]),Me=()=>{((e,t,n,r)=>{e.trim()&&!t.includes(e.trim())&&(n((t=>[...t,e.trim()])),r(""))})(D,i,h,R)},Re=(e,t,n)=>{!function(e,t,n,r,s){const i=e.find((e=>e.id===t));if(!i)throw new Error("StoreItem not found");const a=o(o({},i),{},{[n]:r}),l=le.createOperation("ADD_TASK",a,"storeItems");se.enqueue(l),s((e=>ce(e,l)))}(a,e,t,n,p)},Ae=e=>{!function(e,t,n){const r=e.find((e=>e.id===t));if(!r)throw new Error("StoreItem not found");const s=le.createOperation("DELETE_ITEM",r,"storeItems");se.enqueue(s),n((e=>ce(e,s)))}(a,e,p)},Le=(e,t,n)=>{f((r=>r.map((r=>r.id===e?o(o({},r),{},{[t]:n}):r))))},Oe=(e,t,n)=>{f((r=>r.map((r=>r.id===e?o(o({},r),{},{recipe:r.recipe?o(o({},r.recipe),{},{[t]:n}):{ingredients:"",instructions:"",[t]:n}}):r))))},Fe=(e,t,n)=>{const r=c.find((t=>t.id===e));if(null===r||void 0===r||!r.recipe)return;const s=document.getElementById("".concat(t,"-").concat(e));if(!s)return;const i=s.selectionStart,a=s.selectionEnd,o=r.recipe[t],l=o.substring(0,i),d=o.substring(i,a),u=o.substring(a);let h="";switch(n){case"bold":h=l+"**"+d+"**"+u;break;case"italic":h=l+"*"+d+"*"+u;break;case"bullet":h=l+"\n\u2022 "+u;break;case"number":h=l+"\n1. "+u;break;default:return}Oe(e,t,h)},[ze,Ue]=(0,e.useState)({}),qe=e.useCallback(ge()(((e,t,n)=>{pe(e,t,n,u),Ue((t=>{const{[e]:n}=t;return l(t,[e].map(s))}))}),800),[u]),We=(e,t,n)=>{Ue((r=>o(o({},r),{},{[e]:o(o({},r[e]),{},{[t]:n})}))),qe(e,t,n)},Be=(e,t)=>{var n,r;return null!==(n=null===(r=ze[e.id])||void 0===r?void 0:r[t])&&void 0!==n?n:e[t]},He=(e,t,n)=>{De((r=>r.map((r=>r.id===e?o(o({},r),{},{[t]:n}):r))))};return(0,P.jsxs)("div",{className:"space-y-6",children:[(0,P.jsxs)("div",{className:"bg-white rounded-xl shadow-sm mb-6 ".concat(g?"p-6":"p-2"),children:[(0,P.jsxs)("button",{onClick:()=>b(!g),className:"w-full flex items-center justify-between hover:text-gray-600 ".concat(g?"text-lg font-semibold text-gray-800 mb-4":"text-sm font-medium text-gray-700 py-1"),children:[(0,P.jsxs)("div",{className:"flex items-center",children:[(0,P.jsx)(m,{className:"mr-2 ".concat(g?"w-5 h-5":"w-4 h-4")}),"Role Management"]}),(0,P.jsx)("span",{className:"transition-transform ".concat(g?"text-xl rotate-180":"text-sm"),children:"\u25bc"})]}),g&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,P.jsx)("h4",{className:"font-medium text-gray-700 mb-3",children:"Add New Role"}),(0,P.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,P.jsx)("input",{type:"text",placeholder:"Role name",value:D,onChange:e=>R(e.target.value),onKeyPress:e=>"Enter"===e.key&&Me(),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,P.jsx)("button",{onClick:Me,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center",children:(0,P.jsx)(Q,{className:"w-4 h-4"})})]})]}),(0,P.jsx)("div",{className:"space-y-2",children:i.map((e=>(0,P.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,P.jsx)("span",{className:"font-medium text-gray-700",children:e}),(0,P.jsx)("button",{onClick:()=>((e,t,n)=>{const r=t.filter((t=>t.role===e));r.length>0?alert('Cannot remove role "'.concat(e,'" - ').concat(r.length," employee(s) are using it.")):window.confirm('Are you sure you want to remove the role "'.concat(e,'"?'))&&n((t=>t.filter((t=>t!==e))))})(e,n,h),className:"p-1 text-red-600 hover:text-red-800",title:"Remove role",children:(0,P.jsx)($,{className:"w-4 h-4"})})]},e)))})]})]}),(0,P.jsxs)("div",{className:"bg-white rounded-xl shadow-sm mb-6 ".concat(w?"p-6":"p-2"),children:[(0,P.jsxs)("button",{onClick:()=>_(!w),className:"w-full flex items-center justify-between hover:text-gray-600 ".concat(w?"text-lg font-semibold text-gray-800 mb-4":"text-sm font-medium text-gray-700 py-1"),children:[(0,P.jsxs)("div",{className:"flex items-center",children:[(0,P.jsx)(v,{className:"mr-2 ".concat(w?"w-5 h-5":"w-4 h-4")}),"Store Management"]}),(0,P.jsx)("span",{className:"transition-transform ".concat(w?"text-xl rotate-180":"text-sm"),children:"\u25bc"})]}),w&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,P.jsx)("h4",{className:"font-medium text-gray-700 mb-3",children:"Add New Store Item"}),(0,P.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,P.jsxs)("div",{children:[(0,P.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Name"}),(0,P.jsx)("input",{type:"text",placeholder:"e.g., Free Coffee",value:K,onChange:e=>Y(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost (Points)"}),(0,P.jsx)("input",{type:"number",min:"1",placeholder:"10",value:re,onChange:e=>ie(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,P.jsxs)("select",{value:ae,onChange:e=>oe(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,P.jsx)("option",{value:"food",children:"Food & Drinks"}),(0,P.jsx)("option",{value:"break",children:"Time Off"}),(0,P.jsx)("option",{value:"reward",children:"Rewards"}),(0,P.jsx)("option",{value:"social",children:"Social"})]})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Icon"}),(0,P.jsx)("input",{type:"text",placeholder:"\ud83c\udf81",value:fe,onChange:e=>ye(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,P.jsxs)("div",{className:"md:col-span-2",children:[(0,P.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,P.jsx)("input",{type:"text",placeholder:"e.g., Get a free coffee from the kitchen",value:te,onChange:e=>ne(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,P.jsx)("div",{className:"md:col-span-2",children:(0,P.jsxs)("button",{onClick:()=>{if(K.trim()&&te.trim()&&re.trim()){const e={id:Math.max(...a.map((e=>e.id)),0)+1,name:K.trim(),description:te.trim(),cost:parseInt(re)||10,category:ae,icon:fe,available:!0};!function(e,t,n){const r=le.createOperation("ADD_TASK",n,"storeItems");se.enqueue(r),t((e=>ce(e,r)))}(0,p,e),Y(""),ne(""),ie(""),oe("food"),ye("\ud83c\udf81")}},className:"w-full bg-purple-500 text-white py-2 px-4 rounded-lg hover:bg-purple-600 flex items-center justify-center",children:[(0,P.jsx)(G,{className:"w-4 h-4 mr-2"}),"Add Store Item"]})})]})]}),(0,P.jsxs)("div",{className:"space-y-3",children:[(0,P.jsx)("h4",{className:"font-medium text-gray-700",children:"Current Store Items"}),a.map((e=>(0,P.jsxs)("div",{className:"border rounded-lg p-4 bg-white",children:[(0,P.jsxs)("div",{className:"flex items-start justify-between",children:[(0,P.jsxs)("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,P.jsxs)("div",{children:[(0,P.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Name"}),z===e.id?(0,P.jsx)("input",{type:"text",value:e.name,onChange:t=>Re(e.id,"name",t.target.value),className:"w-full px-2 py-1 border rounded text-sm"}):(0,P.jsxs)("div",{className:"font-medium text-gray-800 flex items-center",children:[(0,P.jsx)("span",{className:"text-lg mr-2",children:e.icon}),e.name]})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Cost"}),z===e.id?(0,P.jsx)("input",{type:"number",min:"1",value:e.cost,onChange:t=>Re(e.id,"cost",parseInt(t.target.value)||1),className:"w-full px-2 py-1 border rounded text-sm"}):(0,P.jsxs)("div",{className:"flex items-center",children:[(0,P.jsx)(M,{className:"w-3 h-3 text-purple-500 mr-1"}),(0,P.jsxs)("span",{className:"font-medium text-purple-600",children:[e.cost," pts"]})]})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Category"}),z===e.id?(0,P.jsxs)("select",{value:e.category,onChange:t=>Re(e.id,"category",t.target.value),className:"w-full px-2 py-1 border rounded text-sm",children:[(0,P.jsx)("option",{value:"food",children:"Food & Drinks"}),(0,P.jsx)("option",{value:"break",children:"Time Off"}),(0,P.jsx)("option",{value:"reward",children:"Rewards"}),(0,P.jsx)("option",{value:"social",children:"Social"})]}):(0,P.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("food"===e.category?"bg-orange-100 text-orange-700":"break"===e.category?"bg-blue-100 text-blue-700":"reward"===e.category?"bg-green-100 text-green-700":"bg-purple-100 text-purple-700"),children:e.category})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Status"}),(0,P.jsx)("button",{onClick:()=>Re(e.id,"available",!e.available),className:"px-2 py-1 rounded-full text-xs font-medium ".concat(e.available?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:e.available?"Available":"Unavailable"})]})]}),(0,P.jsxs)("div",{className:"flex gap-2 ml-4",children:[z===e.id?(0,P.jsx)("button",{onClick:()=>U(null),className:"p-1 text-green-600 hover:text-green-800",children:(0,P.jsx)(X,{className:"w-4 h-4"})}):(0,P.jsx)("button",{onClick:()=>U(e.id),className:"p-1 text-blue-600 hover:text-blue-800",children:(0,P.jsx)(Z,{className:"w-4 h-4"})}),(0,P.jsx)("button",{onClick:()=>Ae(e.id),className:"p-1 text-red-600 hover:text-red-800",children:(0,P.jsx)($,{className:"w-4 h-4"})})]})]}),(0,P.jsxs)("div",{className:"mt-3",children:[(0,P.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Description"}),z===e.id?(0,P.jsx)("input",{type:"text",value:e.description,onChange:t=>Re(e.id,"description",t.target.value),className:"w-full px-2 py-1 border rounded text-sm"}):(0,P.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]}),z===e.id&&(0,P.jsxs)("div",{className:"mt-2",children:[(0,P.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Icon"}),(0,P.jsx)("input",{type:"text",value:e.icon,onChange:t=>Re(e.id,"icon",t.target.value),className:"w-20 px-2 py-1 border rounded text-sm",placeholder:"\ud83c\udf81"})]})]},e.id))),0===a.length&&(0,P.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No store items yet. Add your first item above!"})]})]})]}),(0,P.jsxs)("div",{className:"bg-white rounded-xl shadow-sm mb-6 ".concat(N?"p-6":"p-2"),children:[(0,P.jsxs)("button",{onClick:()=>j(!N),className:"w-full flex items-center justify-between hover:text-gray-600 ".concat(N?"text-lg font-semibold text-gray-800 mb-4":"text-sm font-medium text-gray-700 py-1"),children:[(0,P.jsxs)("div",{className:"flex items-center",children:[(0,P.jsx)(x,{className:"mr-2 ".concat(N?"w-5 h-5":"w-4 h-4")}),"Prep List Management"]}),(0,P.jsx)("span",{className:"transition-transform ".concat(N?"text-xl rotate-180":"text-sm"),children:"\u25bc"})]}),N&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,P.jsx)("h4",{className:"font-medium text-gray-700 mb-3",children:"Add New Prep Item"}),(0,P.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,P.jsxs)("div",{children:[(0,P.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prep Name"}),(0,P.jsx)("input",{type:"text",placeholder:"e.g., Valkosipulimajoneesi",value:xe,onChange:e=>ve(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,P.jsx)("select",{value:be,onChange:e=>we(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500",children:Ie.map((e=>(0,P.jsxs)("option",{value:e.id,children:[e.icon," ",e.name]},e.id)))})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estimated Time"}),(0,P.jsx)("input",{type:"text",placeholder:"e.g., 15 min",value:_e,onChange:e=>ke(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Frequency (days)"}),(0,P.jsx)("input",{type:"number",min:"1",max:"30",placeholder:"3",value:Ne,onChange:e=>je(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"})]}),(0,P.jsx)("div",{className:"md:col-span-2",children:(0,P.jsxs)("label",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[(0,P.jsx)("input",{type:"checkbox",checked:Ce,onChange:e=>Se(e.target.checked),className:"rounded border-gray-300 text-green-500 focus:ring-green-500"}),(0,P.jsx)("span",{children:"Include Recipe"})]})}),Ce&&(0,P.jsxs)("div",{className:"md:col-span-2 space-y-4",children:[(0,P.jsxs)("div",{children:[(0,P.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ingredients"}),(0,P.jsx)("textarea",{value:Te.ingredients,onChange:e=>Ee((t=>o(o({},t),{},{ingredients:e.target.value}))),placeholder:"\u2022 **1 cup** majoneesi\n\u2022 **3-4** valkosipulin kyntt\xe4",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 h-24 font-mono text-sm"})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instructions"}),(0,P.jsx)("textarea",{value:Te.instructions,onChange:e=>Ee((t=>o(o({},t),{},{instructions:e.target.value}))),placeholder:"1. **Sekoita**: Yhdist\xe4 majoneesi ja valkosipuli\n2. **Mausta**: Lis\xe4\xe4 sitruunamehu",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 h-24 font-mono text-sm"})]})]}),(0,P.jsx)("div",{className:"md:col-span-2",children:(0,P.jsxs)("button",{onClick:()=>{if(xe.trim()&&_e.trim()&&Ne.trim()){const e={id:Math.max(...c.map((e=>e.id)),0)+1,name:xe.trim(),category:be,estimatedTime:_e.trim(),isCustom:!0,hasRecipe:Ce,frequency:parseInt(Ne)||1,recipe:Ce?Te:null};f((t=>[...t,e])),ve(""),we("majoneesit"),ke(""),je(""),Se(!1),Ee({ingredients:"",instructions:""})}},className:"w-full bg-green-500 text-white py-2 px-4 rounded-lg hover:bg-green-600 flex items-center justify-center",children:[(0,P.jsx)(x,{className:"w-4 h-4 mr-2"}),"Add Prep Item"]})})]})]}),(0,P.jsxs)("div",{className:"space-y-3",children:[(0,P.jsxs)("h4",{className:"font-medium text-gray-700",children:["Current Prep Items (",c.length,")"]}),c.map((e=>{var t,n;const r=Ie.find((t=>t.id===e.category));return(0,P.jsxs)("div",{className:"border rounded-lg p-4 bg-white",children:[(0,P.jsxs)("div",{className:"flex items-start justify-between",children:[(0,P.jsxs)("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,P.jsxs)("div",{children:[(0,P.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Name"}),W===e.id?(0,P.jsx)("input",{type:"text",value:e.name,onChange:t=>Le(e.id,"name",t.target.value),className:"w-full px-2 py-1 border rounded text-sm"}):(0,P.jsxs)("div",{className:"font-medium text-gray-800 flex items-center",children:[(0,P.jsx)("span",{className:"text-lg mr-2",children:null===r||void 0===r?void 0:r.icon}),e.name]})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Category"}),W===e.id?(0,P.jsx)("select",{value:e.category,onChange:t=>Le(e.id,"category",t.target.value),className:"w-full px-2 py-1 border rounded text-sm",children:Ie.map((e=>(0,P.jsx)("option",{value:e.id,children:e.name},e.id)))}):(0,P.jsx)("span",{className:"text-sm text-gray-600",children:null===r||void 0===r?void 0:r.name})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Time"}),W===e.id?(0,P.jsx)("input",{type:"text",value:e.estimatedTime,onChange:t=>Le(e.id,"estimatedTime",t.target.value),className:"w-full px-2 py-1 border rounded text-sm"}):(0,P.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,P.jsx)(q,{className:"w-3 h-3 mr-1"}),e.estimatedTime]})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Frequency"}),W===e.id?(0,P.jsx)("input",{type:"number",min:"1",max:"30",value:e.frequency,onChange:t=>Le(e.id,"frequency",parseInt(t.target.value)||1),className:"w-full px-2 py-1 border rounded text-sm"}):(0,P.jsxs)("span",{className:"text-sm text-gray-600",children:["Every ",e.frequency," days"]})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Recipe"}),(0,P.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,P.jsx)("button",{onClick:()=>Le(e.id,"hasRecipe",!e.hasRecipe),className:"px-2 py-1 rounded-full text-xs font-medium ".concat(e.hasRecipe?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"),children:e.hasRecipe?"\ud83d\udcd6 Has Recipe":"No Recipe"}),e.hasRecipe&&(0,P.jsxs)("button",{onClick:()=>V(H===e.id?null:e.id),className:"px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-xs hover:bg-blue-200",children:[(0,P.jsx)(J,{className:"w-3 h-3 inline mr-1"}),"Edit"]})]})]})]}),(0,P.jsxs)("div",{className:"flex gap-2 ml-4",children:[W===e.id?(0,P.jsx)("button",{onClick:()=>B(null),className:"p-1 text-green-600 hover:text-green-800",children:(0,P.jsx)(X,{className:"w-4 h-4"})}):(0,P.jsx)("button",{onClick:()=>B(e.id),className:"p-1 text-blue-600 hover:text-blue-800",children:(0,P.jsx)(Z,{className:"w-4 h-4"})}),(0,P.jsx)("button",{onClick:()=>{return t=e.id,void(window.confirm("Are you sure you want to remove this prep item?")&&f((e=>e.filter((e=>e.id!==t)))));var t},className:"p-1 text-red-600 hover:text-red-800",children:(0,P.jsx)($,{className:"w-4 h-4"})})]})]}),H===e.id&&e.hasRecipe&&(0,P.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[(0,P.jsx)("h5",{className:"font-medium text-gray-700 mb-3",children:"Recipe Editor"}),(0,P.jsxs)("div",{className:"space-y-4",children:[(0,P.jsxs)("div",{children:[(0,P.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ingredients"}),(0,P.jsxs)("div",{className:"mb-2 flex space-x-2",children:[(0,P.jsx)("button",{onClick:()=>Fe(e.id,"ingredients","bold"),className:"px-2 py-1 bg-gray-100 rounded text-sm font-bold hover:bg-gray-200",children:"B"}),(0,P.jsx)("button",{onClick:()=>Fe(e.id,"ingredients","italic"),className:"px-2 py-1 bg-gray-100 rounded text-sm italic hover:bg-gray-200",children:"I"}),(0,P.jsx)("button",{onClick:()=>Fe(e.id,"ingredients","bullet"),className:"px-2 py-1 bg-gray-100 rounded text-sm hover:bg-gray-200",children:"\u2022"})]}),(0,P.jsx)("textarea",{id:"ingredients-".concat(e.id),value:(null===(t=e.recipe)||void 0===t?void 0:t.ingredients)||"",onChange:t=>Oe(e.id,"ingredients",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 h-24 font-mono text-sm",placeholder:"\u2022 **1 cup** majoneesi\n\u2022 **3-4** valkosipulin kyntt\xe4"})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instructions"}),(0,P.jsxs)("div",{className:"mb-2 flex space-x-2",children:[(0,P.jsx)("button",{onClick:()=>Fe(e.id,"instructions","bold"),className:"px-2 py-1 bg-gray-100 rounded text-sm font-bold hover:bg-gray-200",children:"B"}),(0,P.jsx)("button",{onClick:()=>Fe(e.id,"instructions","italic"),className:"px-2 py-1 bg-gray-100 rounded text-sm italic hover:bg-gray-200",children:"I"}),(0,P.jsx)("button",{onClick:()=>Fe(e.id,"instructions","number"),className:"px-2 py-1 bg-gray-100 rounded text-sm hover:bg-gray-200",children:"1."})]}),(0,P.jsx)("textarea",{id:"instructions-".concat(e.id),value:(null===(n=e.recipe)||void 0===n?void 0:n.instructions)||"",onChange:t=>Oe(e.id,"instructions",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 h-24 font-mono text-sm",placeholder:"1. **Sekoita**: Yhdist\xe4 majoneesi ja valkosipuli\n2. **Mausta**: Lis\xe4\xe4 sitruunamehu"})]})]})]})]},e.id)})),0===c.length&&(0,P.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No prep items yet. Add your first prep item above!"})]})]})]}),(0,P.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,P.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,P.jsx)(k,{className:"w-5 h-5 mr-2"}),"Employee Management"]}),(0,P.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,P.jsx)("h4",{className:"font-medium text-gray-700 mb-3",children:"Add New Employee"}),(0,P.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,P.jsx)("input",{type:"text",placeholder:"Employee name",value:C,onChange:e=>S(e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,P.jsx)("select",{value:T,onChange:e=>E(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:i.map((e=>(0,P.jsx)("option",{value:e,children:e},e)))}),(0,P.jsx)("button",{onClick:()=>{de(C,T,n,d,S,E)},className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 flex items-center",children:(0,P.jsx)(ee,{className:"w-4 h-4"})})]})]}),(0,P.jsx)("div",{className:"overflow-x-auto",children:(0,P.jsxs)("table",{className:"w-full border-collapse",children:[(0,P.jsx)("thead",{children:(0,P.jsxs)("tr",{className:"bg-gray-50",children:[(0,P.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Name"}),(0,P.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Role"}),(0,P.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Points"}),(0,P.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Mood"}),(0,P.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Last Updated"}),(0,P.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-center",children:"Actions"})]})}),(0,P.jsx)("tbody",{children:n.map((e=>(0,P.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,P.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:A===e.id?(0,P.jsx)("input",{type:"text",value:e.name,onChange:t=>he(e.id,"name",t.target.value,d),className:"w-full px-2 py-1 border rounded"}):e.name}),(0,P.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:A===e.id?(0,P.jsx)("select",{value:e.role,onChange:t=>he(e.id,"role",t.target.value,d),className:"w-full px-2 py-1 border rounded",children:i.map((e=>(0,P.jsx)("option",{value:e,children:e},e)))}):e.role}),(0,P.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:(0,P.jsxs)("div",{className:"flex items-center",children:[(0,P.jsx)(M,{className:"w-3 h-3 text-purple-500 mr-1"}),(0,P.jsx)("span",{className:"font-medium text-purple-600",children:e.points})]})}),(0,P.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:(0,P.jsxs)("div",{className:"flex items-center",children:[(0,P.jsx)("div",{className:"w-3 h-3 rounded-full mr-2 ".concat(I(e.mood))}),e.mood,"/5"]})}),(0,P.jsx)("td",{className:"border border-gray-200 px-4 py-2 text-sm text-gray-600",children:e.lastUpdated}),(0,P.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:(0,P.jsxs)("div",{className:"flex gap-2 justify-center",children:[A===e.id?(0,P.jsx)("button",{onClick:()=>L(null),className:"p-1 text-green-600 hover:text-green-800",children:(0,P.jsx)(X,{className:"w-4 h-4"})}):(0,P.jsx)("button",{onClick:()=>L(e.id),className:"p-1 text-blue-600 hover:text-blue-800",children:(0,P.jsx)(Z,{className:"w-4 h-4"})}),(0,P.jsx)("button",{onClick:()=>ue(e.id,d),className:"p-1 text-red-600 hover:text-red-800",children:(0,P.jsx)($,{className:"w-4 h-4"})})]})})]},e.id)))})]})})]}),(0,P.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,P.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,P.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,P.jsx)(y,{className:"w-5 h-5 mr-2"}),"Task Management"]}),(0,P.jsxs)("button",{onClick:()=>{const e=Math.max(0,...r.map((e=>e.id)),...Pe.map((e=>e.id)))+1,t={id:e,task:"",location:"",priority:"medium",estimatedTime:"",points:5};De((e=>[...e,t])),F(e)},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center",children:[(0,P.jsx)(Q,{className:"w-4 h-4 mr-2"}),"Add Task"]})]}),(0,P.jsx)("div",{className:"overflow-x-auto",children:(0,P.jsxs)("table",{className:"w-full border-collapse",children:[(0,P.jsx)("thead",{children:(0,P.jsxs)("tr",{className:"bg-gray-50",children:[(0,P.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Task"}),(0,P.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Location"}),(0,P.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Priority"}),(0,P.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Points"}),(0,P.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Est. Time"}),(0,P.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-center",children:"Actions"})]})}),(0,P.jsxs)("tbody",{children:[Pe.map((e=>(0,P.jsxs)("tr",{className:"hover:bg-yellow-50",children:[(0,P.jsx)("td",{className:"border border-yellow-300 px-4 py-2",children:(0,P.jsx)("input",{type:"text",value:e.task,onChange:t=>He(e.id,"task",t.target.value),className:"w-full px-2 py-1 border rounded"})}),(0,P.jsx)("td",{className:"border border-yellow-300 px-4 py-2",children:(0,P.jsx)("input",{type:"text",value:e.location,onChange:t=>He(e.id,"location",t.target.value),className:"w-full px-2 py-1 border rounded"})}),(0,P.jsx)("td",{className:"border border-yellow-300 px-4 py-2",children:(0,P.jsxs)("select",{value:e.priority,onChange:t=>He(e.id,"priority",t.target.value),className:"w-full px-2 py-1 border rounded",children:[(0,P.jsx)("option",{value:"low",children:"Low"}),(0,P.jsx)("option",{value:"medium",children:"Medium"}),(0,P.jsx)("option",{value:"high",children:"High"})]})}),(0,P.jsx)("td",{className:"border border-yellow-300 px-4 py-2",children:(0,P.jsx)("input",{type:"number",min:"1",max:"100",value:e.points,onChange:t=>He(e.id,"points",t.target.value),className:"w-full px-2 py-1 border rounded"})}),(0,P.jsx)("td",{className:"border border-yellow-300 px-4 py-2",children:(0,P.jsx)("input",{type:"text",value:e.estimatedTime,onChange:t=>He(e.id,"estimatedTime",t.target.value),className:"w-full px-2 py-1 border rounded"})}),(0,P.jsx)("td",{className:"border border-yellow-300 px-4 py-2",children:(0,P.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,P.jsx)("button",{onClick:()=>(e=>{const t=Pe.find((t=>t.id===e));t&&(u((e=>[...e,t])),De((t=>t.filter((t=>t.id!==e)))),F(null))})(e.id),className:"px-2 py-1 bg-green-500 text-white rounded hover:bg-green-600",title:"Save Task",children:(0,P.jsx)(X,{className:"w-4 h-4"})}),(0,P.jsx)("button",{onClick:()=>{return t=e.id,De((e=>e.filter((e=>e.id!==t)))),void F(null);var t},className:"px-2 py-1 bg-gray-400 text-white rounded hover:bg-gray-600",title:"Cancel",children:"\u2715"})]})})]},e.id))),r.map((e=>(0,P.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,P.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:O===e.id?(0,P.jsx)("input",{type:"text",value:Be(e,"task"),onChange:t=>We(e.id,"task",t.target.value),className:"w-full px-2 py-1 border rounded"}):e.task}),(0,P.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:O===e.id?(0,P.jsx)("input",{type:"text",value:Be(e,"location"),onChange:t=>We(e.id,"location",t.target.value),className:"w-full px-2 py-1 border rounded"}):e.location}),(0,P.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:O===e.id?(0,P.jsxs)("select",{value:e.priority,onChange:t=>pe(e.id,"priority",t.target.value,u),className:"w-full px-2 py-1 border rounded",children:[(0,P.jsx)("option",{value:"low",children:"Low"}),(0,P.jsx)("option",{value:"medium",children:"Medium"}),(0,P.jsx)("option",{value:"high",children:"High"})]}):(0,P.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("high"===e.priority?"bg-red-100 text-red-700":"medium"===e.priority?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"),children:e.priority})}),(0,P.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:O===e.id?(0,P.jsx)("input",{type:"number",min:"1",max:"100",value:e.points,onChange:t=>pe(e.id,"points",t.target.value,u),className:"w-full px-2 py-1 border rounded"}):(0,P.jsxs)("div",{className:"flex items-center",children:[(0,P.jsx)(M,{className:"w-3 h-3 text-purple-500 mr-1"}),(0,P.jsx)("span",{className:"font-medium text-purple-600",children:e.points})]})}),(0,P.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:O===e.id?(0,P.jsx)("input",{type:"text",value:Be(e,"estimatedTime"),onChange:t=>We(e.id,"estimatedTime",t.target.value),className:"w-full px-2 py-1 border rounded"}):e.estimatedTime}),(0,P.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:(0,P.jsxs)("div",{className:"flex gap-2 justify-center",children:[O===e.id?(0,P.jsx)("button",{onClick:()=>F(null),className:"p-1 text-green-600 hover:text-green-800",children:(0,P.jsx)(X,{className:"w-4 h-4"})}):(0,P.jsx)("button",{onClick:()=>F(e.id),className:"p-1 text-blue-600 hover:text-blue-800",children:(0,P.jsx)(Z,{className:"w-4 h-4"})}),(0,P.jsx)("button",{onClick:()=>me(e.id,u),className:"p-1 text-red-600 hover:text-red-800",title:"Delete Task",children:(0,P.jsx)($,{className:"w-4 h-4"})})]})})]},e.id)))]})]})})]})]})},xe=u("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),ve=u("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),be=e=>{var t,n,r,s;let{selectedDate:i,setSelectedDate:a,dailyData:o,employees:l,connectionStatus:c}=e;const d=o[i];return(0,P.jsxs)("div",{className:"space-y-6",children:[(0,P.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,P.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,P.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,P.jsx)(xe,{className:"w-5 h-5 mr-2"}),"Daily Reports (Firebase Storage)"]}),(0,P.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,P.jsx)("div",{className:"w-2 h-2 rounded-full ".concat("connected"===c?"bg-green-500":"bg-red-500")}),(0,P.jsx)("span",{className:"text-xs text-gray-600",children:"connected"===c?"Live Data":"Offline"}),(0,P.jsx)("input",{type:"date",value:i,onChange:e=>a(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"}),(0,P.jsxs)("button",{className:"px-3 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 flex items-center",children:[(0,P.jsx)(ve,{className:"w-4 h-4 mr-1"}),"Export"]})]})]}),d?(0,P.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,P.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[(0,P.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:(null===(t=d.completedTasks)||void 0===t?void 0:t.length)||0}),(0,P.jsx)("div",{className:"text-sm text-blue-700",children:"Tasks Completed"})]}),(0,P.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[(0,P.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[d.completionRate||0,"%"]}),(0,P.jsx)("div",{className:"text-sm text-green-700",children:"Completion Rate"})]}),(0,P.jsxs)("div",{className:"bg-orange-50 rounded-lg p-4 text-center",children:[(0,P.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:(null===(n=d.employeeMoods)||void 0===n?void 0:n.length)||0}),(0,P.jsx)("div",{className:"text-sm text-orange-700",children:"Mood Updates"})]})]}):(0,P.jsxs)("div",{className:"text-center py-8 text-gray-500",children:["No data available for ",i]})]}),(null===d||void 0===d?void 0:d.completedTasks)&&(0,P.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,P.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Task Completions"}),(0,P.jsx)("div",{className:"overflow-x-auto",children:(0,P.jsxs)("table",{className:"w-full border-collapse",children:[(0,P.jsx)("thead",{children:(0,P.jsxs)("tr",{className:"bg-gray-50",children:[(0,P.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Time"}),(0,P.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Task"}),(0,P.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Employee"}),(0,P.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Status"})]})}),(0,P.jsx)("tbody",{children:d.completedTasks.map(((e,t)=>{const n=l.find((t=>t.id===e.employeeId));return(0,P.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,P.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:e.completedAt}),(0,P.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:e.taskName}),(0,P.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:(null===n||void 0===n?void 0:n.name)||"Unknown"}),(0,P.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:(0,P.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs",children:"Completed"})})]},t)}))})]})})]}),(null===d||void 0===d?void 0:d.employeeMoods)&&(0,P.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,P.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Mood Updates"}),(0,P.jsx)("div",{className:"overflow-x-auto",children:(0,P.jsxs)("table",{className:"w-full border-collapse",children:[(0,P.jsx)("thead",{children:(0,P.jsxs)("tr",{className:"bg-gray-50",children:[(0,P.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Time"}),(0,P.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Employee"}),(0,P.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Mood"}),(0,P.jsx)("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Rating"})]})}),(0,P.jsx)("tbody",{children:d.employeeMoods.map(((e,t)=>{const n=l.find((t=>t.id===e.employeeId));return(0,P.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,P.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:e.updatedAt}),(0,P.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:(null===n||void 0===n?void 0:n.name)||"Unknown"}),(0,P.jsx)("td",{className:"border border-gray-200 px-4 py-2",children:(0,P.jsxs)("div",{className:"flex items-center",children:[(0,P.jsx)("span",{className:"text-lg mr-2",children:j[e.mood-1]}),C[e.mood-1]]})}),(0,P.jsxs)("td",{className:"border border-gray-200 px-4 py-2",children:[e.mood,"/5"]})]},t)}))})]})})]}),(0,P.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,P.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"30-Day Overview"}),(0,P.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,P.jsx)("div",{className:"text-sm font-medium text-gray-600 mb-1",children:(new Date).toLocaleDateString("en-US",{month:"long",year:"numeric"})}),(0,P.jsxs)("div",{className:"grid grid-cols-7 gap-1",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((e=>(0,P.jsx)("div",{className:"text-xs font-medium text-gray-500 text-center",children:e},e))),(()=>{const e=new Date,t=[],n=new Date(e.getFullYear(),e.getMonth(),1);for(let s=0;s<n.getDay();s++)t.push((0,P.jsx)("div",{className:"p-2"},"empty-".concat(s)));const r=new Date(e.getFullYear(),e.getMonth()+1,0).getDate();for(let s=1;s<=r;s++){const n=new Date(e.getFullYear(),e.getMonth(),s),r=E(n),l=o[r]||{},c=(null===l||void 0===l?void 0:l.completionRate)||0,d=Math.floor((e.getTime()-n.getTime())/864e5);d>=0&&d<30?t.push((0,P.jsx)("div",{className:"p-2 rounded text-xs cursor-pointer transition-colors ".concat(r===i?"bg-purple-500 text-white":c>=80?"bg-green-100 text-green-700 hover:bg-green-200":c>=50?"bg-yellow-100 text-yellow-700 hover:bg-yellow-200":c>0?"bg-red-100 text-red-700 hover:bg-red-200":"bg-gray-100 text-gray-500 hover:bg-gray-200"),onClick:()=>a(r),title:"".concat(n.toLocaleDateString("en-US",{month:"short"})," ").concat(n.getDate(),": ").concat(c,"% completion"),children:(0,P.jsxs)("div",{className:"flex items-center justify-between",children:[(0,P.jsx)("span",{className:"font-medium",children:n.getDate()}),(0,P.jsxs)("span",{children:[c,"%"]})]})},r)):t.push((0,P.jsx)("div",{className:"p-2 rounded text-xs text-gray-300",children:(0,P.jsxs)("div",{className:"flex items-center justify-between",children:[(0,P.jsx)("span",{children:n.getDate()}),(0,P.jsx)("span",{children:"-"})]})},"disabled-".concat(s)))}return t})()]})]}),(0,P.jsxs)("div",{className:"mt-4 flex justify-center space-x-4 text-xs",children:[(0,P.jsxs)("div",{className:"flex items-center",children:[(0,P.jsx)("div",{className:"w-3 h-3 bg-green-100 rounded mr-1"}),"80%+ completion"]}),(0,P.jsxs)("div",{className:"flex items-center",children:[(0,P.jsx)("div",{className:"w-3 h-3 bg-yellow-100 rounded mr-1"}),"50-79% completion"]}),(0,P.jsxs)("div",{className:"flex items-center",children:[(0,P.jsx)("div",{className:"w-3 h-3 bg-red-100 rounded mr-1"}),"Below 50%"]})]})]}),d&&(0,P.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,P.jsxs)("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:["Daily Summary - ",new Date(i).toLocaleDateString()]}),(0,P.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,P.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3 text-center",children:[(0,P.jsx)("div",{className:"text-xl font-bold text-blue-600",children:(null===(r=d.completedTasks)||void 0===r?void 0:r.length)||0}),(0,P.jsx)("div",{className:"text-sm text-blue-700",children:"Tasks Done"})]}),(0,P.jsxs)("div",{className:"bg-green-50 rounded-lg p-3 text-center",children:[(0,P.jsxs)("div",{className:"text-xl font-bold text-green-600",children:[d.completionRate||0,"%"]}),(0,P.jsx)("div",{className:"text-sm text-green-700",children:"Completion"})]}),(0,P.jsxs)("div",{className:"bg-purple-50 rounded-lg p-3 text-center",children:[(0,P.jsx)("div",{className:"text-xl font-bold text-purple-600",children:(null===(s=d.employeeMoods)||void 0===s?void 0:s.length)||0}),(0,P.jsx)("div",{className:"text-sm text-purple-700",children:"Mood Updates"})]})]}),(0,P.jsx)("div",{className:"overflow-x-auto",children:(0,P.jsxs)("table",{className:"w-full border-collapse border border-gray-200",children:[(0,P.jsx)("thead",{children:(0,P.jsxs)("tr",{className:"bg-gray-50",children:[(0,P.jsx)("th",{className:"border border-gray-200 px-3 py-2 text-left text-sm font-medium",children:"Time"}),(0,P.jsx)("th",{className:"border border-gray-200 px-3 py-2 text-left text-sm font-medium",children:"Employee"}),(0,P.jsx)("th",{className:"border border-gray-200 px-3 py-2 text-left text-sm font-medium",children:"Action"}),(0,P.jsx)("th",{className:"border border-gray-200 px-3 py-2 text-left text-sm font-medium",children:"Details"})]})}),(0,P.jsxs)("tbody",{children:[(d.completedTasks||[]).map(((e,t)=>{const n=l.find((t=>t.id===e.employeeId));return(0,P.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,P.jsx)("td",{className:"border border-gray-200 px-3 py-2 text-sm",children:e.completedAt}),(0,P.jsx)("td",{className:"border border-gray-200 px-3 py-2 text-sm font-medium",children:(null===n||void 0===n?void 0:n.name)||"Unknown"}),(0,P.jsx)("td",{className:"border border-gray-200 px-3 py-2",children:(0,P.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs",children:"\u2713 Task Completed"})}),(0,P.jsx)("td",{className:"border border-gray-200 px-3 py-2 text-sm",children:e.taskName})]},"task-".concat(t))})),(d.employeeMoods||[]).map(((e,t)=>{const n=l.find((t=>t.id===e.employeeId));return(0,P.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,P.jsx)("td",{className:"border border-gray-200 px-3 py-2 text-sm",children:e.updatedAt}),(0,P.jsx)("td",{className:"border border-gray-200 px-3 py-2 text-sm font-medium",children:(null===n||void 0===n?void 0:n.name)||"Unknown"}),(0,P.jsx)("td",{className:"border border-gray-200 px-3 py-2",children:(0,P.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-xs",children:"\ud83d\ude0a Mood Update"})}),(0,P.jsx)("td",{className:"border border-gray-200 px-3 py-2 text-sm",children:(0,P.jsxs)("div",{className:"flex items-center",children:[(0,P.jsx)("span",{className:"text-lg mr-2",children:j[e.mood-1]}),C[e.mood-1]," (",e.mood,"/5)"]})})]},"mood-".concat(t))})),(!d.completedTasks||0===d.completedTasks.length)&&(!d.employeeMoods||0===d.employeeMoods.length)&&(0,P.jsx)("tr",{children:(0,P.jsx)("td",{colSpan:4,className:"border border-gray-200 px-3 py-8 text-center text-gray-500",children:"No activity recorded for this date"})})]})]})})]})]})},we=u("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),_e=[{id:"all",name:"All Items",icon:"\ud83c\udf7d\ufe0f"},{id:"majoneesit",name:"Majoneesit",icon:"\ud83e\udd44"},{id:"proteiinit",name:"Proteiinit",icon:"\ud83e\udd69"},{id:"kasvikset",name:"Kasvikset",icon:"\ud83e\udd57"},{id:"marinointi",name:"Marinointi & pikkel\xf6inti",icon:"\ud83e\udd52"},{id:"kastikkeet",name:"Kastikkeet",icon:"\ud83e\uddc2"},{id:"muut",name:"Muut",icon:"\ud83d\udd27"}],ke=[{id:"morning",name:"Morning (6-10 AM)",icon:"\ud83c\udf05"},{id:"midday",name:"Mid-day (10 AM-2 PM)",icon:"\u2600\ufe0f"},{id:"afternoon",name:"Afternoon (2-6 PM)",icon:"\ud83c\udf24\ufe0f"},{id:"evening",name:"Evening (6-10 PM)",icon:"\ud83c\udf06"}],Ne=[{id:"low",name:"Low",color:"bg-green-100 text-green-700",icon:"\ud83d\udfe2"},{id:"medium",name:"Medium",color:"bg-yellow-100 text-yellow-700",icon:"\ud83d\udfe1"},{id:"high",name:"High",color:"bg-red-100 text-red-700",icon:"\ud83d\udd34"}],je=e=>{const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(r)},Ce=e=>e.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/\n/g,"<br/>"),Se=(e,t)=>"".concat(je(e),"-").concat(t),Te=()=>Date.now()+Math.random(),Ee=u("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Ie=t=>{let{scheduledPreps:n,onToggleCompletion:r,onShowRecipe:s}=t;const[i,a]=(0,e.useState)(new Set),o=je(new Date),l=n.filter((e=>e.scheduledDate===o));e.useEffect((()=>{console.log("\ud83d\udd0d TodayView Debug Info:",{todayDateString:o,totalScheduledPreps:n.length,todayScheduledPreps:l.length,allScheduledDates:Array.from(new Set(n.map((e=>e.scheduledDate)))).sort(),sampleTodayPreps:l.slice(0,3).map((e=>({id:e.id,name:e.name,scheduledDate:e.scheduledDate,completed:e.completed})))})}),[o,n.length,l.length]);const c=l.filter((e=>e.completed)).length,d=l.length,u=e=>{var t;const n=Ne.find((t=>t.id===e.priority)),o=i.has(e.id);return(0,P.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg transition-all ".concat(o?"bg-blue-50 border-blue-200":"hover:bg-gray-50"),children:[(0,P.jsxs)("div",{className:"flex items-center space-x-3 select-none",children:[(0,P.jsx)("button",{onClick:t=>{t.stopPropagation(),(async e=>{if(i.has(e))console.log("\u23f3 Completion toggle already in progress for prep:",e);else{a((t=>new Set(t).add(e)));try{console.log("\ud83d\udd04 TodayView: Toggling completion for prep:",e),await r(e),console.log("\u2705 TodayView: Completion toggle finished for prep:",e)}catch(Mr){console.error("\u274c TodayView: Completion toggle failed for prep:",e,Mr)}finally{a((t=>{const n=new Set(t);return n.delete(e),n}))}}})(e.id)},disabled:o,className:"w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ".concat(e.completed?"bg-green-500 border-green-500":o?"border-blue-400 bg-blue-50":"border-gray-300 hover:border-green-500"," ").concat(o?"cursor-wait":"cursor-pointer"," disabled:cursor-wait"),title:o?"Saving...":e.completed?"Mark as incomplete":"Mark as complete",children:o?(0,P.jsx)(Ee,{className:"w-4 h-4 text-blue-500 animate-spin"}):e.completed?(0,P.jsx)(f,{className:"w-4 h-4 text-white"}):null}),(0,P.jsxs)("div",{className:"flex-1",children:[(0,P.jsxs)("div",{className:"font-medium flex items-center space-x-2 transition-all ".concat(e.completed?"line-through text-gray-500":"text-gray-800"),children:[(0,P.jsx)("span",{children:e.name}),e.hasRecipe&&e.recipe&&(0,P.jsx)("button",{onClick:()=>s(e.recipe,e.name),className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full hover:bg-green-200 transition-colors",children:"\ud83d\udcd6 Recipe"}),o&&(0,P.jsx)("span",{className:"text-xs text-blue-600 bg-blue-100 px-2 py-0.5 rounded-full",children:"Saving..."})]}),(0,P.jsxs)("div",{className:"text-sm text-gray-600",children:[e.estimatedTime," \u2022 ",e.category,e.timeSlot&&(0,P.jsxs)(P.Fragment,{children:[" "," \u2022 ",(null===(t=ke.find((t=>t.id===e.timeSlot)))||void 0===t?void 0:t.name)||e.timeSlot]})]})]})]}),(0,P.jsx)("div",{className:"flex items-center space-x-2",children:(0,P.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat((null===n||void 0===n?void 0:n.color)||"bg-gray-100 text-gray-700"),children:(null===n||void 0===n?void 0:n.name)||"Medium"})})]},e.id)};return(0,P.jsxs)("div",{className:"space-y-6",children:[(0,P.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,P.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Today's Progress"}),(0,P.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,P.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[(0,P.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:d}),(0,P.jsx)("div",{className:"text-sm text-blue-700",children:"Total Preps"})]}),(0,P.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[(0,P.jsx)("div",{className:"text-2xl font-bold text-green-600",children:c}),(0,P.jsx)("div",{className:"text-sm text-green-700",children:"Completed"})]}),(0,P.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[(0,P.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[d>0?Math.round(c/d*100):0,"%"]}),(0,P.jsx)("div",{className:"text-sm text-purple-700",children:"Complete"})]})]}),d>0&&(0,P.jsxs)("div",{className:"mt-4",children:[(0,P.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[(0,P.jsx)("span",{children:"Progress"}),(0,P.jsxs)("span",{children:[c," of ",d," tasks"]})]}),(0,P.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,P.jsx)("div",{className:"bg-gradient-to-r from-green-400 to-green-600 h-2 rounded-full transition-all duration-500",style:{width:"".concat(d>0?c/d*100:0,"%")}})})]})]}),(0,P.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,P.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,P.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Today's Prep Tasks"}),i.size>0&&(0,P.jsxs)("div",{className:"flex items-center text-blue-600 text-sm",children:[(0,P.jsx)(Ee,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving ",i.size," change",1!==i.size?"s":"","..."]})]}),0===l.length?(0,P.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,P.jsx)(x,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),(0,P.jsx)("p",{className:"text-lg mb-2",children:"No prep tasks scheduled for today"}),(0,P.jsx)("p",{className:"text-sm",children:'Use the "Plan Preps" tab to schedule tasks.'})]}):(0,P.jsxs)("div",{className:"space-y-4",children:[ke.map((e=>{const t=l.filter((t=>t.timeSlot===e.id));if(0===t.length)return null;const n=t.filter((e=>e.completed)).length;return(0,P.jsxs)("div",{children:[(0,P.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,P.jsxs)("h4",{className:"font-medium text-gray-700 flex items-center",children:[(0,P.jsx)("span",{className:"mr-2",children:e.icon}),e.name]}),(0,P.jsxs)("span",{className:"text-sm text-gray-500",children:[n,"/",t.length," completed"]})]}),(0,P.jsx)("div",{className:"space-y-3",children:t.map(u)})]},e.id)})),(()=>{const e=l.filter((e=>""===e.timeSlot));if(0===e.length)return null;const t=e.filter((e=>e.completed)).length;return(0,P.jsxs)("div",{children:[(0,P.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,P.jsx)("h4",{className:"font-medium text-gray-700 flex items-center",children:"\ud83d\udd50 Anytime"}),(0,P.jsxs)("span",{className:"text-sm text-gray-500",children:[t,"/",e.length," completed"]})]}),(0,P.jsx)("div",{className:"space-y-3",children:e.map(u)})]})})()]})]}),d>0&&c===d&&(0,P.jsxs)("div",{className:"bg-gradient-to-r from-green-400 to-green-600 rounded-xl p-6 text-white text-center",children:[(0,P.jsx)("div",{className:"text-3xl mb-2",children:"\ud83c\udf89"}),(0,P.jsx)("h3",{className:"text-xl font-bold mb-1",children:"All Done!"}),(0,P.jsxs)("p",{className:"text-green-100",children:["Great job! You've completed all ",d," prep tasks for today."]})]})]})},Pe=t=>{let{scheduledPreps:n,currentDate:r,setCurrentDate:s,selectedDate:i,setSelectedDate:a,setActiveView:o,onToggleCompletion:l,onShowRecipe:c}=t;const[d,u]=(0,e.useState)(null),h=()=>{const e=[];for(let t=0;t<7;t++){const n=new Date(r);n.setDate(r.getDate()+t),e.push(n)}return e};return(0,P.jsxs)("div",{className:"space-y-6",children:[(0,P.jsx)("style",{dangerouslySetInnerHTML:{__html:'\n          .priority-glow {\n            position: relative;\n            z-index: 0;\n            font-weight: 600;\n            border-radius: 0.25rem;\n            padding: 0.125rem 0.25rem;\n          }\n          .priority-glow::before {\n            content: "";\n            position: absolute;\n            top: 50%;\n            left: 50%;\n            width: 110%;\n            height: 2em;\n            transform: translate(-50%, -50%);\n            border-radius: 0.375rem;\n            filter: blur(6px);\n            z-index: -1;\n            opacity: 0.3;\n          }\n          .priority-low {\n            color: #047857;\n          }\n          .priority-low::before {\n            box-shadow: 0 0 8px 4px rgba(5, 150, 105, 0.4);\n          }\n          .priority-medium {\n            color: #92400e;\n          }\n          .priority-medium::before {\n            box-shadow: 0 0 8px 4px rgba(202, 138, 4, 0.4);\n          }\n          .priority-high {\n            color: #b91c1c;\n          }\n          .priority-high::before {\n            box-shadow: 0 0 8px 4px rgba(185, 28, 28, 0.4);\n          }\n        '}}),(0,P.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,P.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,P.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Week Overview"}),(0,P.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,P.jsx)("button",{onClick:()=>{const e=new Date(r);e.setDate(e.getDate()-7),s(e)},className:"px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm",children:"\u2190 Previous Week"}),(0,P.jsx)("button",{onClick:()=>{const e=new Date(r);e.setDate(e.getDate()+7),s(e)},className:"px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm",children:"Next Week \u2192"})]})]}),(0,P.jsx)("div",{className:"space-y-3",children:h().map(((e,t)=>{const r=n.filter((t=>t.scheduledDate===je(e))),s=r.filter((e=>e.completed)).length,h=je(e)===je(new Date),p=je(e)===je(i),m=d===je(e);return(0,P.jsxs)("div",{className:"border rounded-xl transition-all duration-500 ease-in-out overflow-hidden ".concat(m?"bg-gray-50":"bg-white hover:bg-gray-50"," ").concat(h?"ring-2 ring-blue-500":p&&!m?"ring-2 ring-purple-500":m?"ring-2 ring-green-500 shadow-lg":"hover:shadow-md"),children:[(0,P.jsxs)("div",{className:"flex items-center cursor-pointer transition-all duration-300 ".concat(m?"p-4 bg-white border-b":"p-4"),onClick:()=>{u(m?null:je(e))},children:[(0,P.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,P.jsxs)("div",{className:"text-center",children:[(0,P.jsx)("div",{className:"font-medium text-gray-800 text-sm",children:e.toLocaleDateString("en-US",{weekday:"short"})}),(0,P.jsx)("div",{className:"text-2xl font-bold ".concat(h?"text-blue-600":p&&!m?"text-purple-600":m?"text-green-600":"text-gray-600"),children:e.getDate()}),h&&(0,P.jsx)("div",{className:"text-xs text-blue-600 font-medium",children:"Today"}),p&&!h&&!m&&(0,P.jsx)("div",{className:"text-xs text-purple-600 font-medium",children:"Selected"}),m&&(0,P.jsx)("div",{className:"text-xs text-green-600 font-medium",children:"Expanded"})]}),(0,P.jsxs)("div",{className:"flex-1",children:[(0,P.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,P.jsxs)("div",{className:"text-sm text-gray-600",children:[s,"/",r.length," tasks"]}),r.length>0&&(0,P.jsx)("div",{className:"flex-1 max-w-32",children:(0,P.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,P.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(s===r.length?"bg-green-500":s>0?"bg-yellow-500":"bg-gray-300"),style:{width:"".concat(s/r.length*100,"%")}})})})]}),!m&&r.length>0&&(0,P.jsxs)("div",{className:"text-xs mt-1",children:[r.slice(0,2).map(((e,t)=>(0,P.jsxs)("span",{className:"priority-glow priority-".concat(e.priority," ").concat(t>0?"ml-1":""),children:[e.name,t<Math.min(r.length,2)-1&&", "]},e.id))),r.length>2&&(0,P.jsxs)("span",{className:"text-gray-500 ml-1",children:["+",r.length-2," more"]})]}),!m&&0===r.length&&(0,P.jsx)("div",{className:"text-xs text-gray-400 mt-1 italic",children:"No preps scheduled"})]})]}),(0,P.jsx)("div",{className:"transform transition-transform duration-300 ".concat(m?"rotate-180":"rotate-0"),children:(0,P.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,P.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),(0,P.jsx)("div",{className:"transition-all duration-500 ease-in-out overflow-hidden ".concat(m?"max-h-96 opacity-100":"max-h-0 opacity-0"),children:m&&(0,P.jsx)("div",{className:"p-4 space-y-3 overflow-y-auto max-h-80",children:0===r.length?(0,P.jsxs)("div",{className:"text-center py-8",children:[(0,P.jsx)("div",{className:"text-gray-400 text-sm",children:"No prep tasks scheduled"}),(0,P.jsx)("button",{onClick:t=>{t.stopPropagation(),a(e),o("plan")},className:"mt-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm",children:"Plan Preps for This Day"})]}):(0,P.jsxs)(P.Fragment,{children:[(()=>{const e=r.filter((e=>""===e.timeSlot)),t=ke.map((e=>({slot:e,preps:r.filter((t=>t.timeSlot===e.id))}))).filter((e=>e.preps.length>0));return(0,P.jsxs)(P.Fragment,{children:[t.map((e=>{let{slot:t,preps:n}=e;return(0,P.jsxs)("div",{children:[(0,P.jsxs)("h5",{className:"font-medium text-gray-700 text-sm mb-2 flex items-center",children:[(0,P.jsx)("span",{className:"mr-2",children:t.icon}),t.name]}),(0,P.jsx)("div",{className:"space-y-2",children:n.map((e=>{const t=Ne.find((t=>t.id===e.priority));return(0,P.jsx)("div",{className:"p-3 rounded-lg border-l-4 transition-colors ".concat(e.completed?"bg-green-50 border-green-500":"bg-white border-gray-300 hover:bg-gray-50"),children:(0,P.jsxs)("div",{className:"flex items-center justify-between",children:[(0,P.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,P.jsx)("button",{onClick:t=>{t.stopPropagation(),l(e.id)},className:"w-5 h-5 rounded-full border-2 flex items-center justify-center transition-colors ".concat(e.completed?"bg-green-500 border-green-500":"border-gray-300 hover:border-green-500"),children:e.completed&&(0,P.jsx)(f,{className:"w-3 h-3 text-white"})}),(0,P.jsxs)("div",{children:[(0,P.jsxs)("div",{className:"font-medium text-sm flex items-center space-x-2 priority-glow priority-".concat(e.priority," ").concat(e.completed?"line-through opacity-60":""),children:[(0,P.jsx)("span",{children:e.name}),e.hasRecipe&&(0,P.jsx)("button",{onClick:t=>{t.stopPropagation(),e.recipe&&c(e.recipe,e.name)},className:"text-xs bg-green-100 text-green-700 px-1.5 py-0.5 rounded-full hover:bg-green-200 transition-colors",children:"\ud83d\udcd6"})]}),(0,P.jsxs)("div",{className:"text-xs text-gray-500",children:[e.estimatedTime," \u2022 ",e.category]})]})]}),(0,P.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat((null===t||void 0===t?void 0:t.color)||"bg-gray-100 text-gray-700"),children:(null===t||void 0===t?void 0:t.name)||"Medium"})]})},e.id)}))})]},t.id)})),e.length>0&&(0,P.jsxs)("div",{children:[(0,P.jsx)("h5",{className:"font-medium text-gray-700 text-sm mb-2 flex items-center",children:"\ud83d\udd50 Anytime"}),(0,P.jsx)("div",{className:"space-y-2",children:e.map((e=>{const t=Ne.find((t=>t.id===e.priority));return(0,P.jsx)("div",{className:"p-3 rounded-lg border-l-4 transition-colors ".concat(e.completed?"bg-green-50 border-green-500":"bg-white border-gray-300 hover:bg-gray-50"),children:(0,P.jsxs)("div",{className:"flex items-center justify-between",children:[(0,P.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,P.jsx)("button",{onClick:t=>{t.stopPropagation(),l(e.id)},className:"w-5 h-5 rounded-full border-2 flex items-center justify-center transition-colors ".concat(e.completed?"bg-green-500 border-green-500":"border-gray-300 hover:border-green-500"),children:e.completed&&(0,P.jsx)(f,{className:"w-3 h-3 text-white"})}),(0,P.jsxs)("div",{children:[(0,P.jsxs)("div",{className:"font-medium text-sm flex items-center space-x-2 priority-glow priority-".concat(e.priority," ").concat(e.completed?"line-through opacity-60":""),children:[(0,P.jsx)("span",{children:e.name}),e.hasRecipe&&(0,P.jsx)("button",{onClick:t=>{t.stopPropagation(),e.recipe&&c(e.recipe,e.name)},className:"text-xs bg-green-100 text-green-700 px-1.5 py-0.5 rounded-full hover:bg-green-200 transition-colors",children:"\ud83d\udcd6"})]}),(0,P.jsxs)("div",{className:"text-xs text-gray-500",children:[e.estimatedTime," \u2022 ",e.category]})]})]}),(0,P.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat((null===t||void 0===t?void 0:t.color)||"bg-gray-100 text-gray-700"),children:(null===t||void 0===t?void 0:t.name)||"Medium"})]})},e.id)}))})]})]})})(),(0,P.jsxs)("div",{className:"flex gap-2 pt-2 border-t",children:[(0,P.jsx)("button",{onClick:t=>{t.stopPropagation(),a(e),o("plan")},className:"flex-1 px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm",children:"Edit Preps"}),(0,P.jsx)("button",{onClick:e=>{e.stopPropagation(),u(null)},className:"px-3 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-sm",children:"Collapse"})]})]})})})]},t)}))}),(0,P.jsxs)("div",{className:"mt-6 grid grid-cols-3 gap-4",children:[(0,P.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3 text-center",children:[(0,P.jsx)("div",{className:"text-xl font-bold text-blue-600",children:h().reduce(((e,t)=>e+n.filter((e=>e.scheduledDate===je(t))).length),0)}),(0,P.jsx)("div",{className:"text-sm text-blue-700",children:"Total Tasks This Week"})]}),(0,P.jsxs)("div",{className:"bg-green-50 rounded-lg p-3 text-center",children:[(0,P.jsx)("div",{className:"text-xl font-bold text-green-600",children:h().reduce(((e,t)=>e+n.filter((e=>e.scheduledDate===je(t)&&e.completed)).length),0)}),(0,P.jsx)("div",{className:"text-sm text-green-700",children:"Completed"})]}),(0,P.jsxs)("div",{className:"bg-purple-50 rounded-lg p-3 text-center",children:[(0,P.jsxs)("div",{className:"text-xl font-bold text-purple-600",children:[(()=>{const e=h().reduce(((e,t)=>e+n.filter((e=>e.scheduledDate===je(t))).length),0),t=h().reduce(((e,t)=>e+n.filter((e=>e.scheduledDate===je(t)&&e.completed)).length),0);return e>0?Math.round(t/e*100):0})(),"%"]}),(0,P.jsx)("div",{className:"text-sm text-purple-700",children:"Week Progress"})]})]})]})]})},De=e=>{var t,n,r;let{prep:s,isSelected:i,selection:a,showPriorityOptions:o,showTimeOptions:l,assignmentStep:c,onToggleSelection:d,onUpdateSelection:u,onShowPriorityOptions:h,onShowRecipe:p,onSave:m,context:g="main"}=e;const y="suggested"===g?"suggested-".concat(s.id):s.id;return(0,P.jsx)("div",{className:"border rounded-lg p-4 transition-colors ".concat(i?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:(0,P.jsx)("div",{className:"flex items-center justify-between",children:(0,P.jsxs)("div",{className:"flex items-center space-x-3 flex-1",children:[(0,P.jsx)("button",{onClick:()=>d(s),className:"w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ".concat(i?"bg-blue-500 border-blue-500":"border-gray-300 hover:border-blue-500"),children:i&&(0,P.jsx)(f,{className:"w-4 h-4 text-white"})}),(0,P.jsxs)("div",{className:"flex-1",children:[(0,P.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,P.jsx)("h4",{className:"font-medium ".concat(i?"text-blue-900":"text-gray-800"),children:s.name}),s.hasRecipe&&s.recipe&&(0,P.jsx)("button",{onClick:()=>p(s.recipe,s.name),className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full hover:bg-green-200 transition-colors",children:"\ud83d\udcd6 Recipe"})]}),(0,P.jsxs)("p",{className:"text-sm text-gray-600 flex items-center space-x-2",children:[(0,P.jsx)("span",{children:s.estimatedTime}),(0,P.jsx)("span",{children:"\u2022"}),(0,P.jsx)("span",{children:s.category}),(0,P.jsx)("span",{children:"\u2022"}),(0,P.jsxs)("span",{children:["Every ",s.frequency," days"]}),s.isCustom&&(0,P.jsx)("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 rounded-full text-xs",children:"Custom"})]}),(0,P.jsx)("div",{className:"mt-2",children:(0,P.jsxs)("div",{className:"relative w-2/3",children:[(0,P.jsx)("button",{onClick:()=>{h(o===y?null:y)},className:"w-full px-2 py-1 rounded text-xs transition-colors ".concat(i?(null===(t=Ne.find((e=>e.id===a.priority)))||void 0===t?void 0:t.color)+" font-medium":"timeSlot"===c[s.id]?"bg-green-100 text-green-700 font-medium":"bg-blue-100 text-blue-700 hover:bg-blue-200"),children:i?"".concat(null===(n=Ne.find((e=>e.id===a.priority)))||void 0===n?void 0:n.name," Priority").concat(a.timeSlot?" \u2022 ".concat(null===(r=ke.find((e=>e.id===a.timeSlot)))||void 0===r?void 0:r.name):" \u2022 Anytime"):"timeSlot"===c[s.id]?"Now choose time slot":"Click to assign priority & time"}),o===y&&(0,P.jsx)("div",{className:"dropdown-container soft-dropdown absolute top-full left-0 mt-2 rounded-xl p-3 z-20 w-full min-w-64 max-w-xs",children:(0,P.jsx)("div",{className:"space-y-3",children:(0,P.jsxs)("div",{children:[(0,P.jsxs)("div",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center",children:[(0,P.jsx)("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),"Choose Priority Level"]}),(0,P.jsx)("div",{className:"space-y-2",children:Ne.map((e=>(0,P.jsx)("button",{onClick:()=>u(s,"priority",e.id,g),className:"soft-button w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 hover:scale-105 active:scale-95 ".concat(e.color),children:(0,P.jsxs)("div",{className:"flex items-center justify-between",children:[(0,P.jsx)("span",{children:e.name}),(0,P.jsx)("span",{className:"text-xs opacity-70",children:e.icon})]})},e.id)))})]})})}),l===y&&(0,P.jsx)("div",{className:"dropdown-container soft-dropdown absolute top-full left-0 mt-2 rounded-xl p-3 z-20 w-full min-w-64 max-w-sm",children:(0,P.jsx)("div",{className:"space-y-3",children:(0,P.jsxs)("div",{children:[(0,P.jsxs)("div",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center",children:[(0,P.jsx)("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"Choose Time Slot"]}),(0,P.jsxs)("div",{className:"space-y-2",children:[(0,P.jsx)("button",{onClick:()=>u(s,"timeSlot","",g),className:"soft-button w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 hover:scale-105 active:scale-95 bg-gray-50 text-gray-700 hover:bg-gray-100",children:(0,P.jsxs)("div",{className:"flex items-center justify-between",children:[(0,P.jsx)("span",{children:"Anytime"}),(0,P.jsx)("span",{className:"text-xs opacity-70",children:"\ud83d\udd50"})]})}),ke.map((e=>(0,P.jsx)("button",{onClick:()=>u(s,"timeSlot",e.id,g),className:"soft-button w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 hover:scale-105 active:scale-95 bg-blue-50 text-blue-700 hover:bg-blue-100",children:(0,P.jsxs)("div",{className:"flex items-center justify-between",children:[(0,P.jsx)("span",{children:e.name}),(0,P.jsx)("span",{className:"text-xs opacity-70",children:e.icon})]})},e.id)))]})]})})})]})})]})]})})})},Me=e=>{let{isOpen:t,recipe:n,recipeName:r,onClose:s}=e;return t&&n?(0,P.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,P.jsxs)("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,P.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,P.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,P.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:(0,P.jsx)(x,{className:"w-5 h-5 text-green-600"})}),(0,P.jsxs)("div",{children:[(0,P.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:r}),(0,P.jsx)("p",{className:"text-sm text-gray-600",children:"Recipe Details"})]})]}),(0,P.jsx)("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:(0,P.jsx)(_,{className:"w-5 h-5"})})]}),(0,P.jsxs)("div",{className:"p-6 space-y-6",children:[(0,P.jsxs)("div",{children:[(0,P.jsxs)("h4",{className:"text-md font-semibold text-gray-800 mb-3 flex items-center",children:[(0,P.jsx)("span",{className:"w-6 h-6 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-sm mr-2",children:"\ud83e\udd44"}),"Ingredients"]}),(0,P.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,P.jsx)("div",{className:"whitespace-pre-wrap text-gray-700",dangerouslySetInnerHTML:{__html:Ce(n.ingredients)}})})]}),(0,P.jsxs)("div",{children:[(0,P.jsxs)("h4",{className:"text-md font-semibold text-gray-800 mb-3 flex items-center",children:[(0,P.jsx)("span",{className:"w-6 h-6 bg-green-100 text-green-600 rounded-full flex items-center justify-center text-sm mr-2",children:"\ud83d\udcdd"}),"Instructions"]}),(0,P.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,P.jsx)("div",{className:"whitespace-pre-wrap text-gray-700",dangerouslySetInnerHTML:{__html:Ce(n.instructions)}})})]})]}),(0,P.jsx)("div",{className:"flex justify-end p-6 border-t bg-gray-50",children:(0,P.jsx)("button",{onClick:s,className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Close Recipe"})})]})}):null},Re=u("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),Ae=u("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),Le=u("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Oe=u("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),Fe=u("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),ze=u("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Ue=u("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),qe=u("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),We=t=>{let{currentDate:n,selectedDate:r,prepItems:s,scheduledPreps:i,prepSelections:a,selectedCategory:o,searchQuery:l,onToggleSelection:c,onUpdateSelection:d,onShowRecipe:u,showPriorityOptions:h,showTimeOptions:p,assignmentStep:m,onShowPriorityOptions:f,onResetWorkflow:y}=t;const[x,v]=(0,e.useState)(!0),[b,w]=(0,e.useState)("smart"),[_,k]=(0,e.useState)(5),[N,j]=(0,e.useState)(!1),[C,S]=(0,e.useState)([]),[T,E]=(0,e.useState)(!1);(0,e.useEffect)((()=>{const e=()=>{var e,t,n;const r=document.querySelector(".bg-red-100.text-red-700"),s=r&&(null===(e=r.textContent)||void 0===e?void 0:e.includes("Admin Mode")),i=document.querySelector(".bg-white.border-b"),a=i&&((null===(t=i.textContent)||void 0===t?void 0:t.includes("Admin Panel"))||(null===(n=i.textContent)||void 0===n?void 0:n.includes("Daily Reports"))),o=document.querySelector('[title="Logout Admin"]'),l=s||a||!!o;E(l),l!==T&&console.log("\ud83d\udd27 Prep Suggestions: Admin mode detected:",{hasAdminBadge:!!s,hasAdminTabs:!!a,hasLogoutButton:!!o,isAdmin:l})};e();const t=setInterval(e,1e3);return()=>clearInterval(t)}),[T]);const I=[{id:"low",name:"Low",color:"bg-green-100 text-green-700",icon:"\ud83d\udfe2"},{id:"medium",name:"Medium",color:"bg-yellow-100 text-yellow-700",icon:"\ud83d\udfe1"},{id:"high",name:"High",color:"bg-red-100 text-red-700",icon:"\ud83d\udd34"}],D=[{id:"morning",name:"Morning (6-10 AM)",icon:"\ud83c\udf05"},{id:"midday",name:"Mid-day (10 AM-2 PM)",icon:"\u2600\ufe0f"},{id:"afternoon",name:"Afternoon (2-6 PM)",icon:"\ud83c\udf24\ufe0f"},{id:"evening",name:"Evening (6-10 PM)",icon:"\ud83c\udf06"}],R=e=>{const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(r)},A=e=>{var t;const n="".concat(R(r),"-").concat(e.id);return(null===(t=a[n])||void 0===t?void 0:t.selected)||!1},L=(0,e.useMemo)((()=>{const e=R(n),t=R(r);return s.filter((e=>{const n="all"===o||e.category===o,r=""===l||e.name.toLowerCase().includes(l.toLowerCase())||e.category.toLowerCase().includes(l.toLowerCase()),s=i.some((n=>n.prepId===e.id&&n.scheduledDate===t));return n&&r&&!s})).map((t=>{var n;const r=i.filter((e=>e.prepId===t.id&&e.completed)).sort(((e,t)=>new Date(t.scheduledDate).getTime()-new Date(e.scheduledDate).getTime())),s=null===(n=r[0])||void 0===n?void 0:n.scheduledDate,a=s?Math.floor((new Date(e).getTime()-new Date(s).getTime())/864e5):999,{learnedFreq:o,confidence:l,dayPatterns:c}=((e,t)=>{if(t.length<2)return{learnedFreq:0,confidence:0,dayPatterns:{}};const n=[],r={};for(let a=0;a<t.length-1;a++){const e=Math.floor((new Date(t[a].scheduledDate).getTime()-new Date(t[a+1].scheduledDate).getTime())/864e5);n.push(e)}t.forEach((e=>{const t=new Date(e.scheduledDate).toLocaleDateString("en-US",{weekday:"long"});r[t]=(r[t]||0)+1}));const s=n.reduce(((e,t)=>e+t),0)/n.length,i=100*(1/(1+n.reduce(((e,t)=>e+Math.pow(t-s,2)),0)/n.length/s)*.7+.3*Math.min(t.length/10,1));return{learnedFreq:Math.round(10*s)/10,confidence:Math.round(i),dayPatterns:r}})(t.id,r),d=l>60&&o>0?o:t.frequency;if(T&&o>0&&Math.abs(o-t.frequency)>.5){const e={prepId:t.id,prepName:t.name,timestamp:(new Date).toISOString(),recommendedFreq:t.frequency,learnedFreq:o,reason:"Pattern analysis from ".concat(r.length," completions"),confidence:l,dataPoints:r.length};S((n=>n.some((e=>e.prepId===t.id&&Math.abs(new Date(e.timestamp).getTime()-(new Date).getTime())<6e4))?n:[e,...n.slice(0,49)]))}const u=i.filter((e=>e.prepId===t.id)).length,h=u>0?r.length/u*100:0,p=d,m=a-p;let f,g=0,y="",x="",v="medium",b="morning";return 999===a?(f="high",g=90,y="Never prepared before",x="\u2753",v="high"):m>p?(f="critical",g=100+m,y="".concat(Math.round(m)," days overdue"),x="\ud83d\udea8",v="high",b="morning"):m>0?(f="high",g=70+m,y="".concat(Math.round(m)," ").concat(1===Math.round(m)?"day":"days"," overdue"),x="\u26a0\ufe0f",v="high"):a>=p-1?(f="medium",g=p-a+50,y="Due soon",x="\u23f0",v="medium"):h<60?(f="medium",g=60-h+40,y="Low completion rate (".concat(Math.round(h),"%)"),x="\ud83d\udcc9",v="medium"):l>60&&Math.abs(o-t.frequency)>1?(f="low",g=35,y="Frequency analysis suggests ".concat(Math.round(o)," days"),x="\ud83d\udd0d",v="low",b="afternoon"):(f="low",g=20,y="Routine preparation",x="\u2728",v="low",b="afternoon"),d<=2&&(g+=15),t.hasRecipe&&(g+=10),"majoneesit"===t.category||"kastikkeet"===t.category?b="morning":"proteiinit"===t.category?b="midday":"kasvikset"===t.category?b="afternoon":"marinointi"===t.category&&(b="morning"),{prep:t,reason:y,urgency:f,lastCompleted:s,daysSinceLastPrep:a,suggestedPriority:v,suggestedTimeSlot:b,icon:x,score:g,completionRate:h,avgDaysBetween:o,learnedFrequency:o,frequencyConfidence:l,dayPatterns:c}})).filter((e=>"overdue"===b?"critical"===e.urgency||"high"===e.urgency:"smart"!==b||e.score>=30)).sort(((e,t)=>t.score-e.score)).slice(0,_)}),[s,i,n,r,o,l,b,_,T]);return 0===L.length?null:(0,P.jsxs)("div",{className:"mb-6 rounded-xl overflow-hidden shadow-sm border border-orange-200",children:[(0,P.jsxs)("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 p-4 border-b border-orange-200",children:[(0,P.jsxs)("div",{className:"flex items-center justify-between",children:[(0,P.jsxs)("button",{onClick:()=>v(!x),className:"flex items-center space-x-3 text-left hover:text-orange-600 transition-colors group",children:[(0,P.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,P.jsx)(Re,{className:"w-5 h-5 text-orange-600"}),(0,P.jsxs)("h4",{className:"font-semibold text-orange-800",children:["Smart Prep Suggestions",T&&(0,P.jsx)("span",{className:"ml-2 text-xs bg-red-100 text-red-700 px-2 py-1 rounded-full",children:"ADMIN"})]}),(0,P.jsx)("span",{className:"bg-orange-200 text-orange-800 px-2 py-1 rounded-full text-xs font-medium",children:L.length})]}),(0,P.jsx)("span",{className:"transform transition-transform duration-200 ".concat(x?"rotate-180":"rotate-0"),children:(0,P.jsx)("svg",{className:"w-4 h-4 text-orange-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,P.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),x&&(0,P.jsxs)("div",{className:"flex items-center space-x-2",children:[T&&(0,P.jsxs)("button",{onClick:()=>j(!N),className:"flex items-center space-x-1 px-3 py-1 bg-purple-200 text-purple-800 rounded-lg hover:bg-purple-300 transition-colors text-xs font-medium",title:"View AI Learning Log",children:[(0,P.jsx)(Ae,{className:"w-3 h-3"}),(0,P.jsx)("span",{children:"Learning Log"})]}),(0,P.jsxs)("select",{value:b,onChange:e=>w(e.target.value),className:"text-xs bg-white border border-orange-300 rounded-lg px-2 py-1 text-orange-700 focus:ring-2 focus:ring-orange-500",children:[(0,P.jsx)("option",{value:"smart",children:"Smart"}),(0,P.jsx)("option",{value:"overdue",children:"Overdue Only"}),(0,P.jsx)("option",{value:"all",children:"All"})]}),(0,P.jsxs)("button",{onClick:()=>{L.slice(0,3).forEach((e=>{let{prep:t,suggestedPriority:n,suggestedTimeSlot:r}=e;A(t)||(c(t),setTimeout((()=>{d(t,"priority",n,"suggested"),setTimeout((()=>{d(t,"timeSlot",r,"suggested")}),100)}),100))}))},className:"flex items-center space-x-1 px-3 py-1 bg-orange-200 text-orange-800 rounded-lg hover:bg-orange-300 transition-colors text-xs font-medium",title:"Auto-apply top 3 suggestions",children:[(0,P.jsx)(Le,{className:"w-3 h-3"}),(0,P.jsx)("span",{children:"Auto-Apply"})]})]})]}),x&&(0,P.jsx)("div",{className:"mt-2 text-xs text-orange-700",children:(0,P.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,P.jsx)(Oe,{className:"w-3 h-3"}),(0,P.jsxs)("span",{children:["AI-powered suggestions with hybrid frequency learning from ",i.filter((e=>e.completed)).length," completions"]})]})})]}),T&&N&&(0,P.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,P.jsxs)("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,P.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,P.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,P.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,P.jsx)(Fe,{className:"w-5 h-5 text-purple-600"})}),(0,P.jsxs)("div",{children:[(0,P.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"AI Learning Log"}),(0,P.jsx)("p",{className:"text-sm text-gray-600",children:"Frequency optimization analysis"})]})]}),(0,P.jsx)("button",{onClick:()=>j(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:"\u2715"})]}),(0,P.jsx)("div",{className:"p-6",children:0===C.length?(0,P.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,P.jsx)(Fe,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),(0,P.jsx)("p",{children:"No learning data yet. AI will start analyzing patterns as you complete more preps."})]}):(0,P.jsx)("div",{className:"space-y-4",children:C.map(((e,t)=>(0,P.jsxs)("div",{className:"border rounded-lg p-4 bg-gray-50",children:[(0,P.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,P.jsx)("h4",{className:"font-medium text-gray-800",children:e.prepName}),(0,P.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,P.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(e.confidence>80?"bg-green-100 text-green-700":e.confidence>60?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"),children:[e.confidence,"% confidence"]}),(0,P.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleString()})]})]}),(0,P.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,P.jsxs)("div",{children:[(0,P.jsx)("span",{className:"text-gray-600",children:"Recommended:"}),(0,P.jsxs)("div",{className:"font-medium",children:["Every ",e.recommendedFreq," days"]})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("span",{className:"text-gray-600",children:"AI Learned:"}),(0,P.jsxs)("div",{className:"font-medium text-blue-600",children:["Every ",e.learnedFreq," days"]})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("span",{className:"text-gray-600",children:"Data Points:"}),(0,P.jsxs)("div",{className:"font-medium",children:[e.dataPoints," completions"]})]})]}),(0,P.jsx)("div",{className:"mt-2 text-sm text-gray-600",children:e.reason})]},t)))})})]})}),x&&(0,P.jsxs)("div",{className:"bg-white p-4 space-y-3",children:[L.map((e=>{var t,n,s,i;let{prep:o,reason:l,urgency:g,daysSinceLastPrep:x,icon:v,score:b,completionRate:w,suggestedPriority:_,suggestedTimeSlot:k,learnedFrequency:N,frequencyConfidence:j}=e;const C=A(o),S=(e=>{const t="".concat(R(r),"-").concat(e.id);return a[t]||{priority:"medium",timeSlot:"",selected:!1}})(o),E={low:"text-blue-800",medium:"text-yellow-800",high:"text-orange-800",critical:"text-red-800"};return(0,P.jsx)("div",{className:"rounded-lg border-2 transition-all duration-200 hover:shadow-md ".concat(C?"border-green-400 bg-green-50 shadow-sm":{low:"border-blue-300 bg-blue-50",medium:"border-yellow-300 bg-yellow-50",high:"border-orange-400 bg-orange-50",critical:"border-red-400 bg-red-50"}[g]),children:(0,P.jsx)("div",{className:"p-3",children:(0,P.jsxs)("div",{className:"flex items-start justify-between",children:[(0,P.jsxs)("div",{className:"flex items-start space-x-3 flex-1 min-w-0",children:[(0,P.jsx)("button",{onClick:()=>c(o),className:"w-5 h-5 rounded-full border-2 flex items-center justify-center transition-colors flex-shrink-0 mt-0.5 ".concat(C?"bg-green-500 border-green-500":"critical"===g?"border-red-400 hover:border-red-500":"high"===g?"border-orange-400 hover:border-orange-500":"border-gray-400 hover:border-gray-500"),children:C&&(0,P.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,P.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,P.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,P.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,P.jsx)("span",{className:"text-sm",children:v}),(0,P.jsx)("h5",{className:"font-medium text-sm truncate ".concat(C?"text-green-900":E[g]),children:o.name}),o.hasRecipe&&(0,P.jsx)("button",{onClick:()=>o.recipe&&u(o.recipe,o.name),className:"flex-shrink-0 text-xs bg-green-100 text-green-700 px-1.5 py-0.5 rounded-full hover:bg-green-200 transition-colors",children:"\ud83d\udcd6"})]}),(0,P.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-gray-600 mb-1",children:[(0,P.jsx)("span",{children:o.estimatedTime}),(0,P.jsx)("span",{children:"\u2022"}),(0,P.jsx)("span",{children:o.category}),(0,P.jsx)("span",{children:"\u2022"}),(0,P.jsxs)("span",{children:["Every ",o.frequency," days"]}),N>0&&j>60&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("span",{children:"\u2192"}),(0,P.jsxs)("span",{className:"text-blue-600 font-medium",children:[N," days (learned)"]})]})]}),(0,P.jsxs)("div",{className:"flex items-center space-x-3 text-xs",children:[(0,P.jsx)("span",{className:"font-medium ".concat(E[g]),children:l}),w>0&&(0,P.jsxs)("span",{className:"text-gray-500",children:[Math.round(w),"% completion rate"]}),T&&(0,P.jsxs)("span",{className:"text-gray-400",children:["Score: ",b]})]}),x<999&&(0,P.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Last done: ",x," days ago"]})]})]}),(0,P.jsx)("div",{className:"flex-shrink-0 ml-3",children:(0,P.jsxs)("div",{className:"relative",children:[(0,P.jsx)("button",{onClick:()=>{h==="suggested-".concat(o.id)?y():f("suggested-".concat(o.id))},className:"px-3 py-1.5 rounded-lg text-xs transition-colors whitespace-nowrap font-medium ".concat(C?(null===(t=I.find((e=>e.id===S.priority)))||void 0===t?void 0:t.color)+" shadow-sm":"timeSlot"===m[o.id]?"bg-green-100 text-green-700 shadow-sm":"critical"===g?"bg-red-100 text-red-700 hover:bg-red-200":"high"===g?"bg-orange-100 text-orange-700 hover:bg-orange-200":"bg-blue-100 text-blue-700 hover:bg-blue-200"),children:C?"".concat(null===(n=I.find((e=>e.id===S.priority)))||void 0===n?void 0:n.name).concat(S.timeSlot?" \u2022 ".concat(null===(s=D.find((e=>e.id===S.timeSlot)))||void 0===s?void 0:s.name.split(" ")[0]):" \u2022 Anytime"):"timeSlot"===m[o.id]?"Choose time":"Click to assign (".concat(_,")")}),h==="suggested-".concat(o.id)&&(0,P.jsx)("div",{className:"dropdown-container absolute top-full right-0 mt-2 rounded-xl p-3 z-20 w-52 backdrop-filter backdrop-blur-lg bg-white/95 border border-white/30 shadow-xl",children:(0,P.jsx)("div",{className:"space-y-3",children:(0,P.jsxs)("div",{children:[(0,P.jsxs)("div",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center",children:[(0,P.jsx)(ze,{className:"w-4 h-4 mr-2 text-blue-500"}),(0,P.jsx)("span",{children:"Choose Priority"}),(0,P.jsxs)("span",{className:"ml-auto text-xs text-green-600",children:["Suggested: ",_]})]}),(0,P.jsx)("div",{className:"space-y-2",children:I.map((e=>(0,P.jsx)("button",{onClick:()=>d(o,"priority",e.id,"suggested"),className:"w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 hover:scale-105 active:scale-95 backdrop-filter backdrop-blur-sm border border-white/20 ".concat(e.color," ").concat(e.id===_?"ring-2 ring-green-400":""),children:(0,P.jsxs)("div",{className:"flex items-center justify-between",children:[(0,P.jsx)("span",{children:e.name}),(0,P.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,P.jsx)("span",{className:"text-xs opacity-70",children:e.icon}),e.id===_&&(0,P.jsx)(M,{className:"w-3 h-3 text-green-500"})]})]})},e.id)))})]})})}),p==="suggested-".concat(o.id)&&(0,P.jsx)("div",{className:"dropdown-container absolute top-full right-0 mt-2 rounded-xl p-3 z-20 w-64 backdrop-filter backdrop-blur-lg bg-white/95 border border-white/30 shadow-xl",children:(0,P.jsx)("div",{className:"space-y-3",children:(0,P.jsxs)("div",{children:[(0,P.jsxs)("div",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center",children:[(0,P.jsx)(Ue,{className:"w-4 h-4 mr-2 text-green-500"}),(0,P.jsx)("span",{children:"Choose Time Slot"}),(0,P.jsxs)("span",{className:"ml-auto text-xs text-green-600",children:["Suggested: ",null===(i=D.find((e=>e.id===k)))||void 0===i?void 0:i.name.split(" ")[0]]})]}),(0,P.jsxs)("div",{className:"space-y-2",children:[(0,P.jsx)("button",{onClick:()=>d(o,"timeSlot","","suggested"),className:"w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 hover:scale-105 active:scale-95 bg-gray-50 text-gray-700 hover:bg-gray-100 backdrop-filter backdrop-blur-sm border border-white/20",children:(0,P.jsxs)("div",{className:"flex items-center justify-between",children:[(0,P.jsx)("span",{children:"Anytime"}),(0,P.jsx)("span",{className:"text-xs opacity-70",children:"\ud83d\udd50"})]})}),D.map((e=>(0,P.jsx)("button",{onClick:()=>d(o,"timeSlot",e.id,"suggested"),className:"w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 hover:scale-105 active:scale-95 bg-blue-50 text-blue-700 hover:bg-blue-100 backdrop-filter backdrop-blur-sm border border-white/20 ".concat(e.id===k?"ring-2 ring-green-400":""),children:(0,P.jsxs)("div",{className:"flex items-center justify-between",children:[(0,P.jsx)("span",{children:e.name.split(" ")[0]}),(0,P.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,P.jsx)("span",{className:"text-xs opacity-70",children:e.icon}),e.id===k&&(0,P.jsx)(M,{className:"w-3 h-3 text-green-500"})]})]})},e.id)))]})]})})})]})})]})})},"suggested-".concat(o.id))})),(0,P.jsx)("div",{className:"mt-4 pt-3 border-t border-gray-200",children:(0,P.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[(0,P.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,P.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,P.jsx)(Re,{className:"w-3 h-3"}),(0,P.jsx)("span",{children:"Hybrid frequency learning"})]}),(0,P.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,P.jsx)(g,{className:"w-3 h-3"}),(0,P.jsxs)("span",{children:["Based on ",i.filter((e=>e.completed)).length," completions"]})]}),T&&(0,P.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,P.jsx)(qe,{className:"w-3 h-3"}),(0,P.jsx)("span",{children:"Admin mode active"})]})]}),(0,P.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,P.jsx)("span",{children:"Show:"}),(0,P.jsxs)("select",{value:_,onChange:e=>k(Number(e.target.value)),className:"bg-transparent border border-gray-300 rounded px-2 py-1 text-xs",children:[(0,P.jsx)("option",{value:3,children:"3"}),(0,P.jsx)("option",{value:5,children:"5"}),(0,P.jsx)("option",{value:10,children:"10"})]})]})]})})]})]})},Be=t=>{let{currentUser:n,connectionStatus:r,prepItems:s,scheduledPreps:i,prepSelections:a,setPrepItems:l,setScheduledPreps:c,setPrepSelections:d,quickSave:u}=t;const[h,p]=(0,e.useState)("today"),[m,g]=(0,e.useState)((()=>new Date)),[y,v]=(0,e.useState)(new Date),[b,w]=(0,e.useState)(!1),[N,j]=(0,e.useState)(""),[C,S]=(0,e.useState)("all"),[T,E]=(0,e.useState)(!1),[I,D]=(0,e.useState)(""),[M,R]=(0,e.useState)(!1),[A,L]=(0,e.useState)({ingredients:"",instructions:""}),[O,F]=(0,e.useState)(!1),[z,U]=(0,e.useState)(null),[q,W]=(0,e.useState)(""),[B,H]=(0,e.useState)(null),[V,K]=(0,e.useState)(null),[Y,$]=(0,e.useState)({}),[G,X]=(0,e.useState)(!0),[Z,J]=(0,e.useState)(0),[ee,te]=(0,e.useState)(!1),[ne,re]=(0,e.useState)(!1),[se,ie]=(0,e.useState)(!1);(0,e.useEffect)((()=>{const e=()=>{var e,t,n;const r=document.querySelector(".bg-red-100.text-red-700"),s=r&&(null===(e=r.textContent)||void 0===e?void 0:e.includes("Admin Mode")),i=document.querySelector(".bg-white.border-b"),a=i&&((null===(t=i.textContent)||void 0===t?void 0:t.includes("Admin Panel"))||(null===(n=i.textContent)||void 0===n?void 0:n.includes("Daily Reports"))),o=document.querySelector('[title="Logout Admin"]'),l=s||a||!!o;ie(l),l!==se&&console.log("\ud83d\udd27 Admin mode detected:",{hasAdminBadge:!!s,hasAdminTabs:!!a,hasLogoutButton:!!o,isAdmin:l})};e();const t=setInterval(e,500);return()=>clearInterval(t)}),[se]),(0,e.useEffect)((()=>{if(0===s.length){const e=[{id:1,name:"Valkosipulimajoneesi",category:"majoneesit",estimatedTime:"15 min",isCustom:!1,hasRecipe:!0,frequency:3,recipe:{ingredients:"\u2022 **1 cup** majoneesi\n\u2022 **3-4** valkosipulin kyntt\xe4, hienoksi hakattuna\n\u2022 **1 rkl** sitruunamehua\n\u2022 **Suolaa** ja **mustapippuria** maun mukaan",instructions:"1. **Sekoita**: Yhdist\xe4 majoneesi ja hienonnettu valkosipuli\n2. **Mausta**: Lis\xe4\xe4 sitruunamehu, suola ja pippuri\n3. **Anna maustua**: Anna seisoa j\xe4\xe4kaapissa v\xe4hint\xe4\xe4n 30 minuuttia\n4. **Tarkista maku**: S\xe4\xe4d\xe4 mausteita tarpeen mukaan"}},{id:2,name:"Chilimajoneesi",category:"majoneesit",estimatedTime:"10 min",isCustom:!1,hasRecipe:!0,frequency:4,recipe:{ingredients:"\u2022 **1 cup** majoneesi\n\u2022 **2-3 rkl** sriracha-kastiketta\n\u2022 **1 tl** hunajaa\n\u2022 **1 tl** limemehua",instructions:"1. **Yhdist\xe4**: Sekoita majoneesi ja sriracha-kastike\n2. **Makeutus**: Lis\xe4\xe4 hunaja ja limemehu\n3. **Sekoita hyvin**: Varmista tasainen sekoitus\n4. **Maista ja s\xe4\xe4d\xe4**: Lis\xe4\xe4 chilimakua tai hunajaa tarpeen mukaan"}},{id:3,name:"Kev\xe4tsipulimajoneesi",category:"majoneesit",estimatedTime:"10 min",isCustom:!1,hasRecipe:!1,frequency:3,recipe:null},{id:4,name:"Bad Santa -majoneesi",category:"majoneesit",estimatedTime:"15 min",isCustom:!1,hasRecipe:!1,frequency:5,recipe:null},{id:5,name:"Manse-majoneesi",category:"majoneesit",estimatedTime:"12 min",isCustom:!1,hasRecipe:!1,frequency:4,recipe:null},{id:6,name:"Marinoitu kana",category:"proteiinit",estimatedTime:"30 min",isCustom:!1,hasRecipe:!0,frequency:2,recipe:{ingredients:"\u2022 **4** kananfileet\xe4\n\u2022 **1/4 cup** oliivi\xf6ljy\xe4\n\u2022 **2 rkl** sitruunamehua\n\u2022 **3** valkosipulin kyntt\xe4, murskattuna\n\u2022 **1 tl** kuivattuja yrttej\xe4\n\u2022 **Suolaa** ja **pippuria**",instructions:"1. **Valmista marinade**: Sekoita \xf6ljy, sitruunamehu, valkosipuli ja yrtit\n2. **Mausta kana**: Hiero kanaan suolaa ja pippuria\n3. **Marinoi**: Laita kana marinadiin 2-4 tunniksi\n4. **Huoneenl\xe4mp\xf6**: Anna tulla huoneenl\xe4mp\xf6\xf6n ennen kypsennyst\xe4"}},{id:7,name:"Lihapullat",category:"proteiinit",estimatedTime:"45 min",isCustom:!1,hasRecipe:!0,frequency:3,recipe:{ingredients:"\u2022 **500g** jauhelihaa\n\u2022 **1** sipuli, hienoksi hakattuna\n\u2022 **1** muna\n\u2022 **1/2 cup** korppujauhoja\n\u2022 **Suolaa**, **pippuria**, **mausteet**",instructions:"1. **Sekoita**: Yhdist\xe4 kaikki ainekset kulhossa\n2. **Muotoile**: Tee tasakokoisia palloja\n3. **Kypsenn\xe4**: Paista pannulla tai uunissa\n4. **Valmista**: Kypsyys 65\xb0C sis\xe4l\xe4mp\xf6tila"}},{id:8,name:"Tuoreet tomaatit (leikattu)",category:"kasvikset",estimatedTime:"15 min",isCustom:!1,hasRecipe:!1,frequency:1,recipe:null},{id:9,name:"Kev\xe4tsipuli",category:"kasvikset",estimatedTime:"10 min",isCustom:!1,hasRecipe:!1,frequency:2,recipe:null},{id:10,name:"Marinoitu punasipuli",category:"marinointi",estimatedTime:"20 min",isCustom:!1,hasRecipe:!0,frequency:4,recipe:{ingredients:"\u2022 **2** punasipulia, ohuksi viipaloiduna\n\u2022 **1/2 cup** valkoviinietikkaa\n\u2022 **2 rkl** sokeria\n\u2022 **1 tl** suolaa\n\u2022 **1** laakerinlehti",instructions:"1. **Liuota**: Sekoita etikka, sokeri ja suola\n2. **Sipulit**: Laita viipaloidut sipulit kulhoon\n3. **Kaada liuos**: Kaada kuuma liuos sipulien p\xe4\xe4lle\n4. **Anna marinoitua**: V\xe4hint\xe4\xe4n 30 minuuttia ennen k\xe4ytt\xf6\xe4"}},{id:11,name:"Pikkel\xf6ity punasipuli",category:"marinointi",estimatedTime:"25 min",isCustom:!1,hasRecipe:!1,frequency:5,recipe:null},{id:12,name:"Pikkel\xf6ity tomaatti",category:"marinointi",estimatedTime:"20 min",isCustom:!1,hasRecipe:!1,frequency:4,recipe:null},{id:13,name:"Pikkel\xf6ity kurkku",category:"marinointi",estimatedTime:"20 min",isCustom:!1,hasRecipe:!1,frequency:4,recipe:null},{id:14,name:"Paholaisen hillo",category:"marinointi",estimatedTime:"30 min",isCustom:!1,hasRecipe:!1,frequency:7,recipe:null},{id:15,name:"Hapan omena -hillo",category:"marinointi",estimatedTime:"35 min",isCustom:!1,hasRecipe:!1,frequency:7,recipe:null},{id:16,name:"Marinoitu punakaali",category:"marinointi",estimatedTime:"25 min",isCustom:!1,hasRecipe:!1,frequency:5,recipe:null},{id:17,name:"Konjakki-sinappi",category:"kastikkeet",estimatedTime:"15 min",isCustom:!1,hasRecipe:!0,frequency:6,recipe:{ingredients:"\u2022 **1/2 cup** dijon-sinappia\n\u2022 **3 rkl** konjakkia\n\u2022 **1 rkl** hunajaa\n\u2022 **1 tl** valkosipulijauhetta",instructions:"1. **Sekoita**: Yhdist\xe4 sinappi ja konjakki\n2. **Makeutus**: Lis\xe4\xe4 hunaja ja valkosipulijauhe\n3. **Sekoita hyvin**: Varmista tasainen sekoitus\n4. **Anna vet\xe4yty\xe4**: S\xe4ilyt\xe4 j\xe4\xe4kaapissa k\xe4ytt\xf6\xf6n asti"}},{id:18,name:"BBQ-hunaja-sinappi",category:"kastikkeet",estimatedTime:"12 min",isCustom:!1,hasRecipe:!1,frequency:5,recipe:null},{id:19,name:"T\xe4yt\xe4 kylm\xe4vitriini",category:"muut",estimatedTime:"20 min",isCustom:!1,hasRecipe:!1,frequency:1,recipe:null},{id:20,name:"Vaihda \xf6ljy",category:"muut",estimatedTime:"15 min",isCustom:!1,hasRecipe:!1,frequency:7,recipe:null},{id:21,name:"Asiakasjuomakaappi kuntoon",category:"muut",estimatedTime:"25 min",isCustom:!1,hasRecipe:!1,frequency:2,recipe:null},{id:22,name:"Alkoholijuomakaappi kuntoon",category:"muut",estimatedTime:"20 min",isCustom:!1,hasRecipe:!1,frequency:3,recipe:null},{id:23,name:"Keit\xe4 smash-perunat",category:"muut",estimatedTime:"45 min",isCustom:!1,hasRecipe:!0,frequency:2,recipe:{ingredients:"\u2022 **1kg** pieni\xe4 perunoita\n\u2022 **Suolaa** keitinveteen\n\u2022 **Oliivi\xf6ljy\xe4**\n\u2022 **Rosmariinia**\n\u2022 **Merisuolaa**\n\u2022 **Mustapippuria**",instructions:"1. **Keit\xe4**: Keit\xe4 perunat kuoressa suolavedess\xe4 kypsiksi\n2. **Valuta**: Anna valua ja j\xe4\xe4hty\xe4 hieman\n3. **Smash**: Litist\xe4 perunat haarukalla kevyesti\n4. **Paista**: Paista uunissa 200\xb0C \xf6ljyss\xe4 ja mausteissa kultaisiksi"}}];l((()=>e)),u("prepItems",e)}}),[s.length,l,u]),(0,e.useEffect)((()=>{if(i.length>0&&!ee){console.log("\ud83d\udd04 Auto-saving scheduledPreps due to state change");const e=setTimeout((()=>{u("scheduledPreps",i).then((()=>{console.log("\u2705 ScheduledPreps auto-save completed")})).catch((e=>{console.error("\u274c ScheduledPreps auto-save failed:",e)}))}),300);return()=>clearTimeout(e)}}),[i,u,ee]),(0,e.useEffect)((()=>{const e=localStorage.getItem("lastPrepMoveCheck"),t=je(new Date);e!==t&&((()=>{const e=new Date,t=new Date(e);t.setDate(t.getDate()-1);const n=je(e),r=je(t),s=i.filter((e=>e.scheduledDate===r&&!e.completed));if(s.length>0){console.log("\ud83d\udd04 Moving ".concat(s.length," incomplete preps from ").concat(r," to ").concat(n)),J(s.length),setTimeout((()=>J(0)),8e3);const t=s.map((e=>o(o({},e),{},{id:Te(),scheduledDate:n})));c((e=>[...e.filter((e=>!(e.scheduledDate===r&&!e.completed))),...t]));const i={};s.forEach((t=>{const n=Se(e,t.prepId);i[n]={priority:t.priority,timeSlot:t.timeSlot,selected:!0}})),d((e=>o(o({},e),i)))}})(),localStorage.setItem("lastPrepMoveCheck",t))}),[i,d,c]);const ae=async e=>{if(console.log("\ud83d\udd04 Toggling prep completion for ID:",e),ee)console.log("\u23f3 Save in progress, skipping...");else{te(!0),re(!0);try{const t=i.find((t=>t.id===e));if(!t)return void console.error("\u274c Prep item not found:",e);const n=!t.completed;console.log("\ud83d\udccb ".concat(t.name,": ").concat(t.completed?"COMPLETED":"PENDING"," \u2192 ").concat(n?"COMPLETED":"PENDING")),console.log("\ud83d\udee1\ufe0f SYNC PAUSED during save operation");const r=i.map((t=>t.id===e?o(o({},t),{},{completed:n}):t)),s=je(new Date),a=r.filter((e=>e.scheduledDate===s)),l=a.filter((e=>e.completed));console.log("\ud83d\udce4 About to save scheduledPreps:",{totalCount:r.length,todayCount:a.length,todayCompletedCount:l.length,updatedItem:{id:e,name:t.name,completed:n,scheduledDate:t.scheduledDate}}),c((()=>r)),console.log("\ud83d\udd25 Saving prep completion to Firebase...");await u("scheduledPreps",r)?(console.log("\u2705 Prep completion saved successfully"),setTimeout((async()=>{re(!1),console.log("\ud83d\udd04 SYNC RESUMED after save completion");try{const t=await fetch("https://hamptown-panel-default-rtdb.firebaseio.com/scheduledPreps.json"),r=await t.json();if(r){const t=r.filter((e=>e.scheduledDate===s)),i=t.filter((e=>!0===e.completed)),a=r.find((t=>t.id===e));console.log("\ud83d\udd0d Firebase verification after save:",{firebaseTotalCount:r.length,firebaseTodayCount:t.length,firebaseTodayCompleted:i.length,firebaseUpdatedItem:a?{id:a.id,name:a.name,completed:a.completed,scheduledDate:a.scheduledDate}:"NOT FOUND"}),a&&a.completed===n?console.log("\u2705 Save verification passed"):console.error("\u274c SAVE VERIFICATION FAILED! Item not found or completion status mismatch")}else console.error("\u274c No data found in Firebase during verification")}catch(Mr){console.warn("\u26a0\ufe0f Failed to verify save:",Mr)}}),3e3)):(console.error("\u274c Failed to save prep completion to Firebase"),c((()=>i)),re(!1))}catch(Mr){console.error("\u274c Error toggling prep completion:",Mr),c((()=>i)),re(!1)}finally{te(!1)}}},oe=e=>{var t;const n=Se(m,e.id);return(null===(t=a[n])||void 0===t?void 0:t.selected)||!1},le=e=>{const t=Se(m,e.id);return a[t]||{priority:"medium",timeSlot:"",selected:!1}},ce=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"main";const s=Se(m,e.id),l=a[s]||{priority:"medium",timeSlot:"",selected:!1};if("priority"===t){d((e=>o(o({},e),{},{[s]:o(o({},e[s]),{},{priority:n,selected:l.selected})}))),$((t=>o(o({},t),{},{[e.id]:"timeSlot"}))),H(null);const t="suggested"===r?"suggested-".concat(e.id):e.id;K(t)}else if("timeSlot"===t){const t={priority:l.priority,timeSlot:n,selected:!0};d((e=>o(o({},e),{},{[s]:t})));if(i.find((t=>t.prepId===e.id&&t.scheduledDate===je(m))))c((r=>r.map((r=>r.prepId===e.id&&r.scheduledDate===je(m)?o(o({},r),{},{priority:t.priority,timeSlot:n}):r))));else{const r={id:Te(),prepId:e.id,name:e.name,category:e.category,estimatedTime:e.estimatedTime,isCustom:e.isCustom,hasRecipe:e.hasRecipe,recipe:e.recipe,scheduledDate:je(m),priority:t.priority,timeSlot:n,completed:!1,assignedTo:null,notes:""};c((e=>[...e,r]))}$((t=>o(o({},t),{},{[e.id]:null}))),H(null),K(null)}},de=()=>{H(null),K(null),$({})};(0,e.useEffect)((()=>{const e=e=>{e.target.closest(".dropdown-container")||de()};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);const ue=(e,t)=>{U(e),W(t),F(!0)},he=e=>{var t;const n=Se(m,e.id);if(null===(t=a[n])||void 0===t?void 0:t.selected)d((e=>{const t=o({},e);return delete t[n],t})),c((t=>t.filter((t=>!(t.prepId===e.id&&t.scheduledDate===je(m))))));else{const t=i.find((t=>t.prepId===e.id&&t.scheduledDate===je(m)));if(t)d((e=>o(o({},e),{},{[n]:{priority:t.priority,timeSlot:t.timeSlot,selected:!0}})));else{const t={priority:"medium",timeSlot:"",selected:!0};d((e=>o(o({},e),{},{[n]:t})));const r={id:Te(),prepId:e.id,name:e.name,category:e.category,estimatedTime:e.estimatedTime,isCustom:e.isCustom,hasRecipe:e.hasRecipe,recipe:e.recipe,scheduledDate:je(m),priority:"medium",timeSlot:"",completed:!1,assignedTo:null,notes:""};c((e=>[...e,r]))}}},pe=s.filter((e=>{const t="all"===C||e.category===C,n=""===I||e.name.toLowerCase().includes(I.toLowerCase())||e.category.toLowerCase().includes(I.toLowerCase());return t&&n}));return(0,P.jsxs)("div",{className:"space-y-6",children:[(0,P.jsx)("style",{dangerouslySetInnerHTML:{__html:'\n.priority-glow {\n  position: relative;\n  z-index: 0;\n  font-weight: 600;\n  border-radius: 0.25rem;\n  padding: 0.125rem 0.25rem;\n}\n.priority-glow::before {\n  content: "";\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 110%;\n  height: 2em;\n  transform: translate(-50%, -50%);\n  border-radius: 0.375rem;\n  filter: blur(6px);\n  z-index: -1;\n  opacity: 0.3;\n}\n.priority-low {\n  color: #047857;\n}\n.priority-low::before {\n  box-shadow: 0 0 8px 4px rgba(5, 150, 105, 0.4);\n}\n.priority-medium {\n  color: #92400e;\n}\n.priority-medium::before {\n  box-shadow: 0 0 8px 4px rgba(202, 138, 4, 0.4);\n}\n.priority-high {\n  color: #b91c1c;\n}\n.priority-high::before {\n  box-shadow: 0 0 8px 4px rgba(185, 28, 28, 0.4);\n}\n\n.soft-dropdown {\n  backdrop-filter: blur(16px);\n  background: rgba(255, 255, 255, 0.95);\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.15),\n              0 0 0 1px rgba(255, 255, 255, 0.05),\n              inset 0 1px 0 rgba(255, 255, 255, 0.1);\n}\n\n.soft-button {\n  backdrop-filter: blur(8px);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05),\n              inset 0 1px 0 rgba(255, 255, 255, 0.1);\n}\n\n.soft-button:hover {\n  backdrop-filter: blur(12px);\n  box-shadow: 0 8px 15px -3px rgba(0, 0, 0, 0.1),\n              inset 0 1px 0 rgba(255, 255, 255, 0.2);\n}\n'}}),(0,P.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,P.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,P.jsxs)("div",{className:"flex items-center",children:[(0,P.jsx)(x,{className:"w-8 h-8 text-blue-600 mr-3"}),(0,P.jsxs)("div",{children:[(0,P.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Prep List Manager"}),(0,P.jsx)("p",{className:"text-gray-600",children:"Plan and track kitchen preparation tasks"})]})]}),(0,P.jsx)("div",{className:"flex items-center space-x-2"})]}),(0,P.jsxs)("div",{className:"flex space-x-2",children:[(0,P.jsxs)("button",{onClick:()=>p("today"),className:"flex items-center px-4 py-2 rounded-lg transition-colors ".concat("today"===h?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[(0,P.jsx)(f,{className:"w-4 h-4 mr-2"}),"Today's Preps"]}),(0,P.jsxs)("button",{onClick:()=>p("plan"),className:"flex items-center px-4 py-2 rounded-lg transition-colors ".concat("plan"===h?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[(0,P.jsx)(xe,{className:"w-4 h-4 mr-2"}),"Plan Preps"]}),(0,P.jsxs)("button",{onClick:()=>p("week"),className:"flex items-center px-4 py-2 rounded-lg transition-colors ".concat("week"===h?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[(0,P.jsx)(k,{className:"w-4 h-4 mr-2"}),"Week View"]})]})]}),Z>0&&(0,P.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 mb-6",children:(0,P.jsxs)("div",{className:"flex items-center",children:[(0,P.jsx)("div",{className:"flex-shrink-0",children:(0,P.jsx)("svg",{className:"w-5 h-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,P.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),(0,P.jsxs)("div",{className:"ml-3 flex-1",children:[(0,P.jsx)("h3",{className:"text-sm font-medium text-blue-800",children:"\ud83d\udcc5 Prep items moved to today"}),(0,P.jsxs)("div",{className:"mt-1 text-sm text-blue-600",children:[Z," incomplete prep",Z>1?"s":""," from yesterday ",Z>1?"have":"has"," been automatically moved to today's schedule."]})]}),(0,P.jsx)("div",{className:"flex-shrink-0",children:(0,P.jsx)("button",{onClick:()=>J(0),className:"text-blue-400 hover:text-blue-600",children:(0,P.jsx)(_,{className:"w-5 h-5"})})})]})}),"today"===h&&(0,P.jsxs)(P.Fragment,{children:[!!se&&(0,P.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[(0,P.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,P.jsxs)("h4",{className:"font-medium text-blue-800",children:["\ud83d\udd0d Debug Info ",se?"(Admin Mode Active)":"(Development Mode)"]}),(0,P.jsxs)("div",{className:"flex gap-2",children:[!1,(0,P.jsx)("button",{onClick:async()=>{console.log("\ud83d\udd04 Manual Firebase check triggered");try{const e=await fetch("https://hamptown-panel-default-rtdb.firebaseio.com/scheduledPreps.json"),t=await e.json(),n=je(new Date),r=t?t.filter((e=>e.scheduledDate===n)):[];console.log("\ud83d\udd0d Manual Firebase check result:",{firebaseHasData:!!t,firebaseTotalCount:t?t.length:0,firebaseTodayCount:r.length,firebaseTodayCompleted:r.filter((e=>!0===e.completed)).length,localTodayCount:i.filter((e=>e.scheduledDate===n)).length,firebaseSample:r.slice(0,3)}),alert("Firebase Check:\nTotal: ".concat(t?t.length:0,"\nToday: ").concat(r.length,"\nCompleted: ").concat(r.filter((e=>!0===e.completed)).length))}catch(Mr){console.error("\u274c Manual Firebase check failed:",Mr),alert("Firebase check failed - see console")}},className:"px-3 py-1 bg-blue-500 text-white rounded text-xs hover:bg-blue-600",children:"Check Firebase"}),(0,P.jsx)("button",{onClick:()=>{console.log("\ud83d\udd04 Manual reload triggered"),window.location.reload()},className:"px-3 py-1 bg-green-500 text-white rounded text-xs hover:bg-green-600",children:"Force Reload"})]})]}),(0,P.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,P.jsxs)("div",{children:[(0,P.jsx)("div",{className:"font-medium text-blue-700",children:"Today's Date"}),(0,P.jsx)("div",{className:"text-blue-600",children:je(new Date)})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("div",{className:"font-medium text-blue-700",children:"Total Scheduled"}),(0,P.jsx)("div",{className:"text-blue-600",children:i.length})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("div",{className:"font-medium text-blue-700",children:"Today's Preps"}),(0,P.jsx)("div",{className:"text-blue-600",children:i.filter((e=>e.scheduledDate===je(new Date))).length})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("div",{className:"font-medium text-blue-700",children:"Connection"}),(0,P.jsx)("div",{className:"connected"===r?"text-green-600":"text-red-600",children:r})]})]}),(0,P.jsxs)("div",{className:"mt-3",children:[(0,P.jsx)("div",{className:"font-medium text-blue-700 mb-1",children:"All Scheduled Dates:"}),(0,P.jsx)("div",{className:"text-blue-600 text-xs",children:Array.from(new Set(i.map((e=>e.scheduledDate)))).sort().join(", ")||"None"})]}),i.length>0&&(0,P.jsxs)("div",{className:"mt-2",children:[(0,P.jsx)("div",{className:"font-medium text-blue-700 mb-1",children:"Sample Preps:"}),(0,P.jsx)("div",{className:"text-blue-600 text-xs",children:i.slice(0,3).map((e=>"".concat(e.name," (").concat(e.scheduledDate,")").concat(e.completed?" \u2705":" \u23f3"))).join(" | ")})]})]}),(0,P.jsx)(Ie,{scheduledPreps:i,onToggleCompletion:ae,onShowRecipe:ue})]}),"plan"===h&&(0,P.jsxs)("div",{className:"space-y-6",children:[(0,P.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,P.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Select Date to Plan"}),(0,P.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,P.jsx)("input",{type:"date",value:je(m),onChange:e=>g(new Date(e.target.value)),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,P.jsxs)("div",{className:"text-gray-600",children:["Planning for: ",(0,P.jsx)("strong",{children:(me=m,me.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}))})]})]})]}),(0,P.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,P.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,P.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Choose Prep Items"}),(0,P.jsxs)("button",{onClick:()=>E(!T),className:"flex items-center px-4 py-2 rounded-lg transition-colors ".concat(T?"bg-blue-500 text-white":"bg-gray-100 hover:bg-gray-200"),children:[(0,P.jsx)(we,{className:"w-4 h-4 mr-2"}),"Search"]})]}),T&&(0,P.jsx)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:(0,P.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,P.jsx)(we,{className:"w-5 h-5 text-gray-400"}),(0,P.jsx)("input",{type:"text",placeholder:"Search prep items...",value:I,onChange:e=>D(e.target.value),className:"flex-1 px-3 py-2 border-0 bg-transparent focus:outline-none",autoFocus:!0}),I&&(0,P.jsx)("button",{onClick:()=>D(""),className:"p-1 text-gray-400 hover:text-gray-600",children:(0,P.jsx)(_,{className:"w-4 h-4"})})]})}),(0,P.jsx)("div",{className:"flex flex-wrap gap-2 mb-6",children:_e.map((e=>(0,P.jsxs)("button",{onClick:()=>S(e.id),className:"flex items-center px-4 py-2 rounded-lg transition-colors ".concat(C===e.id?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[(0,P.jsx)("span",{className:"mr-2",children:e.icon}),e.name]},e.id)))}),(0,P.jsx)(We,{currentDate:y,selectedDate:m,prepItems:s,scheduledPreps:i,prepSelections:a,selectedCategory:C,searchQuery:I,onToggleSelection:he,onUpdateSelection:ce,onShowRecipe:ue,showPriorityOptions:B,showTimeOptions:V,assignmentStep:Y,onShowPriorityOptions:H,onResetWorkflow:de}),(0,P.jsx)("div",{className:"space-y-3",children:pe.map((e=>(0,P.jsx)(De,{prep:e,isSelected:oe(e),selection:le(e),showPriorityOptions:B,showTimeOptions:V,assignmentStep:Y,onToggleSelection:he,onUpdateSelection:ce,onShowPriorityOptions:H,onShowRecipe:ue,onSave:(e,t)=>{console.log("Save clicked for prep:",e,t)},context:"main"},e.id)))}),(0,P.jsx)("div",{className:"mt-6 pt-6 border-t",children:b?(0,P.jsxs)("div",{className:"border rounded-lg p-4 bg-gray-50",children:[(0,P.jsx)("h4",{className:"font-medium text-gray-800 mb-4",children:"Add Custom Prep"}),(0,P.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,P.jsxs)("div",{children:[(0,P.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prep Name"}),(0,P.jsx)("input",{type:"text",value:N,onChange:e=>j(e.target.value),placeholder:"e.g., Prep special sauce",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,P.jsx)("select",{value:"all"===C?"majoneesit":C,onChange:e=>S(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:_e.slice(1).map((e=>(0,P.jsx)("option",{value:e.id,children:e.name},e.id)))})]})]}),(0,P.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,P.jsx)("button",{onClick:()=>{if(!N.trim())return;const e={id:Date.now(),name:N.trim(),category:"all"===C?"majoneesit":C,estimatedTime:"20 min",isCustom:!0,hasRecipe:M,frequency:2,recipe:M?{ingredients:A.ingredients,instructions:A.instructions}:null};l((t=>[...t,e])),j(""),w(!1),R(!1),L({ingredients:"",instructions:""}),S("majoneesit"),he(e)},className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors",children:"Add Prep"}),(0,P.jsx)("button",{onClick:()=>{w(!1),j(""),R(!1),L({ingredients:"",instructions:""}),S("majoneesit")},className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"})]})]}):(0,P.jsxs)("button",{onClick:()=>w(!0),className:"flex items-center px-4 py-2 border border-dashed border-gray-300 rounded-lg hover:border-blue-500 hover:text-blue-500 transition-colors",children:[(0,P.jsx)(Q,{className:"w-4 h-4 mr-2"}),"Add Custom Prep Item"]})})]})]}),"week"===h&&(0,P.jsx)(Pe,{scheduledPreps:i,currentDate:y,setCurrentDate:v,selectedDate:m,setSelectedDate:g,setActiveView:p,onToggleCompletion:ae,onShowRecipe:ue}),(0,P.jsx)(Me,{isOpen:O,recipe:z,recipeName:q,onClose:()=>F(!1)})]});var me},He=u("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),Ve=u("Tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]),Ke=u("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),Ye=u("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Qe=u("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),$e=u("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),Ge=u("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),Xe=u("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Ze=u("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Je=t=>{let{isLoading:n,lastSync:r,connectionStatus:s,loadFromFirebase:i,activeDevices:a=[],syncEvents:l=[],deviceCount:c=1,isMultiDeviceEnabled:d=!0,toggleMultiDeviceSync:u=()=>{},refreshFromAllDevices:h=()=>{},conflictCount:p=0}=t;const[m,f]=(0,e.useState)(!1),[g,y]=(0,e.useState)(!1),[x,v]=(0,e.useState)(null),[b,w]=(0,e.useState)({x:"right",y:window.innerHeight-100}),[_,N]=(0,e.useState)(!1),[j,C]=(0,e.useState)({x:0,y:0}),[S,T]=(0,e.useState)({x:0,y:0,startY:0,startSide:"right"}),E=(0,e.useRef)(null);(0,e.useEffect)((()=>{const e=()=>{w((e=>o(o({},e),{},{y:Math.min(e.y,window.innerHeight-100)})))};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),(0,e.useEffect)((()=>{if(l.length>0){const e=l.filter((e=>Date.now()-e.timestamp<3e3));if(e.length>0){const t=e[0];v(t),f(!0);const n=setTimeout((()=>{f(!1),v(null)}),2e3);return()=>clearTimeout(n)}}}),[l]);const I=e=>{const t=Date.now()-e;return t<6e4?"Just now":t<36e5?"".concat(Math.floor(t/6e4),"m ago"):t<864e5?"".concat(Math.floor(t/36e5),"h ago"):"".concat(Math.floor(t/864e5),"d ago")};(0,e.useEffect)((()=>{const e=e=>{if(!_)return;const t=e.clientX-S.x,n=e.clientY-S.y,r=Math.max(16,Math.min(window.innerWidth-56,("left"===S.startSide?16:window.innerWidth-56)+t)),s=Math.max(24,Math.min(window.innerHeight-64,S.startY+n));C({x:r,y:s})},t=e=>{if(!_)return;e.preventDefault();const t=e.touches[0],n=t.clientX-S.x,r=t.clientY-S.y,s=Math.max(16,Math.min(window.innerWidth-56,("left"===S.startSide?16:window.innerWidth-56)+n)),i=Math.max(24,Math.min(window.innerHeight-64,S.startY+r));C({x:s,y:i})},n=e=>{if(!_)return;const t=e.clientX-S.x,n=e.clientY-S.y,r=("left"===S.startSide?16:window.innerWidth-56)+t>window.innerWidth/2?"right":"left",s=Math.max(24,Math.min(window.innerHeight-64,S.startY+n));w({x:r,y:s}),N(!1)},r=e=>{if(!_)return;const t=e.changedTouches[0],n=t.clientX-S.x,r=t.clientY-S.y,s=("left"===S.startSide?16:window.innerWidth-56)+n>window.innerWidth/2?"right":"left",i=Math.max(24,Math.min(window.innerHeight-64,S.startY+r));w({x:s,y:i}),N(!1)};return _&&(document.addEventListener("mousemove",e),document.addEventListener("mouseup",n),document.addEventListener("touchmove",t,{passive:!1}),document.addEventListener("touchend",r)),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",n),document.removeEventListener("touchmove",t),document.removeEventListener("touchend",r)}}),[_,S]);const D=n?{icon:(0,P.jsx)(Ye,{className:"w-3 h-3 animate-spin"}),text:x?"Syncing ".concat(x.field||"data"):"Syncing",bgColor:"bg-blue-500/90",pulseColor:"bg-blue-400"}:"connected"===s&&r?{icon:m?(0,P.jsx)(Ye,{className:"w-3 h-3 animate-spin"}):c>1?(0,P.jsx)(k,{className:"w-3 h-3"}):(0,P.jsx)(Qe,{className:"w-3 h-3"}),text:m?x?"Syncing ".concat(x.field||"data"):"Syncing":c>1?"".concat(c," devices"):"Synced",bgColor:"bg-emerald-500/90",pulseColor:"bg-emerald-400"}:"error"===s?{icon:(0,P.jsx)($e,{className:"w-3 h-3"}),text:"Offline",bgColor:"bg-red-500/90",pulseColor:"bg-red-400"}:{icon:(0,P.jsx)(Ge,{className:"w-3 h-3"}),text:"Connecting",bgColor:"bg-amber-500/90",pulseColor:"bg-amber-400"},M=(()=>{const e=window.innerHeight,t=window.innerWidth,n=b.y+450+8>e-20;let r="0px";"left"===b.x?(r="".concat(48,"px"),384>t&&(r="-".concat(272,"px"))):(r="-".concat(328,"px"),328>t-64&&(r="".concat(48,"px")));let s="0px";return s=n?"-".concat(458,"px"):"".concat(48,"px"),{translateX:r,translateY:s,isAbove:n}})();return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)("div",{ref:E,className:"\n          fixed z-50 transition-all duration-300 ease-out\n          ".concat(_?"transition-none":"","\n          ").concat(_?"scale-110 cursor-grabbing":"cursor-grab hover:scale-105","\n        "),style:{left:_?"".concat(j.x,"px"):"left"===b.x?"16px":void 0,right:_?void 0:"right"===b.x?"16px":void 0,top:"".concat(_?j.y:b.y,"px")},onMouseDown:e=>{var t;e.preventDefault(),N(!0);const n=null===(t=E.current)||void 0===t?void 0:t.getBoundingClientRect();n&&(C({x:n.left,y:n.top}),T({x:e.clientX,y:e.clientY,startY:b.y,startSide:b.x}))},onTouchStart:e=>{var t;e.preventDefault(),N(!0);const n=e.touches[0],r=null===(t=E.current)||void 0===t?void 0:t.getBoundingClientRect();r&&(C({x:r.left,y:r.top}),T({x:n.clientX,y:n.clientY,startY:b.y,startSide:b.x}))},children:[(0,P.jsxs)("div",{className:"relative",children:[(0,P.jsx)("div",{className:"absolute inset-0 rounded-full bg-black/10 blur-md scale-110"}),(0,P.jsxs)("div",{className:"\n              relative w-10 h-10 rounded-full transform transition-all duration-300\n              ".concat(m?"animate-pulse":"","\n            "),onClick:e=>{_||(e.stopPropagation(),"error"===s?i():y(!g))},title:"".concat(D.text).concat(r?" - Last sync: ".concat(r):""),children:[(0,P.jsx)("div",{className:"\n              absolute inset-0 rounded-full backdrop-blur-xl ".concat(D.bgColor,"\n              border border-white/40 shadow-lg\n            ")}),(0,P.jsx)("div",{className:"absolute inset-0.5 rounded-full bg-gradient-to-tr from-white/25 to-transparent"}),(0,P.jsx)("div",{className:"relative flex items-center justify-center w-full h-full text-white",children:D.icon}),"connected"===s&&c>1&&(0,P.jsx)("div",{className:"absolute -top-1 -right-1 w-4 h-4 rounded-full backdrop-blur-xl bg-blue-500/95  border border-white/60 shadow-md flex items-center justify-center text-xs font-bold text-white",children:c}),m&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("div",{className:"absolute inset-0 rounded-full animate-ping",children:(0,P.jsx)("div",{className:"w-full h-full rounded-full ".concat(D.pulseColor,"/50 border border-current")})}),(0,P.jsx)("div",{className:"absolute inset-0 rounded-full animate-ping",style:{animationDelay:"150ms"},children:(0,P.jsx)("div",{className:"w-full h-full rounded-full ".concat(D.pulseColor,"/30 border border-current scale-125")})})]}),p&&p>0&&(0,P.jsxs)("div",{className:"absolute -top-2 -right-2 bg-red-600 text-white text-xs px-2 py-0.5 rounded-full animate-pulse z-50",children:[p," conflict",p>1?"s":""]})]})]}),g&&!_&&(0,P.jsxs)("div",{className:"absolute z-40 w-80",style:{transform:"translate(".concat(M.translateX,", ").concat(M.translateY,")"),transformOrigin:M.isAbove?"bottom center":"top center"},children:[(0,P.jsx)("div",{className:"absolute w-0.5 bg-gradient-to-b from-blue-500/30 to-purple-500/30 ".concat(M.isAbove?"bottom-0 h-2 translate-y-full":"top-0 h-2 -translate-y-full"),style:{left:"left"===b.x?"-9px":"calc(100% + 8px)"}}),(0,P.jsxs)("div",{className:"relative bg-white/95 backdrop-blur-xl rounded-xl shadow-xl border border-white/50 overflow-hidden",children:[(0,P.jsx)("div",{className:"bg-gradient-to-r from-emerald-500/15 to-blue-500/15 px-4 py-3 border-b border-white/30",children:(0,P.jsxs)("div",{className:"flex items-center justify-between",children:[(0,P.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,P.jsx)("div",{className:"w-6 h-6 rounded-full bg-gradient-to-br from-emerald-500 to-blue-500 flex items-center justify-center",children:(0,P.jsx)(k,{className:"w-3 h-3 text-white"})}),(0,P.jsxs)("div",{children:[(0,P.jsx)("span",{className:"text-sm font-semibold text-gray-800",children:"Multi-Device Sync"}),(0,P.jsxs)("div",{className:"text-xs text-gray-600",children:[c," device",1!==c?"s":""," connected"]})]})]}),(0,P.jsx)("button",{onClick:e=>{e.stopPropagation(),y(!1)},className:"w-6 h-6 rounded-full bg-white/30 backdrop-blur-sm border border-white/40  text-gray-600 hover:text-gray-800 hover:bg-white/50 transition-all duration-200 flex items-center justify-center text-xs",children:"\u2715"})]})}),(0,P.jsxs)("div",{className:"p-4 space-y-4 max-h-80 overflow-y-auto",children:[(0,P.jsxs)("div",{className:"bg-white/50 backdrop-blur-sm rounded-lg p-3 border border-white/30",children:[(0,P.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,P.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Real-time Sync"}),(0,P.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,P.jsx)("div",{className:"w-2 h-2 rounded-full ".concat("connected"===s?"bg-green-500":"bg-red-500")}),(0,P.jsx)("span",{className:"text-xs font-medium ".concat("connected"===s?"text-green-600":"text-red-600"),children:"connected"===s?"Active":"Offline"})]})]}),(0,P.jsx)("div",{className:"text-xs text-gray-600",children:"connected"===s?"All changes sync automatically across devices":"connecting"===s?"Connecting to sync service...":"Connection failed - working offline"}),r&&(0,P.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Last sync: ",r]})]}),(0,P.jsxs)("div",{className:"bg-white/30 backdrop-blur-sm rounded-lg p-3 border border-white/30",children:[(0,P.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,P.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Connected Devices (",a.length,")"]}),(0,P.jsx)("button",{onClick:e=>{e.stopPropagation(),h()},className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full hover:bg-blue-200 transition-colors",children:"Refresh"})]}),a.length>0?(0,P.jsx)("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:a.map(((e,t)=>{return(0,P.jsxs)("div",{className:"flex items-center justify-between p-2 bg-white/40 rounded-lg",children:[(0,P.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,P.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(e.isActive?"bg-green-500":"bg-gray-400")}),(0,P.jsx)("div",{className:"text-blue-600",children:(n=e,"mobile"===n.platform?(0,P.jsx)(He,{className:"w-3 h-3"}):"tablet"===n.platform?(0,P.jsx)(Ve,{className:"w-3 h-3"}):(0,P.jsx)(Ke,{className:"w-3 h-3"}))}),(0,P.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,P.jsx)("div",{className:"text-xs font-medium text-gray-700 truncate",children:e.name}),(0,P.jsxs)("div",{className:"text-xs text-gray-500 truncate",children:[e.user," \u2022 ",e.browserInfo]})]})]}),(0,P.jsx)("div",{className:"text-xs text-gray-500 whitespace-nowrap",children:I(e.lastSeen)})]},e.id);var n}))}):(0,P.jsx)("div",{className:"text-center py-4 text-xs text-gray-500",children:"No other devices connected"})]}),l.length>0&&(0,P.jsxs)("div",{className:"bg-white/30 backdrop-blur-sm rounded-lg p-3 border border-white/30",children:[(0,P.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Recent Activity"}),(0,P.jsx)("div",{className:"space-y-1 max-h-24 overflow-y-auto",children:l.slice(0,5).map(((e,t)=>(0,P.jsxs)("div",{className:"text-xs text-gray-600 flex items-center justify-between",children:[(0,P.jsxs)("div",{className:"flex items-center space-x-2 min-w-0 flex-1",children:[(0,P.jsx)("div",{className:"w-1.5 h-1.5 rounded-full flex-shrink-0 ".concat("data_update"===e.type?"bg-blue-500":"device_join"===e.type?"bg-green-500":"device_leave"===e.type?"bg-red-500":"bg-purple-500")}),(0,P.jsx)("span",{className:"truncate",children:e.description||"".concat(e.field||"Data"," ").concat("data_update"===e.type?"updated":e.type.replace("_"," "))})]}),(0,P.jsx)("span",{className:"text-gray-400 whitespace-nowrap ml-2",children:I(e.timestamp)})]},t)))})]}),(0,P.jsxs)("div",{className:"flex gap-2",children:[(0,P.jsx)("button",{onClick:e=>{e.stopPropagation(),"error"===s?i():h()},className:"flex-1 py-2 px-3 bg-gradient-to-r from-emerald-500 to-blue-500  text-white rounded-lg hover:from-emerald-600 hover:to-blue-600  transition-all duration-300 text-xs font-semibold shadow-md transform hover:scale-105",children:"error"===s?"Reconnect":"Refresh All"}),(0,P.jsx)("button",{onClick:e=>{e.stopPropagation(),u()},className:"py-2 px-3 bg-white/20 backdrop-blur-sm border border-white/30  text-gray-700 rounded-lg hover:bg-white/30  transition-all duration-300 text-xs font-semibold",title:d?"Disable sync":"Enable sync",children:d?(0,P.jsx)(Xe,{className:"w-3 h-3"}):(0,P.jsx)(Ze,{className:"w-3 h-3"})})]})]})]})]})]}),g&&(0,P.jsx)("div",{className:"fixed inset-0 z-30",onClick:()=>y(!1)})]})},et=()=>{const e=Array.from({length:30},((e,t)=>{const n=new Date;return n.setDate(n.getDate()-t),E(n)})),t={};return e.forEach((e=>{t[e]={completedTasks:[],employeeMoods:[],purchases:[],totalTasks:22,completionRate:0,totalPointsEarned:0,totalPointsSpent:0}})),t};class tt{constructor(){this.baseUrl=N.databaseURL,this.saveQueue=new Set,this.isCurrentlySaving=!1}async quickSave(e,t){console.log("\ud83d\udd25 QuickSave: ".concat(e)),console.log("\ud83d\udd0d Saving ".concat(e," to Firebase:"),this.getDataSummary(e,t));try{const n=await fetch("".concat(this.baseUrl,"/").concat(e,".json"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error("Firebase save failed: ".concat(n.status," ").concat(n.statusText));console.log("\ud83d\udd12 Critical save - waiting for confirmation: ".concat(e));const r=await fetch("".concat(this.baseUrl,"/").concat(e,".json")),s=await r.json();return console.log("\ud83d\udd0d Verified data in Firebase after save:",this.getDataSummary(e,s)),console.log("\u2705 Critical QuickSave completed: ".concat(e)),!0}catch(Mr){return console.error("\u274c QuickSave failed for ".concat(e,":"),Mr),!1}}async batchSave(e,t){if(this.isCurrentlySaving)return console.log("\u23f3 Save already in progress, queueing fields:",e),e.forEach((e=>this.saveQueue.add(e))),!0;this.isCurrentlySaving=!0,console.log("\ud83d\udd04 Batch syncing fields:",e);try{const n=e.map((async e=>{const n=this.getFieldData(e,t);return this.quickSave(e,n)})),r=(await Promise.all(n)).every((e=>!0===e));if(r){if(console.log("\u2705 Batch sync completed"),this.saveQueue.size>0){const e=Array.from(this.saveQueue);this.saveQueue.clear(),console.log("\ud83d\udce4 Processing sync queue:",e),setTimeout((()=>{this.batchSave(e,t)}),100)}}else console.error("\u274c Some batch saves failed");return r}catch(Mr){return console.error("\u274c Batch save failed:",Mr),!1}finally{this.isCurrentlySaving=!1}}getFieldData(e,t){switch(e){case"employees":return t.employees;case"tasks":return t.tasks;case"dailyData":return t.dailyData;case"completedTasks":return Array.from(t.completedTasks);case"taskAssignments":return t.taskAssignments;case"customRoles":return t.customRoles;case"prepItems":return t.prepItems;case"scheduledPreps":return t.scheduledPreps;case"prepSelections":return t.prepSelections;case"storeItems":return t.storeItems;default:return console.warn("Unknown field: ".concat(e)),null}}getDataSummary(e,t){var n,r,s;switch(e){case"employees":return{totalCount:(null===t||void 0===t?void 0:t.length)||0,sampleEmployee:(null===t||void 0===t||null===(n=t[0])||void 0===n?void 0:n.name)||"none"};case"tasks":return{totalCount:(null===t||void 0===t?void 0:t.length)||0,sampleTask:(null===t||void 0===t||null===(r=t[0])||void 0===r?void 0:r.task)||"none"};case"dailyData":return{totalDates:Object.keys(t||{}).length,latestDate:Object.keys(t||{}).sort().pop()||"none"};case"completedTasks":return{completedCount:Array.isArray(t)?t.length:(null===t||void 0===t?void 0:t.size)||0};case"taskAssignments":return{totalAssignments:Object.keys(t||{}).length};case"customRoles":return{rolesCount:(null===t||void 0===t?void 0:t.length)||0,roles:t||[]};case"prepItems":return{totalCount:(null===t||void 0===t?void 0:t.length)||0,samplePrep:(null===t||void 0===t||null===(s=t[0])||void 0===s?void 0:s.name)||"none"};case"scheduledPreps":const e=(new Date).toISOString().split("T")[0],i=(t||[]).filter((t=>t.scheduledDate===e));return{totalCount:(t||[]).length,todayCount:i.length,todayCompletedCount:i.filter((e=>e.completed)).length,sampleTodayPreps:i.slice(0,3).map((e=>({id:e.id,name:e.name,completed:e.completed,scheduledDate:e.scheduledDate})))};case"prepSelections":return{totalSelections:Object.keys(t||{}).length,sampleKeys:Object.keys(t||{}).slice(0,3)};case"storeItems":return{totalCount:(null===t||void 0===t?void 0:t.length)||0,availableCount:(t||[]).filter((e=>e.available)).length};default:return t}}async loadData(){console.log("\ud83d\udd25 Loading data from Firebase...");try{const[e,t,n,r,s,i,a,l,c,d]=await Promise.all([fetch("".concat(this.baseUrl,"/employees.json")),fetch("".concat(this.baseUrl,"/tasks.json")),fetch("".concat(this.baseUrl,"/dailyData.json")),fetch("".concat(this.baseUrl,"/completedTasks.json")),fetch("".concat(this.baseUrl,"/taskAssignments.json")),fetch("".concat(this.baseUrl,"/customRoles.json")),fetch("".concat(this.baseUrl,"/prepItems.json")),fetch("".concat(this.baseUrl,"/scheduledPreps.json")),fetch("".concat(this.baseUrl,"/prepSelections.json")),fetch("".concat(this.baseUrl,"/storeItems.json"))]),u=await e.json(),h=await t.json(),p=await n.json(),m=await r.json(),f=await s.json(),g=await i.json(),y=await a.json(),x=await l.json(),v=await c.json(),b=await d.json(),w=u?u.map((e=>o(o({},e),{},{points:void 0!==e.points?e.points:0}))):[{id:1,name:"Luka",mood:3,lastUpdated:"Not updated",role:"Cleaner",lastMoodDate:null,points:0},{id:2,name:"Safi",mood:3,lastUpdated:"Not updated",role:"Cleaner",lastMoodDate:null,points:0},{id:3,name:"Ehsan",mood:3,lastUpdated:"Not updated",role:"Cleaner",lastMoodDate:null,points:0},{id:4,name:"Oleksii",mood:3,lastUpdated:"Not updated",role:"Manager",lastMoodDate:null,points:0}],_=h?h.map((e=>o(o({},e),{},{points:void 0!==e.points?e.points:this.getDefaultTaskPoints(e.priority)}))):[{id:1,task:"Water all plants",location:"Dining Area",priority:"medium",estimatedTime:"10 min",points:5},{id:2,task:"Refill toilet paper",location:"Restroom",priority:"high",estimatedTime:"5 min",points:8},{id:3,task:"Sweep the floor",location:"Kitchen",priority:"high",estimatedTime:"15 min",points:10},{id:4,task:"Wipe refrigerator surfaces",location:"Kitchen",priority:"medium",estimatedTime:"10 min",points:7},{id:5,task:"Light glass wipe",location:"Kitchen (kylm\xe4vitrini)",priority:"low",estimatedTime:"5 min",points:3},{id:6,task:"Refill takeaway & snack boxes",location:"Kitchen",priority:"medium",estimatedTime:"10 min",points:6},{id:7,task:"Stock napkins",location:"Kitchen",priority:"medium",estimatedTime:"5 min",points:4},{id:8,task:"Wipe and disinfect tables",location:"Dining Area",priority:"high",estimatedTime:"20 min",points:12},{id:9,task:"Clean table legs",location:"Dining Area",priority:"low",estimatedTime:"15 min",points:8},{id:10,task:"Vacuum the floor",location:"Dining Area",priority:"high",estimatedTime:"20 min",points:15},{id:11,task:"Clean sink and mirror",location:"Restroom",priority:"high",estimatedTime:"10 min",points:9},{id:12,task:"Clean inside the toilet",location:"Restroom",priority:"high",estimatedTime:"15 min",points:12},{id:13,task:"Replace towel roll",location:"Restroom",priority:"medium",estimatedTime:"5 min",points:4},{id:14,task:"Final disinfection (POS, Foodora, Wolt)",location:"POS / Front",priority:"high",estimatedTime:"10 min",points:10},{id:15,task:"Sweep the floor",location:"Kitchen (Floor)",priority:"high",estimatedTime:"15 min",points:10},{id:16,task:"Mop the floor (every 2 days)",location:"Kitchen (Floor)",priority:"high",estimatedTime:"20 min",points:15},{id:17,task:"Full grill cleaning",location:"Kitchen",priority:"high",estimatedTime:"45 min",points:25},{id:18,task:"Sanitize all surfaces",location:"Kitchen",priority:"high",estimatedTime:"25 min",points:18},{id:19,task:"Wipe dishwasher surface",location:"Apu-Kitchen",priority:"medium",estimatedTime:"10 min",points:6},{id:20,task:"Replace hood filter (every 3 days)",location:"Kitchen",priority:"medium",estimatedTime:"15 min",points:8},{id:21,task:"Cover all food containers",location:"Storage",priority:"high",estimatedTime:"10 min",points:7},{id:22,task:"Organize containers",location:"Apu-Kitchen",priority:"low",estimatedTime:"15 min",points:5}],k=p?this.migrateDailyData(p):et();return console.log("\u2705 Firebase: Data loaded and migrated successfully"),console.log("\ud83d\udc65 Employees with points:",w),x&&console.log("\ud83d\udccb Loaded scheduledPreps:",this.getDataSummary("scheduledPreps",x)),{employees:w,tasks:_,dailyData:k,completedTasks:new Set(m||[]),taskAssignments:f||{},customRoles:g||["Cleaner","Manager","Supervisor"],prepItems:y||[],scheduledPreps:x||[],prepSelections:v||{},storeItems:b||[]}}catch(Mr){throw console.error("\u274c Firebase connection failed:",Mr),Mr}}getDefaultTaskPoints(e){switch(e){case"high":return 10;case"medium":default:return 5;case"low":return 3}}migrateDailyData(e){const t={};return Object.keys(e).forEach((n=>{const r=e[n];t[n]={completedTasks:r.completedTasks||[],employeeMoods:r.employeeMoods||[],purchases:r.purchases||[],totalTasks:r.totalTasks||22,completionRate:r.completionRate||0,totalPointsEarned:r.totalPointsEarned||0,totalPointsSpent:r.totalPointsSpent||0}})),t}async saveData(e){console.log("\ud83d\udd25 Saving all data to Firebase...");if(!await this.batchSave(["employees","tasks","dailyData","completedTasks","taskAssignments","customRoles","prepItems","scheduledPreps","prepSelections","storeItems"],e))throw console.error("\u274c Firebase: Some data failed to save"),new Error("Firebase save failed");console.log("\u2705 Firebase: All data saved successfully")}async saveImmediate(e,t,n){console.log("\ud83d\udd25 Immediate save triggered by ".concat(e," change"));const r=await this.quickSave(e,t);return r&&n&&"scheduledPreps"!==e&&setTimeout((()=>{console.log("\ud83d\udd04 Background sync of related fields");const t=this.getRelatedFields(e);t.length>0&&this.batchSave(t,n)}),1e3),r}getRelatedFields(e){switch(e){case"completedTasks":return["employees","dailyData","taskAssignments"];case"employees":return["dailyData"];case"taskAssignments":return["completedTasks"];case"scheduledPreps":return["prepSelections"];default:return[]}}}const nt=!1,rt=!1,st="${JSCORE_VERSION}",it=function(e,t){if(!e)throw at(t)},at=function(e){return new Error("Firebase Database ("+st+") INTERNAL ASSERT FAILED: "+e)},ot=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},lt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],i=s+1<e.length,a=i?e[s+1]:0,o=s+2<e.length,l=o?e[s+2]:0,c=t>>2,d=(3&t)<<4|a>>4;let u=(15&a)<<2|l>>6,h=63&l;o||(h=64,i||(u=64)),r.push(n[c],n[d],n[u],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ot(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],i=s<e.length?n[e.charAt(s)]:0;++s;const a=s<e.length?n[e.charAt(s)]:64;++s;const o=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==i||null==a||null==o)throw new ct;const l=t<<2|i>>4;if(r.push(l),64!==a){const e=i<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class ct extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dt=function(e){const t=ot(e);return lt.encodeByteArray(t,!0)},ut=function(e){return dt(e).replace(/\./g,"")},ht=function(e){try{return lt.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function pt(e){return mt(void 0,e)}function mt(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=mt(e[n],t[n]));return e}const ft=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,gt=()=>{try{return ft()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/hamptownControlPanel",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&ht(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},yt=e=>{const t=(e=>{var t,n;return null===(n=null===(t=gt())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},xt=()=>{var e;return null===(e=gt())||void 0===e?void 0:e.config};class vt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function bt(e){return e.endsWith(".cloudworkstations.dev")}const wt={};let _t=!1;function kt(e,t){if("undefined"===typeof window||"undefined"===typeof document||!bt(window.location.host)||wt[e]===t||wt[e]||_t)return;function n(e){return"__firebase__banner__".concat(e)}wt[e]=t;const r="__firebase__banner",s=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(wt))wt[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function i(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{_t=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),d=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=i();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(d,c),t.append(d,a,l,n),document.body.appendChild(t)}s?(a.innerText="Preview backend disconnected.",d.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(d.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function Nt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function jt(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Nt())}function Ct(){return!0===nt||!0===rt}class St extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,St.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tt.prototype.create)}}class Tt{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],s=r?function(e,t){return e.replace(Et,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",i="".concat(this.serviceName,": ").concat(s," (").concat(n,").");return new St(n,i,t)}}const Et=/\{\$([^}]+)}/g;function It(e){return JSON.parse(e)}function Pt(e){return JSON.stringify(e)}const Dt=function(e){let t={},n={},r={},s="";try{const i=e.split(".");t=It(ht(i[0])||""),n=It(ht(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch(i){}return{header:t,claims:n,data:r,signature:s}};function Mt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Rt(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function At(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Lt(e,t,n){const r={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=t.call(n,e[s],s,e));return r}function Ot(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(Ft(n)&&Ft(i)){if(!Ot(n,i))return!1}else if(n!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Ft(e){return null!==e&&"object"===typeof e}class zt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let d=0;d<16;d++)n[d]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let d=0;d<16;d++)n[d]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let d=16;d<80;d++){const e=n[d-3]^n[d-8]^n[d-14]^n[d-16];n[d]=4294967295&(e<<1|e>>>31)}let r,s,i=this.chain_[0],a=this.chain_[1],o=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let d=0;d<80;d++){d<40?d<20?(r=l^a&(o^l),s=1518500249):(r=a^o^l,s=1859775393):d<60?(r=a&o|l&(a|o),s=2400959708):(r=a^o^l,s=3395469782);const e=(i<<5|i>>>27)+r+c+s+n[d]&4294967295;c=l,l=o,o=4294967295&(a<<30|a>>>2),a=i,i=e}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const s=this.buf_;let i=this.inbuf_;for(;r<t;){if(0===i)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(s[i]=e.charCodeAt(r),++i,++r,i===this.blockSize){this.compress_(s),i=0;break}}else for(;r<t;)if(s[i]=e[r],++i,++r,i===this.blockSize){this.compress_(s),i=0;break}}this.inbuf_=i,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}function Ut(e,t){return"".concat(e," failed: ").concat(t," argument ")}const qt=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function Wt(e){return e&&e._delegate?e._delegate:e}class Bt{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ht="[DEFAULT]";class Vt{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new vt;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ht})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===Ht?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht;return this.component?this.component.multipleInstances?e:Ht:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Kt{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Vt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Yt=[];var Qt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Qt||(Qt={}));const $t={debug:Qt.DEBUG,verbose:Qt.VERBOSE,info:Qt.INFO,warn:Qt.WARN,error:Qt.ERROR,silent:Qt.SILENT},Gt=Qt.INFO,Xt={[Qt.DEBUG]:"log",[Qt.VERBOSE]:"log",[Qt.INFO]:"info",[Qt.WARN]:"warn",[Qt.ERROR]:"error"},Zt=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Xt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var s=arguments.length,i=new Array(s>2?s-2:0),a=2;a<s;a++)i[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...i)};class Jt{constructor(e){this.name=e,this._logLevel=Gt,this._logHandler=Zt,this._userLogHandler=null,Yt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?$t[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Qt.DEBUG,...t),this._logHandler(this,Qt.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Qt.VERBOSE,...t),this._logHandler(this,Qt.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Qt.INFO,...t),this._logHandler(this,Qt.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Qt.WARN,...t),this._logHandler(this,Qt.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Qt.ERROR,...t),this._logHandler(this,Qt.ERROR,...t)}}let en,tn;const nn=new WeakMap,rn=new WeakMap,sn=new WeakMap,an=new WeakMap,on=new WeakMap;let ln={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return rn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||sn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return un(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function cn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(tn||(tn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(hn(this),n),un(nn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return un(e.apply(hn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const i=e.call(hn(this),t,...r);return sn.set(i,t.sort?t.sort():[t]),un(i)}}function dn(e){return"function"===typeof e?cn(e):(e instanceof IDBTransaction&&function(e){if(rn.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)}));rn.set(e,t)}(e),t=e,(en||(en=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,ln):e);var t}function un(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(un(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)}));return t.then((t=>{t instanceof IDBCursor&&nn.set(t,e)})).catch((()=>{})),on.set(t,e),t}(e);if(an.has(e))return an.get(e);const t=dn(e);return t!==e&&(an.set(e,t),on.set(t,e)),t}const hn=e=>on.get(e);const pn=["get","getKey","getAll","getAllKeys","count"],mn=["put","add","delete","clear"],fn=new Map;function gn(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(fn.get(t))return fn.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=mn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!pn.includes(n))return;const i=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let i=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(i=i.index(o.shift())),(await Promise.all([i[n](...o),s&&t.done]))[0]};return fn.set(t,i),i}ln=(e=>o(o({},e),{},{get:(t,n,r)=>gn(t,n)||e.get(t,n,r),has:(t,n)=>!!gn(t,n)||e.has(t,n)}))(ln);class yn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const xn="@firebase/app",vn="0.13.1",bn=new Jt("@firebase/app"),wn="@firebase/app-compat",_n="@firebase/analytics-compat",kn="@firebase/analytics",Nn="@firebase/app-check-compat",jn="@firebase/app-check",Cn="@firebase/auth",Sn="@firebase/auth-compat",Tn="@firebase/database",En="@firebase/data-connect",In="@firebase/database-compat",Pn="@firebase/functions",Dn="@firebase/functions-compat",Mn="@firebase/installations",Rn="@firebase/installations-compat",An="@firebase/messaging",Ln="@firebase/messaging-compat",On="@firebase/performance",Fn="@firebase/performance-compat",zn="@firebase/remote-config",Un="@firebase/remote-config-compat",qn="@firebase/storage",Wn="@firebase/storage-compat",Bn="@firebase/firestore",Hn="@firebase/ai",Vn="@firebase/firestore-compat",Kn="firebase",Yn="[DEFAULT]",Qn={[xn]:"fire-core",[wn]:"fire-core-compat",[kn]:"fire-analytics",[_n]:"fire-analytics-compat",[jn]:"fire-app-check",[Nn]:"fire-app-check-compat",[Cn]:"fire-auth",[Sn]:"fire-auth-compat",[Tn]:"fire-rtdb",[En]:"fire-data-connect",[In]:"fire-rtdb-compat",[Pn]:"fire-fn",[Dn]:"fire-fn-compat",[Mn]:"fire-iid",[Rn]:"fire-iid-compat",[An]:"fire-fcm",[Ln]:"fire-fcm-compat",[On]:"fire-perf",[Fn]:"fire-perf-compat",[zn]:"fire-rc",[Un]:"fire-rc-compat",[qn]:"fire-gcs",[Wn]:"fire-gcs-compat",[Bn]:"fire-fst",[Vn]:"fire-fst-compat",[Hn]:"fire-vertex","fire-js":"fire-js",[Kn]:"fire-js-all"},$n=new Map,Gn=new Map,Xn=new Map;function Zn(e,t){try{e.container.addComponent(t)}catch(n){bn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Jn(e){const t=e.name;if(Xn.has(t))return bn.debug("There were multiple attempts to register component ".concat(t,".")),!1;Xn.set(t,e);for(const n of $n.values())Zn(n,e);for(const n of Gn.values())Zn(n,e);return!0}function er(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const tr=new Tt("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class nr{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Bt("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw tr.create("app-deleted",{appName:this._name})}}function rr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Yn,automaticDataCollectionEnabled:!0},t),s=r.name;if("string"!==typeof s||!s)throw tr.create("bad-app-name",{appName:String(s)});if(n||(n=xt()),!n)throw tr.create("no-options");const i=$n.get(s);if(i){if(Ot(n,i.options)&&Ot(r,i.config))return i;throw tr.create("duplicate-app",{appName:s})}const a=new Kt(s);for(const l of Xn.values())a.addComponent(l);const o=new nr(n,r,a);return $n.set(s,o),o}function sr(e,t,n){var r;let s=null!==(r=Qn[e])&&void 0!==r?r:e;n&&(s+="-".concat(n));const i=s.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const e=['Unable to register library "'.concat(s,'" with version "').concat(t,'":')];return i&&e.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),i&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void bn.warn(e.join(" "))}Jn(new Bt("".concat(s,"-version"),(()=>({library:s,version:t})),"VERSION"))}const ir="firebase-heartbeat-store";let ar=null;function or(){return ar||(ar=function(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=un(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(un(a.result),e.oldVersion,e.newVersion,un(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),o.then((e=>{i&&e.addEventListener("close",(()=>i())),s&&e.addEventListener("versionchange",(e=>s(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(ir)}catch(n){console.warn(n)}}}).catch((e=>{throw tr.create("idb-open",{originalErrorMessage:e.message})}))),ar}async function lr(e,t){try{const n=(await or()).transaction(ir,"readwrite"),r=n.objectStore(ir);await r.put(t,cr(e)),await n.done}catch(n){if(n instanceof St)bn.warn(n.message);else{const e=tr.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});bn.warn(e.message)}}}function cr(e){return"".concat(e.name,"!").concat(e.options.appId)}class dr{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new hr(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ur();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){bn.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ur(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find((e=>e.agent===s.agent));if(e){if(e.dates.push(s.date),pr(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),pr(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=ut(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return bn.warn(t),""}}}function ur(){return(new Date).toISOString().substring(0,10)}class hr{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"===typeof indexedDB}catch(e){return!1}}()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(Mr){t(Mr)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await or()).transaction(ir),n=await t.objectStore(ir).get(cr(e));return await t.done,n}catch(t){if(t instanceof St)bn.warn(t.message);else{const e=tr.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});bn.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return lr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return lr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function pr(e){return ut(JSON.stringify({version:2,heartbeats:e})).length}var mr;mr="",Jn(new Bt("platform-logger",(e=>new yn(e)),"PRIVATE")),Jn(new Bt("heartbeat",(e=>new dr(e)),"PRIVATE")),sr(xn,vn,mr),sr(xn,vn,"esm2017"),sr("fire-js","");const fr="@firebase/database",gr="1.0.19";let yr="";function xr(e){yr=e}class vr{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Pt(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:It(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class br{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return Mt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const wr=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new vr(t)}}catch(t){}return new br},_r=wr("localStorage"),kr=wr("sessionStorage"),Nr=new Jt("@firebase/database"),jr=function(){let e=1;return function(){return e++}}(),Cr=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);if(s>=55296&&s<=56319){const t=s-55296;r++,it(r<e.length,"Surrogate pair missing trail surrogate."),s=65536+(t<<10)+(e.charCodeAt(r)-56320)}s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):s<65536?(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t}(e),n=new zt;n.update(t);const r=n.digest();return lt.encodeByteArray(r)},Sr=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=Sr.apply(null,n):e+="object"===typeof n?Pt(n):n,e+=" "}return e};let Tr=null,Er=!0;const Ir=function(e,t){it(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(Nr.logLevel=Qt.VERBOSE,Tr=Nr.log.bind(Nr),t&&kr.set("logging_enabled",!0)):"function"===typeof e?Tr=e:(Tr=null,kr.remove("logging_enabled"))},Pr=function(){if(!0===Er&&(Er=!1,null===Tr&&!0===kr.get("logging_enabled")&&Ir(!0)),Tr){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Sr.apply(null,t);Tr(r)}},Dr=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Pr(e,...n)}},Mr=function(){const e="FIREBASE INTERNAL ERROR: "+Sr(...arguments);Nr.error(e)},Rr=function(){const e="FIREBASE FATAL ERROR: ".concat(Sr(...arguments));throw Nr.error(e),new Error(e)},Ar=function(){const e="FIREBASE WARNING: "+Sr(...arguments);Nr.warn(e)},Lr=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Or="[MIN_NAME]",Fr="[MAX_NAME]",zr=function(e,t){if(e===t)return 0;if(e===Or||t===Fr)return-1;if(t===Or||e===Fr)return 1;{const n=Yr(e),r=Yr(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},Ur=function(e,t){return e===t?0:e<t?-1:1},qr=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Pt(t))},Wr=function(e){if("object"!==typeof e||null===e)return Pt(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=Pt(t[r]),n+=":",n+=Wr(e[t[r]]);return n+="}",n},Br=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let s=0;s<n;s+=t)s+t>n?r.push(e.substring(s,n)):r.push(e.substring(s,s+t));return r};function Hr(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const Vr=function(e){it(!Lr(e),"Invalid JSON number");const t=1023;let n,r,s,i,a;0===e?(r=0,s=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(i=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=i+t,s=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(r=0,s=Math.round(e/Math.pow(2,-1074))));const o=[];for(a=52;a;a-=1)o.push(s%2?1:0),s=Math.floor(s/2);for(a=11;a;a-=1)o.push(r%2?1:0),r=Math.floor(r/2);o.push(n?1:0),o.reverse();const l=o.join("");let c="";for(a=0;a<64;a+=8){let e=parseInt(l.substr(a,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const Kr=new RegExp("^-?(0*)\\d{1,10}$"),Yr=function(e){if(Kr.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Qr=function(e){try{e()}catch(t){setTimeout((()=>{const e=t.stack||"";throw Ar("Exception was thrown by user callback.",e),t}),Math.floor(0))}},$r=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class Gr{constructor(e,t){var n;this.appCheckProvider=t,this.appName=e.name,null!==(n=e)&&void 0!==n&&void 0!==n.settings&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){Ar('Provided AppCheck credentials for the app named "'.concat(this.appName,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}class Xr{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(Pr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ar(e)}}class Zr{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Zr.OWNER="owner";const Jr="5",es=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ts="ac",ns="websocket",rs="long_polling";class ss{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=i,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=o,this.emulatorOptions=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=_r.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&_r.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}function is(e,t,n){let r;if(it("string"===typeof t,"typeof type must == string"),it("object"===typeof n,"typeof params must == object"),t===ns)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==rs)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const s=[];return Hr(n,((e,t)=>{s.push(e+"="+t)})),r+s.join("&")}class as{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Mt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return pt(this.counters_)}}const os={},ls={};function cs(e){const t=e.toString();return os[t]||(os[t]=new as),os[t]}class ds{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&Qr((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const us="start";class hs{constructor(e,t,n,r,s,i,a){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=s,this.transportSessionId=i,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Dr(e),this.stats_=cs(t),this.urlFn=e=>(this.appCheckToken&&(e[ts]=this.appCheckToken),is(t,rs,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new ds(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Ct()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new ps((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[s,i,a,o,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,s===us)n.id=i,n.password=a;else{if("close"!==s)throw new Error("Unrecognized command received: "+s);i?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(i,(()=>{n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[s,i]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(s,i)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[us]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=Jr,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[ts]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&es.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){hs.forceAllow_=!0}static forceDisallow(){hs.forceDisallow_=!0}static isAvailable(){return!Ct()&&(!!hs.forceAllow_||!hs.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Pt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=dt(t),r=Br(n,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Ct())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Pt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class ps{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Ct())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=jr(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=ps.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(s){Pr("frame writing exception"),s.stack&&Pr(s.stack),Pr(s)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Pr("No IE domain setting required")}catch(t){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){Ct()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{Pr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(n){}}),Math.floor(1))}}let ms=null;"undefined"!==typeof MozWebSocket?ms=MozWebSocket:"undefined"!==typeof WebSocket&&(ms=WebSocket);class fs{constructor(e,t,n,r,s,i,a){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Dr(this.connId),this.stats_=cs(t),this.connURL=fs.connectionURL_(t,i,a,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,s){const i={};return i.v=Jr,!Ct()&&"undefined"!==typeof location&&location.hostname&&es.test(location.hostname)&&(i.r="f"),t&&(i.s=t),n&&(i.ls=n),r&&(i[ts]=r),s&&(i.p=s),is(e,ns,i)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,_r.set("previous_websocket_failure",!0);try{let e;if(Ct()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":"Firebase/".concat(Jr,"/").concat(yr,"/").concat(process.platform,"/").concat(t),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"/hamptownControlPanel",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new ms(this.connURL,[],e)}catch(n){this.log_("Error instantiating WebSocket.");const e=n.message||n.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){fs.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==ms&&!fs.forceDisallow_}static previouslyFailed(){return _r.isInMemoryStorage||!0===_r.get("previous_websocket_failure")}markConnectionHealthy(){_r.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=It(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(it(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=Pt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Br(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}fs.responsesRequiredToBeHealthy=2,fs.healthyTimeout=3e4;class gs{static get ALL_TRANSPORTS(){return[hs,fs]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=fs&&fs.isAvailable();let n=t&&!fs.previouslyFailed();if(e.webSocketOnly&&(t||Ar("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[fs];else{const e=this.transports_=[];for(const t of gs.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);gs.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}gs.globalTransportInitialized_=!1;class ys{constructor(e,t,n,r,s,i,a,o,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=i,this.onReady_=a,this.onDisconnect_=o,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Dr("c:"+this.id+":"),this.transportManager_=new gs(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=$r((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=qr("t",e),n=qr("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=qr("t",e),n=qr("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=qr("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Mr("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Mr("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Jr!==n&&Ar("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),$r((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):$r((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(_r.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class xs{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class vs{constructor(e){this.allowedEvents_=e,this.listeners_={},it(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<s.length;e++)s[e].callback.apply(s[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===t&&(!n||n===r[s].context))return void r.splice(s,1)}validateEventType_(e){it(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class bs extends vs{static getInstance(){return new bs}constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||jt()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}getInitialEvent(e){return it("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class ws{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function _s(){return new ws("")}function ks(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Ns(e){return e.pieces_.length-e.pieceNum_}function js(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new ws(e.pieces_,t)}function Cs(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Ss(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Ts(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new ws(t,0)}function Es(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof ws)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new ws(n,0)}function Is(e){return e.pieceNum_>=e.pieces_.length}function Ps(e,t){const n=ks(e),r=ks(t);if(null===n)return t;if(n===r)return Ps(js(e),js(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Ds(e,t){if(Ns(e)!==Ns(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Ms(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(Ns(e)>Ns(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class Rs{constructor(e,t){this.errorPrefix_=t,this.parts_=Ss(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=qt(this.parts_[n]);As(this)}}function As(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ls(e))}function Ls(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class Os extends vs{static getInstance(){return new Os}constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}getInitialEvent(e){return it("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Fs=1e3;class zs extends xs{constructor(e,t,n,r,s,i,a,o){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=s,this.authTokenProvider_=i,this.appCheckTokenProvider_=a,this.authOverride_=o,this.id=zs.nextPersistentConnectionId_++,this.log_=Dr("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Fs,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,o&&!Ct())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Os.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&bs.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,s={r:r,a:e,b:t};this.log_(Pt(s)),it(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new vt,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const s=e._queryIdentifier,i=e._path.toString();this.log_("Listen called for "+i+" "+s),this.listens.has(i)||this.listens.set(i,new Map),it(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),it(!this.listens.get(i).has(s),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(i).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const s={p:n};e.tag&&(s.q=t._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest("q",s,(s=>{const i=s.d,a=s.s;zs.warnOnListenWarnings_(i,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",s),"ok"!==a&&this.removeListen_(n,r),e.onComplete&&e.onComplete(a,i))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&Mt(e,"w")){const n=Rt(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();Ar("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(e," at ")+"".concat(n," to your security rules for better performance."))}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=Dt(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=Dt(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),it(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const s={p:e};r&&(s.q=n,s.t=r),this.sendRequest("n",s)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const s={p:t,d:n};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,s){this.initConnection_();const i={p:t,d:n};void 0!==s&&(i.h=s),this.outstandingPuts_.push({action:e,request:i,onComplete:r}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Pt(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Mr("Unrecognized action received from server: "+Pt(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){it(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Fs,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Fs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Fs),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=Math.max(0,(new Date).getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+zs.nextConnectionId_++,s=this.lastSessionId;let i=!1,a=null;const o=function(){a?a.close():(i=!0,n())},l=function(e){it(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(e)};this.realtime_={close:o,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[o,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);i?Pr("getToken() completed but was canceled"):(Pr("getToken() completed. Creating connection."),this.authToken_=o&&o.accessToken,this.appCheckToken_=l&&l.token,a=new ys(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{Ar(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),s))}catch(Mr){this.log_("Failed to get token: "+Mr),i||(this.repoInfo_.nodeAdmin&&Ar(Mr),o())}}}interrupt(e){Pr("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Pr("Resuming connection for reason: "+e),delete this.interruptReasons_[e],At(this.interruptReasons_)&&(this.reconnectDelay_=Fs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>Wr(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new ws(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){Pr("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Pr("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";Ct()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+yr.replace(/\./g,"-")]=1,jt()?e["framework.cordova"]=1:"object"===typeof navigator&&"ReactNative"===navigator.product&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=bs.getInstance().currentlyOnline();return At(this.interruptReasons_)&&e}}zs.nextPersistentConnectionId_=0,zs.nextConnectionId_=0;class Us{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Us(e,t)}}class qs{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new Us(Or,e),r=new Us(Or,t);return 0!==this.compare(n,r)}minPost(){return Us.MIN}}let Ws;class Bs extends qs{static get __EMPTY_NODE(){return Ws}static set __EMPTY_NODE(e){Ws=e}compare(e,t){return zr(e.name,t.name)}isDefinedOn(e){throw at("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Us.MIN}maxPost(){return new Us(Fr,Ws)}makePost(e,t){return it("string"===typeof e,"KeyIndex indexValue must always be a string."),new Us(e,Ws)}toString(){return".key"}}const Hs=new Bs;class Vs{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse_?e.left:e.right;else{if(0===i){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ks{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:Ks.RED,this.left=null!=r?r:Ys.EMPTY_NODE,this.right=null!=s?s:Ys.EMPTY_NODE}copy(e,t,n,r,s){return new Ks(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ys.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Ys.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ks.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ks.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ks.RED=!0,Ks.BLACK=!1;class Ys{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ys.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new Ys(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ks.BLACK,null,null))}remove(e){return new Ys(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ks.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Vs(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Vs(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Vs(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Vs(this.root_,null,this.comparator_,!0,e)}}function Qs(e,t){return zr(e.name,t.name)}function $s(e,t){return zr(e,t)}let Gs;Ys.EMPTY_NODE=new class{copy(e,t,n,r,s){return this}insert(e,t,n){return new Ks(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Xs=function(e){return"number"===typeof e?"number:"+Vr(e):"string:"+e},Zs=function(e){if(e.isLeafNode()){const t=e.val();it("string"===typeof t||"number"===typeof t||"object"===typeof t&&Mt(t,".sv"),"Priority must be a string or number.")}else it(e===Gs||e.isEmpty(),"priority of unexpected type.");it(e===Gs||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Js,ei,ti;class ni{static set __childrenNodeConstructor(e){Js=e}static get __childrenNodeConstructor(){return Js}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ni.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,it(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Zs(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ni(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:ni.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Is(e)?this:".priority"===ks(e)?this.priorityNode_:ni.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:ni.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=ks(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(it(".priority"!==n||1===Ns(e),".priority must be the last token in a path"),this.updateImmediateChild(n,ni.__childrenNodeConstructor.EMPTY_NODE.updateChild(js(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Xs(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?Vr(this.value_):this.value_,this.lazyHash_=Cr(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ni.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ni.__childrenNodeConstructor?-1:(it(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=ni.VALUE_TYPE_ORDER.indexOf(t),s=ni.VALUE_TYPE_ORDER.indexOf(n);return it(r>=0,"Unknown leaf type: "+t),it(s>=0,"Unknown leaf type: "+n),r===s?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}ni.VALUE_TYPE_ORDER=["object","boolean","number","string"];const ri=new class extends qs{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),s=n.compareTo(r);return 0===s?zr(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Us.MIN}maxPost(){return new Us(Fr,new ni("[PRIORITY-POST]",ti))}makePost(e,t){const n=ei(e);return new Us(t,new ni("[PRIORITY-POST]",n))}toString(){return".priority"}},si=Math.log(2);class ii{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/si,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ai=function(e,t,n,r){e.sort(t);const s=function(t,r){const i=r-t;let a,o;if(0===i)return null;if(1===i)return a=e[t],o=n?n(a):a,new Ks(o,a.node,Ks.BLACK,null,null);{const l=parseInt(i/2,10)+t,c=s(t,l),d=s(l+1,r);return a=e[l],o=n?n(a):a,new Ks(o,a.node,Ks.BLACK,c,d)}},i=function(t){let r=null,i=null,a=e.length;const o=function(t,r){const i=a-t,o=a;a-=t;const c=s(i+1,o),d=e[i],u=n?n(d):d;l(new Ks(u,d.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(i=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?o(r,Ks.BLACK):(o(r,Ks.BLACK),o(r,Ks.RED))}return i}(new ii(e.length));return new Ys(r||t,i)};let oi;const li={};class ci{static get Default(){return it(li&&ri,"ChildrenNode.ts has not been loaded"),oi=oi||new ci({".priority":li},{".priority":ri}),oi}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=Rt(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ys?t:null}hasIndex(e){return Mt(this.indexSet_,e.toString())}addIndex(e,t){it(e!==Hs,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const s=t.getIterator(Us.Wrap);let i,a=s.getNext();for(;a;)r=r||e.isDefinedOn(a.node),n.push(a),a=s.getNext();i=r?ai(n,e.getCompare()):li;const o=e.toString(),l=Object.assign({},this.indexSet_);l[o]=e;const c=Object.assign({},this.indexes_);return c[o]=i,new ci(c,l)}addToIndexes(e,t){const n=Lt(this.indexes_,((n,r)=>{const s=Rt(this.indexSet_,r);if(it(s,"Missing index implementation for "+r),n===li){if(s.isDefinedOn(e.node)){const n=[],r=t.getIterator(Us.Wrap);let i=r.getNext();for(;i;)i.name!==e.name&&n.push(i),i=r.getNext();return n.push(e),ai(n,s.getCompare())}return li}{const r=t.get(e.name);let s=n;return r&&(s=s.remove(new Us(e.name,r))),s.insert(e,e.node)}}));return new ci(n,this.indexSet_)}removeFromIndexes(e,t){const n=Lt(this.indexes_,(n=>{if(n===li)return n;{const r=t.get(e.name);return r?n.remove(new Us(e.name,r)):n}}));return new ci(n,this.indexSet_)}}let di;class ui{static get EMPTY_NODE(){return di||(di=new ui(new Ys($s),null,ci.Default))}constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Zs(this.priorityNode_),this.children_.isEmpty()&&it(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||di}updatePriority(e){return this.children_.isEmpty()?this:new ui(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?di:t}}getChild(e){const t=ks(e);return null===t?this:this.getImmediateChild(t).getChild(js(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(it(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new Us(e,t);let r,s;t.isEmpty()?(r=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),s=this.indexMap_.addToIndexes(n,this.children_));const i=r.isEmpty()?di:this.priorityNode_;return new ui(r,i,s)}}updateChild(e,t){const n=ks(e);if(null===n)return t;{it(".priority"!==ks(e)||1===Ns(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(js(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,s=!0;if(this.forEachChild(ri,((i,a)=>{t[i]=a.val(e),n++,s&&ui.INTEGER_REGEXP_.test(i)?r=Math.max(r,Number(i)):s=!1})),!e&&s&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Xs(this.getPriority().val())+":"),this.forEachChild(ri,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":Cr(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new Us(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Us(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Us(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,Us.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,Us.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===hi?-1:0}withIndex(e){if(e===Hs||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new ui(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Hs||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(ri),n=t.getIterator(ri);let r=e.getNext(),s=n.getNext();for(;r&&s;){if(r.name!==s.name||!r.node.equals(s.node))return!1;r=e.getNext(),s=n.getNext()}return null===r&&null===s}return!1}return!1}}resolveIndex_(e){return e===Hs?null:this.indexMap_.get(e.toString())}}ui.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const hi=new class extends ui{constructor(){super(new Ys($s),ui.EMPTY_NODE,ci.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ui.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Us,{MIN:{value:new Us(Or,ui.EMPTY_NODE)},MAX:{value:new Us(Fr,hi)}}),Bs.__EMPTY_NODE=ui.EMPTY_NODE,ni.__childrenNodeConstructor=ui,Gs=hi,function(e){ti=e}(hi);function pi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return ui.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),it(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new ni(e,pi(t))}if(e instanceof Array){let n=ui.EMPTY_NODE;return Hr(e,((t,r)=>{if(Mt(e,t)&&"."!==t.substring(0,1)){const e=pi(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(pi(t))}{const n=[];let r=!1;if(Hr(e,((e,t)=>{if("."!==e.substring(0,1)){const s=pi(t);s.isEmpty()||(r=r||!s.getPriority().isEmpty(),n.push(new Us(e,s)))}})),0===n.length)return ui.EMPTY_NODE;const s=ai(n,Qs,(e=>e.name),$s);if(r){const e=ai(n,ri.getCompare());return new ui(s,pi(t),new ci({".priority":e},{".priority":ri}))}return new ui(s,pi(t),ci.Default)}}!function(e){ei=e}(pi);class mi extends qs{constructor(e){super(),this.indexPath_=e,it(!Is(e)&&".priority"!==ks(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),s=n.compareTo(r);return 0===s?zr(e.name,t.name):s}makePost(e,t){const n=pi(e),r=ui.EMPTY_NODE.updateChild(this.indexPath_,n);return new Us(t,r)}maxPost(){const e=ui.EMPTY_NODE.updateChild(this.indexPath_,hi);return new Us(Fr,e)}toString(){return Ss(this.indexPath_,0).join("/")}}const fi=new class extends qs{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?zr(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Us.MIN}maxPost(){return Us.MAX}makePost(e,t){const n=pi(e);return new Us(t,n)}toString(){return".value"}};function gi(e){return{type:"value",snapshotNode:e}}function yi(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function xi(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function vi(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class bi{constructor(e){this.index_=e}updateChild(e,t,n,r,s,i){it(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?e:(null!=i&&(n.isEmpty()?e.hasChild(t)?i.trackChildChange(xi(t,a)):it(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?i.trackChildChange(yi(t,n)):i.trackChildChange(vi(t,n,a))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(ri,((e,r)=>{t.hasChild(e)||n.trackChildChange(xi(e,r))})),t.isLeafNode()||t.forEachChild(ri,((t,r)=>{if(e.hasChild(t)){const s=e.getImmediateChild(t);s.equals(r)||n.trackChildChange(vi(t,r,s))}else n.trackChildChange(yi(t,r))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?ui.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class wi{constructor(e){this.indexedFilter_=new bi(e.getIndex()),this.index_=e.getIndex(),this.startPost_=wi.getStartPost_(e),this.endPost_=wi.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,s,i){return this.matches(new Us(t,n))||(n=ui.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,s,i)}updateFullNode(e,t,n){t.isLeafNode()&&(t=ui.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(ui.EMPTY_NODE);const s=this;return t.forEachChild(ri,((e,t)=>{s.matches(new Us(e,t))||(r=r.updateImmediateChild(e,ui.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class _i{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new wi(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,s,i){return this.rangedFilter_.matches(new Us(t,n))||(n=ui.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,s,i):this.fullLimitUpdateChild_(e,t,n,s,i)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=ui.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=ui.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority(ui.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,ui.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,s){let i;if(this.reverse_){const e=this.index_.getCompare();i=(t,n)=>e(n,t)}else i=this.index_.getCompare();const a=e;it(a.numChildren()===this.limit_,"");const o=new Us(t,n),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),c=this.rangedFilter_.matches(o);if(a.hasChild(t)){const e=a.getImmediateChild(t);let d=r.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=d&&(d.name===t||a.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);const u=null==d?1:i(d,o);if(c&&!n.isEmpty()&&u>=0)return null!=s&&s.trackChildChange(vi(t,n,e)),a.updateImmediateChild(t,n);{null!=s&&s.trackChildChange(xi(t,e));const n=a.updateImmediateChild(t,ui.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=s&&s.trackChildChange(yi(d.name,d.node)),n.updateImmediateChild(d.name,d.node)):n}}return n.isEmpty()?e:c&&i(l,o)>=0?(null!=s&&(s.trackChildChange(xi(l.name,l.node)),s.trackChildChange(yi(t,n))),a.updateImmediateChild(t,n).updateImmediateChild(l.name,ui.EMPTY_NODE)):e}}class ki{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ri}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return it(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return it(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Or}hasEnd(){return this.endSet_}getIndexEndValue(){return it(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return it(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Fr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return it(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ri}copy(){const e=new ki;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Ni(e){const t={};if(e.isDefault())return t;let n;if(e.index_===ri?n="$priority":e.index_===fi?n="$value":e.index_===Hs?n="$key":(it(e.index_ instanceof mi,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Pt(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=Pt(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+Pt(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=Pt(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+Pt(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function ji(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==ri&&(t.i=e.index_.toString()),t}class Ci extends xs{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(it(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=Dr("p:rest:"),this.listens_={}}listen(e,t,n,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const i=Ci.getListenId_(e,n),a={};this.listens_[i]=a;const o=Ni(e._queryParams);this.restRequest_(s+".json",o,((e,t)=>{let o=t;if(404===e&&(o=null,e=null),null===e&&this.onDataUpdate_(s,o,!1,n),Rt(this.listens_,i)===a){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=Ci.getListenId_(e,t);delete this.listens_[n]}get(e){const t=Ni(e._queryParams),n=e._path.toString(),r=new vt;return this.restRequest_(n+".json",t,((e,t)=>{let s=t;404===e&&(s=null,e=null),null===e?(this.onDataUpdate_(n,s,!1,null),r.resolve(s)):r.reject(new Error(s))})),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((r=>{let[s,i]=r;s&&s.accessToken&&(t.auth=s.accessToken),i&&i.token&&(t.ac=i.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+function(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}(t);this.log_("Sending REST request for "+a);const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(n&&4===o.readyState){this.log_("REST Response for "+a+" received. status:",o.status,"response:",o.responseText);let t=null;if(o.status>=200&&o.status<300){try{t=It(o.responseText)}catch(e){Ar("Failed to parse JSON response for "+a+": "+o.responseText)}n(null,t)}else 401!==o.status&&404!==o.status&&Ar("Got unsuccessful REST response for "+a+" Status: "+o.status),n(o.status);n=null}},o.open("GET",a,!0),o.send()}))}}class Si{constructor(){this.rootNode_=ui.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Ti(){return{value:null,children:new Map}}function Ei(e,t,n){if(Is(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=ks(t);e.children.has(r)||e.children.set(r,Ti());Ei(e.children.get(r),t=js(t),n)}}function Ii(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{Ii(r,new ws(t.toString()+"/"+e),n)}))}class Pi{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Hr(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class Di{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Pi(e);const n=1e4+2e4*Math.random();$r(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;Hr(e,((e,r)=>{r>0&&Mt(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),$r(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Mi;function Ri(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Mi||(Mi={}));class Ai{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Mi.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Is(this.path)){if(null!=this.affectedTree.value)return it(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new ws(e));return new Ai(_s(),t,this.revert)}}return it(ks(this.path)===e,"operationForChild called for unrelated child."),new Ai(js(this.path),this.affectedTree,this.revert)}}class Li{constructor(e,t){this.source=e,this.path=t,this.type=Mi.LISTEN_COMPLETE}operationForChild(e){return Is(this.path)?new Li(this.source,_s()):new Li(this.source,js(this.path))}}class Oi{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Mi.OVERWRITE}operationForChild(e){return Is(this.path)?new Oi(this.source,_s(),this.snap.getImmediateChild(e)):new Oi(this.source,js(this.path),this.snap)}}class Fi{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Mi.MERGE}operationForChild(e){if(Is(this.path)){const t=this.children.subtree(new ws(e));return t.isEmpty()?null:t.value?new Oi(this.source,_s(),t.value):new Fi(this.source,_s(),t)}return it(ks(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Fi(this.source,js(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class zi{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Is(e))return this.isFullyInitialized()&&!this.filtered_;const t=ks(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Ui{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function qi(e,t,n,r,s,i){const a=r.filter((e=>e.type===n));a.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw at("Should only compare child_ events.");const r=new Us(t.childName,t.snapshotNode),s=new Us(n.childName,n.snapshotNode);return e.index_.compare(r,s)}(e,t,n))),a.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,i);s.forEach((s=>{s.respondsTo(n.type)&&t.push(s.createEvent(r,e.query_))}))}))}function Wi(e,t){return{eventCache:e,serverCache:t}}function Bi(e,t,n,r){return Wi(new zi(t,n,r),e.serverCache)}function Hi(e,t,n,r){return Wi(e.eventCache,new zi(t,n,r))}function Vi(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Ki(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let Yi;class Qi{static fromObject(e){let t=new Qi(null);return Hr(e,((e,n)=>{t=t.set(new ws(e),n)})),t}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(Yi||(Yi=new Ys(Ur)),Yi);this.value=e,this.children=t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:_s(),value:this.value};if(Is(e))return null;{const n=ks(e),r=this.children.get(n);if(null!==r){const s=r.findRootMostMatchingPathAndValue(js(e),t);if(null!=s){return{path:Es(new ws(n),s.path),value:s.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(Is(e))return this;{const t=ks(e),n=this.children.get(t);return null!==n?n.subtree(js(e)):new Qi(null)}}set(e,t){if(Is(e))return new Qi(t,this.children);{const n=ks(e),r=(this.children.get(n)||new Qi(null)).set(js(e),t),s=this.children.insert(n,r);return new Qi(this.value,s)}}remove(e){if(Is(e))return this.children.isEmpty()?new Qi(null):new Qi(null,this.children);{const t=ks(e),n=this.children.get(t);if(n){const r=n.remove(js(e));let s;return s=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&s.isEmpty()?new Qi(null):new Qi(this.value,s)}return this}}get(e){if(Is(e))return this.value;{const t=ks(e),n=this.children.get(t);return n?n.get(js(e)):null}}setTree(e,t){if(Is(e))return t;{const n=ks(e),r=(this.children.get(n)||new Qi(null)).setTree(js(e),t);let s;return s=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new Qi(this.value,s)}}fold(e){return this.fold_(_s(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,s)=>{n[r]=s.fold_(Es(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,_s(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(Is(e))return null;{const r=ks(e),s=this.children.get(r);return s?s.findOnPath_(js(e),Es(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,_s(),t)}foreachOnPath_(e,t,n){if(Is(e))return this;{this.value&&n(t,this.value);const r=ks(e),s=this.children.get(r);return s?s.foreachOnPath_(js(e),Es(t,r),n):new Qi(null)}}foreach(e){this.foreach_(_s(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(Es(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class $i{constructor(e){this.writeTree_=e}static empty(){return new $i(new Qi(null))}}function Gi(e,t,n){if(Is(t))return new $i(new Qi(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const s=r.path;let i=r.value;const a=Ps(s,t);return i=i.updateChild(a,n),new $i(e.writeTree_.set(s,i))}{const r=new Qi(n),s=e.writeTree_.setTree(t,r);return new $i(s)}}}function Xi(e,t,n){let r=e;return Hr(n,((e,n)=>{r=Gi(r,Es(t,e),n)})),r}function Zi(e,t){if(Is(t))return $i.empty();{const n=e.writeTree_.setTree(t,new Qi(null));return new $i(n)}}function Ji(e,t){return null!=ea(e,t)}function ea(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Ps(n.path,t)):null}function ta(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(ri,((e,n)=>{t.push(new Us(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new Us(e,n.value))})),t}function na(e,t){if(Is(t))return e;{const n=ea(e,t);return new $i(null!=n?new Qi(n):e.writeTree_.subtree(t))}}function ra(e){return e.writeTree_.isEmpty()}function sa(e,t){return ia(_s(),e.writeTree_,t)}function ia(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,s)=>{".priority"===t?(it(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):n=ia(Es(e,t),s,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(Es(e,".priority"),r)),n}}function aa(e,t){return va(t,e)}function oa(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));it(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let s=r.visible,i=!1,a=e.allWrites.length-1;for(;s&&a>=0;){const t=e.allWrites[a];t.visible&&(a>=n&&la(t,r.path)?s=!1:Ms(r.path,t.path)&&(i=!0)),a--}if(s){if(i)return function(e){e.visibleWrites=da(e.allWrites,ca,_s()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=Zi(e.visibleWrites,r.path);else{Hr(r.children,(t=>{e.visibleWrites=Zi(e.visibleWrites,Es(r.path,t))}))}return!0}return!1}function la(e,t){if(e.snap)return Ms(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Ms(Es(e.path,n),t))return!0;return!1}function ca(e){return e.visible}function da(e,t,n){let r=$i.empty();for(let s=0;s<e.length;++s){const i=e[s];if(t(i)){const e=i.path;let t;if(i.snap)Ms(n,e)?(t=Ps(n,e),r=Gi(r,t,i.snap)):Ms(e,n)&&(t=Ps(e,n),r=Gi(r,_s(),i.snap.getChild(t)));else{if(!i.children)throw at("WriteRecord should have .snap or .children");if(Ms(n,e))t=Ps(n,e),r=Xi(r,t,i.children);else if(Ms(e,n))if(t=Ps(e,n),Is(t))r=Xi(r,_s(),i.children);else{const e=Rt(i.children,ks(t));if(e){const n=e.getChild(js(t));r=Gi(r,_s(),n)}}}}}return r}function ua(e,t,n,r,s){if(r||s){const i=na(e.visibleWrites,t);if(!s&&ra(i))return n;if(s||null!=n||Ji(i,_s())){const i=function(e){return(e.visible||s)&&(!r||!~r.indexOf(e.writeId))&&(Ms(e.path,t)||Ms(t,e.path))};return sa(da(e.allWrites,i,t),n||ui.EMPTY_NODE)}return null}{const r=ea(e.visibleWrites,t);if(null!=r)return r;{const r=na(e.visibleWrites,t);if(ra(r))return n;if(null!=n||Ji(r,_s())){return sa(r,n||ui.EMPTY_NODE)}return null}}}function ha(e,t,n,r){return ua(e.writeTree,e.treePath,t,n,r)}function pa(e,t){return function(e,t,n){let r=ui.EMPTY_NODE;const s=ea(e.visibleWrites,t);if(s)return s.isLeafNode()||s.forEachChild(ri,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const s=na(e.visibleWrites,t);return n.forEachChild(ri,((e,t)=>{const n=sa(na(s,new ws(e)),t);r=r.updateImmediateChild(e,n)})),ta(s).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return ta(na(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function ma(e,t,n,r){return function(e,t,n,r,s){it(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=Es(t,n);if(Ji(e.visibleWrites,i))return null;{const t=na(e.visibleWrites,i);return ra(t)?s.getChild(n):sa(t,s.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function fa(e,t){return function(e,t){return ea(e.visibleWrites,t)}(e.writeTree,Es(e.treePath,t))}function ga(e,t,n,r,s,i){return function(e,t,n,r,s,i,a){let o;const l=na(e.visibleWrites,t),c=ea(l,_s());if(null!=c)o=c;else{if(null==n)return[];o=sa(l,n)}if(o=o.withIndex(a),o.isEmpty()||o.isLeafNode())return[];{const e=[],t=a.getCompare(),n=i?o.getReverseIteratorFrom(r,a):o.getIteratorFrom(r,a);let l=n.getNext();for(;l&&e.length<s;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,s,i)}function ya(e,t,n){return function(e,t,n,r){const s=Es(t,n),i=ea(e.visibleWrites,s);if(null!=i)return i;if(r.isCompleteForChild(n))return sa(na(e.visibleWrites,s),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function xa(e,t){return va(Es(e.treePath,t),e.writeTree)}function va(e,t){return{treePath:e,writeTree:t}}class ba{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;it("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),it(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const s=r.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(n,vi(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(n,xi(n,r.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(n,yi(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw at("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,vi(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const wa=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class _a{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new zi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ya(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ki(this.viewCache_),s=ga(this.writes_,r,t,1,n,e);return 0===s.length?null:s[0]}}function ka(e,t,n,r,s){const i=new ba;let a,o;if(n.type===Mi.OVERWRITE){const l=n;l.source.fromUser?a=Ca(e,t,l.path,l.snap,r,s,i):(it(l.source.fromServer,"Unknown source."),o=l.source.tagged||t.serverCache.isFiltered()&&!Is(l.path),a=ja(e,t,l.path,l.snap,r,s,o,i))}else if(n.type===Mi.MERGE){const l=n;l.source.fromUser?a=function(e,t,n,r,s,i,a){let o=t;return r.foreach(((r,l)=>{const c=Es(n,r);Sa(t,ks(c))&&(o=Ca(e,o,c,l,s,i,a))})),r.foreach(((r,l)=>{const c=Es(n,r);Sa(t,ks(c))||(o=Ca(e,o,c,l,s,i,a))})),o}(e,t,l.path,l.children,r,s,i):(it(l.source.fromServer,"Unknown source."),o=l.source.tagged||t.serverCache.isFiltered(),a=Ea(e,t,l.path,l.children,r,s,o,i))}else if(n.type===Mi.ACK_USER_WRITE){const o=n;a=o.revert?function(e,t,n,r,s,i){let a;if(null!=fa(r,n))return t;{const o=new _a(r,t,s),l=t.eventCache.getNode();let c;if(Is(n)||".priority"===ks(n)){let n;if(t.serverCache.isFullyInitialized())n=ha(r,Ki(t));else{const e=t.serverCache.getNode();it(e instanceof ui,"serverChildren would be complete if leaf node"),n=pa(r,e)}c=e.filter.updateFullNode(l,n,i)}else{const s=ks(n);let d=ya(r,s,t.serverCache);null==d&&t.serverCache.isCompleteForChild(s)&&(d=l.getImmediateChild(s)),c=null!=d?e.filter.updateChild(l,s,d,js(n),o,i):t.eventCache.getNode().hasChild(s)?e.filter.updateChild(l,s,ui.EMPTY_NODE,js(n),o,i):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(a=ha(r,Ki(t)),a.isLeafNode()&&(c=e.filter.updateFullNode(c,a,i)))}return a=t.serverCache.isFullyInitialized()||null!=fa(r,_s()),Bi(t,c,a,e.filter.filtersNodes())}}(e,t,o.path,r,s,i):function(e,t,n,r,s,i,a){if(null!=fa(s,n))return t;const o=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(Is(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return ja(e,t,n,l.getNode().getChild(n),s,i,o,a);if(Is(n)){let r=new Qi(null);return l.getNode().forEachChild(Hs,((e,t)=>{r=r.set(new ws(e),t)})),Ea(e,t,n,r,s,i,o,a)}return t}{let c=new Qi(null);return r.foreach(((e,t)=>{const r=Es(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))})),Ea(e,t,n,c,s,i,o,a)}}(e,t,o.path,o.affectedTree,r,s,i)}else{if(n.type!==Mi.LISTEN_COMPLETE)throw at("Unknown operation type: "+n.type);a=function(e,t,n,r,s){const i=t.serverCache,a=Hi(t,i.getNode(),i.isFullyInitialized()||Is(n),i.isFiltered());return Na(e,a,n,r,wa,s)}(e,t,n.path,r,i)}const l=i.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=Vi(e);(n.length>0||!e.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(gi(Vi(t)))}}(t,a,l),{viewCache:a,changes:l}}function Na(e,t,n,r,s,i){const a=t.eventCache;if(null!=fa(r,n))return t;{let o,l;if(Is(n))if(it(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=Ki(t),s=pa(r,n instanceof ui?n:ui.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),s,i)}else{const n=ha(r,Ki(t));o=e.filter.updateFullNode(t.eventCache.getNode(),n,i)}else{const c=ks(n);if(".priority"===c){it(1===Ns(n),"Can't have a priority with additional path components");const s=a.getNode();l=t.serverCache.getNode();const i=ma(r,n,s,l);o=null!=i?e.filter.updatePriority(s,i):a.getNode()}else{const d=js(n);let u;if(a.isCompleteForChild(c)){l=t.serverCache.getNode();const e=ma(r,n,a.getNode(),l);u=null!=e?a.getNode().getImmediateChild(c).updateChild(d,e):a.getNode().getImmediateChild(c)}else u=ya(r,c,t.serverCache);o=null!=u?e.filter.updateChild(a.getNode(),c,u,d,s,i):a.getNode()}}return Bi(t,o,a.isFullyInitialized()||Is(n),e.filter.filtersNodes())}}function ja(e,t,n,r,s,i,a,o){const l=t.serverCache;let c;const d=a?e.filter:e.filter.getIndexedFilter();if(Is(n))c=d.updateFullNode(l.getNode(),r,null);else if(d.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=d.updateFullNode(l.getNode(),e,null)}else{const e=ks(n);if(!l.isCompleteForPath(n)&&Ns(n)>1)return t;const s=js(n),i=l.getNode().getImmediateChild(e).updateChild(s,r);c=".priority"===e?d.updatePriority(l.getNode(),i):d.updateChild(l.getNode(),e,i,s,wa,null)}const u=Hi(t,c,l.isFullyInitialized()||Is(n),d.filtersNodes());return Na(e,u,n,s,new _a(s,u,i),o)}function Ca(e,t,n,r,s,i,a){const o=t.eventCache;let l,c;const d=new _a(s,t,i);if(Is(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,a),l=Bi(t,c,!0,e.filter.filtersNodes());else{const s=ks(n);if(".priority"===s)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=Bi(t,c,o.isFullyInitialized(),o.isFiltered());else{const i=js(n),c=o.getNode().getImmediateChild(s);let u;if(Is(i))u=r;else{const e=d.getCompleteChild(s);u=null!=e?".priority"===Cs(i)&&e.getChild(Ts(i)).isEmpty()?e:e.updateChild(i,r):ui.EMPTY_NODE}if(c.equals(u))l=t;else{l=Bi(t,e.filter.updateChild(o.getNode(),s,u,i,d,a),o.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function Sa(e,t){return e.eventCache.isCompleteForChild(t)}function Ta(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function Ea(e,t,n,r,s,i,a,o){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=Is(n)?r:new Qi(null).setTree(n,r);const d=t.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(d.hasChild(n)){const l=Ta(0,t.serverCache.getNode().getImmediateChild(n),r);c=ja(e,c,new ws(n),l,s,i,a,o)}})),l.children.inorderTraversal(((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!d.hasChild(n)&&!l){const l=Ta(0,t.serverCache.getNode().getImmediateChild(n),r);c=ja(e,c,new ws(n),l,s,i,a,o)}})),c}class Ia{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new bi(n.getIndex()),s=(i=n).loadsAllData()?new bi(i.getIndex()):i.hasLimit()?new _i(i):new wi(i);var i;this.processor_=function(e){return{filter:e}}(s);const a=t.serverCache,o=t.eventCache,l=r.updateFullNode(ui.EMPTY_NODE,a.getNode(),null),c=s.updateFullNode(ui.EMPTY_NODE,o.getNode(),null),d=new zi(l,a.isFullyInitialized(),r.filtersNodes()),u=new zi(c,o.isFullyInitialized(),s.filtersNodes());this.viewCache_=Wi(u,d),this.eventGenerator_=new Ui(this.query_)}get query(){return this.query_}}function Pa(e,t){const n=Ki(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Is(t)&&!n.getImmediateChild(ks(t)).isEmpty())?n.getChild(t):null}function Da(e){return 0===e.eventRegistrations_.length}function Ma(e,t,n){const r=[];if(n){it(null==t,"A cancel should cancel all event registrations.");const s=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,s);t&&r.push(t)}))}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const s=e.eventRegistrations_[r];if(s.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(s)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function Ra(e,t,n,r){t.type===Mi.MERGE&&null!==t.source.queryId&&(it(Ki(e.viewCache_),"We should always have a full cache before handling merges"),it(Vi(e.viewCache_),"Missing event cache, even though we have a server cache"));const s=e.viewCache_,i=ka(e.processor_,s,t,n,r);var a,o;return a=e.processor_,o=i.viewCache,it(o.eventCache.getNode().isIndexed(a.filter.getIndex()),"Event snap not indexed"),it(o.serverCache.getNode().isIndexed(a.filter.getIndex()),"Server snap not indexed"),it(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=i.viewCache,Aa(e,i.changes,i.viewCache.eventCache.getNode(),null)}function Aa(e,t,n,r){const s=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const s=[],i=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&i.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),qi(e,s,"child_removed",t,r,n),qi(e,s,"child_added",t,r,n),qi(e,s,"child_moved",i,r,n),qi(e,s,"child_changed",t,r,n),qi(e,s,"value",t,r,n),s}(e.eventGenerator_,t,n,s)}let La,Oa;class Fa{constructor(){this.views=new Map}}function za(e,t,n,r){const s=t.source.queryId;if(null!==s){const i=e.views.get(s);return it(null!=i,"SyncTree gave us an op for an invalid query."),Ra(i,t,n,r)}{let s=[];for(const i of e.views.values())s=s.concat(Ra(i,t,n,r));return s}}function Ua(e,t,n,r,s){const i=t._queryIdentifier,a=e.views.get(i);if(!a){let e=ha(n,s?r:null),i=!1;e?i=!0:r instanceof ui?(e=pa(n,r),i=!1):(e=ui.EMPTY_NODE,i=!1);const a=Wi(new zi(e,i,!1),new zi(r,s,!1));return new Ia(t,a)}return a}function qa(e,t,n,r,s,i){const a=Ua(e,t,r,s,i);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,a),function(e,t){e.eventRegistrations_.push(t)}(a,n),function(e,t){const n=e.viewCache_.eventCache,r=[];n.getNode().isLeafNode()||n.getNode().forEachChild(ri,((e,t)=>{r.push(yi(e,t))}));return n.isFullyInitialized()&&r.push(gi(n.getNode())),Aa(e,r,n.getNode(),t)}(a,n)}function Wa(e,t,n,r){const s=t._queryIdentifier,i=[];let a=[];const o=Ya(e);if("default"===s)for(const[l,c]of e.views.entries())a=a.concat(Ma(c,n,r)),Da(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||i.push(c.query));else{const t=e.views.get(s);t&&(a=a.concat(Ma(t,n,r)),Da(t)&&(e.views.delete(s),t.query._queryParams.loadsAllData()||i.push(t.query)))}return o&&!Ya(e)&&i.push(new(it(La,"Reference.ts has not been loaded"),La)(t._repo,t._path)),{removed:i,events:a}}function Ba(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function Ha(e,t){let n=null;for(const r of e.views.values())n=n||Pa(r,t);return n}function Va(e,t){if(t._queryParams.loadsAllData())return Qa(e);{const n=t._queryIdentifier;return e.views.get(n)}}function Ka(e,t){return null!=Va(e,t)}function Ya(e){return null!=Qa(e)}function Qa(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let $a=1;class Ga{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Qi(null),this.pendingWriteTree_={visibleWrites:$i.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Xa(e,t,n,r,s){return function(e,t,n,r,s){it(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===s&&(s=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:s}),s&&(e.visibleWrites=Gi(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,s),s?so(e,new Oi({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Za(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(oa(e.pendingWriteTree_,t)){let t=new Qi(null);return null!=r.snap?t=t.set(_s(),!0):Hr(r.children,(e=>{t=t.set(new ws(e),!0)})),so(e,new Ai(r.path,t,n))}return[]}function Ja(e,t,n){return so(e,new Oi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function eo(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const i=t._path,a=e.syncPointTree_.get(i);let o=[];if(a&&("default"===t._queryIdentifier||Ka(a,t))){const l=Wa(a,t,n,r);0===a.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(i));const c=l.removed;if(o=l.events,!s){const n=-1!==c.findIndex((e=>e._queryParams.loadsAllData())),s=e.syncPointTree_.findOnPath(i,((e,t)=>Ya(t)));if(n&&!s){const t=e.syncPointTree_.subtree(i);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&Ya(t)){return[Qa(t)]}{let e=[];return t&&(e=Ba(t)),Hr(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const r=n[t],s=r.query,i=oo(e,r);e.listenProvider_.startListening(mo(s),lo(e,s),i.hashFn,i.onComplete)}}}if(!s&&c.length>0&&!r)if(n){const n=null;e.listenProvider_.stopListening(mo(t),n)}else c.forEach((t=>{const n=e.queryToTagMap.get(co(t));e.listenProvider_.stopListening(mo(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=co(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return o}function to(e,t,n,r){const s=uo(e,r);if(null!=s){const r=ho(s),i=r.path,a=r.queryId,o=Ps(i,t);return po(e,i,new Oi(Ri(a),o,n))}return[]}function no(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=t._path;let i=null,a=!1;e.syncPointTree_.foreachOnPath(s,((e,t)=>{const n=Ps(e,s);i=i||Ha(t,n),a=a||Ya(t)}));let o,l=e.syncPointTree_.get(s);if(l?(a=a||Ya(l),i=i||Ha(l,_s())):(l=new Fa,e.syncPointTree_=e.syncPointTree_.set(s,l)),null!=i)o=!0;else{o=!1,i=ui.EMPTY_NODE;e.syncPointTree_.subtree(s).foreachChild(((e,t)=>{const n=Ha(t,_s());n&&(i=i.updateImmediateChild(e,n))}))}const c=Ka(l,t);if(!c&&!t._queryParams.loadsAllData()){const n=co(t);it(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=$a++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let d=qa(l,t,n,aa(e.pendingWriteTree_,s),i,o);if(!c&&!a&&!r){const n=Va(l,t);d=d.concat(function(e,t,n){const r=t._path,s=lo(e,t),i=oo(e,n),a=e.listenProvider_.startListening(mo(t),s,i.hashFn,i.onComplete),o=e.syncPointTree_.subtree(r);if(s)it(!Ya(o.value),"If we're adding a query, it shouldn't be shadowed");else{const t=o.fold(((e,t,n)=>{if(!Is(e)&&t&&Ya(t))return[Qa(t).query];{let e=[];return t&&(e=e.concat(Ba(t).map((e=>e.query)))),Hr(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(mo(r),lo(e,r))}}return a}(e,t,n))}return d}function ro(e,t,n){const r=e.pendingWriteTree_,s=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=Ha(n,Ps(e,t));if(r)return r}));return ua(r,t,s,n,!0)}function so(e,t){return io(t,e.syncPointTree_,null,aa(e.pendingWriteTree_,_s()))}function io(e,t,n,r){if(Is(e.path))return ao(e,t,n,r);{const s=t.get(_s());null==n&&null!=s&&(n=Ha(s,_s()));let i=[];const a=ks(e.path),o=e.operationForChild(a),l=t.children.get(a);if(l&&o){const e=n?n.getImmediateChild(a):null,t=xa(r,a);i=i.concat(io(o,l,e,t))}return s&&(i=i.concat(za(s,e,r,n))),i}}function ao(e,t,n,r){const s=t.get(_s());null==n&&null!=s&&(n=Ha(s,_s()));let i=[];return t.children.inorderTraversal(((t,s)=>{const a=n?n.getImmediateChild(t):null,o=xa(r,t),l=e.operationForChild(t);l&&(i=i.concat(ao(l,s,a,o)))})),s&&(i=i.concat(za(s,e,r,n))),i}function oo(e,t){const n=t.query,r=lo(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||ui.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=uo(e,n);if(r){const n=ho(r),s=n.path,i=n.queryId,a=Ps(s,t);return po(e,s,new Li(Ri(i),a))}return[]}(e,n._path,r):function(e,t){return so(e,new Li({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return eo(e,n,null,r)}}}}function lo(e,t){const n=co(t);return e.queryToTagMap.get(n)}function co(e){return e._path.toString()+"$"+e._queryIdentifier}function uo(e,t){return e.tagToQueryMap.get(t)}function ho(e){const t=e.indexOf("$");return it(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new ws(e.substr(0,t))}}function po(e,t,n){const r=e.syncPointTree_.get(t);it(r,"Missing sync point for query tag that we're tracking");return za(r,n,aa(e.pendingWriteTree_,t),null)}function mo(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(it(Oa,"Reference.ts has not been loaded"),Oa)(e._repo,e._path):e}class fo{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new fo(t)}node(){return this.node_}}class go{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Es(this.path_,e);return new go(this.syncTree_,t)}node(){return ro(this.syncTree_,this.path_)}}const yo=function(e,t,n){return e&&"object"===typeof e?(it(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?xo(e[".sv"],t,n):"object"===typeof e[".sv"]?vo(e[".sv"],t):void it(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},xo=function(e,t,n){if("timestamp"===e)return n.timestamp;it(!1,"Unexpected server value: "+e)},vo=function(e,t,n){e.hasOwnProperty("increment")||it(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&it(!1,"Unexpected increment value: "+r);const s=t.node();if(it(null!==s&&"undefined"!==typeof s,"Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const i=s.getValue();return"number"!==typeof i?r:i+r},bo=function(e,t,n,r){return _o(t,new go(n,e),r)},wo=function(e,t,n){return _o(e,new fo(t),n)};function _o(e,t,n){const r=e.getPriority().val(),s=yo(r,t.getImmediateChild(".priority"),n);let i;if(e.isLeafNode()){const r=e,i=yo(r.getValue(),t,n);return i!==r.getValue()||s!==r.getPriority().val()?new ni(i,pi(s)):e}{const r=e;return i=r,s!==r.getPriority().val()&&(i=i.updatePriority(new ni(s))),r.forEachChild(ri,((e,r)=>{const s=_o(r,t.getImmediateChild(e),n);s!==r&&(i=i.updateImmediateChild(e,s))})),i}}class ko{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function No(e,t){let n=t instanceof ws?t:new ws(t),r=e,s=ks(n);for(;null!==s;){const e=Rt(r.node.children,s)||{children:{},childCount:0};r=new ko(s,r,e),n=js(n),s=ks(n)}return r}function jo(e){return e.node.value}function Co(e,t){e.node.value=t,Po(e)}function So(e){return e.node.childCount>0}function To(e,t){Hr(e.node.children,((n,r)=>{t(new ko(n,e,r))}))}function Eo(e,t,n,r){n&&!r&&t(e),To(e,(e=>{Eo(e,t,!0,r)})),n&&r&&t(e)}function Io(e){return new ws(null===e.parent?e.name:Io(e.parent)+"/"+e.name)}function Po(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===jo(e)&&!So(e)}(n),s=Mt(e.node.children,t);r&&s?(delete e.node.children[t],e.node.childCount--,Po(e)):r||s||(e.node.children[t]=n.node,e.node.childCount++,Po(e))}(e.parent,e.name,e)}const Do=/[\[\].#$\/\u0000-\u001F\u007F]/,Mo=/[\[\].#$\u0000-\u001F\u007F]/,Ro=10485760,Ao=function(e){return"string"===typeof e&&0!==e.length&&!Do.test(e)},Lo=function(e){return"string"===typeof e&&0!==e.length&&!Mo.test(e)},Oo=function(e,t,n){const r=n instanceof ws?new Rs(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+Ls(r));if("function"===typeof t)throw new Error(e+"contains a function "+Ls(r)+" with contents = "+t.toString());if(Lr(t))throw new Error(e+"contains "+t.toString()+" "+Ls(r));if("string"===typeof t&&t.length>Ro/3&&qt(t)>Ro)throw new Error(e+"contains a string greater than "+Ro+" utf8 bytes "+Ls(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,s=!1;if(Hr(t,((t,i)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(s=!0,!Ao(t)))throw new Error(e+" contains an invalid key ("+t+") "+Ls(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=qt(t),As(e)}(r,t),Oo(e,i,r),function(e){const t=e.parts_.pop();e.byteLength_-=qt(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&s)throw new Error(e+' contains ".value" child '+Ls(r)+" in addition to actual children.")}},Fo=function(e,t,n,r){if((!r||void 0!==n)&&!Lo(n))throw new Error(Ut(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},zo=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!Ao(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Lo(e)}(n))throw new Error(Ut(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Uo{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function qo(e,t){let n=null;for(let r=0;r<t.length;r++){const s=t[r],i=s.getPath();null===n||Ds(i,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:i}),n.events.push(s)}n&&e.eventLists_.push(n)}function Wo(e,t,n){qo(e,n),Ho(e,(e=>Ds(e,t)))}function Bo(e,t,n){qo(e,n),Ho(e,(e=>Ms(e,t)||Ms(t,e)))}function Ho(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const s=e.eventLists_[r];if(s){t(s.path)?(Vo(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function Vo(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();Tr&&Pr("event: "+n.toString()),Qr(r)}}}const Ko="repo_interrupt";class Yo{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Uo,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ti(),this.transactionQueueTree_=new ko,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Qo(e,t,n){if(e.stats_=cs(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Ci(e.repoInfo_,((t,n,r,s)=>{Xo(e,t,n,r,s)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>Zo(e,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Pt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new zs(e.repoInfo_,t,((t,n,r,s)=>{Xo(e,t,n,r,s)}),(t=>{Zo(e,t)}),(t=>{!function(e,t){Hr(t,((t,n)=>{Jo(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return ls[n]||(ls[n]=t()),ls[n]}(e.repoInfo_,(()=>new Di(e.stats_,e.server_))),e.infoData_=new Si,e.infoSyncTree_=new Ga({startListening:(t,n,r,s)=>{let i=[];const a=e.infoData_.getNode(t._path);return a.isEmpty()||(i=Ja(e.infoSyncTree_,t._path,a),setTimeout((()=>{s("ok")}),0)),i},stopListening:()=>{}}),Jo(e,"connected",!1),e.serverSyncTree_=new Ga({startListening:(t,n,r,s)=>(e.server_.listen(t,r,n,((n,r)=>{const i=s(n,r);Bo(e.eventQueue_,t._path,i)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function $o(e){const t=e.infoData_.getNode(new ws(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Go(e){return(t=(t={timestamp:$o(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function Xo(e,t,n,r,s){e.dataUpdateCount++;const i=new ws(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let a=[];if(s)if(r){const t=Lt(n,(e=>pi(e)));a=function(e,t,n,r){const s=uo(e,r);if(s){const r=ho(s),i=r.path,a=r.queryId,o=Ps(i,t),l=Qi.fromObject(n);return po(e,i,new Fi(Ri(a),o,l))}return[]}(e.serverSyncTree_,i,t,s)}else{const t=pi(n);a=to(e.serverSyncTree_,i,t,s)}else if(r){const t=Lt(n,(e=>pi(e)));a=function(e,t,n){const r=Qi.fromObject(n);return so(e,new Fi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,i,t)}else{const t=pi(n);a=Ja(e.serverSyncTree_,i,t)}let o=i;a.length>0&&(o=al(e,i)),Bo(e.eventQueue_,o,a)}function Zo(e,t){Jo(e,"connected",t),!1===t&&function(e){rl(e,"onDisconnectEvents");const t=Go(e),n=Ti();Ii(e.onDisconnect_,_s(),((r,s)=>{const i=bo(r,s,e.serverSyncTree_,t);Ei(n,r,i)}));let r=[];Ii(n,_s(),((t,n)=>{r=r.concat(Ja(e.serverSyncTree_,t,n));const s=ul(e,t);al(e,s)})),e.onDisconnect_=Ti(),Bo(e.eventQueue_,_s(),r)}(e)}function Jo(e,t,n){const r=new ws("/.info/"+t),s=pi(n);e.infoData_.updateSnapshot(r,s);const i=Ja(e.infoSyncTree_,r,s);Bo(e.eventQueue_,r,i)}function el(e){return e.nextWriteId_++}function tl(e,t,n){let r;r=".info"===ks(t._path)?eo(e.infoSyncTree_,t,n):eo(e.serverSyncTree_,t,n),Wo(e.eventQueue_,t._path,r)}function nl(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Ko)}function rl(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];Pr(t,...r)}function sl(e,t,n){return ro(e.serverSyncTree_,t,n)||ui.EMPTY_NODE}function il(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||dl(e,t),jo(t)){const n=ll(e,t);it(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),s=sl(e,t,r);let i=s;const a=s.hash();for(let c=0;c<n.length;c++){const e=n[c];it(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=Ps(t,e.path);i=i.updateChild(r,e.currentOutputSnapshotRaw)}const o=i.val(!0),l=t;e.server_.put(l.toString(),o,(r=>{rl(e,"transaction put response",{path:l.toString(),status:r});let s=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,s=s.concat(Za(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();dl(e,No(e.transactionQueueTree_,t)),il(e,e.transactionQueueTree_),Bo(e.eventQueue_,t,s);for(let e=0;e<r.length;e++)Qr(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{Ar("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}al(e,t)}}),a)}(e,Io(t),n)}else So(t)&&To(t,(t=>{il(e,t)}))}function al(e,t){const n=ol(e,t),r=Io(n);return function(e,t,n){if(0===t.length)return;const r=[];let s=[];const i=t.filter((e=>0===e.status)),a=i.map((e=>e.currentWriteId));for(let l=0;l<t.length;l++){const i=t[l],c=Ps(n,i.path);let d,u=!1;if(it(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===i.status)u=!0,d=i.abortReason,s=s.concat(Za(e.serverSyncTree_,i.currentWriteId,!0));else if(0===i.status)if(i.retryCount>=25)u=!0,d="maxretry",s=s.concat(Za(e.serverSyncTree_,i.currentWriteId,!0));else{const n=sl(e,i.path,a);i.currentInputSnapshot=n;const r=t[l].update(n.val());if(void 0!==r){Oo("transaction failed: Data returned ",r,i.path);let t=pi(r);"object"===typeof r&&null!=r&&Mt(r,".priority")||(t=t.updatePriority(n.getPriority()));const o=i.currentWriteId,l=Go(e),c=wo(t,n,l);i.currentOutputSnapshotRaw=t,i.currentOutputSnapshotResolved=c,i.currentWriteId=el(e),a.splice(a.indexOf(o),1),s=s.concat(Xa(e.serverSyncTree_,i.path,c,i.currentWriteId,i.applyLocally)),s=s.concat(Za(e.serverSyncTree_,o,!0))}else u=!0,d="nodata",s=s.concat(Za(e.serverSyncTree_,i.currentWriteId,!0))}Bo(e.eventQueue_,n,s),s=[],u&&(t[l].status=2,o=t[l].unwatcher,setTimeout(o,Math.floor(0)),t[l].onComplete&&("nodata"===d?r.push((()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot))):r.push((()=>t[l].onComplete(new Error(d),!1,null)))))}var o;dl(e,e.transactionQueueTree_);for(let l=0;l<r.length;l++)Qr(r[l]);il(e,e.transactionQueueTree_)}(e,ll(e,n),r),r}function ol(e,t){let n,r=e.transactionQueueTree_;for(n=ks(t);null!==n&&void 0===jo(r);)r=No(r,n),n=ks(t=js(t));return r}function ll(e,t){const n=[];return cl(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function cl(e,t,n){const r=jo(t);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);To(t,(t=>{cl(e,t,n)}))}function dl(e,t){const n=jo(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,Co(t,n.length>0?n:void 0)}To(t,(t=>{dl(e,t)}))}function ul(e,t){const n=Io(ol(e,t)),r=No(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{hl(e,t)})),hl(e,r),Eo(r,(t=>{hl(e,t)})),n}function hl(e,t){const n=jo(t);if(n){const r=[];let s=[],i=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(it(i===t-1,"All SENT items should be at beginning of queue."),i=t,n[t].status=3,n[t].abortReason="set"):(it(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),s=s.concat(Za(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===i?Co(t,void 0):n.length=i+1,Bo(e.eventQueue_,Io(t),s);for(let e=0;e<r.length;e++)Qr(r[e])}}const pl=function(e,t){const n=ml(e),r=n.namespace;"firebase.com"===n.domain&&Rr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Rr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ar("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const s="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new ss(n.host,n.secure,r,s,t,"",r!==n.subdomain),path:new ws(n.pathString)}},ml=function(e){let t="",n="",r="",s="",i="",a=!0,o="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(o=e.substring(0,c-1),e=e.substring(c+2));let d=e.indexOf("/");-1===d&&(d=e.length);let u=e.indexOf("?");-1===u&&(u=e.length),t=e.substring(0,Math.min(d,u)),d<u&&(s=function(e){let t="";const n=e.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let e=n[s];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(r){}t+="/"+e}return t}(e.substring(d,u)));const h=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ar("Invalid query segment '".concat(n,"' in query '").concat(e,"'"))}return t}(e.substring(Math.min(e.length,u)));c=t.indexOf(":"),c>=0?(a="https"===o||"wss"===o,l=parseInt(t.substring(c+1),10)):c=t.length;const p=t.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),i=r}"ns"in h&&(i=h.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:a,scheme:o,pathString:s,namespace:i}},fl="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){let e=0;const t=[]}();class gl{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Pt(this.snapshot.exportVal())}}class yl{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class xl{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return it(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class vl{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return Is(this._path)?null:Cs(this._path)}get ref(){return new bl(this._repo,this._path)}get _queryIdentifier(){const e=ji(this._queryParams),t=Wr(e);return"{}"===t?"default":t}get _queryObject(){return ji(this._queryParams)}isEqual(e){if(!((e=Wt(e))instanceof vl))return!1;const t=this._repo===e._repo,n=Ds(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class bl extends vl{constructor(e,t){super(e,t,new ki,!1)}get parent(){const e=Ts(this._path);return null===e?null:new bl(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class wl{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new ws(e),n=kl(this.ref,e);return new wl(this._node.getChild(t),n,ri)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,((t,n)=>e(new wl(n,kl(this.ref,t),ri))))}hasChild(e){const t=new ws(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function _l(e,t){return(e=Wt(e))._checkNotDeleted("ref"),void 0!==t?kl(e._root,t):e._root}function kl(e,t){var n,r,s,i;return null===ks((e=Wt(e))._path)?(n="child",r="path",i=!1,(s=t)&&(s=s.replace(/^\/*\.info(\/|$)/,"/")),Fo(n,r,s,i)):Fo("child","path",t,!1),new bl(e._repo,Es(e._path,t))}class Nl{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new gl("value",this,new wl(e.snapshotNode,new bl(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new yl(this,e,t):null}matches(e){return e instanceof Nl&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class jl{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new yl(this,e,t):null}createEvent(e,t){it(null!=e.childName,"Child events should have a childName.");const n=kl(new bl(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new gl(e.type,this,new wl(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof jl&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function Cl(e,t,n,r,s){let i;if("object"===typeof r&&(i=void 0,s=r),"function"===typeof r&&(i=r),s&&s.onlyOnce){const t=n,r=(n,r)=>{tl(e._repo,e,o),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const a=new xl(n,i||void 0),o="value"===t?new Nl(a):new jl(t,a);return function(e,t,n){let r;r=".info"===ks(t._path)?no(e.infoSyncTree_,t,n):no(e.serverSyncTree_,t,n),Wo(e.eventQueue_,t._path,r)}(e._repo,e,o),()=>tl(e._repo,e,o)}function Sl(e,t,n,r){return Cl(e,"value",t,n,r)}function Tl(e,t,n){let r=null;const s=n?new xl(n):null;"value"===t?r=new Nl(s):t&&(r=new jl(t,s)),tl(e._repo,e,r)}!function(e){it(!La,"__referenceConstructor has already been defined"),La=e}(bl),function(e){it(!Oa,"__referenceConstructor has already been defined"),Oa=e}(bl);const El={};let Il=!1;function Pl(e,t,n,r,s){let i=r||e.options.databaseURL;void 0===i&&(e.options.projectId||Rr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Pr("Using default host for project ",e.options.projectId),i="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));let a,o,l=pl(i,s),c=l.repoInfo;"undefined"!==typeof process&&(o={NODE_ENV:"production",PUBLIC_URL:"/hamptownControlPanel",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),o?(a=!0,i="http://".concat(o,"?ns=").concat(c.namespace),l=pl(i,s),c=l.repoInfo):a=!l.repoInfo.secure;const d=s&&a?new Zr(Zr.OWNER):new Xr(e.name,e.options,t);zo("Invalid Firebase Database URL",l),Is(l.path)||Rr("Database URL must point to the root of a Firebase Database (not including a child path).");const u=function(e,t,n,r){let s=El[t.name];s||(s={},El[t.name]=s);let i=s[e.toURLString()];i&&Rr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return i=new Yo(e,Il,n,r),s[e.toURLString()]=i,i}(c,e,d,new Gr(e,n));return new Dl(u,e)}class Dl{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Qo(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new bl(this._repo,_s())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=El[t];n&&n[e.key]===e||Rr("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),nl(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Rr("Cannot call "+e+" on a deleted database.")}}function Ml(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yn;const t=$n.get(e);if(!t&&e===Yn&&xt())return rr();if(!t)throw tr.create("no-app",{appName:e});return t}(),t=arguments.length>1?arguments[1]:void 0;const n=er(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=yt("database");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=Wt(e),e._checkNotDeleted("useEmulator");const s="".concat(t,":").concat(n),i=e._repoInternal;if(e._instanceStarted){if(s===e._repoInternal.repoInfo_.host&&Ot(r,i.repoInfo_.emulatorOptions))return;Rr("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Rr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Zr(Zr.OWNER);else if(r.mockUserToken){const t="string"===typeof r.mockUserToken?r.mockUserToken:function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ut(JSON.stringify({alg:"none",type:"JWT"})),ut(JSON.stringify(i)),""].join(".")}(r.mockUserToken,e.app.options.projectId);a=new Zr(t)}bt(t)&&(!async function(e){(await fetch(e,{credentials:"include"})).ok}(t),kt("Database",!0));!function(e,t,n,r){const s=t.lastIndexOf(":"),i=bt(t.substring(0,s));e.repoInfo_=new ss(t,i,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(e.authTokenProvider_=r)}(i,s,r,a)}(n,...e)}return n}zs.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},zs.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){xr("11.9.0"),Jn(new Bt("database",((e,t)=>{let{instanceIdentifier:n}=t;return Pl(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),sr(fr,gr,e),sr(fr,gr,"esm2017")}();sr("firebase","11.9.1","app");const Rl=e=>e&&Array.isArray(e)?e.map((e=>({id:e.id||Date.now()+Math.random(),prepId:e.prepId||0,name:e.name||"Unknown Prep",category:e.category||"muut",estimatedTime:e.estimatedTime||"30 min",isCustom:e.isCustom||!1,hasRecipe:e.hasRecipe||!1,recipe:e.recipe||null,scheduledDate:e.scheduledDate||E(new Date),priority:e.priority||"medium",timeSlot:e.timeSlot||"",completed:"boolean"===typeof e.completed&&e.completed,assignedTo:e.assignedTo||null,notes:e.notes||""}))):[],Al=()=>{const[t,n]=(0,e.useState)(!1),[r,s]=(0,e.useState)(null),[i,a]=(0,e.useState)("connecting"),[l,c]=(0,e.useState)([]),[d,u]=(0,e.useState)([]),[h,p]=(0,e.useState)({}),[m,f]=(0,e.useState)(new Set),[g,y]=(0,e.useState)({}),[x,v]=(0,e.useState)(["Cleaner","Manager","Supervisor"]),[b,w]=(0,e.useState)([]),[_,k]=(0,e.useState)([]),[j,C]=(0,e.useState)({}),[S,T]=(0,e.useState)([]),I=new tt,P=(0,e.useRef)(null),D=(0,e.useRef)(""),M=(0,e.useRef)(!1),R=(0,e.useRef)(!1),A=(0,e.useCallback)((async(e,t)=>{console.log("\ud83d\udd25 QuickSave: ".concat(e));try{const n="https://hamptown-panel-default-rtdb.firebaseio.com";let r=t instanceof Set?Array.from(t):t;if("scheduledPreps"===e){const e=E(new Date),t=r.filter((t=>t.scheduledDate===e)),n=t.filter((e=>!0===e.completed));console.log("\ud83d\udd0d Saving scheduledPreps to Firebase:",{totalCount:r.length,todayCount:t.length,todayCompletedCount:n.length,completionPercentage:t.length>0?Math.round(n.length/t.length*100):0,sampleTodayPreps:t.slice(0,3).map((e=>({id:e.id,name:e.name,completed:e.completed,scheduledDate:e.scheduledDate})))}),r=r.map((e=>o(o({},e),{},{completed:Boolean(e.completed)})))}if(["scheduledPreps","completedTasks","taskAssignments","dailyData"].includes(e)){console.log("\ud83d\udd12 Critical save - waiting for confirmation:",e);const t=await fetch("".concat(n,"/").concat(e,".json"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!t.ok)throw new Error("Critical save failed: ".concat(t.status));s((new Date).toLocaleTimeString()),a("connected"),console.log("\u2705 Critical QuickSave completed:",e),"scheduledPreps"===e&&setTimeout((async()=>{try{const t=await fetch("".concat(n,"/").concat(e,".json")),s=await t.json();if(s){const e=E(new Date),t=s.filter((t=>t.scheduledDate===e)),n=t.filter((e=>!0===e.completed));console.log("\ud83d\udd0d Verified scheduledPreps in Firebase after save:",{totalCount:s.length,todayCount:t.length,todayCompletedCount:n.length,completionPercentage:t.length>0?Math.round(n.length/t.length*100):0});const i=r.filter((t=>t.scheduledDate===e&&!0===t.completed)).length;n.length!==i?console.warn("\u26a0\ufe0f Completion count mismatch after save!",{sent:i,verified:n.length}):console.log("\u2705 Completion status successfully verified")}else console.warn("\u26a0\ufe0f No data returned from verification")}catch(Mr){console.warn("\u26a0\ufe0f Failed to verify save:",Mr)}}),500)}else fetch("".concat(n,"/").concat(e,".json"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((t=>{if(!t.ok)throw new Error("Save failed: ".concat(t.status));s((new Date).toLocaleTimeString()),a("connected"),console.log("\u2705 QuickSave completed:",e)})).catch((e=>{console.warn("\u26a0\ufe0f QuickSave failed (non-blocking):",e),a("error")}));return!0}catch(Mr){return console.error("\u274c QuickSave error:",Mr),a("error"),!1}}),[]),L=((0,e.useCallback)((async()=>{}),[]),(0,e.useCallback)((async()=>{}),[l,d,h,m,g,x,b,_,j,S])),O=(0,e.useCallback)((async()=>{if(R.current||"error"===i)return void console.log("\u23ed\ufe0f Skipping save (already saving or offline)");const e=JSON.stringify({employees:l.length,tasks:d.length,dailyDataKeys:Object.keys(h).length,completedTasksSize:m.size,taskAssignmentsKeys:Object.keys(g).length,customRolesLength:x.length,prepItemsLength:b.length,scheduledPrepsLength:_.length,prepSelectionsKeys:Object.keys(j).length,storeItemsLength:S.length});if(e!==D.current){R.current=!0,console.log("\ud83d\udcbe Saving data (non-blocking)...");try{await I.saveData({employees:l,tasks:d,dailyData:h,completedTasks:m,taskAssignments:g,customRoles:x,prepItems:b,scheduledPreps:_,prepSelections:j,storeItems:S}),s((new Date).toLocaleTimeString()),D.current=e,a("connected")}catch(Mr){console.error("\u274c Save failed:",Mr),a("error")}finally{R.current=!1}}}),[l,d,h,m,g,x,b,_,j,S,i,L]),F=(0,e.useCallback)((()=>{"connected"===i?(P.current&&clearTimeout(P.current),P.current=setTimeout((()=>{O()}),2e3)):console.warn("\u26d4 Not saving to Firebase: offline or error connection")}),[O,i]),z=(0,e.useCallback)((async()=>{if(!t){n(!0),a("connecting");try{console.log("\ud83d\udce1 Loading data (fast mode)...");const e=I.loadData(),t=new Promise(((e,t)=>setTimeout((()=>t(new Error("Load timeout"))),1e4))),n=await Promise.race([e,t]),r=(e=>e&&Array.isArray(e)?e.map((e=>({id:e.id||0,name:e.name||"Unknown",mood:e.mood||3,lastUpdated:e.lastUpdated||"Not updated",role:e.role||"Cleaner",lastMoodDate:e.lastMoodDate||null,points:"number"===typeof e.points?e.points:0}))):[{id:1,name:"Luka",mood:3,lastUpdated:"Not updated",role:"Cleaner",lastMoodDate:null,points:0},{id:2,name:"Safi",mood:3,lastUpdated:"Not updated",role:"Cleaner",lastMoodDate:null,points:0},{id:3,name:"Ehsan",mood:3,lastUpdated:"Not updated",role:"Cleaner",lastMoodDate:null,points:0},{id:4,name:"Oleksii",mood:3,lastUpdated:"Not updated",role:"Manager",lastMoodDate:null,points:0}])(n.employees),i=(e=>e&&Array.isArray(e)?e.map((e=>({id:e.id||0,task:e.task||"Unknown Task",location:e.location||"Unknown Location",priority:e.priority||"medium",estimatedTime:e.estimatedTime||"30 min",points:"number"===typeof e.points?e.points:5}))):[{id:1,task:"Water all plants",location:"Dining Area",priority:"medium",estimatedTime:"10 min",points:5},{id:2,task:"Refill toilet paper",location:"Restroom",priority:"high",estimatedTime:"5 min",points:8},{id:3,task:"Sweep the floor",location:"Kitchen",priority:"high",estimatedTime:"15 min",points:10},{id:4,task:"Wipe refrigerator surfaces",location:"Kitchen",priority:"medium",estimatedTime:"10 min",points:7},{id:5,task:"Light glass wipe",location:"Kitchen (kylm\xe4vitrini)",priority:"low",estimatedTime:"5 min",points:3},{id:6,task:"Refill takeaway & snack boxes",location:"Kitchen",priority:"medium",estimatedTime:"10 min",points:6},{id:7,task:"Stock napkins",location:"Kitchen",priority:"medium",estimatedTime:"5 min",points:4},{id:8,task:"Wipe and disinfect tables",location:"Dining Area",priority:"high",estimatedTime:"20 min",points:12},{id:9,task:"Clean table legs",location:"Dining Area",priority:"low",estimatedTime:"15 min",points:8},{id:10,task:"Vacuum the floor",location:"Dining Area",priority:"high",estimatedTime:"20 min",points:15},{id:11,task:"Clean sink and mirror",location:"Restroom",priority:"high",estimatedTime:"10 min",points:9},{id:12,task:"Clean inside the toilet",location:"Restroom",priority:"high",estimatedTime:"15 min",points:12},{id:13,task:"Replace towel roll",location:"Restroom",priority:"medium",estimatedTime:"5 min",points:4},{id:14,task:"Final disinfection (POS, Foodora, Wolt)",location:"POS / Front",priority:"high",estimatedTime:"10 min",points:10},{id:15,task:"Sweep the floor",location:"Kitchen (Floor)",priority:"high",estimatedTime:"15 min",points:10},{id:16,task:"Mop the floor (every 2 days)",location:"Kitchen (Floor)",priority:"high",estimatedTime:"20 min",points:15},{id:17,task:"Full grill cleaning",location:"Kitchen",priority:"high",estimatedTime:"45 min",points:25},{id:18,task:"Sanitize all surfaces",location:"Kitchen",priority:"high",estimatedTime:"25 min",points:18},{id:19,task:"Wipe dishwasher surface",location:"Apu-Kitchen",priority:"medium",estimatedTime:"10 min",points:6},{id:20,task:"Replace hood filter (every 3 days)",location:"Kitchen",priority:"medium",estimatedTime:"15 min",points:8},{id:21,task:"Cover all food containers",location:"Storage",priority:"high",estimatedTime:"10 min",points:7},{id:22,task:"Organize containers",location:"Apu-Kitchen",priority:"low",estimatedTime:"15 min",points:5}])(n.tasks),o=Rl(n.scheduledPreps||[]);console.log("\ud83d\udd0d Loading scheduledPreps from Firebase:",{count:o.length,todayPreps:o.filter((e=>e.scheduledDate===E(new Date))).length,todayCompleted:o.filter((e=>e.scheduledDate===E(new Date)&&!0===e.completed)).length,sampleData:o.slice(0,5).map((e=>({id:e.id,name:e.name,completed:e.completed,scheduledDate:e.scheduledDate}))),rawDataSample:n.scheduledPreps?n.scheduledPreps.slice(0,3):"No raw data"}),c(r),u(i),p(n.dailyData),f(new Set(n.completedTasks)),y(n.taskAssignments),v(n.customRoles),w(n.prepItems||[]),k(o),C(n.prepSelections||{}),T(n.storeItems||[{id:1,name:"Free Coffee",description:"Get a free coffee from the kitchen",cost:10,category:"food",icon:"\u2615",available:!0},{id:2,name:"Free Lunch",description:"Get a free meal from the restaurant",cost:50,category:"food",icon:"\ud83c\udf7d\ufe0f",available:!0},{id:3,name:"Free Meal for Friend",description:"Bring a friend for a free meal",cost:80,category:"social",icon:"\ud83d\udc65",available:!0},{id:4,name:"30min Break Extension",description:"Extend your break by 30 minutes",cost:25,category:"break",icon:"\u23f0",available:!0},{id:5,name:"Early Leave (1 hour)",description:"Leave work 1 hour early",cost:60,category:"break",icon:"\ud83d\udeaa",available:!0},{id:6,name:"Free Snack",description:"Get any snack from the kitchen",cost:15,category:"food",icon:"\ud83c\udf7f",available:!0},{id:7,name:"Choose Next Week Schedule",description:"Pick your preferred shifts next week",cost:100,category:"reward",icon:"\ud83d\udcc5",available:!0},{id:8,name:"Team Building Activity",description:"Organize a fun team activity",cost:150,category:"social",icon:"\ud83c\udf89",available:!0},{id:9,name:"Free Dessert",description:"Get any dessert from the menu",cost:20,category:"food",icon:"\ud83c\udf70",available:!0},{id:10,name:"Reserved Parking Spot",description:"Get the best parking spot for a week",cost:40,category:"reward",icon:"\ud83d\ude97",available:!0}]);const l=E(new Date),d=o.filter((e=>e.scheduledDate===l)),h=d.filter((e=>!0===e.completed));console.log("\u2705 Set scheduledPreps state:",{count:o.length,todayCount:d.length,todayCompletedCount:h.length,completionPercentage:d.length>0?Math.round(h.length/d.length*100):0}),a("connected"),s((new Date).toLocaleTimeString()),D.current=JSON.stringify({loaded:!0}),M.current=!0,console.log("\u2705 Data loaded successfully")}catch(Mr){console.error("\u274c Load failed:",Mr),a("error"),M.current||(console.log("\u26a0\ufe0f Setting defaults due to load failure - sync disabled until manual load succeeds"),c([{id:1,name:"Luka",mood:3,lastUpdated:"Not updated",role:"Cleaner",lastMoodDate:null,points:0},{id:2,name:"Safi",mood:3,lastUpdated:"Not updated",role:"Cleaner",lastMoodDate:null,points:0},{id:3,name:"Ehsan",mood:3,lastUpdated:"Not updated",role:"Cleaner",lastMoodDate:null,points:0},{id:4,name:"Oleksii",mood:3,lastUpdated:"Not updated",role:"Manager",lastMoodDate:null,points:0}]),u([{id:1,task:"Water all plants",location:"Dining Area",priority:"medium",estimatedTime:"10 min",points:5},{id:2,task:"Refill toilet paper",location:"Restroom",priority:"high",estimatedTime:"5 min",points:8},{id:3,task:"Sweep the floor",location:"Kitchen",priority:"high",estimatedTime:"15 min",points:10},{id:4,task:"Wipe refrigerator surfaces",location:"Kitchen",priority:"medium",estimatedTime:"10 min",points:7},{id:5,task:"Light glass wipe",location:"Kitchen (kylm\xe4vitrini)",priority:"low",estimatedTime:"5 min",points:3},{id:6,task:"Refill takeaway & snack boxes",location:"Kitchen",priority:"medium",estimatedTime:"10 min",points:6},{id:7,task:"Stock napkins",location:"Kitchen",priority:"medium",estimatedTime:"5 min",points:4},{id:8,task:"Wipe and disinfect tables",location:"Dining Area",priority:"high",estimatedTime:"20 min",points:12},{id:9,task:"Clean table legs",location:"Dining Area",priority:"low",estimatedTime:"15 min",points:8},{id:10,task:"Vacuum the floor",location:"Dining Area",priority:"high",estimatedTime:"20 min",points:15},{id:11,task:"Clean sink and mirror",location:"Restroom",priority:"high",estimatedTime:"10 min",points:9},{id:12,task:"Clean inside the toilet",location:"Restroom",priority:"high",estimatedTime:"15 min",points:12},{id:13,task:"Replace towel roll",location:"Restroom",priority:"medium",estimatedTime:"5 min",points:4},{id:14,task:"Final disinfection (POS, Foodora, Wolt)",location:"POS / Front",priority:"high",estimatedTime:"10 min",points:10},{id:15,task:"Sweep the floor",location:"Kitchen (Floor)",priority:"high",estimatedTime:"15 min",points:10},{id:16,task:"Mop the floor (every 2 days)",location:"Kitchen (Floor)",priority:"high",estimatedTime:"20 min",points:15},{id:17,task:"Full grill cleaning",location:"Kitchen",priority:"high",estimatedTime:"45 min",points:25},{id:18,task:"Sanitize all surfaces",location:"Kitchen",priority:"high",estimatedTime:"25 min",points:18},{id:19,task:"Wipe dishwasher surface",location:"Apu-Kitchen",priority:"medium",estimatedTime:"10 min",points:6},{id:20,task:"Replace hood filter (every 3 days)",location:"Kitchen",priority:"medium",estimatedTime:"15 min",points:8},{id:21,task:"Cover all food containers",location:"Storage",priority:"high",estimatedTime:"10 min",points:7},{id:22,task:"Organize containers",location:"Apu-Kitchen",priority:"low",estimatedTime:"15 min",points:5}]),p(et()),w([]),k([]),C({}),T([{id:1,name:"Free Coffee",description:"Get a free coffee from the kitchen",cost:10,category:"food",icon:"\u2615",available:!0},{id:2,name:"Free Lunch",description:"Get a free meal from the restaurant",cost:50,category:"food",icon:"\ud83c\udf7d\ufe0f",available:!0},{id:3,name:"Free Meal for Friend",description:"Bring a friend for a free meal",cost:80,category:"social",icon:"\ud83d\udc65",available:!0},{id:4,name:"30min Break Extension",description:"Extend your break by 30 minutes",cost:25,category:"break",icon:"\u23f0",available:!0},{id:5,name:"Early Leave (1 hour)",description:"Leave work 1 hour early",cost:60,category:"break",icon:"\ud83d\udeaa",available:!0},{id:6,name:"Free Snack",description:"Get any snack from the kitchen",cost:15,category:"food",icon:"\ud83c\udf7f",available:!0},{id:7,name:"Choose Next Week Schedule",description:"Pick your preferred shifts next week",cost:100,category:"reward",icon:"\ud83d\udcc5",available:!0},{id:8,name:"Team Building Activity",description:"Organize a fun team activity",cost:150,category:"social",icon:"\ud83c\udf89",available:!0},{id:9,name:"Free Dessert",description:"Get any dessert from the menu",cost:20,category:"food",icon:"\ud83c\udf70",available:!0},{id:10,name:"Reserved Parking Spot",description:"Get the best parking spot for a week",cost:40,category:"reward",icon:"\ud83d\ude97",available:!0}]))}finally{n(!1)}}}),[t]);(0,e.useEffect)((()=>{if(M.current&&!R.current){const e=setTimeout((()=>{F()}),1e3);return()=>clearTimeout(e)}}),[l,d,h,m,g,x,_]),(0,e.useEffect)((()=>{if(M.current){const e=setTimeout((()=>{F()}),3e3);return()=>clearTimeout(e)}}),[b,j,S]);const U=(0,e.useRef)(null),q=(0,e.useRef)(null);U.current||(U.current=rr(N),q.current=Ml(U.current)),(0,e.useEffect)((()=>{const e=q.current;if(!e)return;const t=_l(e,"employees"),n=e=>{const t=e.val()||[];c(Array.isArray(t)?t:Object.values(t))};Sl(t,n);const r=_l(e,"tasks"),s=e=>{const t=e.val()||[];u(Array.isArray(t)?t:Object.values(t))};Sl(r,s);const i=_l(e,"dailyData"),a=e=>{p(e.val()||{})};Sl(i,a);const o=_l(e,"completedTasks"),l=e=>{f(new Set(e.val()||[]))};Sl(o,l);const d=_l(e,"taskAssignments"),h=e=>{y(e.val()||{})};Sl(d,h);const m=_l(e,"customRoles"),g=e=>{v(Array.isArray(e.val())?e.val():[])};Sl(m,g);const x=_l(e,"prepItems"),b=e=>{const t=e.val()||[];w(Array.isArray(t)?t:Object.values(t))};Sl(x,b);const _=_l(e,"scheduledPreps"),N=e=>{const t=e.val()||[],n=Rl(Array.isArray(t)?t:Object.values(t));k(n)};Sl(_,N);const j=_l(e,"prepSelections"),S=e=>{C(e.val()||{})};Sl(j,S);const E=_l(e,"storeItems"),I=e=>{const t=e.val()||[];T(Array.isArray(t)?t:Object.values(t))};return Sl(E,I),()=>{Tl(t,"value",n),Tl(r,"value",s),Tl(i,"value",a),Tl(o,"value",l),Tl(d,"value",h),Tl(m,"value",g),Tl(x,"value",b),Tl(_,"value",N),Tl(j,"value",S),Tl(E,"value",I)}}),[]);return{isLoading:t,lastSync:r,connectionStatus:i,employees:l,tasks:d,dailyData:h,completedTasks:m,taskAssignments:g,customRoles:x,prepItems:b,scheduledPreps:_,prepSelections:j,storeItems:S,setEmployees:c,setTasks:u,setDailyData:p,setCompletedTasks:f,setTaskAssignments:y,setCustomRoles:v,setPrepItems:w,setScheduledPreps:k,setPrepSelections:C,setStoreItems:T,loadFromFirebase:z,saveToFirebase:F,quickSave:A,applyTaskSyncOperation:e=>{u((t=>ie(t,e)))}}},Ll=()=>{const{isLoading:t,lastSync:n,connectionStatus:r,employees:s,tasks:i,dailyData:a,completedTasks:o,taskAssignments:l,customRoles:c,prepItems:d,scheduledPreps:u,prepSelections:k,storeItems:N,setEmployees:j,setTasks:C,setDailyData:S,setCompletedTasks:T,setTaskAssignments:I,setCustomRoles:M,setPrepItems:R,setScheduledPreps:A,setPrepSelections:L,setStoreItems:O,loadFromFirebase:F,saveToFirebase:U,quickSave:q,applyTaskSyncOperation:W}=Al(),{currentUser:B,isAdmin:H,setIsAdmin:V,switchUser:K,logoutAdmin:Q}=(()=>{const[t,n]=(0,e.useState)({id:1,name:"Luka"}),[r,s]=(0,e.useState)(!1),i=(0,e.useCallback)((e=>{n({id:e.id,name:e.name}),localStorage.setItem("currentUserName",e.name)}),[]),a=(0,e.useCallback)((()=>{s(!1)}),[]);return(0,e.useEffect)((()=>{t.name&&localStorage.setItem("currentUserName",t.name)}),[t.name]),{currentUser:t,isAdmin:r,setCurrentUser:n,setIsAdmin:s,switchUser:i,logoutAdmin:a}})(),[$,G]=(0,e.useState)(3),[X,Z]=(0,e.useState)("mood"),[J,ee]=(0,e.useState)(!1),[te,ne]=(0,e.useState)(!1),[ie,le]=(0,e.useState)(""),[ce,de]=(0,e.useState)(E(new Date)),[ue,he]=(0,e.useState)([{id:1,name:"Free Coffee",description:"Get a free coffee from the kitchen",cost:10,category:"food",icon:"\u2615",available:!0},{id:2,name:"Free Lunch",description:"Get a free meal from the restaurant",cost:50,category:"food",icon:"\ud83c\udf7d\ufe0f",available:!0},{id:3,name:"Free Meal for Friend",description:"Bring a friend for a free meal",cost:80,category:"social",icon:"\ud83d\udc65",available:!0},{id:4,name:"30min Break Extension",description:"Extend your break by 30 minutes",cost:25,category:"break",icon:"\u23f0",available:!0},{id:5,name:"Early Leave (1 hour)",description:"Leave work 1 hour early",cost:60,category:"break",icon:"\ud83d\udeaa",available:!0},{id:6,name:"Free Snack",description:"Get any snack from the kitchen",cost:15,category:"food",icon:"\ud83c\udf7f",available:!0},{id:7,name:"Choose Next Week Schedule",description:"Pick your preferred shifts next week",cost:100,category:"reward",icon:"\ud83d\udcc5",available:!0},{id:8,name:"Team Building Activity",description:"Organize a fun team activity",cost:150,category:"social",icon:"\ud83c\udf89",available:!0},{id:9,name:"Free Dessert",description:"Get any dessert from the menu",cost:20,category:"food",icon:"\ud83c\udf70",available:!0},{id:10,name:"Reserved Parking Spot",description:"Get the best parking spot for a week",cost:40,category:"reward",icon:"\ud83d\ude97",available:!0}]),[pe,me]=(0,e.useState)(!1),[fe,ge]=(0,e.useState)(0),[xe,ve]=(0,e.useState)([]),[we,_e]=(0,e.useState)([]);(0,e.useEffect)((()=>{let e=!0;return(async()=>{e&&0===s.length&&(console.log("\ud83d\ude80 Initializing app..."),await F())})(),()=>{e=!1}}),[]),(0,e.useEffect)((()=>{const e=setInterval((()=>{"connected"!==r||t||U()}),3e5);return()=>clearInterval(e)}),[r,t,U]),(0,e.useEffect)((()=>{const e=()=>{const e=localStorage.getItem("lastDailyResetNotification"),t=localStorage.getItem("lastTaskResetDate"),n=E(new Date);console.log("\ud83d\udd0d Checking notification:",{lastNotificationDate:e,lastResetDate:t,today:n,completedTasksSize:o.size,taskAssignmentsCount:Object.keys(l).length,shouldShow:t===n&&e!==n&&0===o.size&&0===Object.keys(l).length}),t===n&&e!==n&&0===o.size&&0===Object.keys(l).length&&(console.log("\ud83d\udce2 Showing daily reset notification"),me(!0),localStorage.setItem("lastDailyResetNotification",n),setTimeout((()=>{me(!1)}),8e3))};if(!t&&"connected"===r){const t=setTimeout(e,2e3);return()=>clearTimeout(t)}}),[o.size,l,t,r]),(0,e.useEffect)((()=>{const e=s.find((e=>e.id===B.id));e&&G(e.mood)}),[B.id,s]),(0,e.useEffect)((()=>{N&&N.length>0&&he(N)}),[N]),(0,e.useEffect)((()=>{const e=xe.length-(t=xe,re.resolveConflicts(t)).length;var t;ge(e)}),[xe]),(0,e.useEffect)((()=>{const e=we.length-(t=we,ae.resolveConflicts(t)).length;var t;ge((t=>t+e))}),[we]);(0,e.useCallback)((e=>{ve((t=>[...t,e])),W(e)}),[W]),(0,e.useCallback)((e=>{_e((t=>[...t,e])),oe(s,e)}),[s]);(0,e.useEffect)((()=>{const e=()=>{se.processQueue((async e=>{}))};return window.addEventListener("online",e),()=>{window.removeEventListener("online",e)}}),[]);const ke=(0,e.useCallback)((()=>{"connected"===r&&U()}),[r,U]),Ne=(0,e.useCallback)((e=>{j(e),ke()}),[j,ke]),je=(0,e.useCallback)((e=>{C(e),ke()}),[C,ke]),Ce=(0,e.useCallback)((e=>{S(e),ke()}),[S,ke]),Se=(0,e.useCallback)((e=>{T(e),ke()}),[T,ke]),Te=(0,e.useCallback)((e=>{I(e),ke()}),[I,ke]),Ee=(0,e.useCallback)((e=>{M(e),ke()}),[M,ke]),Ie=(0,e.useCallback)((e=>{const t="function"===typeof e?e(ue):e;he(t),O((()=>t)),ke()}),[ue,O,ke]),Pe=(0,e.useCallback)((()=>{if(!H)return;console.log("\ud83e\uddea MANUAL RESET: Triggered by admin"),console.log("\ud83d\udccb Before manual reset:",{completedTasksCount:o.size,taskAssignmentsCount:Object.keys(l).length,taskAssignments:l});const e=E(new Date);localStorage.removeItem("resetInProgress"),localStorage.removeItem("lastDailyResetNotification"),localStorage.removeItem("resetCheckedToday"),T(new Set),I((()=>({}))),localStorage.setItem("lastTaskResetDate",e),console.log("\u2705 MANUAL RESET: Cleared both completed tasks AND task assignments"),console.log("\ud83d\udccb After manual reset: { completedTasks: Set(0), taskAssignments: {} }"),me(!0),setTimeout((()=>{me(!1)}),8e3),setTimeout((()=>{Promise.all([q("completedTasks",[]),q("taskAssignments",{})]).then((()=>{console.log("\u2705 MANUAL RESET: Both completedTasks=[] and taskAssignments={} saved to Firebase")})).catch((e=>{console.error("\u274c MANUAL RESET: Failed to save to Firebase:",e)}))}),500)}),[H,T,I,q,o,l]),De=(0,e.useCallback)((()=>{((e,t,n,r)=>{"6969"===e?(t(!0),n("admin"),r("")):alert("Invalid password!")})(ie,V,Z,le),ne(!1)}),[ie,V,Z,le]),Me=s.find((e=>e.id===B.id));return(0,P.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[(0,P.jsxs)("div",{className:"bg-white shadow-sm border-b",children:[(0,P.jsxs)("div",{className:"px-4 py-3 flex justify-between items-center",children:[(0,P.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,P.jsxs)("div",{children:[(0,P.jsx)("h1",{className:"text-xl font-bold text-gray-800",children:"WorkVibe"}),(0,P.jsxs)("button",{onClick:()=>ee(!J),className:"flex items-center text-sm text-gray-600 hover:text-gray-800 mt-1",children:["Hello, ",B.name,"!",(0,P.jsxs)("span",{className:"ml-2 bg-purple-100 text-purple-700 px-2 py-0.5 rounded-full text-xs font-medium",children:[(null===Me||void 0===Me?void 0:Me.points)||0," pts"]}),(0,P.jsx)(h,{className:"w-4 h-4 ml-1"})]})]}),H&&(0,P.jsx)("div",{className:"px-2 py-1 bg-red-100 text-red-700 text-xs rounded-full",children:"Admin Mode"})]}),(0,P.jsxs)("div",{className:"flex items-center space-x-2",children:[H&&(0,P.jsx)("button",{onClick:()=>{Q(),Z("mood")},className:"p-2 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg",title:"Logout Admin",children:(0,P.jsx)(p,{className:"w-5 h-5"})}),(0,P.jsx)("button",{onClick:()=>ne(!0),className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg",title:"Admin Login",children:(0,P.jsx)(m,{className:"w-5 h-5"})})]})]}),J&&(0,P.jsxs)("div",{className:"absolute top-16 left-4 bg-white border rounded-lg shadow-lg z-40 w-64",children:[(0,P.jsx)("div",{className:"p-3 border-b bg-gray-50",children:(0,P.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Switch Employee"})}),(0,P.jsx)("div",{className:"max-h-64 overflow-y-auto",children:s.map((e=>(0,P.jsxs)("button",{onClick:()=>(K(e),ee(!1),void Z("mood")),className:"w-full px-4 py-3 text-left hover:bg-gray-50 flex items-center justify-between ".concat(B.id===e.id?"bg-blue-50 border-r-2 border-blue-500":""),children:[(0,P.jsxs)("div",{className:"flex items-center",children:[(0,P.jsx)("div",{className:"w-3 h-3 rounded-full mr-3 ".concat(1===e.mood?"bg-red-500":2===e.mood?"bg-orange-500":3===e.mood?"bg-yellow-500":4===e.mood?"bg-green-500":"bg-blue-500")}),(0,P.jsxs)("div",{children:[(0,P.jsx)("div",{className:"font-medium text-gray-800",children:e.name}),(0,P.jsxs)("div",{className:"text-xs text-gray-500",children:[e.role," \u2022 ",e.points," pts"]})]})]}),B.id===e.id&&(0,P.jsx)(f,{className:"w-4 h-4 text-blue-500"})]},e.id)))})]})]}),(0,P.jsx)("div",{className:"bg-white border-b",children:(0,P.jsxs)("div",{className:"flex overflow-x-auto",children:[(0,P.jsxs)("button",{onClick:()=>Z("mood"),className:"flex-shrink-0 py-3 px-4 text-center ".concat("mood"===X?"border-b-2 border-blue-500 text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-800"),children:[(0,P.jsx)(g,{className:"w-5 h-5 mx-auto mb-1"}),(0,P.jsx)("span",{className:"text-sm",children:"Mood Tracker"})]}),(0,P.jsxs)("button",{onClick:()=>Z("tasks"),className:"flex-shrink-0 py-3 px-4 text-center ".concat("tasks"===X?"border-b-2 border-blue-500 text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-800"),children:[(0,P.jsx)(y,{className:"w-5 h-5 mx-auto mb-1"}),(0,P.jsx)("span",{className:"text-sm",children:"Cleaning Tasks"})]}),(0,P.jsxs)("button",{onClick:()=>Z("prep"),className:"flex-shrink-0 py-3 px-4 text-center ".concat("prep"===X?"border-b-2 border-green-500 text-green-600 bg-green-50":"text-gray-600 hover:text-gray-800"),children:[(0,P.jsx)(x,{className:"w-5 h-5 mx-auto mb-1"}),(0,P.jsx)("span",{className:"text-sm",children:"Prep List"})]}),(0,P.jsxs)("button",{onClick:()=>Z("store"),className:"flex-shrink-0 py-3 px-4 text-center ".concat("store"===X?"border-b-2 border-purple-500 text-purple-600 bg-purple-50":"text-gray-600 hover:text-gray-800"),children:[(0,P.jsx)(v,{className:"w-5 h-5 mx-auto mb-1"}),(0,P.jsx)("span",{className:"text-sm",children:"Store"})]}),H&&(0,P.jsxs)("button",{onClick:()=>Z("admin"),className:"flex-shrink-0 py-3 px-4 text-center ".concat("admin"===X?"border-b-2 border-red-500 text-red-600 bg-red-50":"text-gray-600 hover:text-gray-800"),children:[(0,P.jsx)(m,{className:"w-5 h-5 mx-auto mb-1"}),(0,P.jsx)("span",{className:"text-sm",children:"Admin Panel"})]}),H&&(0,P.jsxs)("button",{onClick:()=>Z("reports"),className:"flex-shrink-0 py-3 px-4 text-center ".concat("reports"===X?"border-b-2 border-orange-500 text-orange-600 bg-orange-50":"text-gray-600 hover:text-gray-800"),children:[(0,P.jsx)(b,{className:"w-5 h-5 mx-auto mb-1"}),(0,P.jsx)("span",{className:"text-sm",children:"Daily Reports"})]})]})}),(0,P.jsxs)("div",{className:"p-4 space-y-6",children:[pe&&(0,P.jsx)("div",{className:"fixed top-20 left-1/2 transform -translate-x-1/2 z-50 max-w-md w-full mx-4",children:(0,P.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 shadow-lg backdrop-blur-sm",children:(0,P.jsxs)("div",{className:"flex items-start",children:[(0,P.jsx)("div",{className:"flex-shrink-0",children:(0,P.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,P.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,P.jsxs)("div",{className:"ml-3 flex-1",children:[(0,P.jsx)("h3",{className:"text-sm font-medium text-blue-800",children:"\ud83c\udf05 New Day, Fresh Start!"}),(0,P.jsx)("p",{className:"mt-1 text-sm text-blue-600",children:"All cleaning tasks and assignments have been reset for today. Time to start fresh and earn those points!"})]})]})})}),H&&(0,P.jsx)("div",{className:"fixed bottom-20 right-4 z-50",children:(0,P.jsx)("button",{onClick:Pe,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-full shadow-lg transition-colors text-sm font-medium",title:"Test Daily Reset - Clears both tasks AND assignments (Admin Only)",children:"\ud83e\uddea Test Reset"})}),(0,P.jsx)(Je,{isLoading:t,lastSync:n,connectionStatus:r,loadFromFirebase:F,conflictCount:fe}),"mood"===X&&(0,P.jsx)(D,{currentUser:B,employees:s,userMood:$,setUserMood:G,setEmployees:Ne,setDailyData:Ce}),"tasks"===X&&(0,P.jsx)(z,{currentUser:B,tasks:i,employees:s,completedTasks:o,taskAssignments:l,dailyData:a,setCompletedTasks:Se,setTaskAssignments:Te,setDailyData:Ce,setEmployees:Ne}),"prep"===X&&(0,P.jsx)(Be,{currentUser:B,connectionStatus:r,prepItems:d,scheduledPreps:u,prepSelections:k,setPrepItems:R,setScheduledPreps:A,setPrepSelections:L,quickSave:q}),"store"===X&&(0,P.jsx)(Y,{currentUser:B,employees:s,storeItems:ue,dailyData:a,setEmployees:Ne,setDailyData:Ce,saveToFirebase:U}),"admin"===X&&H&&(0,P.jsx)(ye,{employees:s,tasks:i,customRoles:c,storeItems:ue,prepItems:d,setEmployees:Ne,setTasks:je,setCustomRoles:Ee,setStoreItems:Ie,setPrepItems:R}),"reports"===X&&H&&(0,P.jsx)(be,{selectedDate:ce,setSelectedDate:de,dailyData:a,employees:s,connectionStatus:r})]}),te&&(0,P.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,P.jsxs)("div",{className:"bg-white rounded-xl p-6 w-80 mx-4",children:[(0,P.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,P.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,P.jsx)(w,{className:"w-5 h-5 mr-2"}),"Admin Access"]}),(0,P.jsx)("button",{onClick:()=>{ne(!1),le("")},className:"text-gray-500 hover:text-gray-700",children:(0,P.jsx)(_,{className:"w-5 h-5"})})]}),(0,P.jsxs)("div",{className:"space-y-4",children:[(0,P.jsx)("input",{type:"password",placeholder:"Enter admin password",value:ie,onChange:e=>le(e.target.value),onKeyPress:e=>"Enter"===e.key&&De(),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",autoFocus:!0}),(0,P.jsx)("button",{onClick:De,className:"w-full bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600 transition-colors",children:"Login"})]})]})}),(J||te)&&(0,P.jsx)("div",{className:"fixed inset-0 z-30",onClick:()=>{ee(!1),te||ne(!1)}})]})},Ol=u("Cable",[["path",{d:"M4 9a2 2 0 0 1-2-2V5h6v2a2 2 0 0 1-2 2Z",key:"1s6oa5"}],["path",{d:"M3 5V3",key:"1k5hjh"}],["path",{d:"M7 5V3",key:"1t1388"}],["path",{d:"M19 15V6.5a3.5 3.5 0 0 0-7 0v11a3.5 3.5 0 0 1-7 0V9",key:"1ytv72"}],["path",{d:"M17 21v-2",key:"ds4u3f"}],["path",{d:"M21 21v-2",key:"eo0ou"}],["path",{d:"M22 19h-6v-2a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2Z",key:"sdz6o8"}]]),Fl=u("Router",[["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",key:"w68u3i"}],["path",{d:"M6.01 18H6",key:"19vcac"}],["path",{d:"M10.01 18H10",key:"uamcmx"}],["path",{d:"M15 10v4",key:"qjz1xs"}],["path",{d:"M17.84 7.17a4 4 0 0 0-5.66 0",key:"1rif40"}],["path",{d:"M20.66 4.34a8 8 0 0 0-11.31 0",key:"6a5xfq"}]]),zl=t=>{let{children:n}=t;const[r,s]=(0,e.useState)(navigator.onLine),[i,a]=(0,e.useState)(!1),[o,l]=(0,e.useState)(0);(0,e.useEffect)((()=>{const e=()=>{console.log("\ud83c\udf10 Connection restored"),s(!0),l(0)},t=()=>{console.log("\ud83d\udcf4 Connection lost"),s(!1)},n=async()=>{try{const e=["https://www.google.com/favicon.ico","https://httpbin.org/get","https://jsonplaceholder.typicode.com/posts/1"].map((e=>fetch(e,{method:"HEAD",cache:"no-cache",mode:"no-cors"}).then((()=>!0)).catch((()=>!1)))),t=(await Promise.all(e)).some((e=>e));t!==r&&s(t)}catch(Mr){console.warn("Connectivity test failed:",Mr),s(!1)}};n(),window.addEventListener("online",e),window.addEventListener("offline",t);const i=setInterval((()=>{r||n()}),5e3);return()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t),clearInterval(i)}}),[r]);return r?(0,P.jsx)(P.Fragment,{children:n}):(0,P.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 flex items-center justify-center p-4",children:[(0,P.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,P.jsx)("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-blue-500/10 rounded-full blur-3xl animate-pulse"}),(0,P.jsx)("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-purple-500/10 rounded-full blur-3xl animate-pulse delay-1000"}),(0,P.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-indigo-500/5 rounded-full blur-3xl animate-pulse delay-500"})]}),(0,P.jsxs)("div",{className:"relative z-10 max-w-lg w-full text-center",children:[(0,P.jsxs)("div",{className:"mb-8 relative",children:[(0,P.jsx)("div",{className:"inline-flex items-center justify-center w-32 h-32 bg-slate-800/50 backdrop-blur-sm rounded-full border border-slate-700/50 shadow-2xl",children:(0,P.jsx)($e,{className:"w-16 h-16 text-red-400 animate-pulse"})}),(0,P.jsx)("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-red-500 rounded-full flex items-center justify-center animate-bounce",children:(0,P.jsx)("span",{className:"text-white text-xs font-bold",children:"!"})})]}),(0,P.jsxs)("div",{className:"mb-6",children:[(0,P.jsx)("div",{className:"text-6xl mb-4 animate-bounce",children:"\ud83d\ude1e"}),(0,P.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"No Internet Connection"}),(0,P.jsx)("p",{className:"text-slate-300 text-lg",children:"Oops! Looks like you're not connected to the internet"})]}),(0,P.jsxs)("div",{className:"bg-slate-800/30 backdrop-blur-sm rounded-2xl p-6 mb-8 border border-slate-700/30",children:[(0,P.jsxs)("h3",{className:"text-white font-semibold mb-4 flex items-center justify-center",children:[(0,P.jsx)(Ol,{className:"w-5 h-5 mr-2 text-blue-400"}),"Please check your connection:"]}),(0,P.jsxs)("div",{className:"space-y-3 text-left",children:[(0,P.jsxs)("div",{className:"flex items-center text-slate-300",children:[(0,P.jsx)(Fl,{className:"w-4 h-4 mr-3 text-orange-400"}),(0,P.jsx)("span",{children:"Make sure your router is powered on"})]}),(0,P.jsxs)("div",{className:"flex items-center text-slate-300",children:[(0,P.jsx)(Ol,{className:"w-4 h-4 mr-3 text-green-400"}),(0,P.jsx)("span",{children:"Check ethernet cable connections"})]}),(0,P.jsxs)("div",{className:"flex items-center text-slate-300",children:[(0,P.jsx)(Qe,{className:"w-4 h-4 mr-3 text-blue-400"}),(0,P.jsx)("span",{children:"Verify your internet service is active"})]}),(0,P.jsxs)("div",{className:"flex items-center text-slate-300",children:[(0,P.jsx)(Ge,{className:"w-4 h-4 mr-3 text-purple-400"}),(0,P.jsx)("span",{children:"Try connecting to WiFi if available"})]})]})]}),(0,P.jsxs)("div",{className:"space-y-4",children:[(0,P.jsx)("button",{onClick:async()=>{a(!0),l((e=>e+1));try{if(!(await fetch("https://hamptown-panel-default-rtdb.firebaseio.com/.json",{method:"HEAD",cache:"no-cache"})).ok)throw new Error("Firebase unreachable");s(!0),l(0)}catch(Mr){console.warn("Retry failed:",Mr)}finally{a(!1)}},disabled:i,className:"\n              w-full py-4 px-6 rounded-xl font-semibold text-white\n              transition-all duration-300 transform hover:scale-105\n              ".concat(i?"bg-slate-600 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 shadow-lg hover:shadow-xl","\n            "),children:(0,P.jsx)("div",{className:"flex items-center justify-center",children:i?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(Ye,{className:"w-5 h-5 mr-2 animate-spin"}),"Checking Connection..."]}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(Ye,{className:"w-5 h-5 mr-2"}),"Try Again"]})})}),o>0&&(0,P.jsxs)("p",{className:"text-slate-400 text-sm",children:["Retry attempts: ",o," \u2022 Auto-checking every 5 seconds..."]})]}),(0,P.jsxs)("div",{className:"mt-8 text-slate-400 text-sm",children:[(0,P.jsx)("p",{children:"\ud83c\udf1f Don't worry, we'll keep trying to reconnect!"}),(0,P.jsx)("p",{className:"mt-1",children:"Your work data is safe and waiting for you \ud83d\udcbe"})]}),(0,P.jsxs)("div",{className:"mt-6 flex justify-center space-x-4",children:[(0,P.jsxs)("div",{className:"flex items-center text-xs text-slate-500",children:[(0,P.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full mr-2 animate-pulse"}),"Network: Disconnected"]}),(0,P.jsxs)("div",{className:"flex items-center text-xs text-slate-500",children:[(0,P.jsx)("div",{className:"w-2 h-2 bg-orange-500 rounded-full mr-2 animate-pulse"}),"Firebase: Unreachable"]})]})]}),(0,P.jsx)("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[...Array(12)].map(((e,t)=>(0,P.jsx)("div",{className:"absolute w-1 h-1 bg-white/20 rounded-full animate-pulse",style:{left:"".concat(100*Math.random(),"%"),top:"".concat(100*Math.random(),"%"),animationDelay:"".concat(3*Math.random(),"s")}},t)))})]})};const Ul=function(){return(0,P.jsx)("div",{className:"App",children:(0,P.jsx)(zl,{children:(0,P.jsx)(Ll,{})})})};let ql;function Wl(){const e=document.getElementById("pwa-install-btn");e&&(e.style.display="none")}t.createRoot(document.getElementById("root")).render((0,P.jsx)(e.StrictMode,{children:(0,P.jsx)(Ul,{})})),"serviceWorker"in navigator&&(window.addEventListener("load",(()=>{navigator.serviceWorker.register("/sw.js").then((e=>{console.log("\u2705 PWA Service Worker registered successfully:",e.scope),e.addEventListener("updatefound",(()=>{const t=e.installing;t&&t.addEventListener("statechange",(()=>{"installed"===t.state&&navigator.serviceWorker.controller&&(console.log("\ud83d\udd04 New version of WorkVibe available!"),window.confirm("New version of WorkVibe is available! Would you like to update?")&&(t.postMessage({type:"SKIP_WAITING"}),window.location.reload()))}))}))})).catch((e=>{console.warn("\u26a0\ufe0f PWA Service Worker not available (development mode or missing sw.js):",e.message)})),navigator.serviceWorker.addEventListener("message",(e=>{e.data&&"BACKGROUND_SYNC"===e.data.type&&console.log("\ud83d\udd04 Background sync completed")}))})),navigator.serviceWorker.addEventListener("controllerchange",(()=>{console.log("\ud83d\udd04 Service Worker controller changed"),window.location.reload()}))),window.addEventListener("beforeinstallprompt",(e=>{console.log("\ud83d\udcf1 PWA install prompt triggered"),e.preventDefault(),ql=e,function(){const e=document.getElementById("pwa-install-btn");e&&(e.style.display="block",e.onclick=async()=>{if(ql){ql.prompt();const{outcome:e}=await ql.userChoice;console.log("PWA install prompt: ".concat(e)),ql=null,Wl()}})}()})),window.addEventListener("appinstalled",(()=>{console.log("\ud83c\udf89 WorkVibe PWA was installed successfully!"),ql=null,Wl(),window.gtag&&window.gtag("event","pwa_install",{event_category:"engagement",event_label:"WorkVibe PWA Install"})})),window.addEventListener("online",(()=>{console.log("\ud83c\udf10 Back online!")})),window.addEventListener("offline",(()=>{console.log("\ud83d\udcf5 Gone offline")})),document.addEventListener("touchstart",(e=>{e.touches.length>1&&e.preventDefault()}));let Bl=0;function Hl(){const e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))}document.addEventListener("touchend",(e=>{const t=(new Date).getTime();t-Bl<=300&&e.preventDefault(),Bl=t}),!1),Hl(),window.addEventListener("resize",Hl),window.addEventListener("orientationchange",(()=>{setTimeout(Hl,100)}))})()})();
//# sourceMappingURL=main.3f8b8ff8.js.map